import{r as je,w as oe,d as tm,u as em,c as nu,o as nm,a as an,b as rn,n as im,e as Mt,f as rs,g as Za,h as xe,i as am,j as Os}from"./index-7d92444c.js";var rm="5.16.0";function Ue(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function $l(t){return t.length===1&&(t=sm(t)),{left:function(e,n,i,a){for(i==null&&(i=0),a==null&&(a=e.length);i<a;){var r=i+a>>>1;t(e[r],n)<0?i=r+1:a=r}return i},right:function(e,n,i,a){for(i==null&&(i=0),a==null&&(a=e.length);i<a;){var r=i+a>>>1;t(e[r],n)>0?a=r:i=r+1}return i}}}function sm(t){return function(e,n){return Ue(t(e),n)}}var wf=$l(Ue),$e=wf.right,om=wf.left;function lm(t,e){e==null&&(e=Mf);for(var n=0,i=t.length-1,a=t[0],r=new Array(i<0?0:i);n<i;)r[n]=e(a,a=t[++n]);return r}function Mf(t,e){return[t,e]}function cm(t,e,n){var i=t.length,a=e.length,r=new Array(i*a),s,o,l,c;for(n==null&&(n=Mf),s=l=0;s<i;++s)for(c=t[s],o=0;o<a;++o,++l)r[l]=n(c,e[o]);return r}function um(t,e){return e<t?-1:e>t?1:e>=t?0:NaN}function Ne(t){return t===null?NaN:+t}function kf(t,e){var n=t.length,i=0,a=-1,r=0,s,o,l=0;if(e==null)for(;++a<n;)isNaN(s=Ne(t[a]))||(o=s-r,r+=o/++i,l+=o*(s-r));else for(;++a<n;)isNaN(s=Ne(e(t[a],a,t)))||(o=s-r,r+=o/++i,l+=o*(s-r));if(i>1)return l/(i-1)}function Sf(t,e){var n=kf(t,e);return n&&Math.sqrt(n)}function Nl(t,e){var n=t.length,i=-1,a,r,s;if(e==null){for(;++i<n;)if((a=t[i])!=null&&a>=a)for(r=s=a;++i<n;)(a=t[i])!=null&&(r>a&&(r=a),s<a&&(s=a))}else for(;++i<n;)if((a=e(t[i],i,t))!=null&&a>=a)for(r=s=a;++i<n;)(a=e(t[i],i,t))!=null&&(r>a&&(r=a),s<a&&(s=a));return[r,s]}var Af=Array.prototype,hm=Af.slice,fm=Af.map;function va(t){return function(){return t}}function dm(t){return t}function Gt(t,e,n){t=+t,e=+e,n=(a=arguments.length)<2?(e=t,t=0,1):a<3?1:+n;for(var i=-1,a=Math.max(0,Math.ceil((e-t)/n))|0,r=new Array(a);++i<a;)r[i]=t+i*n;return r}var No=Math.sqrt(50),Yo=Math.sqrt(10),zo=Math.sqrt(2);function Yl(t,e,n){var i,a=-1,r,s,o;if(e=+e,t=+t,n=+n,t===e&&n>0)return[t];if((i=e<t)&&(r=t,t=e,e=r),(o=$i(t,e,n))===0||!isFinite(o))return[];if(o>0)for(t=Math.ceil(t/o),e=Math.floor(e/o),s=new Array(r=Math.ceil(e-t+1));++a<r;)s[a]=(t+a)*o;else for(t=Math.floor(t*o),e=Math.ceil(e*o),s=new Array(r=Math.ceil(t-e+1));++a<r;)s[a]=(t-a)/o;return i&&s.reverse(),s}function $i(t,e,n){var i=(e-t)/Math.max(0,n),a=Math.floor(Math.log(i)/Math.LN10),r=i/Math.pow(10,a);return a>=0?(r>=No?10:r>=Yo?5:r>=zo?2:1)*Math.pow(10,a):-Math.pow(10,-a)/(r>=No?10:r>=Yo?5:r>=zo?2:1)}function sn(t,e,n){var i=Math.abs(e-t)/Math.max(0,n),a=Math.pow(10,Math.floor(Math.log(i)/Math.LN10)),r=i/a;return r>=No?a*=10:r>=Yo?a*=5:r>=zo&&(a*=2),e<t?-a:a}function zl(t){return Math.ceil(Math.log(t.length)/Math.LN2)+1}function pm(){var t=dm,e=Nl,n=zl;function i(a){var r,s=a.length,o,l=new Array(s);for(r=0;r<s;++r)l[r]=t(a[r],r,a);var c=e(l),u=c[0],f=c[1],h=n(l,u,f);Array.isArray(h)||(h=sn(u,f,h),h=Gt(Math.ceil(u/h)*h,f,h));for(var d=h.length;h[0]<=u;)h.shift(),--d;for(;h[d-1]>f;)h.pop(),--d;var g=new Array(d+1),p;for(r=0;r<=d;++r)p=g[r]=[],p.x0=r>0?h[r-1]:u,p.x1=r<d?h[r]:f;for(r=0;r<s;++r)o=l[r],u<=o&&o<=f&&g[$e(h,o,0,d)].push(a[r]);return g}return i.value=function(a){return arguments.length?(t=typeof a=="function"?a:va(a),i):t},i.domain=function(a){return arguments.length?(e=typeof a=="function"?a:va([a[0],a[1]]),i):e},i.thresholds=function(a){return arguments.length?(n=typeof a=="function"?a:Array.isArray(a)?va(hm.call(a)):va(a),i):n},i}function Gi(t,e,n){if(n==null&&(n=Ne),!!(i=t.length)){if((e=+e)<=0||i<2)return+n(t[0],0,t);if(e>=1)return+n(t[i-1],i-1,t);var i,a=(i-1)*e,r=Math.floor(a),s=+n(t[r],r,t),o=+n(t[r+1],r+1,t);return s+(o-s)*(a-r)}}function gm(t,e,n){return t=fm.call(t,Ne).sort(Ue),Math.ceil((n-e)/(2*(Gi(t,.75)-Gi(t,.25))*Math.pow(t.length,-1/3)))}function mm(t,e,n){return Math.ceil((n-e)/(3.5*Sf(t)*Math.pow(t.length,-1/3)))}function Df(t,e){var n=t.length,i=-1,a,r;if(e==null){for(;++i<n;)if((a=t[i])!=null&&a>=a)for(r=a;++i<n;)(a=t[i])!=null&&a>r&&(r=a)}else for(;++i<n;)if((a=e(t[i],i,t))!=null&&a>=a)for(r=a;++i<n;)(a=e(t[i],i,t))!=null&&a>r&&(r=a);return r}function bm(t,e){var n=t.length,i=n,a=-1,r,s=0;if(e==null)for(;++a<n;)isNaN(r=Ne(t[a]))?--i:s+=r;else for(;++a<n;)isNaN(r=Ne(e(t[a],a,t)))?--i:s+=r;if(i)return s/i}function ym(t,e){var n=t.length,i=-1,a,r=[];if(e==null)for(;++i<n;)isNaN(a=Ne(t[i]))||r.push(a);else for(;++i<n;)isNaN(a=Ne(e(t[i],i,t)))||r.push(a);return Gi(r.sort(Ue),.5)}function Xl(t){for(var e=t.length,n,i=-1,a=0,r,s;++i<e;)a+=t[i].length;for(r=new Array(a);--e>=0;)for(s=t[e],n=s.length;--n>=0;)r[--a]=s[n];return r}function Lf(t,e){var n=t.length,i=-1,a,r;if(e==null){for(;++i<n;)if((a=t[i])!=null&&a>=a)for(r=a;++i<n;)(a=t[i])!=null&&r>a&&(r=a)}else for(;++i<n;)if((a=e(t[i],i,t))!=null&&a>=a)for(r=a;++i<n;)(a=e(t[i],i,t))!=null&&r>a&&(r=a);return r}function vm(t,e){for(var n=e.length,i=new Array(n);n--;)i[n]=t[e[n]];return i}function xm(t,e){if(n=t.length){var n,i=0,a=0,r,s=t[a];for(e==null&&(e=Ue);++i<n;)(e(r=t[i],s)<0||e(s,s)!==0)&&(s=r,a=i);if(e(s,s)===0)return a}}function _m(t,e,n){for(var i=(n??t.length)-(e=e==null?0:+e),a,r;i;)r=Math.random()*i--|0,a=t[i+e],t[i+e]=t[r+e],t[r+e]=a;return t}function wm(t,e){var n=t.length,i=-1,a,r=0;if(e==null)for(;++i<n;)(a=+t[i])&&(r+=a);else for(;++i<n;)(a=+e(t[i],i,t))&&(r+=a);return r}function Cf(t){if(!(r=t.length))return[];for(var e=-1,n=Lf(t,Mm),i=new Array(n);++e<n;)for(var a=-1,r,s=i[e]=new Array(r);++a<r;)s[a]=t[a][e];return i}function Mm(t){return t.length}function km(){return Cf(arguments)}var Us=Array.prototype.slice;function Sm(t){return t}var Ka=1,Qa=2,Xo=3,vi=4,iu=1e-6;function Am(t){return"translate("+(t+.5)+",0)"}function Dm(t){return"translate(0,"+(t+.5)+")"}function Lm(t){return function(e){return+t(e)}}function Cm(t){var e=Math.max(0,t.bandwidth()-1)/2;return t.round()&&(e=Math.round(e)),function(n){return+t(n)+e}}function Tm(){return!this.__axis}function ss(t,e){var n=[],i=null,a=null,r=6,s=6,o=3,l=t===Ka||t===vi?-1:1,c=t===vi||t===Qa?"x":"y",u=t===Ka||t===Xo?Am:Dm;function f(h){var d=i??(e.ticks?e.ticks.apply(e,n):e.domain()),g=a??(e.tickFormat?e.tickFormat.apply(e,n):Sm),p=Math.max(r,0)+o,m=e.range(),b=+m[0]+.5,v=+m[m.length-1]+.5,y=(e.bandwidth?Cm:Lm)(e.copy()),x=h.selection?h.selection():h,M=x.selectAll(".domain").data([null]),A=x.selectAll(".tick").data(d,e).order(),k=A.exit(),I=A.enter().append("g").attr("class","tick"),C=A.select("line"),T=A.select("text");M=M.merge(M.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),A=A.merge(I),C=C.merge(I.append("line").attr("stroke","currentColor").attr(c+"2",l*r)),T=T.merge(I.append("text").attr("fill","currentColor").attr(c,l*p).attr("dy",t===Ka?"0em":t===Xo?"0.71em":"0.32em")),h!==x&&(M=M.transition(h),A=A.transition(h),C=C.transition(h),T=T.transition(h),k=k.transition(h).attr("opacity",iu).attr("transform",function(L){return isFinite(L=y(L))?u(L):this.getAttribute("transform")}),I.attr("opacity",iu).attr("transform",function(L){var _=this.parentNode.__axis;return u(_&&isFinite(_=_(L))?_:y(L))})),k.remove(),M.attr("d",t===vi||t==Qa?s?"M"+l*s+","+b+"H0.5V"+v+"H"+l*s:"M0.5,"+b+"V"+v:s?"M"+b+","+l*s+"V0.5H"+v+"V"+l*s:"M"+b+",0.5H"+v),A.attr("opacity",1).attr("transform",function(L){return u(y(L))}),C.attr(c+"2",l*r),T.attr(c,l*p).text(g),x.filter(Tm).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===Qa?"start":t===vi?"end":"middle"),x.each(function(){this.__axis=y})}return f.scale=function(h){return arguments.length?(e=h,f):e},f.ticks=function(){return n=Us.call(arguments),f},f.tickArguments=function(h){return arguments.length?(n=h==null?[]:Us.call(h),f):n.slice()},f.tickValues=function(h){return arguments.length?(i=h==null?null:Us.call(h),f):i&&i.slice()},f.tickFormat=function(h){return arguments.length?(a=h,f):a},f.tickSize=function(h){return arguments.length?(r=s=+h,f):r},f.tickSizeInner=function(h){return arguments.length?(r=+h,f):r},f.tickSizeOuter=function(h){return arguments.length?(s=+h,f):s},f.tickPadding=function(h){return arguments.length?(o=+h,f):o},f}function Im(t){return ss(Ka,t)}function Tf(t){return ss(Qa,t)}function os(t){return ss(Xo,t)}function ls(t){return ss(vi,t)}var Rm={value:function(){}};function yn(){for(var t=0,e=arguments.length,n={},i;t<e;++t){if(!(i=arguments[t]+"")||i in n||/[\s.]/.test(i))throw new Error("illegal type: "+i);n[i]=[]}return new Ja(n)}function Ja(t){this._=t}function Pm(t,e){return t.trim().split(/^|\s+/).map(function(n){var i="",a=n.indexOf(".");if(a>=0&&(i=n.slice(a+1),n=n.slice(0,a)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:i}})}Ja.prototype=yn.prototype={constructor:Ja,on:function(t,e){var n=this._,i=Pm(t+"",n),a,r=-1,s=i.length;if(arguments.length<2){for(;++r<s;)if((a=(t=i[r]).type)&&(a=Em(n[a],t.name)))return a;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++r<s;)if(a=(t=i[r]).type)n[a]=au(n[a],t.name,e);else if(e==null)for(a in n)n[a]=au(n[a],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new Ja(t)},call:function(t,e){if((a=arguments.length-2)>0)for(var n=new Array(a),i=0,a,r;i<a;++i)n[i]=arguments[i+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(r=this._[t],i=0,a=r.length;i<a;++i)r[i].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var i=this._[t],a=0,r=i.length;a<r;++a)i[a].value.apply(e,n)}};function Em(t,e){for(var n=0,i=t.length,a;n<i;++n)if((a=t[n]).name===e)return a.value}function au(t,e,n){for(var i=0,a=t.length;i<a;++i)if(t[i].name===e){t[i]=Rm,t=t.slice(0,i).concat(t.slice(i+1));break}return n!=null&&t.push({name:e,value:n}),t}var Ho="http://www.w3.org/1999/xhtml";const Go={svg:"http://www.w3.org/2000/svg",xhtml:Ho,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function la(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),Go.hasOwnProperty(e)?{space:Go[e],local:t}:t}function $m(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===Ho&&e.documentElement.namespaceURI===Ho?e.createElement(t):e.createElementNS(n,t)}}function Nm(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function cs(t){var e=la(t);return(e.local?Nm:$m)(e)}function Ym(){}function us(t){return t==null?Ym:function(){return this.querySelector(t)}}function zm(t){typeof t!="function"&&(t=us(t));for(var e=this._groups,n=e.length,i=new Array(n),a=0;a<n;++a)for(var r=e[a],s=r.length,o=i[a]=new Array(s),l,c,u=0;u<s;++u)(l=r[u])&&(c=t.call(l,l.__data__,u,r))&&("__data__"in l&&(c.__data__=l.__data__),o[u]=c);return new It(i,this._parents)}function Xm(){return[]}function Hl(t){return t==null?Xm:function(){return this.querySelectorAll(t)}}function Hm(t){typeof t!="function"&&(t=Hl(t));for(var e=this._groups,n=e.length,i=[],a=[],r=0;r<n;++r)for(var s=e[r],o=s.length,l,c=0;c<o;++c)(l=s[c])&&(i.push(t.call(l,l.__data__,c,s)),a.push(l));return new It(i,a)}function Gl(t){return function(){return this.matches(t)}}function Gm(t){typeof t!="function"&&(t=Gl(t));for(var e=this._groups,n=e.length,i=new Array(n),a=0;a<n;++a)for(var r=e[a],s=r.length,o=i[a]=[],l,c=0;c<s;++c)(l=r[c])&&t.call(l,l.__data__,c,r)&&o.push(l);return new It(i,this._parents)}function If(t){return new Array(t.length)}function Om(){return new It(this._enter||this._groups.map(If),this._parents)}function or(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}or.prototype={constructor:or,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function Um(t){return function(){return t}}var ru="$";function Bm(t,e,n,i,a,r){for(var s=0,o,l=e.length,c=r.length;s<c;++s)(o=e[s])?(o.__data__=r[s],i[s]=o):n[s]=new or(t,r[s]);for(;s<l;++s)(o=e[s])&&(a[s]=o)}function Fm(t,e,n,i,a,r,s){var o,l,c={},u=e.length,f=r.length,h=new Array(u),d;for(o=0;o<u;++o)(l=e[o])&&(h[o]=d=ru+s.call(l,l.__data__,o,e),d in c?a[o]=l:c[d]=l);for(o=0;o<f;++o)d=ru+s.call(t,r[o],o,r),(l=c[d])?(i[o]=l,l.__data__=r[o],c[d]=null):n[o]=new or(t,r[o]);for(o=0;o<u;++o)(l=e[o])&&c[h[o]]===l&&(a[o]=l)}function Wm(t,e){if(!t)return d=new Array(this.size()),c=-1,this.each(function(A){d[++c]=A}),d;var n=e?Fm:Bm,i=this._parents,a=this._groups;typeof t!="function"&&(t=Um(t));for(var r=a.length,s=new Array(r),o=new Array(r),l=new Array(r),c=0;c<r;++c){var u=i[c],f=a[c],h=f.length,d=t.call(u,u&&u.__data__,c,i),g=d.length,p=o[c]=new Array(g),m=s[c]=new Array(g),b=l[c]=new Array(h);n(u,f,p,m,b,d,e);for(var v=0,y=0,x,M;v<g;++v)if(x=p[v]){for(v>=y&&(y=v+1);!(M=m[y])&&++y<g;);x._next=M||null}}return s=new It(s,i),s._enter=o,s._exit=l,s}function Vm(){return new It(this._exit||this._groups.map(If),this._parents)}function qm(t,e,n){var i=this.enter(),a=this,r=this.exit();return i=typeof t=="function"?t(i):i.append(t+""),e!=null&&(a=e(a)),n==null?r.remove():n(r),i&&a?i.merge(a).order():a}function Zm(t){for(var e=this._groups,n=t._groups,i=e.length,a=n.length,r=Math.min(i,a),s=new Array(i),o=0;o<r;++o)for(var l=e[o],c=n[o],u=l.length,f=s[o]=new Array(u),h,d=0;d<u;++d)(h=l[d]||c[d])&&(f[d]=h);for(;o<i;++o)s[o]=e[o];return new It(s,this._parents)}function Km(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var i=t[e],a=i.length-1,r=i[a],s;--a>=0;)(s=i[a])&&(r&&s.compareDocumentPosition(r)^4&&r.parentNode.insertBefore(s,r),r=s);return this}function Qm(t){t||(t=Jm);function e(f,h){return f&&h?t(f.__data__,h.__data__):!f-!h}for(var n=this._groups,i=n.length,a=new Array(i),r=0;r<i;++r){for(var s=n[r],o=s.length,l=a[r]=new Array(o),c,u=0;u<o;++u)(c=s[u])&&(l[u]=c);l.sort(e)}return new It(a,this._parents).order()}function Jm(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function jm(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function t1(){var t=new Array(this.size()),e=-1;return this.each(function(){t[++e]=this}),t}function e1(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i=t[e],a=0,r=i.length;a<r;++a){var s=i[a];if(s)return s}return null}function n1(){var t=0;return this.each(function(){++t}),t}function i1(){return!this.node()}function a1(t){for(var e=this._groups,n=0,i=e.length;n<i;++n)for(var a=e[n],r=0,s=a.length,o;r<s;++r)(o=a[r])&&t.call(o,o.__data__,r,a);return this}function r1(t){return function(){this.removeAttribute(t)}}function s1(t){return function(){this.removeAttributeNS(t.space,t.local)}}function o1(t,e){return function(){this.setAttribute(t,e)}}function l1(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function c1(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function u1(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function h1(t,e){var n=la(t);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((e==null?n.local?s1:r1:typeof e=="function"?n.local?u1:c1:n.local?l1:o1)(n,e))}function Ol(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function f1(t){return function(){this.style.removeProperty(t)}}function d1(t,e,n){return function(){this.style.setProperty(t,e,n)}}function p1(t,e,n){return function(){var i=e.apply(this,arguments);i==null?this.style.removeProperty(t):this.style.setProperty(t,i,n)}}function g1(t,e,n){return arguments.length>1?this.each((e==null?f1:typeof e=="function"?p1:d1)(t,e,n??"")):on(this.node(),t)}function on(t,e){return t.style.getPropertyValue(e)||Ol(t).getComputedStyle(t,null).getPropertyValue(e)}function m1(t){return function(){delete this[t]}}function b1(t,e){return function(){this[t]=e}}function y1(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function v1(t,e){return arguments.length>1?this.each((e==null?m1:typeof e=="function"?y1:b1)(t,e)):this.node()[t]}function Rf(t){return t.trim().split(/^|\s+/)}function Ul(t){return t.classList||new Pf(t)}function Pf(t){this._node=t,this._names=Rf(t.getAttribute("class")||"")}Pf.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function Ef(t,e){for(var n=Ul(t),i=-1,a=e.length;++i<a;)n.add(e[i])}function $f(t,e){for(var n=Ul(t),i=-1,a=e.length;++i<a;)n.remove(e[i])}function x1(t){return function(){Ef(this,t)}}function _1(t){return function(){$f(this,t)}}function w1(t,e){return function(){(e.apply(this,arguments)?Ef:$f)(this,t)}}function M1(t,e){var n=Rf(t+"");if(arguments.length<2){for(var i=Ul(this.node()),a=-1,r=n.length;++a<r;)if(!i.contains(n[a]))return!1;return!0}return this.each((typeof e=="function"?w1:e?x1:_1)(n,e))}function k1(){this.textContent=""}function S1(t){return function(){this.textContent=t}}function A1(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function D1(t){return arguments.length?this.each(t==null?k1:(typeof t=="function"?A1:S1)(t)):this.node().textContent}function L1(){this.innerHTML=""}function C1(t){return function(){this.innerHTML=t}}function T1(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function I1(t){return arguments.length?this.each(t==null?L1:(typeof t=="function"?T1:C1)(t)):this.node().innerHTML}function R1(){this.nextSibling&&this.parentNode.appendChild(this)}function P1(){return this.each(R1)}function E1(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function $1(){return this.each(E1)}function N1(t){var e=typeof t=="function"?t:cs(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function Y1(){return null}function z1(t,e){var n=typeof t=="function"?t:cs(t),i=e==null?Y1:typeof e=="function"?e:us(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)})}function X1(){var t=this.parentNode;t&&t.removeChild(this)}function H1(){return this.each(X1)}function G1(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function O1(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function U1(t){return this.select(t?O1:G1)}function B1(t){return arguments.length?this.property("__data__",t):this.node().__data__}var Nf={},w=null;if(typeof document<"u"){var F1=document.documentElement;"onmouseenter"in F1||(Nf={mouseenter:"mouseover",mouseleave:"mouseout"})}function W1(t,e,n){return t=Yf(t,e,n),function(i){var a=i.relatedTarget;(!a||a!==this&&!(a.compareDocumentPosition(this)&8))&&t.call(this,i)}}function Yf(t,e,n){return function(i){var a=w;w=i;try{t.call(this,this.__data__,e,n)}finally{w=a}}}function V1(t){return t.trim().split(/^|\s+/).map(function(e){var n="",i=e.indexOf(".");return i>=0&&(n=e.slice(i+1),e=e.slice(0,i)),{type:e,name:n}})}function q1(t){return function(){var e=this.__on;if(e){for(var n=0,i=-1,a=e.length,r;n<a;++n)r=e[n],(!t.type||r.type===t.type)&&r.name===t.name?this.removeEventListener(r.type,r.listener,r.capture):e[++i]=r;++i?e.length=i:delete this.__on}}}function Z1(t,e,n){var i=Nf.hasOwnProperty(t.type)?W1:Yf;return function(a,r,s){var o=this.__on,l,c=i(e,r,s);if(o){for(var u=0,f=o.length;u<f;++u)if((l=o[u]).type===t.type&&l.name===t.name){this.removeEventListener(l.type,l.listener,l.capture),this.addEventListener(l.type,l.listener=c,l.capture=n),l.value=e;return}}this.addEventListener(t.type,c,n),l={type:t.type,name:t.name,value:e,listener:c,capture:n},o?o.push(l):this.__on=[l]}}function K1(t,e,n){var i=V1(t+""),a,r=i.length,s;if(arguments.length<2){var o=this.node().__on;if(o){for(var l=0,c=o.length,u;l<c;++l)for(a=0,u=o[l];a<r;++a)if((s=i[a]).type===u.type&&s.name===u.name)return u.value}return}for(o=e?Z1:q1,n==null&&(n=!1),a=0;a<r;++a)this.each(o(i[a],e,n));return this}function Oi(t,e,n,i){var a=w;t.sourceEvent=w,w=t;try{return e.apply(n,i)}finally{w=a}}function zf(t,e,n){var i=Ol(t),a=i.CustomEvent;typeof a=="function"?a=new a(e,n):(a=i.document.createEvent("Event"),n?(a.initEvent(e,n.bubbles,n.cancelable),a.detail=n.detail):a.initEvent(e,!1,!1)),t.dispatchEvent(a)}function Q1(t,e){return function(){return zf(this,t,e)}}function J1(t,e){return function(){return zf(this,t,e.apply(this,arguments))}}function j1(t,e){return this.each((typeof e=="function"?J1:Q1)(t,e))}var Bl=[null];function It(t,e){this._groups=t,this._parents=e}function vn(){return new It([[document.documentElement]],Bl)}It.prototype=vn.prototype={constructor:It,select:zm,selectAll:Hm,filter:Gm,data:Wm,enter:Om,exit:Vm,join:qm,merge:Zm,order:Km,sort:Qm,call:jm,nodes:t1,node:e1,size:n1,empty:i1,each:a1,attr:h1,style:g1,property:v1,classed:M1,text:D1,html:I1,raise:P1,lower:$1,append:N1,insert:z1,remove:H1,clone:U1,datum:B1,on:K1,dispatch:j1};function W(t){return typeof t=="string"?new It([[document.querySelector(t)]],[document.documentElement]):new It([[t]],Bl)}function tb(t){return W(cs(t).call(document.documentElement))}var eb=0;function Xf(){return new Oo}function Oo(){this._="@"+(++eb).toString(36)}Oo.prototype=Xf.prototype={constructor:Oo,get:function(t){for(var e=this._;!(e in t);)if(!(t=t.parentNode))return;return t[e]},set:function(t,e){return t[this._]=e},remove:function(t){return this._ in t&&delete t[this._]},toString:function(){return this._}};function Fl(){for(var t=w,e;e=t.sourceEvent;)t=e;return t}function hs(t,e){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var i=n.createSVGPoint();return i.x=e.clientX,i.y=e.clientY,i=i.matrixTransform(t.getScreenCTM().inverse()),[i.x,i.y]}var a=t.getBoundingClientRect();return[e.clientX-a.left-t.clientLeft,e.clientY-a.top-t.clientTop]}function tn(t){var e=Fl();return e.changedTouches&&(e=e.changedTouches[0]),hs(t,e)}function nb(t){return typeof t=="string"?new It([document.querySelectorAll(t)],[document.documentElement]):new It([t??[]],Bl)}function Ui(t,e,n){arguments.length<3&&(n=e,e=Fl().changedTouches);for(var i=0,a=e?e.length:0,r;i<a;++i)if((r=e[i]).identifier===n)return hs(t,r);return null}function ib(t,e){e==null&&(e=Fl().touches);for(var n=0,i=e?e.length:0,a=new Array(i);n<i;++n)a[n]=hs(t,e[n]);return a}function Bs(){w.stopImmediatePropagation()}function Nn(){w.preventDefault(),w.stopImmediatePropagation()}function fs(t){var e=t.document.documentElement,n=W(t).on("dragstart.drag",Nn,!0);"onselectstart"in e?n.on("selectstart.drag",Nn,!0):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function ds(t,e){var n=t.document.documentElement,i=W(t).on("dragstart.drag",null);e&&(i.on("click.drag",Nn,!0),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in n?i.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function xa(t){return function(){return t}}function Uo(t,e,n,i,a,r,s,o,l,c){this.target=t,this.type=e,this.subject=n,this.identifier=i,this.active=a,this.x=r,this.y=s,this.dx=o,this.dy=l,this._=c}Uo.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function ab(){return!w.ctrlKey&&!w.button}function rb(){return this.parentNode}function sb(t){return t??{x:w.x,y:w.y}}function ob(){return navigator.maxTouchPoints||"ontouchstart"in this}function lb(){var t=ab,e=rb,n=sb,i=ob,a={},r=yn("start","drag","end"),s=0,o,l,c,u,f=0;function h(x){x.on("mousedown.drag",d).filter(i).on("touchstart.drag",m).on("touchmove.drag",b).on("touchend.drag touchcancel.drag",v).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function d(){if(!(u||!t.apply(this,arguments))){var x=y("mouse",e.apply(this,arguments),tn,this,arguments);x&&(W(w.view).on("mousemove.drag",g,!0).on("mouseup.drag",p,!0),fs(w.view),Bs(),c=!1,o=w.clientX,l=w.clientY,x("start"))}}function g(){if(Nn(),!c){var x=w.clientX-o,M=w.clientY-l;c=x*x+M*M>f}a.mouse("drag")}function p(){W(w.view).on("mousemove.drag mouseup.drag",null),ds(w.view,c),Nn(),a.mouse("end")}function m(){if(t.apply(this,arguments)){var x=w.changedTouches,M=e.apply(this,arguments),A=x.length,k,I;for(k=0;k<A;++k)(I=y(x[k].identifier,M,Ui,this,arguments))&&(Bs(),I("start"))}}function b(){var x=w.changedTouches,M=x.length,A,k;for(A=0;A<M;++A)(k=a[x[A].identifier])&&(Nn(),k("drag"))}function v(){var x=w.changedTouches,M=x.length,A,k;for(u&&clearTimeout(u),u=setTimeout(function(){u=null},500),A=0;A<M;++A)(k=a[x[A].identifier])&&(Bs(),k("end"))}function y(x,M,A,k,I){var C=A(M,x),T,L,_,D=r.copy();if(Oi(new Uo(h,"beforestart",T,x,s,C[0],C[1],0,0,D),function(){return(w.subject=T=n.apply(k,I))==null?!1:(L=T.x-C[0]||0,_=T.y-C[1]||0,!0)}))return function P(S){var R=C,z;switch(S){case"start":a[x]=P,z=s++;break;case"end":delete a[x],--s;case"drag":C=A(M,x),z=s;break}Oi(new Uo(h,S,T,x,z,C[0]+L,C[1]+_,C[0]-R[0],C[1]-R[1],D),D.apply,D,[S,k,I])}}return h.filter=function(x){return arguments.length?(t=typeof x=="function"?x:xa(!!x),h):t},h.container=function(x){return arguments.length?(e=typeof x=="function"?x:xa(x),h):e},h.subject=function(x){return arguments.length?(n=typeof x=="function"?x:xa(x),h):n},h.touchable=function(x){return arguments.length?(i=typeof x=="function"?x:xa(!!x),h):i},h.on=function(){var x=r.on.apply(r,arguments);return x===r?h:x},h.clickDistance=function(x){return arguments.length?(f=(x=+x)*x,h):Math.sqrt(f)},h}function ti(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function ca(t,e){var n=Object.create(t.prototype);for(var i in e)n[i]=e[i];return n}function Be(){}var ln=.7,On=1/ln,Yn="\\s*([+-]?\\d+)\\s*",Bi="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",fe="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",cb=/^#([0-9a-f]{3,8})$/,ub=new RegExp("^rgb\\("+[Yn,Yn,Yn]+"\\)$"),hb=new RegExp("^rgb\\("+[fe,fe,fe]+"\\)$"),fb=new RegExp("^rgba\\("+[Yn,Yn,Yn,Bi]+"\\)$"),db=new RegExp("^rgba\\("+[fe,fe,fe,Bi]+"\\)$"),pb=new RegExp("^hsl\\("+[Bi,fe,fe]+"\\)$"),gb=new RegExp("^hsla\\("+[Bi,fe,fe,Bi]+"\\)$"),su={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};ti(Be,Ye,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:ou,formatHex:ou,formatHsl:mb,formatRgb:lu,toString:lu});function ou(){return this.rgb().formatHex()}function mb(){return Hf(this).formatHsl()}function lu(){return this.rgb().formatRgb()}function Ye(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=cb.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?cu(e):n===3?new yt(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?_a(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?_a(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=ub.exec(t))?new yt(e[1],e[2],e[3],1):(e=hb.exec(t))?new yt(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=fb.exec(t))?_a(e[1],e[2],e[3],e[4]):(e=db.exec(t))?_a(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=pb.exec(t))?fu(e[1],e[2]/100,e[3]/100,1):(e=gb.exec(t))?fu(e[1],e[2]/100,e[3]/100,e[4]):su.hasOwnProperty(t)?cu(su[t]):t==="transparent"?new yt(NaN,NaN,NaN,0):null}function cu(t){return new yt(t>>16&255,t>>8&255,t&255,1)}function _a(t,e,n,i){return i<=0&&(t=e=n=NaN),new yt(t,e,n,i)}function Wl(t){return t instanceof Be||(t=Ye(t)),t?(t=t.rgb(),new yt(t.r,t.g,t.b,t.opacity)):new yt}function Un(t,e,n,i){return arguments.length===1?Wl(t):new yt(t,e,n,i??1)}function yt(t,e,n,i){this.r=+t,this.g=+e,this.b=+n,this.opacity=+i}ti(yt,Un,ca(Be,{brighter:function(t){return t=t==null?On:Math.pow(On,t),new yt(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=t==null?ln:Math.pow(ln,t),new yt(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:uu,formatHex:uu,formatRgb:hu,toString:hu}));function uu(){return"#"+Fs(this.r)+Fs(this.g)+Fs(this.b)}function hu(){var t=this.opacity;return t=isNaN(t)?1:Math.max(0,Math.min(1,t)),(t===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(t===1?")":", "+t+")")}function Fs(t){return t=Math.max(0,Math.min(255,Math.round(t)||0)),(t<16?"0":"")+t.toString(16)}function fu(t,e,n,i){return i<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new le(t,e,n,i)}function Hf(t){if(t instanceof le)return new le(t.h,t.s,t.l,t.opacity);if(t instanceof Be||(t=Ye(t)),!t)return new le;if(t instanceof le)return t;t=t.rgb();var e=t.r/255,n=t.g/255,i=t.b/255,a=Math.min(e,n,i),r=Math.max(e,n,i),s=NaN,o=r-a,l=(r+a)/2;return o?(e===r?s=(n-i)/o+(n<i)*6:n===r?s=(i-e)/o+2:s=(e-n)/o+4,o/=l<.5?r+a:2-r-a,s*=60):o=l>0&&l<1?0:s,new le(s,o,l,t.opacity)}function lr(t,e,n,i){return arguments.length===1?Hf(t):new le(t,e,n,i??1)}function le(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}ti(le,lr,ca(Be,{brighter:function(t){return t=t==null?On:Math.pow(On,t),new le(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=t==null?ln:Math.pow(ln,t),new le(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*e,a=2*n-i;return new yt(Ws(t>=240?t-240:t+120,a,i),Ws(t,a,i),Ws(t<120?t+240:t-120,a,i),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return t=isNaN(t)?1:Math.max(0,Math.min(1,t)),(t===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(t===1?")":", "+t+")")}}));function Ws(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}var Gf=Math.PI/180,Of=180/Math.PI,cr=18,Uf=.96422,Bf=1,Ff=.82521,Wf=4/29,zn=6/29,Vf=3*zn*zn,bb=zn*zn*zn;function qf(t){if(t instanceof ne)return new ne(t.l,t.a,t.b,t.opacity);if(t instanceof he)return Kf(t);t instanceof yt||(t=Wl(t));var e=Ks(t.r),n=Ks(t.g),i=Ks(t.b),a=Vs((.2225045*e+.7168786*n+.0606169*i)/Bf),r,s;return e===n&&n===i?r=s=a:(r=Vs((.4360747*e+.3850649*n+.1430804*i)/Uf),s=Vs((.0139322*e+.0971045*n+.7141733*i)/Ff)),new ne(116*a-16,500*(r-a),200*(a-s),t.opacity)}function yb(t,e){return new ne(t,0,0,e??1)}function ur(t,e,n,i){return arguments.length===1?qf(t):new ne(t,e,n,i??1)}function ne(t,e,n,i){this.l=+t,this.a=+e,this.b=+n,this.opacity=+i}ti(ne,ur,ca(Be,{brighter:function(t){return new ne(this.l+cr*(t??1),this.a,this.b,this.opacity)},darker:function(t){return new ne(this.l-cr*(t??1),this.a,this.b,this.opacity)},rgb:function(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,n=isNaN(this.b)?t:t-this.b/200;return e=Uf*qs(e),t=Bf*qs(t),n=Ff*qs(n),new yt(Zs(3.1338561*e-1.6168667*t-.4906146*n),Zs(-.9787684*e+1.9161415*t+.033454*n),Zs(.0719453*e-.2289914*t+1.4052427*n),this.opacity)}}));function Vs(t){return t>bb?Math.pow(t,1/3):t/Vf+Wf}function qs(t){return t>zn?t*t*t:Vf*(t-Wf)}function Zs(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function Ks(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Zf(t){if(t instanceof he)return new he(t.h,t.c,t.l,t.opacity);if(t instanceof ne||(t=qf(t)),t.a===0&&t.b===0)return new he(NaN,0<t.l&&t.l<100?0:NaN,t.l,t.opacity);var e=Math.atan2(t.b,t.a)*Of;return new he(e<0?e+360:e,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function vb(t,e,n,i){return arguments.length===1?Zf(t):new he(n,e,t,i??1)}function hr(t,e,n,i){return arguments.length===1?Zf(t):new he(t,e,n,i??1)}function he(t,e,n,i){this.h=+t,this.c=+e,this.l=+n,this.opacity=+i}function Kf(t){if(isNaN(t.h))return new ne(t.l,0,0,t.opacity);var e=t.h*Gf;return new ne(t.l,Math.cos(e)*t.c,Math.sin(e)*t.c,t.opacity)}ti(he,hr,ca(Be,{brighter:function(t){return new he(this.h,this.c,this.l+cr*(t??1),this.opacity)},darker:function(t){return new he(this.h,this.c,this.l-cr*(t??1),this.opacity)},rgb:function(){return Kf(this).rgb()}}));var Qf=-.14861,Vl=1.78277,ql=-.29227,ps=-.90649,Fi=1.97294,du=Fi*ps,pu=Fi*Vl,gu=Vl*ql-ps*Qf;function xb(t){if(t instanceof en)return new en(t.h,t.s,t.l,t.opacity);t instanceof yt||(t=Wl(t));var e=t.r/255,n=t.g/255,i=t.b/255,a=(gu*i+du*e-pu*n)/(gu+du-pu),r=i-a,s=(Fi*(n-a)-ql*r)/ps,o=Math.sqrt(s*s+r*r)/(Fi*a*(1-a)),l=o?Math.atan2(s,r)*Of-120:NaN;return new en(l<0?l+360:l,o,a,t.opacity)}function ie(t,e,n,i){return arguments.length===1?xb(t):new en(t,e,n,i??1)}function en(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}ti(en,ie,ca(Be,{brighter:function(t){return t=t==null?On:Math.pow(On,t),new en(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=t==null?ln:Math.pow(ln,t),new en(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=isNaN(this.h)?0:(this.h+120)*Gf,e=+this.l,n=isNaN(this.s)?0:this.s*e*(1-e),i=Math.cos(t),a=Math.sin(t);return new yt(255*(e+n*(Qf*i+Vl*a)),255*(e+n*(ql*i+ps*a)),255*(e+n*(Fi*i)),this.opacity)}}));function Jf(t,e,n,i,a){var r=t*t,s=r*t;return((1-3*t+3*r-s)*e+(4-6*r+3*s)*n+(1+3*t+3*r-3*s)*i+s*a)/6}function jf(t){var e=t.length-1;return function(n){var i=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),a=t[i],r=t[i+1],s=i>0?t[i-1]:2*a-r,o=i<e-1?t[i+2]:2*r-a;return Jf((n-i/e)*e,s,a,r,o)}}function td(t){var e=t.length;return function(n){var i=Math.floor(((n%=1)<0?++n:n)*e),a=t[(i+e-1)%e],r=t[i%e],s=t[(i+1)%e],o=t[(i+2)%e];return Jf((n-i/e)*e,a,r,s,o)}}function gs(t){return function(){return t}}function ed(t,e){return function(n){return t+n*e}}function _b(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(i){return Math.pow(t+i*e,n)}}function ms(t,e){var n=e-t;return n?ed(t,n>180||n<-180?n-360*Math.round(n/360):n):gs(isNaN(t)?e:t)}function wb(t){return(t=+t)==1?gt:function(e,n){return n-e?_b(e,n,t):gs(isNaN(e)?n:e)}}function gt(t,e){var n=e-t;return n?ed(t,n):gs(isNaN(t)?e:t)}const Wi=function t(e){var n=wb(e);function i(a,r){var s=n((a=Un(a)).r,(r=Un(r)).r),o=n(a.g,r.g),l=n(a.b,r.b),c=gt(a.opacity,r.opacity);return function(u){return a.r=s(u),a.g=o(u),a.b=l(u),a.opacity=c(u),a+""}}return i.gamma=t,i}(1);function nd(t){return function(e){var n=e.length,i=new Array(n),a=new Array(n),r=new Array(n),s,o;for(s=0;s<n;++s)o=Un(e[s]),i[s]=o.r||0,a[s]=o.g||0,r[s]=o.b||0;return i=t(i),a=t(a),r=t(r),o.opacity=1,function(l){return o.r=i(l),o.g=a(l),o.b=r(l),o+""}}}var id=nd(jf),Mb=nd(td);function Zl(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,i=e.slice(),a;return function(r){for(a=0;a<n;++a)i[a]=t[a]*(1-r)+e[a]*r;return i}}function ad(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function kb(t,e){return(ad(e)?Zl:rd)(t,e)}function rd(t,e){var n=e?e.length:0,i=t?Math.min(n,t.length):0,a=new Array(i),r=new Array(n),s;for(s=0;s<i;++s)a[s]=ua(t[s],e[s]);for(;s<n;++s)r[s]=e[s];return function(o){for(s=0;s<i;++s)r[s]=a[s](o);return r}}function sd(t,e){var n=new Date;return t=+t,e=+e,function(i){return n.setTime(t*(1-i)+e*i),n}}function Vt(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function od(t,e){var n={},i={},a;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(a in e)a in t?n[a]=ua(t[a],e[a]):i[a]=e[a];return function(r){for(a in n)i[a]=n[a](r);return i}}var Bo=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Qs=new RegExp(Bo.source,"g");function Sb(t){return function(){return t}}function Ab(t){return function(e){return t(e)+""}}function Kl(t,e){var n=Bo.lastIndex=Qs.lastIndex=0,i,a,r,s=-1,o=[],l=[];for(t=t+"",e=e+"";(i=Bo.exec(t))&&(a=Qs.exec(e));)(r=a.index)>n&&(r=e.slice(n,r),o[s]?o[s]+=r:o[++s]=r),(i=i[0])===(a=a[0])?o[s]?o[s]+=a:o[++s]=a:(o[++s]=null,l.push({i:s,x:Vt(i,a)})),n=Qs.lastIndex;return n<e.length&&(r=e.slice(n),o[s]?o[s]+=r:o[++s]=r),o.length<2?l[0]?Ab(l[0].x):Sb(e):(e=l.length,function(c){for(var u=0,f;u<e;++u)o[(f=l[u]).i]=f.x(c);return o.join("")})}function ua(t,e){var n=typeof e,i;return e==null||n==="boolean"?gs(e):(n==="number"?Vt:n==="string"?(i=Ye(e))?(e=i,Wi):Kl:e instanceof Ye?Wi:e instanceof Date?sd:ad(e)?Zl:Array.isArray(e)?rd:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?od:Vt)(t,e)}function Db(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}}function Lb(t,e){var n=ms(+t,+e);return function(i){var a=n(i);return a-360*Math.floor(a/360)}}function ld(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}var mu=180/Math.PI,Fo={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function cd(t,e,n,i,a,r){var s,o,l;return(s=Math.sqrt(t*t+e*e))&&(t/=s,e/=s),(l=t*n+e*i)&&(n-=t*l,i-=e*l),(o=Math.sqrt(n*n+i*i))&&(n/=o,i/=o,l/=o),t*i<e*n&&(t=-t,e=-e,l=-l,s=-s),{translateX:a,translateY:r,rotate:Math.atan2(e,t)*mu,skewX:Math.atan(l)*mu,scaleX:s,scaleY:o}}var oi,Js,bu,wa;function Cb(t){return t==="none"?Fo:(oi||(oi=document.createElement("DIV"),Js=document.documentElement,bu=document.defaultView),oi.style.transform=t,t=bu.getComputedStyle(Js.appendChild(oi),null).getPropertyValue("transform"),Js.removeChild(oi),t=t.slice(7,-1).split(","),cd(+t[0],+t[1],+t[2],+t[3],+t[4],+t[5]))}function Tb(t){return t==null||(wa||(wa=document.createElementNS("http://www.w3.org/2000/svg","g")),wa.setAttribute("transform",t),!(t=wa.transform.baseVal.consolidate()))?Fo:(t=t.matrix,cd(t.a,t.b,t.c,t.d,t.e,t.f))}function ud(t,e,n,i){function a(c){return c.length?c.pop()+" ":""}function r(c,u,f,h,d,g){if(c!==f||u!==h){var p=d.push("translate(",null,e,null,n);g.push({i:p-4,x:Vt(c,f)},{i:p-2,x:Vt(u,h)})}else(f||h)&&d.push("translate("+f+e+h+n)}function s(c,u,f,h){c!==u?(c-u>180?u+=360:u-c>180&&(c+=360),h.push({i:f.push(a(f)+"rotate(",null,i)-2,x:Vt(c,u)})):u&&f.push(a(f)+"rotate("+u+i)}function o(c,u,f,h){c!==u?h.push({i:f.push(a(f)+"skewX(",null,i)-2,x:Vt(c,u)}):u&&f.push(a(f)+"skewX("+u+i)}function l(c,u,f,h,d,g){if(c!==f||u!==h){var p=d.push(a(d)+"scale(",null,",",null,")");g.push({i:p-4,x:Vt(c,f)},{i:p-2,x:Vt(u,h)})}else(f!==1||h!==1)&&d.push(a(d)+"scale("+f+","+h+")")}return function(c,u){var f=[],h=[];return c=t(c),u=t(u),r(c.translateX,c.translateY,u.translateX,u.translateY,f,h),s(c.rotate,u.rotate,f,h),o(c.skewX,u.skewX,f,h),l(c.scaleX,c.scaleY,u.scaleX,u.scaleY,f,h),c=u=null,function(d){for(var g=-1,p=h.length,m;++g<p;)f[(m=h[g]).i]=m.x(d);return f.join("")}}}var hd=ud(Cb,"px, ","px)","deg)"),fd=ud(Tb,", ",")",")"),li=Math.SQRT2,js=2,yu=4,Ib=1e-12;function vu(t){return((t=Math.exp(t))+1/t)/2}function Rb(t){return((t=Math.exp(t))-1/t)/2}function Pb(t){return((t=Math.exp(2*t))-1)/(t+1)}function dd(t,e){var n=t[0],i=t[1],a=t[2],r=e[0],s=e[1],o=e[2],l=r-n,c=s-i,u=l*l+c*c,f,h;if(u<Ib)h=Math.log(o/a)/li,f=function(v){return[n+v*l,i+v*c,a*Math.exp(li*v*h)]};else{var d=Math.sqrt(u),g=(o*o-a*a+yu*u)/(2*a*js*d),p=(o*o-a*a-yu*u)/(2*o*js*d),m=Math.log(Math.sqrt(g*g+1)-g),b=Math.log(Math.sqrt(p*p+1)-p);h=(b-m)/li,f=function(v){var y=v*h,x=vu(m),M=a/(js*d)*(x*Pb(li*y+m)-Rb(m));return[n+M*l,i+M*c,a*x/vu(li*y+m)]}}return f.duration=h*1e3,f}function pd(t){return function(e,n){var i=t((e=lr(e)).h,(n=lr(n)).h),a=gt(e.s,n.s),r=gt(e.l,n.l),s=gt(e.opacity,n.opacity);return function(o){return e.h=i(o),e.s=a(o),e.l=r(o),e.opacity=s(o),e+""}}}const Eb=pd(ms);var $b=pd(gt);function Nb(t,e){var n=gt((t=ur(t)).l,(e=ur(e)).l),i=gt(t.a,e.a),a=gt(t.b,e.b),r=gt(t.opacity,e.opacity);return function(s){return t.l=n(s),t.a=i(s),t.b=a(s),t.opacity=r(s),t+""}}function gd(t){return function(e,n){var i=t((e=hr(e)).h,(n=hr(n)).h),a=gt(e.c,n.c),r=gt(e.l,n.l),s=gt(e.opacity,n.opacity);return function(o){return e.h=i(o),e.c=a(o),e.l=r(o),e.opacity=s(o),e+""}}}const Yb=gd(ms);var zb=gd(gt);function md(t){return function e(n){n=+n;function i(a,r){var s=t((a=ie(a)).h,(r=ie(r)).h),o=gt(a.s,r.s),l=gt(a.l,r.l),c=gt(a.opacity,r.opacity);return function(u){return a.h=s(u),a.s=o(u),a.l=l(Math.pow(u,n)),a.opacity=c(u),a+""}}return i.gamma=e,i}(1)}const Xb=md(ms);var bs=md(gt);function Hb(t,e){for(var n=0,i=e.length-1,a=e[0],r=new Array(i<0?0:i);n<i;)r[n]=t(a,a=e[++n]);return function(s){var o=Math.max(0,Math.min(i-1,Math.floor(s*=i)));return r[o](s-o)}}function Gb(t,e){for(var n=new Array(e),i=0;i<e;++i)n[i]=t(i/(e-1));return n}var Bn=0,xi=0,ci=0,bd=1e3,fr,_i,dr=0,cn=0,ys=0,Vi=typeof performance=="object"&&performance.now?performance:Date,yd=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function ei(){return cn||(yd(Ob),cn=Vi.now()+ys)}function Ob(){cn=0}function qi(){this._call=this._time=this._next=null}qi.prototype=vs.prototype={constructor:qi,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?ei():+n)+(e==null?0:+e),!this._next&&_i!==this&&(_i?_i._next=this:fr=this,_i=this),this._call=t,this._time=n,Wo()},stop:function(){this._call&&(this._call=null,this._time=1/0,Wo())}};function vs(t,e,n){var i=new qi;return i.restart(t,e,n),i}function vd(){ei(),++Bn;for(var t=fr,e;t;)(e=cn-t._time)>=0&&t._call.call(null,e),t=t._next;--Bn}function xu(){cn=(dr=Vi.now())+ys,Bn=xi=0;try{vd()}finally{Bn=0,Bb(),cn=0}}function Ub(){var t=Vi.now(),e=t-dr;e>bd&&(ys-=e,dr=t)}function Bb(){for(var t,e=fr,n,i=1/0;e;)e._call?(i>e._time&&(i=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:fr=n);_i=t,Wo(i)}function Wo(t){if(!Bn){xi&&(xi=clearTimeout(xi));var e=t-cn;e>24?(t<1/0&&(xi=setTimeout(xu,t-Vi.now()-ys)),ci&&(ci=clearInterval(ci))):(ci||(dr=Vi.now(),ci=setInterval(Ub,bd)),Bn=1,yd(xu))}}function Vo(t,e,n){var i=new qi;return e=e==null?0:+e,i.restart(function(a){i.stop(),t(a+e)},e,n),i}function Fb(t,e,n){var i=new qi,a=e;return e==null?(i.restart(t,e,n),i):(e=+e,n=n==null?ei():+n,i.restart(function r(s){s+=a,i.restart(r,a+=e,n),t(s)},e,n),i)}var Wb=yn("start","end","cancel","interrupt"),Vb=[],xd=0,qo=1,Zo=2,ja=3,_u=4,Ko=5,tr=6;function xs(t,e,n,i,a,r){var s=t.__transition;if(!s)t.__transition={};else if(n in s)return;qb(t,n,{name:e,index:i,group:a,on:Wb,tween:Vb,time:r.time,delay:r.delay,duration:r.duration,ease:r.ease,timer:null,state:xd})}function Ql(t,e){var n=ae(t,e);if(n.state>xd)throw new Error("too late; already scheduled");return n}function Se(t,e){var n=ae(t,e);if(n.state>ja)throw new Error("too late; already running");return n}function ae(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function qb(t,e,n){var i=t.__transition,a;i[e]=n,n.timer=vs(r,0,n.time);function r(c){n.state=qo,n.timer.restart(s,n.delay,n.time),n.delay<=c&&s(c-n.delay)}function s(c){var u,f,h,d;if(n.state!==qo)return l();for(u in i)if(d=i[u],d.name===n.name){if(d.state===ja)return Vo(s);d.state===_u?(d.state=tr,d.timer.stop(),d.on.call("interrupt",t,t.__data__,d.index,d.group),delete i[u]):+u<e&&(d.state=tr,d.timer.stop(),d.on.call("cancel",t,t.__data__,d.index,d.group),delete i[u])}if(Vo(function(){n.state===ja&&(n.state=_u,n.timer.restart(o,n.delay,n.time),o(c))}),n.state=Zo,n.on.call("start",t,t.__data__,n.index,n.group),n.state===Zo){for(n.state=ja,a=new Array(h=n.tween.length),u=0,f=-1;u<h;++u)(d=n.tween[u].value.call(t,t.__data__,n.index,n.group))&&(a[++f]=d);a.length=f+1}}function o(c){for(var u=c<n.duration?n.ease.call(null,c/n.duration):(n.timer.restart(l),n.state=Ko,1),f=-1,h=a.length;++f<h;)a[f].call(t,u);n.state===Ko&&(n.on.call("end",t,t.__data__,n.index,n.group),l())}function l(){n.state=tr,n.timer.stop(),delete i[e];for(var c in i)return;delete t.__transition}}function nn(t,e){var n=t.__transition,i,a,r=!0,s;if(n){e=e==null?null:e+"";for(s in n){if((i=n[s]).name!==e){r=!1;continue}a=i.state>Zo&&i.state<Ko,i.state=tr,i.timer.stop(),i.on.call(a?"interrupt":"cancel",t,t.__data__,i.index,i.group),delete n[s]}r&&delete t.__transition}}function Zb(t){return this.each(function(){nn(this,t)})}function Kb(t,e){var n,i;return function(){var a=Se(this,t),r=a.tween;if(r!==n){i=n=r;for(var s=0,o=i.length;s<o;++s)if(i[s].name===e){i=i.slice(),i.splice(s,1);break}}a.tween=i}}function Qb(t,e,n){var i,a;if(typeof n!="function")throw new Error;return function(){var r=Se(this,t),s=r.tween;if(s!==i){a=(i=s).slice();for(var o={name:e,value:n},l=0,c=a.length;l<c;++l)if(a[l].name===e){a[l]=o;break}l===c&&a.push(o)}r.tween=a}}function Jb(t,e){var n=this._id;if(t+="",arguments.length<2){for(var i=ae(this.node(),n).tween,a=0,r=i.length,s;a<r;++a)if((s=i[a]).name===t)return s.value;return null}return this.each((e==null?Kb:Qb)(n,t,e))}function Jl(t,e,n){var i=t._id;return t.each(function(){var a=Se(this,i);(a.value||(a.value={}))[e]=n.apply(this,arguments)}),function(a){return ae(a,i).value[e]}}function _d(t,e){var n;return(typeof e=="number"?Vt:e instanceof Ye?Wi:(n=Ye(e))?(e=n,Wi):Kl)(t,e)}function jb(t){return function(){this.removeAttribute(t)}}function ty(t){return function(){this.removeAttributeNS(t.space,t.local)}}function ey(t,e,n){var i,a=n+"",r;return function(){var s=this.getAttribute(t);return s===a?null:s===i?r:r=e(i=s,n)}}function ny(t,e,n){var i,a=n+"",r;return function(){var s=this.getAttributeNS(t.space,t.local);return s===a?null:s===i?r:r=e(i=s,n)}}function iy(t,e,n){var i,a,r;return function(){var s,o=n(this),l;return o==null?void this.removeAttribute(t):(s=this.getAttribute(t),l=o+"",s===l?null:s===i&&l===a?r:(a=l,r=e(i=s,o)))}}function ay(t,e,n){var i,a,r;return function(){var s,o=n(this),l;return o==null?void this.removeAttributeNS(t.space,t.local):(s=this.getAttributeNS(t.space,t.local),l=o+"",s===l?null:s===i&&l===a?r:(a=l,r=e(i=s,o)))}}function ry(t,e){var n=la(t),i=n==="transform"?fd:_d;return this.attrTween(t,typeof e=="function"?(n.local?ay:iy)(n,i,Jl(this,"attr."+t,e)):e==null?(n.local?ty:jb)(n):(n.local?ny:ey)(n,i,e))}function sy(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function oy(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function ly(t,e){var n,i;function a(){var r=e.apply(this,arguments);return r!==i&&(n=(i=r)&&oy(t,r)),n}return a._value=e,a}function cy(t,e){var n,i;function a(){var r=e.apply(this,arguments);return r!==i&&(n=(i=r)&&sy(t,r)),n}return a._value=e,a}function uy(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var i=la(t);return this.tween(n,(i.local?ly:cy)(i,e))}function hy(t,e){return function(){Ql(this,t).delay=+e.apply(this,arguments)}}function fy(t,e){return e=+e,function(){Ql(this,t).delay=e}}function dy(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?hy:fy)(e,t)):ae(this.node(),e).delay}function py(t,e){return function(){Se(this,t).duration=+e.apply(this,arguments)}}function gy(t,e){return e=+e,function(){Se(this,t).duration=e}}function my(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?py:gy)(e,t)):ae(this.node(),e).duration}function by(t,e){if(typeof e!="function")throw new Error;return function(){Se(this,t).ease=e}}function yy(t){var e=this._id;return arguments.length?this.each(by(e,t)):ae(this.node(),e).ease}function vy(t){typeof t!="function"&&(t=Gl(t));for(var e=this._groups,n=e.length,i=new Array(n),a=0;a<n;++a)for(var r=e[a],s=r.length,o=i[a]=[],l,c=0;c<s;++c)(l=r[c])&&t.call(l,l.__data__,c,r)&&o.push(l);return new de(i,this._parents,this._name,this._id)}function xy(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,i=e.length,a=n.length,r=Math.min(i,a),s=new Array(i),o=0;o<r;++o)for(var l=e[o],c=n[o],u=l.length,f=s[o]=new Array(u),h,d=0;d<u;++d)(h=l[d]||c[d])&&(f[d]=h);for(;o<i;++o)s[o]=e[o];return new de(s,this._parents,this._name,this._id)}function _y(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function wy(t,e,n){var i,a,r=_y(e)?Ql:Se;return function(){var s=r(this,t),o=s.on;o!==i&&(a=(i=o).copy()).on(e,n),s.on=a}}function My(t,e){var n=this._id;return arguments.length<2?ae(this.node(),n).on.on(t):this.each(wy(n,t,e))}function ky(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function Sy(){return this.on("end.remove",ky(this._id))}function Ay(t){var e=this._name,n=this._id;typeof t!="function"&&(t=us(t));for(var i=this._groups,a=i.length,r=new Array(a),s=0;s<a;++s)for(var o=i[s],l=o.length,c=r[s]=new Array(l),u,f,h=0;h<l;++h)(u=o[h])&&(f=t.call(u,u.__data__,h,o))&&("__data__"in u&&(f.__data__=u.__data__),c[h]=f,xs(c[h],e,n,h,c,ae(u,n)));return new de(r,this._parents,e,n)}function Dy(t){var e=this._name,n=this._id;typeof t!="function"&&(t=Hl(t));for(var i=this._groups,a=i.length,r=[],s=[],o=0;o<a;++o)for(var l=i[o],c=l.length,u,f=0;f<c;++f)if(u=l[f]){for(var h=t.call(u,u.__data__,f,l),d,g=ae(u,n),p=0,m=h.length;p<m;++p)(d=h[p])&&xs(d,e,n,p,h,g);r.push(h),s.push(u)}return new de(r,s,e,n)}var Ly=vn.prototype.constructor;function Cy(){return new Ly(this._groups,this._parents)}function Ty(t,e){var n,i,a;return function(){var r=on(this,t),s=(this.style.removeProperty(t),on(this,t));return r===s?null:r===n&&s===i?a:a=e(n=r,i=s)}}function wd(t){return function(){this.style.removeProperty(t)}}function Iy(t,e,n){var i,a=n+"",r;return function(){var s=on(this,t);return s===a?null:s===i?r:r=e(i=s,n)}}function Ry(t,e,n){var i,a,r;return function(){var s=on(this,t),o=n(this),l=o+"";return o==null&&(l=o=(this.style.removeProperty(t),on(this,t))),s===l?null:s===i&&l===a?r:(a=l,r=e(i=s,o))}}function Py(t,e){var n,i,a,r="style."+e,s="end."+r,o;return function(){var l=Se(this,t),c=l.on,u=l.value[r]==null?o||(o=wd(e)):void 0;(c!==n||a!==u)&&(i=(n=c).copy()).on(s,a=u),l.on=i}}function Ey(t,e,n){var i=(t+="")=="transform"?hd:_d;return e==null?this.styleTween(t,Ty(t,i)).on("end.style."+t,wd(t)):typeof e=="function"?this.styleTween(t,Ry(t,i,Jl(this,"style."+t,e))).each(Py(this._id,t)):this.styleTween(t,Iy(t,i,e),n).on("end.style."+t,null)}function $y(t,e,n){return function(i){this.style.setProperty(t,e.call(this,i),n)}}function Ny(t,e,n){var i,a;function r(){var s=e.apply(this,arguments);return s!==a&&(i=(a=s)&&$y(t,s,n)),i}return r._value=e,r}function Yy(t,e,n){var i="style."+(t+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(e==null)return this.tween(i,null);if(typeof e!="function")throw new Error;return this.tween(i,Ny(t,e,n??""))}function zy(t){return function(){this.textContent=t}}function Xy(t){return function(){var e=t(this);this.textContent=e??""}}function Hy(t){return this.tween("text",typeof t=="function"?Xy(Jl(this,"text",t)):zy(t==null?"":t+""))}function Gy(t){return function(e){this.textContent=t.call(this,e)}}function Oy(t){var e,n;function i(){var a=t.apply(this,arguments);return a!==n&&(e=(n=a)&&Gy(a)),e}return i._value=t,i}function Uy(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,Oy(t))}function By(){for(var t=this._name,e=this._id,n=kd(),i=this._groups,a=i.length,r=0;r<a;++r)for(var s=i[r],o=s.length,l,c=0;c<o;++c)if(l=s[c]){var u=ae(l,e);xs(l,t,n,c,s,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new de(i,this._parents,t,n)}function Fy(){var t,e,n=this,i=n._id,a=n.size();return new Promise(function(r,s){var o={value:s},l={value:function(){--a===0&&r()}};n.each(function(){var c=Se(this,i),u=c.on;u!==t&&(e=(t=u).copy(),e._.cancel.push(o),e._.interrupt.push(o),e._.end.push(l)),c.on=e})})}var Wy=0;function de(t,e,n,i){this._groups=t,this._parents=e,this._name=n,this._id=i}function Md(t){return vn().transition(t)}function kd(){return++Wy}var An=vn.prototype;de.prototype=Md.prototype={constructor:de,select:Ay,selectAll:Dy,filter:vy,merge:xy,selection:Cy,transition:By,call:An.call,nodes:An.nodes,node:An.node,size:An.size,empty:An.empty,each:An.each,on:My,attr:ry,attrTween:uy,style:Ey,styleTween:Yy,text:Hy,textTween:Uy,remove:Sy,tween:Jb,delay:dy,duration:my,ease:yy,end:Fy};function Vy(t){return+t}function qy(t){return t*t}function Zy(t){return t*(2-t)}function wu(t){return((t*=2)<=1?t*t:--t*(2-t)+1)/2}function Ky(t){return t*t*t}function Qy(t){return--t*t*t+1}function Qo(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var jl=3,Jy=function t(e){e=+e;function n(i){return Math.pow(i,e)}return n.exponent=t,n}(jl),jy=function t(e){e=+e;function n(i){return 1-Math.pow(1-i,e)}return n.exponent=t,n}(jl),Mu=function t(e){e=+e;function n(i){return((i*=2)<=1?Math.pow(i,e):2-Math.pow(2-i,e))/2}return n.exponent=t,n}(jl),Sd=Math.PI,Ad=Sd/2;function tv(t){return+t==1?1:1-Math.cos(t*Ad)}function ev(t){return Math.sin(t*Ad)}function ku(t){return(1-Math.cos(Sd*t))/2}function ze(t){return(Math.pow(2,-10*t)-.0009765625)*1.0009775171065494}function nv(t){return ze(1-+t)}function iv(t){return 1-ze(t)}function Su(t){return((t*=2)<=1?ze(1-t):2-ze(t-1))/2}function av(t){return 1-Math.sqrt(1-t*t)}function rv(t){return Math.sqrt(1- --t*t)}function Au(t){return((t*=2)<=1?1-Math.sqrt(1-t*t):Math.sqrt(1-(t-=2)*t)+1)/2}var Jo=4/11,sv=6/11,ov=8/11,lv=3/4,cv=9/11,uv=10/11,hv=15/16,fv=21/22,dv=63/64,Ma=1/Jo/Jo;function pv(t){return 1-Zi(1-t)}function Zi(t){return(t=+t)<Jo?Ma*t*t:t<ov?Ma*(t-=sv)*t+lv:t<uv?Ma*(t-=cv)*t+hv:Ma*(t-=fv)*t+dv}function gv(t){return((t*=2)<=1?1-Zi(1-t):Zi(t-1)+1)/2}var tc=1.70158,mv=function t(e){e=+e;function n(i){return(i=+i)*i*(e*(i-1)+i)}return n.overshoot=t,n}(tc),bv=function t(e){e=+e;function n(i){return--i*i*((i+1)*e+i)+1}return n.overshoot=t,n}(tc),Du=function t(e){e=+e;function n(i){return((i*=2)<1?i*i*((e+1)*i-e):(i-=2)*i*((e+1)*i+e)+2)/2}return n.overshoot=t,n}(tc),Fn=2*Math.PI,ec=1,nc=.3,yv=function t(e,n){var i=Math.asin(1/(e=Math.max(1,e)))*(n/=Fn);function a(r){return e*ze(- --r)*Math.sin((i-r)/n)}return a.amplitude=function(r){return t(r,n*Fn)},a.period=function(r){return t(e,r)},a}(ec,nc),Wn=function t(e,n){var i=Math.asin(1/(e=Math.max(1,e)))*(n/=Fn);function a(r){return 1-e*ze(r=+r)*Math.sin((r+i)/n)}return a.amplitude=function(r){return t(r,n*Fn)},a.period=function(r){return t(e,r)},a}(ec,nc),vv=function t(e,n){var i=Math.asin(1/(e=Math.max(1,e)))*(n/=Fn);function a(r){return((r=r*2-1)<0?e*ze(-r)*Math.sin((i-r)/n):2-e*ze(r)*Math.sin((i+r)/n))/2}return a.amplitude=function(r){return t(r,n*Fn)},a.period=function(r){return t(e,r)},a}(ec,nc),jo={time:null,delay:0,duration:250,ease:Qo};function xv(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))return jo.time=ei(),jo;return n}function _v(t){var e,n;t instanceof de?(e=t._id,t=t._name):(e=kd(),(n=jo).time=ei(),t=t==null?null:t+"");for(var i=this._groups,a=i.length,r=0;r<a;++r)for(var s=i[r],o=s.length,l,c=0;c<o;++c)(l=s[c])&&xs(l,t,e,c,s,n||xv(l,e));return new de(i,this._parents,t,e)}vn.prototype.interrupt=Zb;vn.prototype.transition=_v;var wv=[null];function Mv(t,e){var n=t.__transition,i,a;if(n){e=e==null?null:e+"";for(a in n)if((i=n[a]).state>qo&&i.name===e)return new de([[t]],wv,e,+a)}return null}function to(t){return function(){return t}}function kv(t,e,n){this.target=t,this.type=e,this.selection=n}function Lu(){w.stopImmediatePropagation()}function eo(){w.preventDefault(),w.stopImmediatePropagation()}var Cu={name:"drag"},no={name:"space"},Dn={name:"handle"},Ln={name:"center"};function Tu(t){return[+t[0],+t[1]]}function tl(t){return[Tu(t[0]),Tu(t[1])]}function Sv(t){return function(e){return Ui(e,w.touches,t)}}var er={name:"x",handles:["w","e"].map(Ki),input:function(t,e){return t==null?null:[[+t[0],e[0][1]],[+t[1],e[1][1]]]},output:function(t){return t&&[t[0][0],t[1][0]]}},nr={name:"y",handles:["n","s"].map(Ki),input:function(t,e){return t==null?null:[[e[0][0],+t[0]],[e[1][0],+t[1]]]},output:function(t){return t&&[t[0][1],t[1][1]]}},Av={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(Ki),input:function(t){return t==null?null:tl(t)},output:function(t){return t}},ye={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Iu={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},Ru={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},Dv={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},Lv={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function Ki(t){return{type:t}}function Cv(){return!w.ctrlKey&&!w.button}function Tv(){var t=this.ownerSVGElement||this;return t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]}function Iv(){return navigator.maxTouchPoints||"ontouchstart"in this}function io(t){for(;!t.__brush;)if(!(t=t.parentNode))return;return t.__brush}function Rv(t){return t[0][0]===t[1][0]||t[0][1]===t[1][1]}function Pv(t){var e=t.__brush;return e?e.dim.output(e.selection):null}function Ev(){return ic(er)}function $v(){return ic(nr)}function Nv(){return ic(Av)}function ic(t){var e=Tv,n=Cv,i=Iv,a=!0,r=yn("start","brush","end"),s=6,o;function l(m){var b=m.property("__brush",p).selectAll(".overlay").data([Ki("overlay")]);b.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",ye.overlay).merge(b).each(function(){var y=io(this).extent;W(this).attr("x",y[0][0]).attr("y",y[0][1]).attr("width",y[1][0]-y[0][0]).attr("height",y[1][1]-y[0][1])}),m.selectAll(".selection").data([Ki("selection")]).enter().append("rect").attr("class","selection").attr("cursor",ye.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var v=m.selectAll(".handle").data(t.handles,function(y){return y.type});v.exit().remove(),v.enter().append("rect").attr("class",function(y){return"handle handle--"+y.type}).attr("cursor",function(y){return ye[y.type]}),m.each(c).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",h).filter(i).on("touchstart.brush",h).on("touchmove.brush",d).on("touchend.brush touchcancel.brush",g).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}l.move=function(m,b){m.selection?m.on("start.brush",function(){u(this,arguments).beforestart().start()}).on("interrupt.brush end.brush",function(){u(this,arguments).end()}).tween("brush",function(){var v=this,y=v.__brush,x=u(v,arguments),M=y.selection,A=t.input(typeof b=="function"?b.apply(this,arguments):b,y.extent),k=ua(M,A);function I(C){y.selection=C===1&&A===null?null:k(C),c.call(v),x.brush()}return M!==null&&A!==null?I:I(1)}):m.each(function(){var v=this,y=arguments,x=v.__brush,M=t.input(typeof b=="function"?b.apply(v,y):b,x.extent),A=u(v,y).beforestart();nn(v),x.selection=M===null?null:M,c.call(v),A.start().brush().end()})},l.clear=function(m){l.move(m,null)};function c(){var m=W(this),b=io(this).selection;b?(m.selectAll(".selection").style("display",null).attr("x",b[0][0]).attr("y",b[0][1]).attr("width",b[1][0]-b[0][0]).attr("height",b[1][1]-b[0][1]),m.selectAll(".handle").style("display",null).attr("x",function(v){return v.type[v.type.length-1]==="e"?b[1][0]-s/2:b[0][0]-s/2}).attr("y",function(v){return v.type[0]==="s"?b[1][1]-s/2:b[0][1]-s/2}).attr("width",function(v){return v.type==="n"||v.type==="s"?b[1][0]-b[0][0]+s:s}).attr("height",function(v){return v.type==="e"||v.type==="w"?b[1][1]-b[0][1]+s:s})):m.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function u(m,b,v){var y=m.__brush.emitter;return y&&(!v||!y.clean)?y:new f(m,b,v)}function f(m,b,v){this.that=m,this.args=b,this.state=m.__brush,this.active=0,this.clean=v}f.prototype={beforestart:function(){return++this.active===1&&(this.state.emitter=this,this.starting=!0),this},start:function(){return this.starting?(this.starting=!1,this.emit("start")):this.emit("brush"),this},brush:function(){return this.emit("brush"),this},end:function(){return--this.active===0&&(delete this.state.emitter,this.emit("end")),this},emit:function(m){Oi(new kv(l,m,t.output(this.state.selection)),r.apply,r,[m,this.that,this.args])}};function h(){if(o&&!w.touches||!n.apply(this,arguments))return;var m=this,b=w.target.__data__.type,v=(a&&w.metaKey?b="overlay":b)==="selection"?Cu:a&&w.altKey?Ln:Dn,y=t===nr?null:Dv[b],x=t===er?null:Lv[b],M=io(m),A=M.extent,k=M.selection,I=A[0][0],C,T,L=A[0][1],_,D,P=A[1][0],S,R,z=A[1][1],N,X,U=0,B=0,rt,et=y&&x&&a&&w.shiftKey,J,ut,Ut=w.touches?Sv(w.changedTouches[0].identifier):tn,Qt=Ut(m),Jt=Qt,$=u(m,arguments,!0).beforestart();b==="overlay"?(k&&(rt=!0),M.selection=k=[[C=t===nr?I:Qt[0],_=t===er?L:Qt[1]],[S=t===nr?P:C,N=t===er?z:_]]):(C=k[0][0],_=k[0][1],S=k[1][0],N=k[1][1]),T=C,D=_,R=S,X=N;var F=W(m).attr("pointer-events","none"),Z=F.selectAll(".overlay").attr("cursor",ye[b]);if(w.touches)$.moved=bt,$.ended=xt;else{var E=W(w.view).on("mousemove.brush",bt,!0).on("mouseup.brush",xt,!0);a&&E.on("keydown.brush",St,!0).on("keyup.brush",be,!0),fs(w.view)}Lu(),nn(m),c.call(m),$.start();function bt(){var At=Ut(m);et&&!J&&!ut&&(Math.abs(At[0]-Jt[0])>Math.abs(At[1]-Jt[1])?ut=!0:J=!0),Jt=At,rt=!0,eo(),j()}function j(){var At;switch(U=Jt[0]-Qt[0],B=Jt[1]-Qt[1],v){case no:case Cu:{y&&(U=Math.max(I-C,Math.min(P-S,U)),T=C+U,R=S+U),x&&(B=Math.max(L-_,Math.min(z-N,B)),D=_+B,X=N+B);break}case Dn:{y<0?(U=Math.max(I-C,Math.min(P-C,U)),T=C+U,R=S):y>0&&(U=Math.max(I-S,Math.min(P-S,U)),T=C,R=S+U),x<0?(B=Math.max(L-_,Math.min(z-_,B)),D=_+B,X=N):x>0&&(B=Math.max(L-N,Math.min(z-N,B)),D=_,X=N+B);break}case Ln:{y&&(T=Math.max(I,Math.min(P,C-U*y)),R=Math.max(I,Math.min(P,S+U*y))),x&&(D=Math.max(L,Math.min(z,_-B*x)),X=Math.max(L,Math.min(z,N+B*x)));break}}R<T&&(y*=-1,At=C,C=S,S=At,At=T,T=R,R=At,b in Iu&&Z.attr("cursor",ye[b=Iu[b]])),X<D&&(x*=-1,At=_,_=N,N=At,At=D,D=X,X=At,b in Ru&&Z.attr("cursor",ye[b=Ru[b]])),M.selection&&(k=M.selection),J&&(T=k[0][0],R=k[1][0]),ut&&(D=k[0][1],X=k[1][1]),(k[0][0]!==T||k[0][1]!==D||k[1][0]!==R||k[1][1]!==X)&&(M.selection=[[T,D],[R,X]],c.call(m),$.brush())}function xt(){if(Lu(),w.touches){if(w.touches.length)return;o&&clearTimeout(o),o=setTimeout(function(){o=null},500)}else ds(w.view,rt),E.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);F.attr("pointer-events","all"),Z.attr("cursor",ye.overlay),M.selection&&(k=M.selection),Rv(k)&&(M.selection=null,c.call(m)),$.end()}function St(){switch(w.keyCode){case 16:{et=y&&x;break}case 18:{v===Dn&&(y&&(S=R-U*y,C=T+U*y),x&&(N=X-B*x,_=D+B*x),v=Ln,j());break}case 32:{(v===Dn||v===Ln)&&(y<0?S=R-U:y>0&&(C=T-U),x<0?N=X-B:x>0&&(_=D-B),v=no,Z.attr("cursor",ye.selection),j());break}default:return}eo()}function be(){switch(w.keyCode){case 16:{et&&(J=ut=et=!1,j());break}case 18:{v===Ln&&(y<0?S=R:y>0&&(C=T),x<0?N=X:x>0&&(_=D),v=Dn,j());break}case 32:{v===no&&(w.altKey?(y&&(S=R-U*y,C=T+U*y),x&&(N=X-B*x,_=D+B*x),v=Ln):(y<0?S=R:y>0&&(C=T),x<0?N=X:x>0&&(_=D),v=Dn),Z.attr("cursor",ye[b]),j());break}default:return}eo()}}function d(){u(this,arguments).moved()}function g(){u(this,arguments).ended()}function p(){var m=this.__brush||{selection:null};return m.extent=tl(e.apply(this,arguments)),m.dim=t,m}return l.extent=function(m){return arguments.length?(e=typeof m=="function"?m:to(tl(m)),l):e},l.filter=function(m){return arguments.length?(n=typeof m=="function"?m:to(!!m),l):n},l.touchable=function(m){return arguments.length?(i=typeof m=="function"?m:to(!!m),l):i},l.handleSize=function(m){return arguments.length?(s=+m,l):s},l.keyModifiers=function(m){return arguments.length?(a=!!m,l):a},l.on=function(){var m=r.on.apply(r,arguments);return m===r?l:m},l}var Pu=Math.cos,Eu=Math.sin,Dd=Math.PI,ka=Dd/2,$u=Dd*2,Nu=Math.max;function Yv(t){return function(e,n){return t(e.source.value+e.target.value,n.source.value+n.target.value)}}function zv(){var t=0,e=null,n=null,i=null;function a(r){var s=r.length,o=[],l=Gt(s),c=[],u=[],f=u.groups=new Array(s),h=new Array(s*s),d,g,p,m,b,v;for(d=0,b=-1;++b<s;){for(g=0,v=-1;++v<s;)g+=r[b][v];o.push(g),c.push(Gt(s)),d+=g}for(e&&l.sort(function(T,L){return e(o[T],o[L])}),n&&c.forEach(function(T,L){T.sort(function(_,D){return n(r[L][_],r[L][D])})}),d=Nu(0,$u-t*s)/d,m=d?t:$u/s,g=0,b=-1;++b<s;){for(p=g,v=-1;++v<s;){var y=l[b],x=c[y][v],M=r[y][x],A=g,k=g+=M*d;h[x*s+y]={index:y,subindex:x,startAngle:A,endAngle:k,value:M}}f[y]={index:y,startAngle:p,endAngle:g,value:o[y]},g+=m}for(b=-1;++b<s;)for(v=b-1;++v<s;){var I=h[v*s+b],C=h[b*s+v];(I.value||C.value)&&u.push(I.value<C.value?{source:C,target:I}:{source:I,target:C})}return i?u.sort(i):u}return a.padAngle=function(r){return arguments.length?(t=Nu(0,r),a):t},a.sortGroups=function(r){return arguments.length?(e=r,a):e},a.sortSubgroups=function(r){return arguments.length?(n=r,a):n},a.sortChords=function(r){return arguments.length?(r==null?i=null:(i=Yv(r))._=r,a):i&&i._},a}var Xv=Array.prototype.slice;function ao(t){return function(){return t}}var el=Math.PI,nl=2*el,Ke=1e-6,Hv=nl-Ke;function il(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function Fe(){return new il}il.prototype=Fe.prototype={constructor:il,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,n,i){this._+="Q"+ +t+","+ +e+","+(this._x1=+n)+","+(this._y1=+i)},bezierCurveTo:function(t,e,n,i,a,r){this._+="C"+ +t+","+ +e+","+ +n+","+ +i+","+(this._x1=+a)+","+(this._y1=+r)},arcTo:function(t,e,n,i,a){t=+t,e=+e,n=+n,i=+i,a=+a;var r=this._x1,s=this._y1,o=n-t,l=i-e,c=r-t,u=s-e,f=c*c+u*u;if(a<0)throw new Error("negative radius: "+a);if(this._x1===null)this._+="M"+(this._x1=t)+","+(this._y1=e);else if(f>Ke)if(!(Math.abs(u*o-l*c)>Ke)||!a)this._+="L"+(this._x1=t)+","+(this._y1=e);else{var h=n-r,d=i-s,g=o*o+l*l,p=h*h+d*d,m=Math.sqrt(g),b=Math.sqrt(f),v=a*Math.tan((el-Math.acos((g+f-p)/(2*m*b)))/2),y=v/b,x=v/m;Math.abs(y-1)>Ke&&(this._+="L"+(t+y*c)+","+(e+y*u)),this._+="A"+a+","+a+",0,0,"+ +(u*h>c*d)+","+(this._x1=t+x*o)+","+(this._y1=e+x*l)}},arc:function(t,e,n,i,a,r){t=+t,e=+e,n=+n,r=!!r;var s=n*Math.cos(i),o=n*Math.sin(i),l=t+s,c=e+o,u=1^r,f=r?i-a:a-i;if(n<0)throw new Error("negative radius: "+n);this._x1===null?this._+="M"+l+","+c:(Math.abs(this._x1-l)>Ke||Math.abs(this._y1-c)>Ke)&&(this._+="L"+l+","+c),n&&(f<0&&(f=f%nl+nl),f>Hv?this._+="A"+n+","+n+",0,1,"+u+","+(t-s)+","+(e-o)+"A"+n+","+n+",0,1,"+u+","+(this._x1=l)+","+(this._y1=c):f>Ke&&(this._+="A"+n+","+n+",0,"+ +(f>=el)+","+u+","+(this._x1=t+n*Math.cos(a))+","+(this._y1=e+n*Math.sin(a))))},rect:function(t,e,n,i){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +n+"v"+ +i+"h"+-n+"Z"},toString:function(){return this._}};function Gv(t){return t.source}function Ov(t){return t.target}function Uv(t){return t.radius}function Bv(t){return t.startAngle}function Fv(t){return t.endAngle}function Wv(){var t=Gv,e=Ov,n=Uv,i=Bv,a=Fv,r=null;function s(){var o,l=Xv.call(arguments),c=t.apply(this,l),u=e.apply(this,l),f=+n.apply(this,(l[0]=c,l)),h=i.apply(this,l)-ka,d=a.apply(this,l)-ka,g=f*Pu(h),p=f*Eu(h),m=+n.apply(this,(l[0]=u,l)),b=i.apply(this,l)-ka,v=a.apply(this,l)-ka;if(r||(r=o=Fe()),r.moveTo(g,p),r.arc(0,0,f,h,d),(h!==b||d!==v)&&(r.quadraticCurveTo(0,0,m*Pu(b),m*Eu(b)),r.arc(0,0,m,b,v)),r.quadraticCurveTo(0,0,g,p),r.closePath(),o)return r=null,o+""||null}return s.radius=function(o){return arguments.length?(n=typeof o=="function"?o:ao(+o),s):n},s.startAngle=function(o){return arguments.length?(i=typeof o=="function"?o:ao(+o),s):i},s.endAngle=function(o){return arguments.length?(a=typeof o=="function"?o:ao(+o),s):a},s.source=function(o){return arguments.length?(t=o,s):t},s.target=function(o){return arguments.length?(e=o,s):e},s.context=function(o){return arguments.length?(r=o??null,s):r},s}var Wt="$";function pr(){}pr.prototype=Me.prototype={constructor:pr,has:function(t){return Wt+t in this},get:function(t){return this[Wt+t]},set:function(t,e){return this[Wt+t]=e,this},remove:function(t){var e=Wt+t;return e in this&&delete this[e]},clear:function(){for(var t in this)t[0]===Wt&&delete this[t]},keys:function(){var t=[];for(var e in this)e[0]===Wt&&t.push(e.slice(1));return t},values:function(){var t=[];for(var e in this)e[0]===Wt&&t.push(this[e]);return t},entries:function(){var t=[];for(var e in this)e[0]===Wt&&t.push({key:e.slice(1),value:this[e]});return t},size:function(){var t=0;for(var e in this)e[0]===Wt&&++t;return t},empty:function(){for(var t in this)if(t[0]===Wt)return!1;return!0},each:function(t){for(var e in this)e[0]===Wt&&t(this[e],e.slice(1),this)}};function Me(t,e){var n=new pr;if(t instanceof pr)t.each(function(o,l){n.set(l,o)});else if(Array.isArray(t)){var i=-1,a=t.length,r;if(e==null)for(;++i<a;)n.set(i,t[i]);else for(;++i<a;)n.set(e(r=t[i],i,t),r)}else if(t)for(var s in t)n.set(s,t[s]);return n}function Vv(){var t=[],e=[],n,i,a;function r(o,l,c,u){if(l>=t.length)return n!=null&&o.sort(n),i!=null?i(o):o;for(var f=-1,h=o.length,d=t[l++],g,p,m=Me(),b,v=c();++f<h;)(b=m.get(g=d(p=o[f])+""))?b.push(p):m.set(g,[p]);return m.each(function(y,x){u(v,x,r(y,l,c,u))}),v}function s(o,l){if(++l>t.length)return o;var c,u=e[l-1];return i!=null&&l>=t.length?c=o.entries():(c=[],o.each(function(f,h){c.push({key:h,values:s(f,l)})})),u!=null?c.sort(function(f,h){return u(f.key,h.key)}):c}return a={object:function(o){return r(o,0,qv,Zv)},map:function(o){return r(o,0,Yu,zu)},entries:function(o){return s(r(o,0,Yu,zu),0)},key:function(o){return t.push(o),a},sortKeys:function(o){return e[t.length-1]=o,a},sortValues:function(o){return n=o,a},rollup:function(o){return i=o,a}}}function qv(){return{}}function Zv(t,e,n){t[e]=n}function Yu(){return Me()}function zu(t,e,n){t.set(e,n)}function gr(){}var qe=Me.prototype;gr.prototype=Ld.prototype={constructor:gr,has:qe.has,add:function(t){return t+="",this[Wt+t]=t,this},remove:qe.remove,clear:qe.clear,values:qe.keys,size:qe.size,empty:qe.empty,each:qe.each};function Ld(t,e){var n=new gr;if(t instanceof gr)t.each(function(r){n.add(r)});else if(t){var i=-1,a=t.length;if(e==null)for(;++i<a;)n.add(t[i]);else for(;++i<a;)n.add(e(t[i],i,t))}return n}function Kv(t){var e=[];for(var n in t)e.push(n);return e}function Qv(t){var e=[];for(var n in t)e.push(t[n]);return e}function Jv(t){var e=[];for(var n in t)e.push({key:n,value:t[n]});return e}var jv=Array.prototype,Cd=jv.slice;function t2(t,e){return t-e}function e2(t){for(var e=0,n=t.length,i=t[n-1][1]*t[0][0]-t[n-1][0]*t[0][1];++e<n;)i+=t[e-1][1]*t[e][0]-t[e-1][0]*t[e][1];return i}function Ce(t){return function(){return t}}function n2(t,e){for(var n=-1,i=e.length,a;++n<i;)if(a=i2(t,e[n]))return a;return 0}function i2(t,e){for(var n=e[0],i=e[1],a=-1,r=0,s=t.length,o=s-1;r<s;o=r++){var l=t[r],c=l[0],u=l[1],f=t[o],h=f[0],d=f[1];if(a2(l,f,e))return 0;u>i!=d>i&&n<(h-c)*(i-u)/(d-u)+c&&(a=-a)}return a}function a2(t,e,n){var i;return r2(t,e,n)&&s2(t[i=+(t[0]===e[0])],n[i],e[i])}function r2(t,e,n){return(e[0]-t[0])*(n[1]-t[1])===(n[0]-t[0])*(e[1]-t[1])}function s2(t,e,n){return t<=e&&e<=n||n<=e&&e<=t}function o2(){}var ve=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function Td(){var t=1,e=1,n=zl,i=l;function a(c){var u=n(c);if(Array.isArray(u))u=u.slice().sort(t2);else{var f=Nl(c),h=f[0],d=f[1];u=sn(h,d,u),u=Gt(Math.floor(h/u)*u,Math.floor(d/u)*u,u)}return u.map(function(g){return r(c,g)})}function r(c,u){var f=[],h=[];return s(c,u,function(d){i(d,c,u),e2(d)>0?f.push([d]):h.push(d)}),h.forEach(function(d){for(var g=0,p=f.length,m;g<p;++g)if(n2((m=f[g])[0],d)!==-1){m.push(d);return}}),{type:"MultiPolygon",value:u,coordinates:f}}function s(c,u,f){var h=new Array,d=new Array,g,p,m,b,v,y;for(g=p=-1,b=c[0]>=u,ve[b<<1].forEach(x);++g<t-1;)m=b,b=c[g+1]>=u,ve[m|b<<1].forEach(x);for(ve[b<<0].forEach(x);++p<e-1;){for(g=-1,b=c[p*t+t]>=u,v=c[p*t]>=u,ve[b<<1|v<<2].forEach(x);++g<t-1;)m=b,b=c[p*t+t+g+1]>=u,y=v,v=c[p*t+g+1]>=u,ve[m|b<<1|v<<2|y<<3].forEach(x);ve[b|v<<3].forEach(x)}for(g=-1,v=c[p*t]>=u,ve[v<<2].forEach(x);++g<t-1;)y=v,v=c[p*t+g+1]>=u,ve[v<<2|y<<3].forEach(x);ve[v<<3].forEach(x);function x(M){var A=[M[0][0]+g,M[0][1]+p],k=[M[1][0]+g,M[1][1]+p],I=o(A),C=o(k),T,L;(T=d[I])?(L=h[C])?(delete d[T.end],delete h[L.start],T===L?(T.ring.push(k),f(T.ring)):h[T.start]=d[L.end]={start:T.start,end:L.end,ring:T.ring.concat(L.ring)}):(delete d[T.end],T.ring.push(k),d[T.end=C]=T):(T=h[C])?(L=d[I])?(delete h[T.start],delete d[L.end],T===L?(T.ring.push(k),f(T.ring)):h[L.start]=d[T.end]={start:L.start,end:T.end,ring:L.ring.concat(T.ring)}):(delete h[T.start],T.ring.unshift(A),h[T.start=I]=T):h[I]=d[C]={start:I,end:C,ring:[A,k]}}}function o(c){return c[0]*2+c[1]*(t+1)*4}function l(c,u,f){c.forEach(function(h){var d=h[0],g=h[1],p=d|0,m=g|0,b,v=u[m*t+p];d>0&&d<t&&p===d&&(b=u[m*t+p-1],h[0]=d+(f-b)/(v-b)-.5),g>0&&g<e&&m===g&&(b=u[(m-1)*t+p],h[1]=g+(f-b)/(v-b)-.5)})}return a.contour=r,a.size=function(c){if(!arguments.length)return[t,e];var u=Math.ceil(c[0]),f=Math.ceil(c[1]);if(!(u>0)||!(f>0))throw new Error("invalid size");return t=u,e=f,a},a.thresholds=function(c){return arguments.length?(n=typeof c=="function"?c:Array.isArray(c)?Ce(Cd.call(c)):Ce(c),a):n},a.smooth=function(c){return arguments.length?(i=c?l:o2,a):i===l},a}function ro(t,e,n){for(var i=t.width,a=t.height,r=(n<<1)+1,s=0;s<a;++s)for(var o=0,l=0;o<i+n;++o)o<i&&(l+=t.data[o+s*i]),o>=n&&(o>=r&&(l-=t.data[o-r+s*i]),e.data[o-n+s*i]=l/Math.min(o+1,i-1+r-o,r))}function so(t,e,n){for(var i=t.width,a=t.height,r=(n<<1)+1,s=0;s<i;++s)for(var o=0,l=0;o<a+n;++o)o<a&&(l+=t.data[s+o*i]),o>=n&&(o>=r&&(l-=t.data[s+(o-r)*i]),e.data[s+(o-n)*i]=l/Math.min(o+1,a-1+r-o,r))}function l2(t){return t[0]}function c2(t){return t[1]}function u2(){return 1}function h2(){var t=l2,e=c2,n=u2,i=960,a=500,r=20,s=2,o=r*3,l=i+o*2>>s,c=a+o*2>>s,u=Ce(20);function f(b){var v=new Float32Array(l*c),y=new Float32Array(l*c);b.forEach(function(A,k,I){var C=+t(A,k,I)+o>>s,T=+e(A,k,I)+o>>s,L=+n(A,k,I);C>=0&&C<l&&T>=0&&T<c&&(v[C+T*l]+=L)}),ro({width:l,height:c,data:v},{width:l,height:c,data:y},r>>s),so({width:l,height:c,data:y},{width:l,height:c,data:v},r>>s),ro({width:l,height:c,data:v},{width:l,height:c,data:y},r>>s),so({width:l,height:c,data:y},{width:l,height:c,data:v},r>>s),ro({width:l,height:c,data:v},{width:l,height:c,data:y},r>>s),so({width:l,height:c,data:y},{width:l,height:c,data:v},r>>s);var x=u(v);if(!Array.isArray(x)){var M=Df(v);x=sn(0,M,x),x=Gt(0,Math.floor(M/x)*x,x),x.shift()}return Td().thresholds(x).size([l,c])(v).map(h)}function h(b){return b.value*=Math.pow(2,-2*s),b.coordinates.forEach(d),b}function d(b){b.forEach(g)}function g(b){b.forEach(p)}function p(b){b[0]=b[0]*Math.pow(2,s)-o,b[1]=b[1]*Math.pow(2,s)-o}function m(){return o=r*3,l=i+o*2>>s,c=a+o*2>>s,f}return f.x=function(b){return arguments.length?(t=typeof b=="function"?b:Ce(+b),f):t},f.y=function(b){return arguments.length?(e=typeof b=="function"?b:Ce(+b),f):e},f.weight=function(b){return arguments.length?(n=typeof b=="function"?b:Ce(+b),f):n},f.size=function(b){if(!arguments.length)return[i,a];var v=Math.ceil(b[0]),y=Math.ceil(b[1]);if(!(v>=0)&&!(v>=0))throw new Error("invalid size");return i=v,a=y,m()},f.cellSize=function(b){if(!arguments.length)return 1<<s;if(!((b=+b)>=1))throw new Error("invalid cell size");return s=Math.floor(Math.log(b)/Math.LN2),m()},f.thresholds=function(b){return arguments.length?(u=typeof b=="function"?b:Array.isArray(b)?Ce(Cd.call(b)):Ce(b),f):u},f.bandwidth=function(b){if(!arguments.length)return Math.sqrt(r*(r+1));if(!((b=+b)>=0))throw new Error("invalid bandwidth");return r=Math.round((Math.sqrt(4*b*b+1)-1)/2),m()},f}var Xu={},oo={},lo=34,ui=10,co=13;function Id(t){return new Function("d","return {"+t.map(function(e,n){return JSON.stringify(e)+": d["+n+'] || ""'}).join(",")+"}")}function f2(t,e){var n=Id(t);return function(i,a){return e(n(i),a,t)}}function Hu(t){var e=Object.create(null),n=[];return t.forEach(function(i){for(var a in i)a in e||n.push(e[a]=a)}),n}function Nt(t,e){var n=t+"",i=n.length;return i<e?new Array(e-i+1).join(0)+n:n}function d2(t){return t<0?"-"+Nt(-t,6):t>9999?"+"+Nt(t,6):Nt(t,4)}function p2(t){var e=t.getUTCHours(),n=t.getUTCMinutes(),i=t.getUTCSeconds(),a=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":d2(t.getUTCFullYear())+"-"+Nt(t.getUTCMonth()+1,2)+"-"+Nt(t.getUTCDate(),2)+(a?"T"+Nt(e,2)+":"+Nt(n,2)+":"+Nt(i,2)+"."+Nt(a,3)+"Z":i?"T"+Nt(e,2)+":"+Nt(n,2)+":"+Nt(i,2)+"Z":n||e?"T"+Nt(e,2)+":"+Nt(n,2)+"Z":"")}function _s(t){var e=new RegExp('["'+t+`
\r]`),n=t.charCodeAt(0);function i(f,h){var d,g,p=a(f,function(m,b){if(d)return d(m,b-1);g=m,d=h?f2(m,h):Id(m)});return p.columns=g||[],p}function a(f,h){var d=[],g=f.length,p=0,m=0,b,v=g<=0,y=!1;f.charCodeAt(g-1)===ui&&--g,f.charCodeAt(g-1)===co&&--g;function x(){if(v)return oo;if(y)return y=!1,Xu;var A,k=p,I;if(f.charCodeAt(k)===lo){for(;p++<g&&f.charCodeAt(p)!==lo||f.charCodeAt(++p)===lo;);return(A=p)>=g?v=!0:(I=f.charCodeAt(p++))===ui?y=!0:I===co&&(y=!0,f.charCodeAt(p)===ui&&++p),f.slice(k+1,A-1).replace(/""/g,'"')}for(;p<g;){if((I=f.charCodeAt(A=p++))===ui)y=!0;else if(I===co)y=!0,f.charCodeAt(p)===ui&&++p;else if(I!==n)continue;return f.slice(k,A)}return v=!0,f.slice(k,g)}for(;(b=x())!==oo;){for(var M=[];b!==Xu&&b!==oo;)M.push(b),b=x();h&&(M=h(M,m++))==null||d.push(M)}return d}function r(f,h){return f.map(function(d){return h.map(function(g){return u(d[g])}).join(t)})}function s(f,h){return h==null&&(h=Hu(f)),[h.map(u).join(t)].concat(r(f,h)).join(`
`)}function o(f,h){return h==null&&(h=Hu(f)),r(f,h).join(`
`)}function l(f){return f.map(c).join(`
`)}function c(f){return f.map(u).join(t)}function u(f){return f==null?"":f instanceof Date?p2(f):e.test(f+="")?'"'+f.replace(/"/g,'""')+'"':f}return{parse:i,parseRows:a,format:s,formatBody:o,formatRows:l,formatRow:c,formatValue:u}}var xn=_s(","),Rd=xn.parse,g2=xn.parseRows,m2=xn.format,b2=xn.formatBody,y2=xn.formatRows,v2=xn.formatRow,x2=xn.formatValue,_n=_s("	"),Pd=_n.parse,_2=_n.parseRows,w2=_n.format,M2=_n.formatBody,k2=_n.formatRows,S2=_n.formatRow,A2=_n.formatValue;function D2(t){for(var e in t){var n=t[e].trim(),i,a;if(!n)n=null;else if(n==="true")n=!0;else if(n==="false")n=!1;else if(n==="NaN")n=NaN;else if(!isNaN(i=+n))n=i;else if(a=n.match(/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/))L2&&a[4]&&!a[7]&&(n=n.replace(/-/g,"/").replace(/T/," ")),n=new Date(n);else continue;t[e]=n}return t}var L2=new Date("2019-01-01T00:00").getHours()||new Date("2019-07-01T00:00").getHours();function C2(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.blob()}function T2(t,e){return fetch(t,e).then(C2)}function I2(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.arrayBuffer()}function R2(t,e){return fetch(t,e).then(I2)}function P2(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.text()}function ws(t,e){return fetch(t,e).then(P2)}function Ed(t){return function(e,n,i){return arguments.length===2&&typeof n=="function"&&(i=n,n=void 0),ws(e,n).then(function(a){return t(a,i)})}}function E2(t,e,n,i){arguments.length===3&&typeof n=="function"&&(i=n,n=void 0);var a=_s(t);return ws(e,n).then(function(r){return a.parse(r,i)})}var $2=Ed(Rd),N2=Ed(Pd);function Y2(t,e){return new Promise(function(n,i){var a=new Image;for(var r in e)a[r]=e[r];a.onerror=i,a.onload=function(){n(a)},a.src=t})}function z2(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);if(!(t.status===204||t.status===205))return t.json()}function X2(t,e){return fetch(t,e).then(z2)}function ac(t){return function(e,n){return ws(e,n).then(function(i){return new DOMParser().parseFromString(i,t)})}}const H2=ac("application/xml");var G2=ac("text/html"),O2=ac("image/svg+xml");function U2(t,e){var n;t==null&&(t=0),e==null&&(e=0);function i(){var a,r=n.length,s,o=0,l=0;for(a=0;a<r;++a)s=n[a],o+=s.x,l+=s.y;for(o=o/r-t,l=l/r-e,a=0;a<r;++a)s=n[a],s.x-=o,s.y-=l}return i.initialize=function(a){n=a},i.x=function(a){return arguments.length?(t=+a,i):t},i.y=function(a){return arguments.length?(e=+a,i):e},i}function dt(t){return function(){return t}}function Re(){return(Math.random()-.5)*1e-6}function B2(t){var e=+this._x.call(null,t),n=+this._y.call(null,t);return $d(this.cover(e,n),e,n,t)}function $d(t,e,n,i){if(isNaN(e)||isNaN(n))return t;var a,r=t._root,s={data:i},o=t._x0,l=t._y0,c=t._x1,u=t._y1,f,h,d,g,p,m,b,v;if(!r)return t._root=s,t;for(;r.length;)if((p=e>=(f=(o+c)/2))?o=f:c=f,(m=n>=(h=(l+u)/2))?l=h:u=h,a=r,!(r=r[b=m<<1|p]))return a[b]=s,t;if(d=+t._x.call(null,r.data),g=+t._y.call(null,r.data),e===d&&n===g)return s.next=r,a?a[b]=s:t._root=s,t;do a=a?a[b]=new Array(4):t._root=new Array(4),(p=e>=(f=(o+c)/2))?o=f:c=f,(m=n>=(h=(l+u)/2))?l=h:u=h;while((b=m<<1|p)===(v=(g>=h)<<1|d>=f));return a[v]=r,a[b]=s,t}function F2(t){var e,n,i=t.length,a,r,s=new Array(i),o=new Array(i),l=1/0,c=1/0,u=-1/0,f=-1/0;for(n=0;n<i;++n)isNaN(a=+this._x.call(null,e=t[n]))||isNaN(r=+this._y.call(null,e))||(s[n]=a,o[n]=r,a<l&&(l=a),a>u&&(u=a),r<c&&(c=r),r>f&&(f=r));if(l>u||c>f)return this;for(this.cover(l,c).cover(u,f),n=0;n<i;++n)$d(this,s[n],o[n],t[n]);return this}function W2(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,i=this._y0,a=this._x1,r=this._y1;if(isNaN(n))a=(n=Math.floor(t))+1,r=(i=Math.floor(e))+1;else{for(var s=a-n,o=this._root,l,c;n>t||t>=a||i>e||e>=r;)switch(c=(e<i)<<1|t<n,l=new Array(4),l[c]=o,o=l,s*=2,c){case 0:a=n+s,r=i+s;break;case 1:n=a-s,r=i+s;break;case 2:a=n+s,i=r-s;break;case 3:n=a-s,i=r-s;break}this._root&&this._root.length&&(this._root=o)}return this._x0=n,this._y0=i,this._x1=a,this._y1=r,this}function V2(){var t=[];return this.visit(function(e){if(!e.length)do t.push(e.data);while(e=e.next)}),t}function q2(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function Tt(t,e,n,i,a){this.node=t,this.x0=e,this.y0=n,this.x1=i,this.y1=a}function Z2(t,e,n){var i,a=this._x0,r=this._y0,s,o,l,c,u=this._x1,f=this._y1,h=[],d=this._root,g,p;for(d&&h.push(new Tt(d,a,r,u,f)),n==null?n=1/0:(a=t-n,r=e-n,u=t+n,f=e+n,n*=n);g=h.pop();)if(!(!(d=g.node)||(s=g.x0)>u||(o=g.y0)>f||(l=g.x1)<a||(c=g.y1)<r))if(d.length){var m=(s+l)/2,b=(o+c)/2;h.push(new Tt(d[3],m,b,l,c),new Tt(d[2],s,b,m,c),new Tt(d[1],m,o,l,b),new Tt(d[0],s,o,m,b)),(p=(e>=b)<<1|t>=m)&&(g=h[h.length-1],h[h.length-1]=h[h.length-1-p],h[h.length-1-p]=g)}else{var v=t-+this._x.call(null,d.data),y=e-+this._y.call(null,d.data),x=v*v+y*y;if(x<n){var M=Math.sqrt(n=x);a=t-M,r=e-M,u=t+M,f=e+M,i=d.data}}return i}function K2(t){if(isNaN(u=+this._x.call(null,t))||isNaN(f=+this._y.call(null,t)))return this;var e,n=this._root,i,a,r,s=this._x0,o=this._y0,l=this._x1,c=this._y1,u,f,h,d,g,p,m,b;if(!n)return this;if(n.length)for(;;){if((g=u>=(h=(s+l)/2))?s=h:l=h,(p=f>=(d=(o+c)/2))?o=d:c=d,e=n,!(n=n[m=p<<1|g]))return this;if(!n.length)break;(e[m+1&3]||e[m+2&3]||e[m+3&3])&&(i=e,b=m)}for(;n.data!==t;)if(a=n,!(n=n.next))return this;return(r=n.next)&&delete n.next,a?(r?a.next=r:delete a.next,this):e?(r?e[m]=r:delete e[m],(n=e[0]||e[1]||e[2]||e[3])&&n===(e[3]||e[2]||e[1]||e[0])&&!n.length&&(i?i[b]=n:this._root=n),this):(this._root=r,this)}function Q2(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this}function J2(){return this._root}function j2(){var t=0;return this.visit(function(e){if(!e.length)do++t;while(e=e.next)}),t}function tx(t){var e=[],n,i=this._root,a,r,s,o,l;for(i&&e.push(new Tt(i,this._x0,this._y0,this._x1,this._y1));n=e.pop();)if(!t(i=n.node,r=n.x0,s=n.y0,o=n.x1,l=n.y1)&&i.length){var c=(r+o)/2,u=(s+l)/2;(a=i[3])&&e.push(new Tt(a,c,u,o,l)),(a=i[2])&&e.push(new Tt(a,r,u,c,l)),(a=i[1])&&e.push(new Tt(a,c,s,o,u)),(a=i[0])&&e.push(new Tt(a,r,s,c,u))}return this}function ex(t){var e=[],n=[],i;for(this._root&&e.push(new Tt(this._root,this._x0,this._y0,this._x1,this._y1));i=e.pop();){var a=i.node;if(a.length){var r,s=i.x0,o=i.y0,l=i.x1,c=i.y1,u=(s+l)/2,f=(o+c)/2;(r=a[0])&&e.push(new Tt(r,s,o,u,f)),(r=a[1])&&e.push(new Tt(r,u,o,l,f)),(r=a[2])&&e.push(new Tt(r,s,f,u,c)),(r=a[3])&&e.push(new Tt(r,u,f,l,c))}n.push(i)}for(;i=n.pop();)t(i.node,i.x0,i.y0,i.x1,i.y1);return this}function nx(t){return t[0]}function ix(t){return arguments.length?(this._x=t,this):this._x}function ax(t){return t[1]}function rx(t){return arguments.length?(this._y=t,this):this._y}function Ms(t,e,n){var i=new rc(e??nx,n??ax,NaN,NaN,NaN,NaN);return t==null?i:i.addAll(t)}function rc(t,e,n,i,a,r){this._x=t,this._y=e,this._x0=n,this._y0=i,this._x1=a,this._y1=r,this._root=void 0}function Gu(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}var $t=Ms.prototype=rc.prototype;$t.copy=function(){var t=new rc(this._x,this._y,this._x0,this._y0,this._x1,this._y1),e=this._root,n,i;if(!e)return t;if(!e.length)return t._root=Gu(e),t;for(n=[{source:e,target:t._root=new Array(4)}];e=n.pop();)for(var a=0;a<4;++a)(i=e.source[a])&&(i.length?n.push({source:i,target:e.target[a]=new Array(4)}):e.target[a]=Gu(i));return t};$t.add=B2;$t.addAll=F2;$t.cover=W2;$t.data=V2;$t.extent=q2;$t.find=Z2;$t.remove=K2;$t.removeAll=Q2;$t.root=J2;$t.size=j2;$t.visit=tx;$t.visitAfter=ex;$t.x=ix;$t.y=rx;function sx(t){return t.x+t.vx}function ox(t){return t.y+t.vy}function lx(t){var e,n,i=1,a=1;typeof t!="function"&&(t=dt(t==null?1:+t));function r(){for(var l,c=e.length,u,f,h,d,g,p,m=0;m<a;++m)for(u=Ms(e,sx,ox).visitAfter(s),l=0;l<c;++l)f=e[l],g=n[f.index],p=g*g,h=f.x+f.vx,d=f.y+f.vy,u.visit(b);function b(v,y,x,M,A){var k=v.data,I=v.r,C=g+I;if(k){if(k.index>f.index){var T=h-k.x-k.vx,L=d-k.y-k.vy,_=T*T+L*L;_<C*C&&(T===0&&(T=Re(),_+=T*T),L===0&&(L=Re(),_+=L*L),_=(C-(_=Math.sqrt(_)))/_*i,f.vx+=(T*=_)*(C=(I*=I)/(p+I)),f.vy+=(L*=_)*C,k.vx-=T*(C=1-C),k.vy-=L*C)}return}return y>h+C||M<h-C||x>d+C||A<d-C}}function s(l){if(l.data)return l.r=n[l.data.index];for(var c=l.r=0;c<4;++c)l[c]&&l[c].r>l.r&&(l.r=l[c].r)}function o(){if(e){var l,c=e.length,u;for(n=new Array(c),l=0;l<c;++l)u=e[l],n[u.index]=+t(u,l,e)}}return r.initialize=function(l){e=l,o()},r.iterations=function(l){return arguments.length?(a=+l,r):a},r.strength=function(l){return arguments.length?(i=+l,r):i},r.radius=function(l){return arguments.length?(t=typeof l=="function"?l:dt(+l),o(),r):t},r}function cx(t){return t.index}function Ou(t,e){var n=t.get(e);if(!n)throw new Error("missing: "+e);return n}function ux(t){var e=cx,n=u,i,a=dt(30),r,s,o,l,c=1;t==null&&(t=[]);function u(p){return 1/Math.min(o[p.source.index],o[p.target.index])}function f(p){for(var m=0,b=t.length;m<c;++m)for(var v=0,y,x,M,A,k,I,C;v<b;++v)y=t[v],x=y.source,M=y.target,A=M.x+M.vx-x.x-x.vx||Re(),k=M.y+M.vy-x.y-x.vy||Re(),I=Math.sqrt(A*A+k*k),I=(I-r[v])/I*p*i[v],A*=I,k*=I,M.vx-=A*(C=l[v]),M.vy-=k*C,x.vx+=A*(C=1-C),x.vy+=k*C}function h(){if(s){var p,m=s.length,b=t.length,v=Me(s,e),y;for(p=0,o=new Array(m);p<b;++p)y=t[p],y.index=p,typeof y.source!="object"&&(y.source=Ou(v,y.source)),typeof y.target!="object"&&(y.target=Ou(v,y.target)),o[y.source.index]=(o[y.source.index]||0)+1,o[y.target.index]=(o[y.target.index]||0)+1;for(p=0,l=new Array(b);p<b;++p)y=t[p],l[p]=o[y.source.index]/(o[y.source.index]+o[y.target.index]);i=new Array(b),d(),r=new Array(b),g()}}function d(){if(s)for(var p=0,m=t.length;p<m;++p)i[p]=+n(t[p],p,t)}function g(){if(s)for(var p=0,m=t.length;p<m;++p)r[p]=+a(t[p],p,t)}return f.initialize=function(p){s=p,h()},f.links=function(p){return arguments.length?(t=p,h(),f):t},f.id=function(p){return arguments.length?(e=p,f):e},f.iterations=function(p){return arguments.length?(c=+p,f):c},f.strength=function(p){return arguments.length?(n=typeof p=="function"?p:dt(+p),d(),f):n},f.distance=function(p){return arguments.length?(a=typeof p=="function"?p:dt(+p),g(),f):a},f}function hx(t){return t.x}function fx(t){return t.y}var dx=10,px=Math.PI*(3-Math.sqrt(5));function gx(t){var e,n=1,i=.001,a=1-Math.pow(i,1/300),r=0,s=.6,o=Me(),l=vs(u),c=yn("tick","end");t==null&&(t=[]);function u(){f(),c.call("tick",e),n<i&&(l.stop(),c.call("end",e))}function f(g){var p,m=t.length,b;g===void 0&&(g=1);for(var v=0;v<g;++v)for(n+=(r-n)*a,o.each(function(y){y(n)}),p=0;p<m;++p)b=t[p],b.fx==null?b.x+=b.vx*=s:(b.x=b.fx,b.vx=0),b.fy==null?b.y+=b.vy*=s:(b.y=b.fy,b.vy=0);return e}function h(){for(var g=0,p=t.length,m;g<p;++g){if(m=t[g],m.index=g,m.fx!=null&&(m.x=m.fx),m.fy!=null&&(m.y=m.fy),isNaN(m.x)||isNaN(m.y)){var b=dx*Math.sqrt(g),v=g*px;m.x=b*Math.cos(v),m.y=b*Math.sin(v)}(isNaN(m.vx)||isNaN(m.vy))&&(m.vx=m.vy=0)}}function d(g){return g.initialize&&g.initialize(t),g}return h(),e={tick:f,restart:function(){return l.restart(u),e},stop:function(){return l.stop(),e},nodes:function(g){return arguments.length?(t=g,h(),o.each(d),e):t},alpha:function(g){return arguments.length?(n=+g,e):n},alphaMin:function(g){return arguments.length?(i=+g,e):i},alphaDecay:function(g){return arguments.length?(a=+g,e):+a},alphaTarget:function(g){return arguments.length?(r=+g,e):r},velocityDecay:function(g){return arguments.length?(s=1-g,e):1-s},force:function(g,p){return arguments.length>1?(p==null?o.remove(g):o.set(g,d(p)),e):o.get(g)},find:function(g,p,m){var b=0,v=t.length,y,x,M,A,k;for(m==null?m=1/0:m*=m,b=0;b<v;++b)A=t[b],y=g-A.x,x=p-A.y,M=y*y+x*x,M<m&&(k=A,m=M);return k},on:function(g,p){return arguments.length>1?(c.on(g,p),e):c.on(g)}}}function mx(){var t,e,n,i=dt(-30),a,r=1,s=1/0,o=.81;function l(h){var d,g=t.length,p=Ms(t,hx,fx).visitAfter(u);for(n=h,d=0;d<g;++d)e=t[d],p.visit(f)}function c(){if(t){var h,d=t.length,g;for(a=new Array(d),h=0;h<d;++h)g=t[h],a[g.index]=+i(g,h,t)}}function u(h){var d=0,g,p,m=0,b,v,y;if(h.length){for(b=v=y=0;y<4;++y)(g=h[y])&&(p=Math.abs(g.value))&&(d+=g.value,m+=p,b+=p*g.x,v+=p*g.y);h.x=b/m,h.y=v/m}else{g=h,g.x=g.data.x,g.y=g.data.y;do d+=a[g.data.index];while(g=g.next)}h.value=d}function f(h,d,g,p){if(!h.value)return!0;var m=h.x-e.x,b=h.y-e.y,v=p-d,y=m*m+b*b;if(v*v/o<y)return y<s&&(m===0&&(m=Re(),y+=m*m),b===0&&(b=Re(),y+=b*b),y<r&&(y=Math.sqrt(r*y)),e.vx+=m*h.value*n/y,e.vy+=b*h.value*n/y),!0;if(h.length||y>=s)return;(h.data!==e||h.next)&&(m===0&&(m=Re(),y+=m*m),b===0&&(b=Re(),y+=b*b),y<r&&(y=Math.sqrt(r*y)));do h.data!==e&&(v=a[h.data.index]*n/y,e.vx+=m*v,e.vy+=b*v);while(h=h.next)}return l.initialize=function(h){t=h,c()},l.strength=function(h){return arguments.length?(i=typeof h=="function"?h:dt(+h),c(),l):i},l.distanceMin=function(h){return arguments.length?(r=h*h,l):Math.sqrt(r)},l.distanceMax=function(h){return arguments.length?(s=h*h,l):Math.sqrt(s)},l.theta=function(h){return arguments.length?(o=h*h,l):Math.sqrt(o)},l}function bx(t,e,n){var i,a=dt(.1),r,s;typeof t!="function"&&(t=dt(+t)),e==null&&(e=0),n==null&&(n=0);function o(c){for(var u=0,f=i.length;u<f;++u){var h=i[u],d=h.x-e||1e-6,g=h.y-n||1e-6,p=Math.sqrt(d*d+g*g),m=(s[u]-p)*r[u]*c/p;h.vx+=d*m,h.vy+=g*m}}function l(){if(i){var c,u=i.length;for(r=new Array(u),s=new Array(u),c=0;c<u;++c)s[c]=+t(i[c],c,i),r[c]=isNaN(s[c])?0:+a(i[c],c,i)}}return o.initialize=function(c){i=c,l()},o.strength=function(c){return arguments.length?(a=typeof c=="function"?c:dt(+c),l(),o):a},o.radius=function(c){return arguments.length?(t=typeof c=="function"?c:dt(+c),l(),o):t},o.x=function(c){return arguments.length?(e=+c,o):e},o.y=function(c){return arguments.length?(n=+c,o):n},o}function yx(t){var e=dt(.1),n,i,a;typeof t!="function"&&(t=dt(t==null?0:+t));function r(o){for(var l=0,c=n.length,u;l<c;++l)u=n[l],u.vx+=(a[l]-u.x)*i[l]*o}function s(){if(n){var o,l=n.length;for(i=new Array(l),a=new Array(l),o=0;o<l;++o)i[o]=isNaN(a[o]=+t(n[o],o,n))?0:+e(n[o],o,n)}}return r.initialize=function(o){n=o,s()},r.strength=function(o){return arguments.length?(e=typeof o=="function"?o:dt(+o),s(),r):e},r.x=function(o){return arguments.length?(t=typeof o=="function"?o:dt(+o),s(),r):t},r}function vx(t){var e=dt(.1),n,i,a;typeof t!="function"&&(t=dt(t==null?0:+t));function r(o){for(var l=0,c=n.length,u;l<c;++l)u=n[l],u.vy+=(a[l]-u.y)*i[l]*o}function s(){if(n){var o,l=n.length;for(i=new Array(l),a=new Array(l),o=0;o<l;++o)i[o]=isNaN(a[o]=+t(n[o],o,n))?0:+e(n[o],o,n)}}return r.initialize=function(o){n=o,s()},r.strength=function(o){return arguments.length?(e=typeof o=="function"?o:dt(+o),s(),r):e},r.y=function(o){return arguments.length?(t=typeof o=="function"?o:dt(+o),s(),r):t},r}function xx(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function mr(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,i=t.slice(0,n);return[i.length>1?i[0]+i.slice(2):i,+t.slice(n+1)]}function Vn(t){return t=mr(Math.abs(t)),t?t[1]:NaN}function _x(t,e){return function(n,i){for(var a=n.length,r=[],s=0,o=t[0],l=0;a>0&&o>0&&(l+o+1>i&&(o=Math.max(1,i-l)),r.push(n.substring(a-=o,a+o)),!((l+=o+1)>i));)o=t[s=(s+1)%t.length];return r.reverse().join(e)}}function wx(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var Mx=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Qi(t){if(!(e=Mx.exec(t)))throw new Error("invalid format: "+t);var e;return new ks({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Qi.prototype=ks.prototype;function ks(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}ks.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function kx(t){t:for(var e=t.length,n=1,i=-1,a;n<e;++n)switch(t[n]){case".":i=a=n;break;case"0":i===0&&(i=n),a=n;break;default:if(!+t[n])break t;i>0&&(i=0);break}return i>0?t.slice(0,i)+t.slice(a+1):t}var Nd;function Sx(t,e){var n=mr(t,e);if(!n)return t+"";var i=n[0],a=n[1],r=a-(Nd=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,s=i.length;return r===s?i:r>s?i+new Array(r-s+1).join("0"):r>0?i.slice(0,r)+"."+i.slice(r):"0."+new Array(1-r).join("0")+mr(t,Math.max(0,e+r-1))[0]}function Uu(t,e){var n=mr(t,e);if(!n)return t+"";var i=n[0],a=n[1];return a<0?"0."+new Array(-a).join("0")+i:i.length>a+1?i.slice(0,a+1)+"."+i.slice(a+1):i+new Array(a-i.length+2).join("0")}const Bu={"%":function(t,e){return(t*100).toFixed(e)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:xx,e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},g:function(t,e){return t.toPrecision(e)},o:function(t){return Math.round(t).toString(8)},p:function(t,e){return Uu(t*100,e)},r:Uu,s:Sx,X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}};function Fu(t){return t}var Wu=Array.prototype.map,Vu=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function Yd(t){var e=t.grouping===void 0||t.thousands===void 0?Fu:_x(Wu.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",i=t.currency===void 0?"":t.currency[1]+"",a=t.decimal===void 0?".":t.decimal+"",r=t.numerals===void 0?Fu:wx(Wu.call(t.numerals,String)),s=t.percent===void 0?"%":t.percent+"",o=t.minus===void 0?"-":t.minus+"",l=t.nan===void 0?"NaN":t.nan+"";function c(f){f=Qi(f);var h=f.fill,d=f.align,g=f.sign,p=f.symbol,m=f.zero,b=f.width,v=f.comma,y=f.precision,x=f.trim,M=f.type;M==="n"?(v=!0,M="g"):Bu[M]||(y===void 0&&(y=12),x=!0,M="g"),(m||h==="0"&&d==="=")&&(m=!0,h="0",d="=");var A=p==="$"?n:p==="#"&&/[boxX]/.test(M)?"0"+M.toLowerCase():"",k=p==="$"?i:/[%p]/.test(M)?s:"",I=Bu[M],C=/[defgprs%]/.test(M);y=y===void 0?6:/[gprs]/.test(M)?Math.max(1,Math.min(21,y)):Math.max(0,Math.min(20,y));function T(L){var _=A,D=k,P,S,R;if(M==="c")D=I(L)+D,L="";else{L=+L;var z=L<0||1/L<0;if(L=isNaN(L)?l:I(Math.abs(L),y),x&&(L=kx(L)),z&&+L==0&&g!=="+"&&(z=!1),_=(z?g==="("?g:o:g==="-"||g==="("?"":g)+_,D=(M==="s"?Vu[8+Nd/3]:"")+D+(z&&g==="("?")":""),C){for(P=-1,S=L.length;++P<S;)if(R=L.charCodeAt(P),48>R||R>57){D=(R===46?a+L.slice(P+1):L.slice(P))+D,L=L.slice(0,P);break}}}v&&!m&&(L=e(L,1/0));var N=_.length+L.length+D.length,X=N<b?new Array(b-N+1).join(h):"";switch(v&&m&&(L=e(X+L,X.length?b-D.length:1/0),X=""),d){case"<":L=_+L+D+X;break;case"=":L=_+X+L+D;break;case"^":L=X.slice(0,N=X.length>>1)+_+L+D+X.slice(N);break;default:L=X+_+L+D;break}return r(L)}return T.toString=function(){return f+""},T}function u(f,h){var d=c((f=Qi(f),f.type="f",f)),g=Math.max(-8,Math.min(8,Math.floor(Vn(h)/3)))*3,p=Math.pow(10,-g),m=Vu[8+g/3];return function(b){return d(p*b)+m}}return{format:c,formatPrefix:u}}var Sa,ha,sc;zd({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"});function zd(t){return Sa=Yd(t),ha=Sa.format,sc=Sa.formatPrefix,Sa}function Xd(t){return Math.max(0,-Vn(Math.abs(t)))}function Hd(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Vn(e)/3)))*3-Vn(Math.abs(t)))}function Gd(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Vn(e)-Vn(t))+1}function We(){return new br}function br(){this.reset()}br.prototype={constructor:br,reset:function(){this.s=this.t=0},add:function(t){qu(Aa,t,this.t),qu(this,Aa.s,this.s),this.s?this.t+=Aa.t:this.s=Aa.t},valueOf:function(){return this.s}};var Aa=new br;function qu(t,e,n){var i=t.s=e+n,a=i-e,r=i-a;t.t=e-r+(n-a)}var G=1e-6,yr=1e-12,q=Math.PI,ct=q/2,vr=q/4,Rt=q*2,it=180/q,O=q/180,Q=Math.abs,ni=Math.atan,Pt=Math.atan2,H=Math.cos,Da=Math.ceil,Od=Math.exp,xr=Math.log,uo=Math.pow,Y=Math.sin,qt=Math.sign||function(t){return t>0?1:t<0?-1:0},ft=Math.sqrt,oc=Math.tan;function Ud(t){return t>1?0:t<-1?q:Math.acos(t)}function Et(t){return t>1?ct:t<-1?-ct:Math.asin(t)}function Zu(t){return(t=Y(t/2))*t}function ot(){}function _r(t,e){t&&Qu.hasOwnProperty(t.type)&&Qu[t.type](t,e)}var Ku={Feature:function(t,e){_r(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,i=-1,a=n.length;++i<a;)_r(n[i].geometry,e)}},Qu={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,i=-1,a=n.length;++i<a;)t=n[i],e.point(t[0],t[1],t[2])},LineString:function(t,e){al(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,i=-1,a=n.length;++i<a;)al(n[i],e,0)},Polygon:function(t,e){Ju(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,i=-1,a=n.length;++i<a;)Ju(n[i],e)},GeometryCollection:function(t,e){for(var n=t.geometries,i=-1,a=n.length;++i<a;)_r(n[i],e)}};function al(t,e,n){var i=-1,a=t.length-n,r;for(e.lineStart();++i<a;)r=t[i],e.point(r[0],r[1],r[2]);e.lineEnd()}function Ju(t,e){var n=-1,i=t.length;for(e.polygonStart();++n<i;)al(t[n],e,1);e.polygonEnd()}function jt(t,e){t&&Ku.hasOwnProperty(t.type)?Ku[t.type](t,e):_r(t,e)}var wr=We(),Mr=We(),Bd,Fd,rl,sl,ol,pe={point:ot,lineStart:ot,lineEnd:ot,polygonStart:function(){wr.reset(),pe.lineStart=Ax,pe.lineEnd=Dx},polygonEnd:function(){var t=+wr;Mr.add(t<0?Rt+t:t),this.lineStart=this.lineEnd=this.point=ot},sphere:function(){Mr.add(Rt)}};function Ax(){pe.point=Lx}function Dx(){Wd(Bd,Fd)}function Lx(t,e){pe.point=Wd,Bd=t,Fd=e,t*=O,e*=O,rl=t,sl=H(e=e/2+vr),ol=Y(e)}function Wd(t,e){t*=O,e*=O,e=e/2+vr;var n=t-rl,i=n>=0?1:-1,a=i*n,r=H(e),s=Y(e),o=ol*s,l=sl*r+o*H(a),c=o*i*Y(a);wr.add(Pt(c,l)),rl=t,sl=r,ol=s}function Cx(t){return Mr.reset(),jt(t,pe),Mr*2}function kr(t){return[Pt(t[1],t[0]),Et(t[2])]}function un(t){var e=t[0],n=t[1],i=H(n);return[i*H(e),i*Y(e),Y(n)]}function La(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function qn(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function ho(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function Ca(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function Sr(t){var e=ft(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}var st,Yt,lt,Xt,Qe,Vd,qd,Xn,Ni=We(),Te,ke,_e={point:ll,lineStart:ju,lineEnd:th,polygonStart:function(){_e.point=Kd,_e.lineStart=Tx,_e.lineEnd=Ix,Ni.reset(),pe.polygonStart()},polygonEnd:function(){pe.polygonEnd(),_e.point=ll,_e.lineStart=ju,_e.lineEnd=th,wr<0?(st=-(lt=180),Yt=-(Xt=90)):Ni>G?Xt=90:Ni<-G&&(Yt=-90),ke[0]=st,ke[1]=lt},sphere:function(){st=-(lt=180),Yt=-(Xt=90)}};function ll(t,e){Te.push(ke=[st=t,lt=t]),e<Yt&&(Yt=e),e>Xt&&(Xt=e)}function Zd(t,e){var n=un([t*O,e*O]);if(Xn){var i=qn(Xn,n),a=[i[1],-i[0],0],r=qn(a,i);Sr(r),r=kr(r);var s=t-Qe,o=s>0?1:-1,l=r[0]*it*o,c,u=Q(s)>180;u^(o*Qe<l&&l<o*t)?(c=r[1]*it,c>Xt&&(Xt=c)):(l=(l+360)%360-180,u^(o*Qe<l&&l<o*t)?(c=-r[1]*it,c<Yt&&(Yt=c)):(e<Yt&&(Yt=e),e>Xt&&(Xt=e))),u?t<Qe?zt(st,t)>zt(st,lt)&&(lt=t):zt(t,lt)>zt(st,lt)&&(st=t):lt>=st?(t<st&&(st=t),t>lt&&(lt=t)):t>Qe?zt(st,t)>zt(st,lt)&&(lt=t):zt(t,lt)>zt(st,lt)&&(st=t)}else Te.push(ke=[st=t,lt=t]);e<Yt&&(Yt=e),e>Xt&&(Xt=e),Xn=n,Qe=t}function ju(){_e.point=Zd}function th(){ke[0]=st,ke[1]=lt,_e.point=ll,Xn=null}function Kd(t,e){if(Xn){var n=t-Qe;Ni.add(Q(n)>180?n+(n>0?360:-360):n)}else Vd=t,qd=e;pe.point(t,e),Zd(t,e)}function Tx(){pe.lineStart()}function Ix(){Kd(Vd,qd),pe.lineEnd(),Q(Ni)>G&&(st=-(lt=180)),ke[0]=st,ke[1]=lt,Xn=null}function zt(t,e){return(e-=t)<0?e+360:e}function Rx(t,e){return t[0]-e[0]}function eh(t,e){return t[0]<=t[1]?t[0]<=e&&e<=t[1]:e<t[0]||t[1]<e}function Px(t){var e,n,i,a,r,s,o;if(Xt=lt=-(st=Yt=1/0),Te=[],jt(t,_e),n=Te.length){for(Te.sort(Rx),e=1,i=Te[0],r=[i];e<n;++e)a=Te[e],eh(i,a[0])||eh(i,a[1])?(zt(i[0],a[1])>zt(i[0],i[1])&&(i[1]=a[1]),zt(a[0],i[1])>zt(i[0],i[1])&&(i[0]=a[0])):r.push(i=a);for(s=-1/0,n=r.length-1,e=0,i=r[n];e<=n;i=a,++e)a=r[e],(o=zt(i[1],a[0]))>s&&(s=o,st=a[0],lt=i[1])}return Te=ke=null,st===1/0||Yt===1/0?[[NaN,NaN],[NaN,NaN]]:[[st,Yt],[lt,Xt]]}var wi,Ar,Dr,Lr,Cr,Tr,Ir,Rr,cl,ul,hl,Qd,Jd,Dt,Lt,Ct,ee={sphere:ot,point:lc,lineStart:nh,lineEnd:ih,polygonStart:function(){ee.lineStart=Nx,ee.lineEnd=Yx},polygonEnd:function(){ee.lineStart=nh,ee.lineEnd=ih}};function lc(t,e){t*=O,e*=O;var n=H(e);fa(n*H(t),n*Y(t),Y(e))}function fa(t,e,n){++wi,Dr+=(t-Dr)/wi,Lr+=(e-Lr)/wi,Cr+=(n-Cr)/wi}function nh(){ee.point=Ex}function Ex(t,e){t*=O,e*=O;var n=H(e);Dt=n*H(t),Lt=n*Y(t),Ct=Y(e),ee.point=$x,fa(Dt,Lt,Ct)}function $x(t,e){t*=O,e*=O;var n=H(e),i=n*H(t),a=n*Y(t),r=Y(e),s=Pt(ft((s=Lt*r-Ct*a)*s+(s=Ct*i-Dt*r)*s+(s=Dt*a-Lt*i)*s),Dt*i+Lt*a+Ct*r);Ar+=s,Tr+=s*(Dt+(Dt=i)),Ir+=s*(Lt+(Lt=a)),Rr+=s*(Ct+(Ct=r)),fa(Dt,Lt,Ct)}function ih(){ee.point=lc}function Nx(){ee.point=zx}function Yx(){jd(Qd,Jd),ee.point=lc}function zx(t,e){Qd=t,Jd=e,t*=O,e*=O,ee.point=jd;var n=H(e);Dt=n*H(t),Lt=n*Y(t),Ct=Y(e),fa(Dt,Lt,Ct)}function jd(t,e){t*=O,e*=O;var n=H(e),i=n*H(t),a=n*Y(t),r=Y(e),s=Lt*r-Ct*a,o=Ct*i-Dt*r,l=Dt*a-Lt*i,c=ft(s*s+o*o+l*l),u=Et(c),f=c&&-u/c;cl+=f*s,ul+=f*o,hl+=f*l,Ar+=u,Tr+=u*(Dt+(Dt=i)),Ir+=u*(Lt+(Lt=a)),Rr+=u*(Ct+(Ct=r)),fa(Dt,Lt,Ct)}function Xx(t){wi=Ar=Dr=Lr=Cr=Tr=Ir=Rr=cl=ul=hl=0,jt(t,ee);var e=cl,n=ul,i=hl,a=e*e+n*n+i*i;return a<yr&&(e=Tr,n=Ir,i=Rr,Ar<G&&(e=Dr,n=Lr,i=Cr),a=e*e+n*n+i*i,a<yr)?[NaN,NaN]:[Pt(n,e)*it,Et(i/ft(a))*it]}function Cn(t){return function(){return t}}function fl(t,e){function n(i,a){return i=t(i,a),e(i[0],i[1])}return t.invert&&e.invert&&(n.invert=function(i,a){return i=e.invert(i,a),i&&t.invert(i[0],i[1])}),n}function dl(t,e){return[Q(t)>q?t+Math.round(-t/Rt)*Rt:t,e]}dl.invert=dl;function cc(t,e,n){return(t%=Rt)?e||n?fl(rh(t),sh(e,n)):rh(t):e||n?sh(e,n):dl}function ah(t){return function(e,n){return e+=t,[e>q?e-Rt:e<-q?e+Rt:e,n]}}function rh(t){var e=ah(t);return e.invert=ah(-t),e}function sh(t,e){var n=H(t),i=Y(t),a=H(e),r=Y(e);function s(o,l){var c=H(l),u=H(o)*c,f=Y(o)*c,h=Y(l),d=h*n+u*i;return[Pt(f*a-d*r,u*n-h*i),Et(d*a+f*r)]}return s.invert=function(o,l){var c=H(l),u=H(o)*c,f=Y(o)*c,h=Y(l),d=h*a-f*r;return[Pt(f*a+h*r,u*n+d*i),Et(d*n-u*i)]},s}function t0(t){t=cc(t[0]*O,t[1]*O,t.length>2?t[2]*O:0);function e(n){return n=t(n[0]*O,n[1]*O),n[0]*=it,n[1]*=it,n}return e.invert=function(n){return n=t.invert(n[0]*O,n[1]*O),n[0]*=it,n[1]*=it,n},e}function e0(t,e,n,i,a,r){if(n){var s=H(e),o=Y(e),l=i*n;a==null?(a=e+i*Rt,r=e-l/2):(a=oh(s,a),r=oh(s,r),(i>0?a<r:a>r)&&(a+=i*Rt));for(var c,u=a;i>0?u>r:u<r;u-=l)c=kr([s,-o*H(u),-o*Y(u)]),t.point(c[0],c[1])}}function oh(t,e){e=un(e),e[0]-=t,Sr(e);var n=Ud(-e[1]);return((-e[2]<0?-n:n)+Rt-G)%Rt}function Hx(){var t=Cn([0,0]),e=Cn(90),n=Cn(6),i,a,r={point:s};function s(l,c){i.push(l=a(l,c)),l[0]*=it,l[1]*=it}function o(){var l=t.apply(this,arguments),c=e.apply(this,arguments)*O,u=n.apply(this,arguments)*O;return i=[],a=cc(-l[0]*O,-l[1]*O,0).invert,e0(r,c,u,1),l={type:"Polygon",coordinates:[i]},i=a=null,l}return o.center=function(l){return arguments.length?(t=typeof l=="function"?l:Cn([+l[0],+l[1]]),o):t},o.radius=function(l){return arguments.length?(e=typeof l=="function"?l:Cn(+l),o):e},o.precision=function(l){return arguments.length?(n=typeof l=="function"?l:Cn(+l),o):n},o}function n0(){var t=[],e;return{point:function(n,i,a){e.push([n,i,a])},lineStart:function(){t.push(e=[])},lineEnd:ot,rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))},result:function(){var n=t;return t=[],e=null,n}}}function ir(t,e){return Q(t[0]-e[0])<G&&Q(t[1]-e[1])<G}function Ta(t,e,n,i){this.x=t,this.z=e,this.o=n,this.e=i,this.v=!1,this.n=this.p=null}function i0(t,e,n,i,a){var r=[],s=[],o,l;if(t.forEach(function(g){if(!((p=g.length-1)<=0)){var p,m=g[0],b=g[p],v;if(ir(m,b)){if(!m[2]&&!b[2]){for(a.lineStart(),o=0;o<p;++o)a.point((m=g[o])[0],m[1]);a.lineEnd();return}b[0]+=2*G}r.push(v=new Ta(m,g,null,!0)),s.push(v.o=new Ta(m,null,v,!1)),r.push(v=new Ta(b,g,null,!1)),s.push(v.o=new Ta(b,null,v,!0))}}),!!r.length){for(s.sort(e),lh(r),lh(s),o=0,l=s.length;o<l;++o)s[o].e=n=!n;for(var c=r[0],u,f;;){for(var h=c,d=!0;h.v;)if((h=h.n)===c)return;u=h.z,a.lineStart();do{if(h.v=h.o.v=!0,h.e){if(d)for(o=0,l=u.length;o<l;++o)a.point((f=u[o])[0],f[1]);else i(h.x,h.n.x,1,a);h=h.n}else{if(d)for(u=h.p.z,o=u.length-1;o>=0;--o)a.point((f=u[o])[0],f[1]);else i(h.x,h.p.x,-1,a);h=h.p}h=h.o,u=h.z,d=!d}while(!h.v);a.lineEnd()}}}function lh(t){if(e=t.length){for(var e,n=0,i=t[0],a;++n<e;)i.n=a=t[n],a.p=i,i=a;i.n=a=t[0],a.p=i}}var fo=We();function po(t){return Q(t[0])<=q?t[0]:qt(t[0])*((Q(t[0])+q)%Rt-q)}function a0(t,e){var n=po(e),i=e[1],a=Y(i),r=[Y(n),-H(n),0],s=0,o=0;fo.reset(),a===1?i=ct+G:a===-1&&(i=-ct-G);for(var l=0,c=t.length;l<c;++l)if(f=(u=t[l]).length)for(var u,f,h=u[f-1],d=po(h),g=h[1]/2+vr,p=Y(g),m=H(g),b=0;b<f;++b,d=y,p=M,m=A,h=v){var v=u[b],y=po(v),x=v[1]/2+vr,M=Y(x),A=H(x),k=y-d,I=k>=0?1:-1,C=I*k,T=C>q,L=p*M;if(fo.add(Pt(L*I*Y(C),m*A+L*H(C))),s+=T?k+I*Rt:k,T^d>=n^y>=n){var _=qn(un(h),un(v));Sr(_);var D=qn(r,_);Sr(D);var P=(T^k>=0?-1:1)*Et(D[2]);(i>P||i===P&&(_[0]||_[1]))&&(o+=T^k>=0?1:-1)}}return(s<-G||s<G&&fo<-G)^o&1}function r0(t,e,n,i){return function(a){var r=e(a),s=n0(),o=e(s),l=!1,c,u,f,h={point:d,lineStart:p,lineEnd:m,polygonStart:function(){h.point=b,h.lineStart=v,h.lineEnd=y,u=[],c=[]},polygonEnd:function(){h.point=d,h.lineStart=p,h.lineEnd=m,u=Xl(u);var x=a0(c,i);u.length?(l||(a.polygonStart(),l=!0),i0(u,Ox,x,n,a)):x&&(l||(a.polygonStart(),l=!0),a.lineStart(),n(null,null,1,a),a.lineEnd()),l&&(a.polygonEnd(),l=!1),u=c=null},sphere:function(){a.polygonStart(),a.lineStart(),n(null,null,1,a),a.lineEnd(),a.polygonEnd()}};function d(x,M){t(x,M)&&a.point(x,M)}function g(x,M){r.point(x,M)}function p(){h.point=g,r.lineStart()}function m(){h.point=d,r.lineEnd()}function b(x,M){f.push([x,M]),o.point(x,M)}function v(){o.lineStart(),f=[]}function y(){b(f[0][0],f[0][1]),o.lineEnd();var x=o.clean(),M=s.result(),A,k=M.length,I,C,T;if(f.pop(),c.push(f),f=null,!!k){if(x&1){if(C=M[0],(I=C.length-1)>0){for(l||(a.polygonStart(),l=!0),a.lineStart(),A=0;A<I;++A)a.point((T=C[A])[0],T[1]);a.lineEnd()}return}k>1&&x&2&&M.push(M.pop().concat(M.shift())),u.push(M.filter(Gx))}}return h}}function Gx(t){return t.length>1}function Ox(t,e){return((t=t.x)[0]<0?t[1]-ct-G:ct-t[1])-((e=e.x)[0]<0?e[1]-ct-G:ct-e[1])}const pl=r0(function(){return!0},Ux,Fx,[-q,-ct]);function Ux(t){var e=NaN,n=NaN,i=NaN,a;return{lineStart:function(){t.lineStart(),a=1},point:function(r,s){var o=r>0?q:-q,l=Q(r-e);Q(l-q)<G?(t.point(e,n=(n+s)/2>0?ct:-ct),t.point(i,n),t.lineEnd(),t.lineStart(),t.point(o,n),t.point(r,n),a=0):i!==o&&l>=q&&(Q(e-i)<G&&(e-=i*G),Q(r-o)<G&&(r-=o*G),n=Bx(e,n,r,s),t.point(i,n),t.lineEnd(),t.lineStart(),t.point(o,n),a=0),t.point(e=r,n=s),i=o},lineEnd:function(){t.lineEnd(),e=n=NaN},clean:function(){return 2-a}}}function Bx(t,e,n,i){var a,r,s=Y(t-n);return Q(s)>G?ni((Y(e)*(r=H(i))*Y(n)-Y(i)*(a=H(e))*Y(t))/(a*r*s)):(e+i)/2}function Fx(t,e,n,i){var a;if(t==null)a=n*ct,i.point(-q,a),i.point(0,a),i.point(q,a),i.point(q,0),i.point(q,-a),i.point(0,-a),i.point(-q,-a),i.point(-q,0),i.point(-q,a);else if(Q(t[0]-e[0])>G){var r=t[0]<e[0]?q:-q;a=n*r/2,i.point(-r,a),i.point(0,a),i.point(r,a)}else i.point(e[0],e[1])}function s0(t){var e=H(t),n=6*O,i=e>0,a=Q(e)>G;function r(u,f,h,d){e0(d,t,n,h,u,f)}function s(u,f){return H(u)*H(f)>e}function o(u){var f,h,d,g,p;return{lineStart:function(){g=d=!1,p=1},point:function(m,b){var v=[m,b],y,x=s(m,b),M=i?x?0:c(m,b):x?c(m+(m<0?q:-q),b):0;if(!f&&(g=d=x)&&u.lineStart(),x!==d&&(y=l(f,v),(!y||ir(f,y)||ir(v,y))&&(v[2]=1)),x!==d)p=0,x?(u.lineStart(),y=l(v,f),u.point(y[0],y[1])):(y=l(f,v),u.point(y[0],y[1],2),u.lineEnd()),f=y;else if(a&&f&&i^x){var A;!(M&h)&&(A=l(v,f,!0))&&(p=0,i?(u.lineStart(),u.point(A[0][0],A[0][1]),u.point(A[1][0],A[1][1]),u.lineEnd()):(u.point(A[1][0],A[1][1]),u.lineEnd(),u.lineStart(),u.point(A[0][0],A[0][1],3)))}x&&(!f||!ir(f,v))&&u.point(v[0],v[1]),f=v,d=x,h=M},lineEnd:function(){d&&u.lineEnd(),f=null},clean:function(){return p|(g&&d)<<1}}}function l(u,f,h){var d=un(u),g=un(f),p=[1,0,0],m=qn(d,g),b=La(m,m),v=m[0],y=b-v*v;if(!y)return!h&&u;var x=e*b/y,M=-e*v/y,A=qn(p,m),k=Ca(p,x),I=Ca(m,M);ho(k,I);var C=A,T=La(k,C),L=La(C,C),_=T*T-L*(La(k,k)-1);if(!(_<0)){var D=ft(_),P=Ca(C,(-T-D)/L);if(ho(P,k),P=kr(P),!h)return P;var S=u[0],R=f[0],z=u[1],N=f[1],X;R<S&&(X=S,S=R,R=X);var U=R-S,B=Q(U-q)<G,rt=B||U<G;if(!B&&N<z&&(X=z,z=N,N=X),rt?B?z+N>0^P[1]<(Q(P[0]-S)<G?z:N):z<=P[1]&&P[1]<=N:U>q^(S<=P[0]&&P[0]<=R)){var et=Ca(C,(-T+D)/L);return ho(et,k),[P,kr(et)]}}}function c(u,f){var h=i?t:q-t,d=0;return u<-h?d|=1:u>h&&(d|=2),f<-h?d|=4:f>h&&(d|=8),d}return r0(s,o,r,i?[0,-t]:[-q,t-q])}function Wx(t,e,n,i,a,r){var s=t[0],o=t[1],l=e[0],c=e[1],u=0,f=1,h=l-s,d=c-o,g;if(g=n-s,!(!h&&g>0)){if(g/=h,h<0){if(g<u)return;g<f&&(f=g)}else if(h>0){if(g>f)return;g>u&&(u=g)}if(g=a-s,!(!h&&g<0)){if(g/=h,h<0){if(g>f)return;g>u&&(u=g)}else if(h>0){if(g<u)return;g<f&&(f=g)}if(g=i-o,!(!d&&g>0)){if(g/=d,d<0){if(g<u)return;g<f&&(f=g)}else if(d>0){if(g>f)return;g>u&&(u=g)}if(g=r-o,!(!d&&g<0)){if(g/=d,d<0){if(g>f)return;g>u&&(u=g)}else if(d>0){if(g<u)return;g<f&&(f=g)}return u>0&&(t[0]=s+u*h,t[1]=o+u*d),f<1&&(e[0]=s+f*h,e[1]=o+f*d),!0}}}}}var Mi=1e9,Ia=-Mi;function Ss(t,e,n,i){function a(c,u){return t<=c&&c<=n&&e<=u&&u<=i}function r(c,u,f,h){var d=0,g=0;if(c==null||(d=s(c,f))!==(g=s(u,f))||l(c,u)<0^f>0)do h.point(d===0||d===3?t:n,d>1?i:e);while((d=(d+f+4)%4)!==g);else h.point(u[0],u[1])}function s(c,u){return Q(c[0]-t)<G?u>0?0:3:Q(c[0]-n)<G?u>0?2:1:Q(c[1]-e)<G?u>0?1:0:u>0?3:2}function o(c,u){return l(c.x,u.x)}function l(c,u){var f=s(c,1),h=s(u,1);return f!==h?f-h:f===0?u[1]-c[1]:f===1?c[0]-u[0]:f===2?c[1]-u[1]:u[0]-c[0]}return function(c){var u=c,f=n0(),h,d,g,p,m,b,v,y,x,M,A,k={point:I,lineStart:_,lineEnd:D,polygonStart:T,polygonEnd:L};function I(S,R){a(S,R)&&u.point(S,R)}function C(){for(var S=0,R=0,z=d.length;R<z;++R)for(var N=d[R],X=1,U=N.length,B=N[0],rt,et,J=B[0],ut=B[1];X<U;++X)rt=J,et=ut,B=N[X],J=B[0],ut=B[1],et<=i?ut>i&&(J-rt)*(i-et)>(ut-et)*(t-rt)&&++S:ut<=i&&(J-rt)*(i-et)<(ut-et)*(t-rt)&&--S;return S}function T(){u=f,h=[],d=[],A=!0}function L(){var S=C(),R=A&&S,z=(h=Xl(h)).length;(R||z)&&(c.polygonStart(),R&&(c.lineStart(),r(null,null,1,c),c.lineEnd()),z&&i0(h,o,S,r,c),c.polygonEnd()),u=c,h=d=g=null}function _(){k.point=P,d&&d.push(g=[]),M=!0,x=!1,v=y=NaN}function D(){h&&(P(p,m),b&&x&&f.rejoin(),h.push(f.result())),k.point=I,x&&u.lineEnd()}function P(S,R){var z=a(S,R);if(d&&g.push([S,R]),M)p=S,m=R,b=z,M=!1,z&&(u.lineStart(),u.point(S,R));else if(z&&x)u.point(S,R);else{var N=[v=Math.max(Ia,Math.min(Mi,v)),y=Math.max(Ia,Math.min(Mi,y))],X=[S=Math.max(Ia,Math.min(Mi,S)),R=Math.max(Ia,Math.min(Mi,R))];Wx(N,X,t,e,n,i)?(x||(u.lineStart(),u.point(N[0],N[1])),u.point(X[0],X[1]),z||u.lineEnd(),A=!1):z&&(u.lineStart(),u.point(S,R),A=!1)}v=S,y=R,x=z}return k}}function Vx(){var t=0,e=0,n=960,i=500,a,r,s;return s={stream:function(o){return a&&r===o?a:a=Ss(t,e,n,i)(r=o)},extent:function(o){return arguments.length?(t=+o[0][0],e=+o[0][1],n=+o[1][0],i=+o[1][1],a=r=null,s):[[t,e],[n,i]]}}}var gl=We(),ml,ar,rr,Zn={sphere:ot,point:ot,lineStart:qx,lineEnd:ot,polygonStart:ot,polygonEnd:ot};function qx(){Zn.point=Kx,Zn.lineEnd=Zx}function Zx(){Zn.point=Zn.lineEnd=ot}function Kx(t,e){t*=O,e*=O,ml=t,ar=Y(e),rr=H(e),Zn.point=Qx}function Qx(t,e){t*=O,e*=O;var n=Y(e),i=H(e),a=Q(t-ml),r=H(a),s=Y(a),o=i*s,l=rr*n-ar*i*r,c=ar*n+rr*i*r;gl.add(Pt(ft(o*o+l*l),c)),ml=t,ar=n,rr=i}function o0(t){return gl.reset(),jt(t,Zn),+gl}var bl=[null,null],Jx={type:"LineString",coordinates:bl};function Pr(t,e){return bl[0]=t,bl[1]=e,o0(Jx)}var ch={Feature:function(t,e){return Er(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,i=-1,a=n.length;++i<a;)if(Er(n[i].geometry,e))return!0;return!1}},uh={Sphere:function(){return!0},Point:function(t,e){return hh(t.coordinates,e)},MultiPoint:function(t,e){for(var n=t.coordinates,i=-1,a=n.length;++i<a;)if(hh(n[i],e))return!0;return!1},LineString:function(t,e){return fh(t.coordinates,e)},MultiLineString:function(t,e){for(var n=t.coordinates,i=-1,a=n.length;++i<a;)if(fh(n[i],e))return!0;return!1},Polygon:function(t,e){return dh(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,i=-1,a=n.length;++i<a;)if(dh(n[i],e))return!0;return!1},GeometryCollection:function(t,e){for(var n=t.geometries,i=-1,a=n.length;++i<a;)if(Er(n[i],e))return!0;return!1}};function Er(t,e){return t&&uh.hasOwnProperty(t.type)?uh[t.type](t,e):!1}function hh(t,e){return Pr(t,e)===0}function fh(t,e){for(var n,i,a,r=0,s=t.length;r<s;r++){if(i=Pr(t[r],e),i===0||r>0&&(a=Pr(t[r],t[r-1]),a>0&&n<=a&&i<=a&&(n+i-a)*(1-Math.pow((n-i)/a,2))<yr*a))return!0;n=i}return!1}function dh(t,e){return!!a0(t.map(jx),l0(e))}function jx(t){return t=t.map(l0),t.pop(),t}function l0(t){return[t[0]*O,t[1]*O]}function t_(t,e){return(t&&ch.hasOwnProperty(t.type)?ch[t.type]:Er)(t,e)}function ph(t,e,n){var i=Gt(t,e-G,n).concat(e);return function(a){return i.map(function(r){return[a,r]})}}function gh(t,e,n){var i=Gt(t,e-G,n).concat(e);return function(a){return i.map(function(r){return[r,a]})}}function c0(){var t,e,n,i,a,r,s,o,l=10,c=l,u=90,f=360,h,d,g,p,m=2.5;function b(){return{type:"MultiLineString",coordinates:v()}}function v(){return Gt(Da(i/u)*u,n,u).map(g).concat(Gt(Da(o/f)*f,s,f).map(p)).concat(Gt(Da(e/l)*l,t,l).filter(function(y){return Q(y%u)>G}).map(h)).concat(Gt(Da(r/c)*c,a,c).filter(function(y){return Q(y%f)>G}).map(d))}return b.lines=function(){return v().map(function(y){return{type:"LineString",coordinates:y}})},b.outline=function(){return{type:"Polygon",coordinates:[g(i).concat(p(s).slice(1),g(n).reverse().slice(1),p(o).reverse().slice(1))]}},b.extent=function(y){return arguments.length?b.extentMajor(y).extentMinor(y):b.extentMinor()},b.extentMajor=function(y){return arguments.length?(i=+y[0][0],n=+y[1][0],o=+y[0][1],s=+y[1][1],i>n&&(y=i,i=n,n=y),o>s&&(y=o,o=s,s=y),b.precision(m)):[[i,o],[n,s]]},b.extentMinor=function(y){return arguments.length?(e=+y[0][0],t=+y[1][0],r=+y[0][1],a=+y[1][1],e>t&&(y=e,e=t,t=y),r>a&&(y=r,r=a,a=y),b.precision(m)):[[e,r],[t,a]]},b.step=function(y){return arguments.length?b.stepMajor(y).stepMinor(y):b.stepMinor()},b.stepMajor=function(y){return arguments.length?(u=+y[0],f=+y[1],b):[u,f]},b.stepMinor=function(y){return arguments.length?(l=+y[0],c=+y[1],b):[l,c]},b.precision=function(y){return arguments.length?(m=+y,h=ph(r,a,90),d=gh(e,t,m),g=ph(o,s,90),p=gh(i,n,m),b):m},b.extentMajor([[-180,-90+G],[180,90-G]]).extentMinor([[-180,-80-G],[180,80+G]])}function e_(){return c0()()}function n_(t,e){var n=t[0]*O,i=t[1]*O,a=e[0]*O,r=e[1]*O,s=H(i),o=Y(i),l=H(r),c=Y(r),u=s*H(n),f=s*Y(n),h=l*H(a),d=l*Y(a),g=2*Et(ft(Zu(r-i)+s*l*Zu(a-n))),p=Y(g),m=g?function(b){var v=Y(b*=g)/p,y=Y(g-b)/p,x=y*u+v*h,M=y*f+v*d,A=y*o+v*c;return[Pt(M,x)*it,Pt(A,ft(x*x+M*M))*it]}:function(){return[n*it,i*it]};return m.distance=g,m}function Ji(t){return t}var go=We(),yl=We(),u0,h0,vl,xl,Ie={point:ot,lineStart:ot,lineEnd:ot,polygonStart:function(){Ie.lineStart=i_,Ie.lineEnd=r_},polygonEnd:function(){Ie.lineStart=Ie.lineEnd=Ie.point=ot,go.add(Q(yl)),yl.reset()},result:function(){var t=go/2;return go.reset(),t}};function i_(){Ie.point=a_}function a_(t,e){Ie.point=f0,u0=vl=t,h0=xl=e}function f0(t,e){yl.add(xl*t-vl*e),vl=t,xl=e}function r_(){f0(u0,h0)}const mh=Ie;var Kn=1/0,$r=Kn,ji=-Kn,Nr=ji,s_={point:o_,lineStart:ot,lineEnd:ot,polygonStart:ot,polygonEnd:ot,result:function(){var t=[[Kn,$r],[ji,Nr]];return ji=Nr=-($r=Kn=1/0),t}};function o_(t,e){t<Kn&&(Kn=t),t>ji&&(ji=t),e<$r&&($r=e),e>Nr&&(Nr=e)}const Yr=s_;var _l=0,wl=0,ki=0,zr=0,Xr=0,Pn=0,Ml=0,kl=0,Si=0,d0,p0,ce,ue,te={point:hn,lineStart:bh,lineEnd:yh,polygonStart:function(){te.lineStart=u_,te.lineEnd=h_},polygonEnd:function(){te.point=hn,te.lineStart=bh,te.lineEnd=yh},result:function(){var t=Si?[Ml/Si,kl/Si]:Pn?[zr/Pn,Xr/Pn]:ki?[_l/ki,wl/ki]:[NaN,NaN];return _l=wl=ki=zr=Xr=Pn=Ml=kl=Si=0,t}};function hn(t,e){_l+=t,wl+=e,++ki}function bh(){te.point=l_}function l_(t,e){te.point=c_,hn(ce=t,ue=e)}function c_(t,e){var n=t-ce,i=e-ue,a=ft(n*n+i*i);zr+=a*(ce+t)/2,Xr+=a*(ue+e)/2,Pn+=a,hn(ce=t,ue=e)}function yh(){te.point=hn}function u_(){te.point=f_}function h_(){g0(d0,p0)}function f_(t,e){te.point=g0,hn(d0=ce=t,p0=ue=e)}function g0(t,e){var n=t-ce,i=e-ue,a=ft(n*n+i*i);zr+=a*(ce+t)/2,Xr+=a*(ue+e)/2,Pn+=a,a=ue*t-ce*e,Ml+=a*(ce+t),kl+=a*(ue+e),Si+=a*3,hn(ce=t,ue=e)}const vh=te;function m0(t){this._context=t}m0.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(t,e){switch(this._point){case 0:{this._context.moveTo(t,e),this._point=1;break}case 1:{this._context.lineTo(t,e);break}default:{this._context.moveTo(t+this._radius,e),this._context.arc(t,e,this._radius,0,Rt);break}}},result:ot};var Sl=We(),mo,b0,y0,Ai,Di,Hr={point:ot,lineStart:function(){Hr.point=d_},lineEnd:function(){mo&&v0(b0,y0),Hr.point=ot},polygonStart:function(){mo=!0},polygonEnd:function(){mo=null},result:function(){var t=+Sl;return Sl.reset(),t}};function d_(t,e){Hr.point=v0,b0=Ai=t,y0=Di=e}function v0(t,e){Ai-=t,Di-=e,Sl.add(ft(Ai*Ai+Di*Di)),Ai=t,Di=e}const xh=Hr;function x0(){this._string=[]}x0.prototype={_radius:4.5,_circle:_h(4.5),pointRadius:function(t){return(t=+t)!==this._radius&&(this._radius=t,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._string.push("Z"),this._point=NaN},point:function(t,e){switch(this._point){case 0:{this._string.push("M",t,",",e),this._point=1;break}case 1:{this._string.push("L",t,",",e);break}default:{this._circle==null&&(this._circle=_h(this._radius)),this._string.push("M",t,",",e,this._circle);break}}},result:function(){if(this._string.length){var t=this._string.join("");return this._string=[],t}else return null}};function _h(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}function p_(t,e){var n=4.5,i,a;function r(s){return s&&(typeof n=="function"&&a.pointRadius(+n.apply(this,arguments)),jt(s,i(a))),a.result()}return r.area=function(s){return jt(s,i(mh)),mh.result()},r.measure=function(s){return jt(s,i(xh)),xh.result()},r.bounds=function(s){return jt(s,i(Yr)),Yr.result()},r.centroid=function(s){return jt(s,i(vh)),vh.result()},r.projection=function(s){return arguments.length?(i=s==null?(t=null,Ji):(t=s).stream,r):t},r.context=function(s){return arguments.length?(a=s==null?(e=null,new x0):new m0(e=s),typeof n!="function"&&a.pointRadius(n),r):e},r.pointRadius=function(s){return arguments.length?(n=typeof s=="function"?s:(a.pointRadius(+s),+s),r):n},r.projection(t).context(e)}function g_(t){return{stream:da(t)}}function da(t){return function(e){var n=new Al;for(var i in t)n[i]=t[i];return n.stream=e,n}}function Al(){}Al.prototype={constructor:Al,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function uc(t,e,n){var i=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),i!=null&&t.clipExtent(null),jt(n,t.stream(Yr)),e(Yr.result()),i!=null&&t.clipExtent(i),t}function As(t,e,n){return uc(t,function(i){var a=e[1][0]-e[0][0],r=e[1][1]-e[0][1],s=Math.min(a/(i[1][0]-i[0][0]),r/(i[1][1]-i[0][1])),o=+e[0][0]+(a-s*(i[1][0]+i[0][0]))/2,l=+e[0][1]+(r-s*(i[1][1]+i[0][1]))/2;t.scale(150*s).translate([o,l])},n)}function hc(t,e,n){return As(t,[[0,0],e],n)}function fc(t,e,n){return uc(t,function(i){var a=+e,r=a/(i[1][0]-i[0][0]),s=(a-r*(i[1][0]+i[0][0]))/2,o=-r*i[0][1];t.scale(150*r).translate([s,o])},n)}function dc(t,e,n){return uc(t,function(i){var a=+e,r=a/(i[1][1]-i[0][1]),s=-r*i[0][0],o=(a-r*(i[1][1]+i[0][1]))/2;t.scale(150*r).translate([s,o])},n)}var wh=16,m_=H(30*O);function Mh(t,e){return+e?y_(t,e):b_(t)}function b_(t){return da({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}function y_(t,e){function n(i,a,r,s,o,l,c,u,f,h,d,g,p,m){var b=c-i,v=u-a,y=b*b+v*v;if(y>4*e&&p--){var x=s+h,M=o+d,A=l+g,k=ft(x*x+M*M+A*A),I=Et(A/=k),C=Q(Q(A)-1)<G||Q(r-f)<G?(r+f)/2:Pt(M,x),T=t(C,I),L=T[0],_=T[1],D=L-i,P=_-a,S=v*D-b*P;(S*S/y>e||Q((b*D+v*P)/y-.5)>.3||s*h+o*d+l*g<m_)&&(n(i,a,r,s,o,l,L,_,C,x/=k,M/=k,A,p,m),m.point(L,_),n(L,_,C,x,M,A,c,u,f,h,d,g,p,m))}}return function(i){var a,r,s,o,l,c,u,f,h,d,g,p,m={point:b,lineStart:v,lineEnd:x,polygonStart:function(){i.polygonStart(),m.lineStart=M},polygonEnd:function(){i.polygonEnd(),m.lineStart=v}};function b(I,C){I=t(I,C),i.point(I[0],I[1])}function v(){f=NaN,m.point=y,i.lineStart()}function y(I,C){var T=un([I,C]),L=t(I,C);n(f,h,u,d,g,p,f=L[0],h=L[1],u=I,d=T[0],g=T[1],p=T[2],wh,i),i.point(f,h)}function x(){m.point=b,i.lineEnd()}function M(){v(),m.point=A,m.lineEnd=k}function A(I,C){y(a=I,C),r=f,s=h,o=d,l=g,c=p,m.point=y}function k(){n(f,h,u,d,g,p,r,s,a,o,l,c,wh,i),m.lineEnd=x,x()}return m}}var v_=da({point:function(t,e){this.stream.point(t*O,e*O)}});function x_(t){return da({point:function(e,n){var i=t(e,n);return this.stream.point(i[0],i[1])}})}function __(t,e,n,i,a){function r(s,o){return s*=i,o*=a,[e+t*s,n-t*o]}return r.invert=function(s,o){return[(s-e)/t*i,(n-o)/t*a]},r}function kh(t,e,n,i,a,r){var s=H(r),o=Y(r),l=s*t,c=o*t,u=s/t,f=o/t,h=(o*n-s*e)/t,d=(o*e+s*n)/t;function g(p,m){return p*=i,m*=a,[l*p-c*m+e,n-c*p-l*m]}return g.invert=function(p,m){return[i*(u*p-f*m+h),a*(d-f*p-u*m)]},g}function me(t){return pc(function(){return t})()}function pc(t){var e,n=150,i=480,a=250,r=0,s=0,o=0,l=0,c=0,u,f=0,h=1,d=1,g=null,p=pl,m=null,b,v,y,x=Ji,M=.5,A,k,I,C,T;function L(S){return I(S[0]*O,S[1]*O)}function _(S){return S=I.invert(S[0],S[1]),S&&[S[0]*it,S[1]*it]}L.stream=function(S){return C&&T===S?C:C=v_(x_(u)(p(A(x(T=S)))))},L.preclip=function(S){return arguments.length?(p=S,g=void 0,P()):p},L.postclip=function(S){return arguments.length?(x=S,m=b=v=y=null,P()):x},L.clipAngle=function(S){return arguments.length?(p=+S?s0(g=S*O):(g=null,pl),P()):g*it},L.clipExtent=function(S){return arguments.length?(x=S==null?(m=b=v=y=null,Ji):Ss(m=+S[0][0],b=+S[0][1],v=+S[1][0],y=+S[1][1]),P()):m==null?null:[[m,b],[v,y]]},L.scale=function(S){return arguments.length?(n=+S,D()):n},L.translate=function(S){return arguments.length?(i=+S[0],a=+S[1],D()):[i,a]},L.center=function(S){return arguments.length?(r=S[0]%360*O,s=S[1]%360*O,D()):[r*it,s*it]},L.rotate=function(S){return arguments.length?(o=S[0]%360*O,l=S[1]%360*O,c=S.length>2?S[2]%360*O:0,D()):[o*it,l*it,c*it]},L.angle=function(S){return arguments.length?(f=S%360*O,D()):f*it},L.reflectX=function(S){return arguments.length?(h=S?-1:1,D()):h<0},L.reflectY=function(S){return arguments.length?(d=S?-1:1,D()):d<0},L.precision=function(S){return arguments.length?(A=Mh(k,M=S*S),P()):ft(M)},L.fitExtent=function(S,R){return As(L,S,R)},L.fitSize=function(S,R){return hc(L,S,R)},L.fitWidth=function(S,R){return fc(L,S,R)},L.fitHeight=function(S,R){return dc(L,S,R)};function D(){var S=kh(n,0,0,h,d,f).apply(null,e(r,s)),R=(f?kh:__)(n,i-S[0],a-S[1],h,d,f);return u=cc(o,l,c),k=fl(e,R),I=fl(u,k),A=Mh(k,M),P()}function P(){return C=T=null,L}return function(){return e=t.apply(this,arguments),L.invert=e.invert&&_,D()}}function gc(t){var e=0,n=q/3,i=pc(t),a=i(e,n);return a.parallels=function(r){return arguments.length?i(e=r[0]*O,n=r[1]*O):[e*it,n*it]},a}function w_(t){var e=H(t);function n(i,a){return[i*e,Y(a)/e]}return n.invert=function(i,a){return[i/e,Et(a*e)]},n}function _0(t,e){var n=Y(t),i=(n+Y(e))/2;if(Q(i)<G)return w_(t);var a=1+n*(2*i-n),r=ft(a)/i;function s(o,l){var c=ft(a-2*i*Y(l))/i;return[c*Y(o*=i),r-c*H(o)]}return s.invert=function(o,l){var c=r-l,u=Pt(o,Q(c))*qt(c);return c*i<0&&(u-=q*qt(o)*qt(c)),[u/i,Et((a-(o*o+c*c)*i*i)/(2*i))]},s}function Gr(){return gc(_0).scale(155.424).center([0,33.6442])}function w0(){return Gr().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function M_(t){var e=t.length;return{point:function(n,i){for(var a=-1;++a<e;)t[a].point(n,i)},sphere:function(){for(var n=-1;++n<e;)t[n].sphere()},lineStart:function(){for(var n=-1;++n<e;)t[n].lineStart()},lineEnd:function(){for(var n=-1;++n<e;)t[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<e;)t[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<e;)t[n].polygonEnd()}}}function k_(){var t,e,n=w0(),i,a=Gr().rotate([154,0]).center([-2,58.5]).parallels([55,65]),r,s=Gr().rotate([157,0]).center([-3,19.9]).parallels([8,18]),o,l,c={point:function(h,d){l=[h,d]}};function u(h){var d=h[0],g=h[1];return l=null,i.point(d,g),l||(r.point(d,g),l)||(o.point(d,g),l)}u.invert=function(h){var d=n.scale(),g=n.translate(),p=(h[0]-g[0])/d,m=(h[1]-g[1])/d;return(m>=.12&&m<.234&&p>=-.425&&p<-.214?a:m>=.166&&m<.234&&p>=-.214&&p<-.115?s:n).invert(h)},u.stream=function(h){return t&&e===h?t:t=M_([n.stream(e=h),a.stream(h),s.stream(h)])},u.precision=function(h){return arguments.length?(n.precision(h),a.precision(h),s.precision(h),f()):n.precision()},u.scale=function(h){return arguments.length?(n.scale(h),a.scale(h*.35),s.scale(h),u.translate(n.translate())):n.scale()},u.translate=function(h){if(!arguments.length)return n.translate();var d=n.scale(),g=+h[0],p=+h[1];return i=n.translate(h).clipExtent([[g-.455*d,p-.238*d],[g+.455*d,p+.238*d]]).stream(c),r=a.translate([g-.307*d,p+.201*d]).clipExtent([[g-.425*d+G,p+.12*d+G],[g-.214*d-G,p+.234*d-G]]).stream(c),o=s.translate([g-.205*d,p+.212*d]).clipExtent([[g-.214*d+G,p+.166*d+G],[g-.115*d-G,p+.234*d-G]]).stream(c),f()},u.fitExtent=function(h,d){return As(u,h,d)},u.fitSize=function(h,d){return hc(u,h,d)},u.fitWidth=function(h,d){return fc(u,h,d)},u.fitHeight=function(h,d){return dc(u,h,d)};function f(){return t=e=null,u}return u.scale(1070)}function M0(t){return function(e,n){var i=H(e),a=H(n),r=t(i*a);return[r*a*Y(e),r*Y(n)]}}function pa(t){return function(e,n){var i=ft(e*e+n*n),a=t(i),r=Y(a),s=H(a);return[Pt(e*r,i*s),Et(i&&n*r/i)]}}var mc=M0(function(t){return ft(2/(1+t))});mc.invert=pa(function(t){return 2*Et(t/2)});function S_(){return me(mc).scale(124.75).clipAngle(180-.001)}var bc=M0(function(t){return(t=Ud(t))&&t/Y(t)});bc.invert=pa(function(t){return t});function A_(){return me(bc).scale(79.4188).clipAngle(180-.001)}function ga(t,e){return[t,xr(oc((ct+e)/2))]}ga.invert=function(t,e){return[t,2*ni(Od(e))-ct]};function D_(){return k0(ga).scale(961/Rt)}function k0(t){var e=me(t),n=e.center,i=e.scale,a=e.translate,r=e.clipExtent,s=null,o,l,c;e.scale=function(f){return arguments.length?(i(f),u()):i()},e.translate=function(f){return arguments.length?(a(f),u()):a()},e.center=function(f){return arguments.length?(n(f),u()):n()},e.clipExtent=function(f){return arguments.length?(f==null?s=o=l=c=null:(s=+f[0][0],o=+f[0][1],l=+f[1][0],c=+f[1][1]),u()):s==null?null:[[s,o],[l,c]]};function u(){var f=q*i(),h=e(t0(e.rotate()).invert([0,0]));return r(s==null?[[h[0]-f,h[1]-f],[h[0]+f,h[1]+f]]:t===ga?[[Math.max(h[0]-f,s),o],[Math.min(h[0]+f,l),c]]:[[s,Math.max(h[1]-f,o)],[l,Math.min(h[1]+f,c)]])}return u()}function Ra(t){return oc((ct+t)/2)}function S0(t,e){var n=H(t),i=t===e?Y(t):xr(n/H(e))/xr(Ra(e)/Ra(t)),a=n*uo(Ra(t),i)/i;if(!i)return ga;function r(s,o){a>0?o<-ct+G&&(o=-ct+G):o>ct-G&&(o=ct-G);var l=a/uo(Ra(o),i);return[l*Y(i*s),a-l*H(i*s)]}return r.invert=function(s,o){var l=a-o,c=qt(i)*ft(s*s+l*l),u=Pt(s,Q(l))*qt(l);return l*i<0&&(u-=q*qt(s)*qt(l)),[u/i,2*ni(uo(a/c,1/i))-ct]},r}function L_(){return gc(S0).scale(109.5).parallels([30,30])}function ta(t,e){return[t,e]}ta.invert=ta;function C_(){return me(ta).scale(152.63)}function A0(t,e){var n=H(t),i=t===e?Y(t):(n-H(e))/(e-t),a=n/i+t;if(Q(i)<G)return ta;function r(s,o){var l=a-o,c=i*s;return[l*Y(c),a-l*H(c)]}return r.invert=function(s,o){var l=a-o,c=Pt(s,Q(l))*qt(l);return l*i<0&&(c-=q*qt(s)*qt(l)),[c/i,a-qt(i)*ft(s*s+l*l)]},r}function T_(){return gc(A0).scale(131.154).center([0,13.9389])}var Yi=1.340264,zi=-.081106,Xi=893e-6,Hi=.003796,Or=ft(3)/2,I_=12;function yc(t,e){var n=Et(Or*Y(e)),i=n*n,a=i*i*i;return[t*H(n)/(Or*(Yi+3*zi*i+a*(7*Xi+9*Hi*i))),n*(Yi+zi*i+a*(Xi+Hi*i))]}yc.invert=function(t,e){for(var n=e,i=n*n,a=i*i*i,r=0,s,o,l;r<I_&&(o=n*(Yi+zi*i+a*(Xi+Hi*i))-e,l=Yi+3*zi*i+a*(7*Xi+9*Hi*i),n-=s=o/l,i=n*n,a=i*i*i,!(Q(s)<yr));++r);return[Or*t*(Yi+3*zi*i+a*(7*Xi+9*Hi*i))/H(n),Et(Y(n)/Or)]};function R_(){return me(yc).scale(177.158)}function vc(t,e){var n=H(e),i=H(t)*n;return[n*Y(t)/i,Y(e)/i]}vc.invert=pa(ni);function P_(){return me(vc).scale(144.049).clipAngle(60)}function E_(){var t=1,e=0,n=0,i=1,a=1,r=0,s,o,l=null,c,u,f,h=1,d=1,g=da({point:function(x,M){var A=y([x,M]);this.stream.point(A[0],A[1])}}),p=Ji,m,b;function v(){return h=t*i,d=t*a,m=b=null,y}function y(x){var M=x[0]*h,A=x[1]*d;if(r){var k=A*s-M*o;M=M*s+A*o,A=k}return[M+e,A+n]}return y.invert=function(x){var M=x[0]-e,A=x[1]-n;if(r){var k=A*s+M*o;M=M*s-A*o,A=k}return[M/h,A/d]},y.stream=function(x){return m&&b===x?m:m=g(p(b=x))},y.postclip=function(x){return arguments.length?(p=x,l=c=u=f=null,v()):p},y.clipExtent=function(x){return arguments.length?(p=x==null?(l=c=u=f=null,Ji):Ss(l=+x[0][0],c=+x[0][1],u=+x[1][0],f=+x[1][1]),v()):l==null?null:[[l,c],[u,f]]},y.scale=function(x){return arguments.length?(t=+x,v()):t},y.translate=function(x){return arguments.length?(e=+x[0],n=+x[1],v()):[e,n]},y.angle=function(x){return arguments.length?(r=x%360*O,o=Y(r),s=H(r),v()):r*it},y.reflectX=function(x){return arguments.length?(i=x?-1:1,v()):i<0},y.reflectY=function(x){return arguments.length?(a=x?-1:1,v()):a<0},y.fitExtent=function(x,M){return As(y,x,M)},y.fitSize=function(x,M){return hc(y,x,M)},y.fitWidth=function(x,M){return fc(y,x,M)},y.fitHeight=function(x,M){return dc(y,x,M)},y}function xc(t,e){var n=e*e,i=n*n;return[t*(.8707-.131979*n+i*(-.013791+i*(.003971*n-.001529*i))),e*(1.007226+n*(.015085+i*(-.044475+.028874*n-.005916*i)))]}xc.invert=function(t,e){var n=e,i=25,a;do{var r=n*n,s=r*r;n-=a=(n*(1.007226+r*(.015085+s*(-.044475+.028874*r-.005916*s)))-e)/(1.007226+r*(.015085*3+s*(-.044475*7+.028874*9*r-.005916*11*s)))}while(Q(a)>G&&--i>0);return[t/(.8707+(r=n*n)*(-.131979+r*(-.013791+r*r*r*(.003971-.001529*r)))),n]};function $_(){return me(xc).scale(175.295)}function _c(t,e){return[H(e)*Y(t),Y(e)]}_c.invert=pa(Et);function N_(){return me(_c).scale(249.5).clipAngle(90+G)}function wc(t,e){var n=H(e),i=1+H(t)*n;return[n*Y(t)/i,Y(e)/i]}wc.invert=pa(function(t){return 2*ni(t)});function Y_(){return me(wc).scale(250).clipAngle(142)}function Mc(t,e){return[xr(oc((ct+e)/2)),-t]}Mc.invert=function(t,e){return[-e,2*ni(Od(t))-ct]};function z_(){var t=k0(Mc),e=t.center,n=t.rotate;return t.center=function(i){return arguments.length?e([-i[1],i[0]]):(i=e(),[i[1],-i[0]])},t.rotate=function(i){return arguments.length?n([i[0],i[1],i.length>2?i[2]+90:90]):(i=n(),[i[0],i[1],i[2]-90])},n([0,0,90]).scale(159.155)}function X_(t,e){return t.parent===e.parent?1:2}function H_(t){return t.reduce(G_,0)/t.length}function G_(t,e){return t+e.x}function O_(t){return 1+t.reduce(U_,0)}function U_(t,e){return Math.max(t,e.y)}function B_(t){for(var e;e=t.children;)t=e[0];return t}function F_(t){for(var e;e=t.children;)t=e[e.length-1];return t}function W_(){var t=X_,e=1,n=1,i=!1;function a(r){var s,o=0;r.eachAfter(function(h){var d=h.children;d?(h.x=H_(d),h.y=O_(d)):(h.x=s?o+=t(h,s):0,h.y=0,s=h)});var l=B_(r),c=F_(r),u=l.x-t(l,c)/2,f=c.x+t(c,l)/2;return r.eachAfter(i?function(h){h.x=(h.x-r.x)*e,h.y=(r.y-h.y)*n}:function(h){h.x=(h.x-u)/(f-u)*e,h.y=(1-(r.y?h.y/r.y:1))*n})}return a.separation=function(r){return arguments.length?(t=r,a):t},a.size=function(r){return arguments.length?(i=!1,e=+r[0],n=+r[1],a):i?null:[e,n]},a.nodeSize=function(r){return arguments.length?(i=!0,e=+r[0],n=+r[1],a):i?[e,n]:null},a}function V_(t){var e=0,n=t.children,i=n&&n.length;if(!i)e=1;else for(;--i>=0;)e+=n[i].value;t.value=e}function q_(){return this.eachAfter(V_)}function Z_(t){var e=this,n,i=[e],a,r,s;do for(n=i.reverse(),i=[];e=n.pop();)if(t(e),a=e.children,a)for(r=0,s=a.length;r<s;++r)i.push(a[r]);while(i.length);return this}function K_(t){for(var e=this,n=[e],i,a;e=n.pop();)if(t(e),i=e.children,i)for(a=i.length-1;a>=0;--a)n.push(i[a]);return this}function Q_(t){for(var e=this,n=[e],i=[],a,r,s;e=n.pop();)if(i.push(e),a=e.children,a)for(r=0,s=a.length;r<s;++r)n.push(a[r]);for(;e=i.pop();)t(e);return this}function J_(t){return this.eachAfter(function(e){for(var n=+t(e.data)||0,i=e.children,a=i&&i.length;--a>=0;)n+=i[a].value;e.value=n})}function j_(t){return this.eachBefore(function(e){e.children&&e.children.sort(t)})}function tw(t){for(var e=this,n=ew(e,t),i=[e];e!==n;)e=e.parent,i.push(e);for(var a=i.length;t!==n;)i.splice(a,0,t),t=t.parent;return i}function ew(t,e){if(t===e)return t;var n=t.ancestors(),i=e.ancestors(),a=null;for(t=n.pop(),e=i.pop();t===e;)a=t,t=n.pop(),e=i.pop();return a}function nw(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e}function iw(){var t=[];return this.each(function(e){t.push(e)}),t}function aw(){var t=[];return this.eachBefore(function(e){e.children||t.push(e)}),t}function rw(){var t=this,e=[];return t.each(function(n){n!==t&&e.push({source:n.parent,target:n})}),e}function kc(t,e){var n=new Qn(t),i=+t.value&&(n.value=t.value),a,r=[n],s,o,l,c;for(e==null&&(e=ow);a=r.pop();)if(i&&(a.value=+a.data.value),(o=e(a.data))&&(c=o.length))for(a.children=new Array(c),l=c-1;l>=0;--l)r.push(s=a.children[l]=new Qn(o[l])),s.parent=a,s.depth=a.depth+1;return n.eachBefore(D0)}function sw(){return kc(this).eachBefore(lw)}function ow(t){return t.children}function lw(t){t.data=t.data.data}function D0(t){var e=0;do t.height=e;while((t=t.parent)&&t.height<++e)}function Qn(t){this.data=t,this.depth=this.height=0,this.parent=null}Qn.prototype=kc.prototype={constructor:Qn,count:q_,each:Z_,eachAfter:Q_,eachBefore:K_,sum:J_,sort:j_,path:tw,ancestors:nw,descendants:iw,leaves:aw,links:rw,copy:sw};var cw=Array.prototype.slice;function uw(t){for(var e=t.length,n,i;e;)i=Math.random()*e--|0,n=t[e],t[e]=t[i],t[i]=n;return t}function L0(t){for(var e=0,n=(t=uw(cw.call(t))).length,i=[],a,r;e<n;)a=t[e],r&&C0(r,a)?++e:(r=fw(i=hw(i,a)),e=0);return r}function hw(t,e){var n,i;if(bo(e,t))return[e];for(n=0;n<t.length;++n)if(Pa(e,t[n])&&bo(Li(t[n],e),t))return[t[n],e];for(n=0;n<t.length-1;++n)for(i=n+1;i<t.length;++i)if(Pa(Li(t[n],t[i]),e)&&Pa(Li(t[n],e),t[i])&&Pa(Li(t[i],e),t[n])&&bo(T0(t[n],t[i],e),t))return[t[n],t[i],e];throw new Error}function Pa(t,e){var n=t.r-e.r,i=e.x-t.x,a=e.y-t.y;return n<0||n*n<i*i+a*a}function C0(t,e){var n=t.r-e.r+1e-6,i=e.x-t.x,a=e.y-t.y;return n>0&&n*n>i*i+a*a}function bo(t,e){for(var n=0;n<e.length;++n)if(!C0(t,e[n]))return!1;return!0}function fw(t){switch(t.length){case 1:return dw(t[0]);case 2:return Li(t[0],t[1]);case 3:return T0(t[0],t[1],t[2])}}function dw(t){return{x:t.x,y:t.y,r:t.r}}function Li(t,e){var n=t.x,i=t.y,a=t.r,r=e.x,s=e.y,o=e.r,l=r-n,c=s-i,u=o-a,f=Math.sqrt(l*l+c*c);return{x:(n+r+l/f*u)/2,y:(i+s+c/f*u)/2,r:(f+a+o)/2}}function T0(t,e,n){var i=t.x,a=t.y,r=t.r,s=e.x,o=e.y,l=e.r,c=n.x,u=n.y,f=n.r,h=i-s,d=i-c,g=a-o,p=a-u,m=l-r,b=f-r,v=i*i+a*a-r*r,y=v-s*s-o*o+l*l,x=v-c*c-u*u+f*f,M=d*g-h*p,A=(g*x-p*y)/(M*2)-i,k=(p*m-g*b)/M,I=(d*y-h*x)/(M*2)-a,C=(h*b-d*m)/M,T=k*k+C*C-1,L=2*(r+A*k+I*C),_=A*A+I*I-r*r,D=-(T?(L+Math.sqrt(L*L-4*T*_))/(2*T):_/L);return{x:i+A+k*D,y:a+I+C*D,r:D}}function Sh(t,e,n){var i=t.x-e.x,a,r,s=t.y-e.y,o,l,c=i*i+s*s;c?(r=e.r+n.r,r*=r,l=t.r+n.r,l*=l,r>l?(a=(c+l-r)/(2*c),o=Math.sqrt(Math.max(0,l/c-a*a)),n.x=t.x-a*i-o*s,n.y=t.y-a*s+o*i):(a=(c+r-l)/(2*c),o=Math.sqrt(Math.max(0,r/c-a*a)),n.x=e.x+a*i-o*s,n.y=e.y+a*s+o*i)):(n.x=e.x+n.r,n.y=e.y)}function Ah(t,e){var n=t.r+e.r-1e-6,i=e.x-t.x,a=e.y-t.y;return n>0&&n*n>i*i+a*a}function Dh(t){var e=t._,n=t.next._,i=e.r+n.r,a=(e.x*n.r+n.x*e.r)/i,r=(e.y*n.r+n.y*e.r)/i;return a*a+r*r}function Ea(t){this._=t,this.next=null,this.previous=null}function I0(t){if(!(a=t.length))return 0;var e,n,i,a,r,s,o,l,c,u,f;if(e=t[0],e.x=0,e.y=0,!(a>1))return e.r;if(n=t[1],e.x=-n.r,n.x=e.r,n.y=0,!(a>2))return e.r+n.r;Sh(n,e,i=t[2]),e=new Ea(e),n=new Ea(n),i=new Ea(i),e.next=i.previous=n,n.next=e.previous=i,i.next=n.previous=e;t:for(o=3;o<a;++o){Sh(e._,n._,i=t[o]),i=new Ea(i),l=n.next,c=e.previous,u=n._.r,f=e._.r;do if(u<=f){if(Ah(l._,i._)){n=l,e.next=n,n.previous=e,--o;continue t}u+=l._.r,l=l.next}else{if(Ah(c._,i._)){e=c,e.next=n,n.previous=e,--o;continue t}f+=c._.r,c=c.previous}while(l!==c.next);for(i.previous=e,i.next=n,e.next=n.previous=n=i,r=Dh(e);(i=i.next)!==n;)(s=Dh(i))<r&&(e=i,r=s);n=e.next}for(e=[n._],i=n;(i=i.next)!==n;)e.push(i._);for(i=L0(e),o=0;o<a;++o)e=t[o],e.x-=i.x,e.y-=i.y;return i.r}function pw(t){return I0(t),t}function gw(t){return t==null?null:Ur(t)}function Ur(t){if(typeof t!="function")throw new Error;return t}function Je(){return 0}function Rn(t){return function(){return t}}function mw(t){return Math.sqrt(t.value)}function bw(){var t=null,e=1,n=1,i=Je;function a(r){return r.x=e/2,r.y=n/2,t?r.eachBefore(Lh(t)).eachAfter(yo(i,.5)).eachBefore(Ch(1)):r.eachBefore(Lh(mw)).eachAfter(yo(Je,1)).eachAfter(yo(i,r.r/Math.min(e,n))).eachBefore(Ch(Math.min(e,n)/(2*r.r))),r}return a.radius=function(r){return arguments.length?(t=gw(r),a):t},a.size=function(r){return arguments.length?(e=+r[0],n=+r[1],a):[e,n]},a.padding=function(r){return arguments.length?(i=typeof r=="function"?r:Rn(+r),a):i},a}function Lh(t){return function(e){e.children||(e.r=Math.max(0,+t(e)||0))}}function yo(t,e){return function(n){if(i=n.children){var i,a,r=i.length,s=t(n)*e||0,o;if(s)for(a=0;a<r;++a)i[a].r+=s;if(o=I0(i),s)for(a=0;a<r;++a)i[a].r-=s;n.r=o+s}}}function Ch(t){return function(e){var n=e.parent;e.r*=t,n&&(e.x=n.x+t*e.x,e.y=n.y+t*e.y)}}function R0(t){t.x0=Math.round(t.x0),t.y0=Math.round(t.y0),t.x1=Math.round(t.x1),t.y1=Math.round(t.y1)}function ma(t,e,n,i,a){for(var r=t.children,s,o=-1,l=r.length,c=t.value&&(i-e)/t.value;++o<l;)s=r[o],s.y0=n,s.y1=a,s.x0=e,s.x1=e+=s.value*c}function yw(){var t=1,e=1,n=0,i=!1;function a(s){var o=s.height+1;return s.x0=s.y0=n,s.x1=t,s.y1=e/o,s.eachBefore(r(e,o)),i&&s.eachBefore(R0),s}function r(s,o){return function(l){l.children&&ma(l,l.x0,s*(l.depth+1)/o,l.x1,s*(l.depth+2)/o);var c=l.x0,u=l.y0,f=l.x1-n,h=l.y1-n;f<c&&(c=f=(c+f)/2),h<u&&(u=h=(u+h)/2),l.x0=c,l.y0=u,l.x1=f,l.y1=h}}return a.round=function(s){return arguments.length?(i=!!s,a):i},a.size=function(s){return arguments.length?(t=+s[0],e=+s[1],a):[t,e]},a.padding=function(s){return arguments.length?(n=+s,a):n},a}var Th="$",vw={depth:-1},Ih={};function xw(t){return t.id}function _w(t){return t.parentId}function ww(){var t=xw,e=_w;function n(i){var a,r,s=i.length,o,l,c,u=new Array(s),f,h,d={};for(r=0;r<s;++r)a=i[r],c=u[r]=new Qn(a),(f=t(a,r,i))!=null&&(f+="")&&(h=Th+(c.id=f),d[h]=h in d?Ih:c);for(r=0;r<s;++r)if(c=u[r],f=e(i[r],r,i),f==null||!(f+="")){if(o)throw new Error("multiple roots");o=c}else{if(l=d[Th+f],!l)throw new Error("missing: "+f);if(l===Ih)throw new Error("ambiguous: "+f);l.children?l.children.push(c):l.children=[c],c.parent=l}if(!o)throw new Error("no root");if(o.parent=vw,o.eachBefore(function(g){g.depth=g.parent.depth+1,--s}).eachBefore(D0),o.parent=null,s>0)throw new Error("cycle");return o}return n.id=function(i){return arguments.length?(t=Ur(i),n):t},n.parentId=function(i){return arguments.length?(e=Ur(i),n):e},n}function Mw(t,e){return t.parent===e.parent?1:2}function vo(t){var e=t.children;return e?e[0]:t.t}function xo(t){var e=t.children;return e?e[e.length-1]:t.t}function kw(t,e,n){var i=n/(e.i-t.i);e.c-=i,e.s+=n,t.c+=i,e.z+=n,e.m+=n}function Sw(t){for(var e=0,n=0,i=t.children,a=i.length,r;--a>=0;)r=i[a],r.z+=e,r.m+=e,e+=r.s+(n+=r.c)}function Aw(t,e,n){return t.a.parent===e.parent?t.a:n}function sr(t,e){this._=t,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=e}sr.prototype=Object.create(Qn.prototype);function Dw(t){for(var e=new sr(t,0),n,i=[e],a,r,s,o;n=i.pop();)if(r=n._.children)for(n.children=new Array(o=r.length),s=o-1;s>=0;--s)i.push(a=n.children[s]=new sr(r[s],s)),a.parent=n;return(e.parent=new sr(null,0)).children=[e],e}function Lw(){var t=Mw,e=1,n=1,i=null;function a(c){var u=Dw(c);if(u.eachAfter(r),u.parent.m=-u.z,u.eachBefore(s),i)c.eachBefore(l);else{var f=c,h=c,d=c;c.eachBefore(function(v){v.x<f.x&&(f=v),v.x>h.x&&(h=v),v.depth>d.depth&&(d=v)});var g=f===h?1:t(f,h)/2,p=g-f.x,m=e/(h.x+g+p),b=n/(d.depth||1);c.eachBefore(function(v){v.x=(v.x+p)*m,v.y=v.depth*b})}return c}function r(c){var u=c.children,f=c.parent.children,h=c.i?f[c.i-1]:null;if(u){Sw(c);var d=(u[0].z+u[u.length-1].z)/2;h?(c.z=h.z+t(c._,h._),c.m=c.z-d):c.z=d}else h&&(c.z=h.z+t(c._,h._));c.parent.A=o(c,h,c.parent.A||f[0])}function s(c){c._.x=c.z+c.parent.m,c.m+=c.parent.m}function o(c,u,f){if(u){for(var h=c,d=c,g=u,p=h.parent.children[0],m=h.m,b=d.m,v=g.m,y=p.m,x;g=xo(g),h=vo(h),g&&h;)p=vo(p),d=xo(d),d.a=c,x=g.z+v-h.z-m+t(g._,h._),x>0&&(kw(Aw(g,c,f),c,x),m+=x,b+=x),v+=g.m,m+=h.m,y+=p.m,b+=d.m;g&&!xo(d)&&(d.t=g,d.m+=v-b),h&&!vo(p)&&(p.t=h,p.m+=m-y,f=c)}return f}function l(c){c.x*=e,c.y=c.depth*n}return a.separation=function(c){return arguments.length?(t=c,a):t},a.size=function(c){return arguments.length?(i=!1,e=+c[0],n=+c[1],a):i?null:[e,n]},a.nodeSize=function(c){return arguments.length?(i=!0,e=+c[0],n=+c[1],a):i?[e,n]:null},a}function Ds(t,e,n,i,a){for(var r=t.children,s,o=-1,l=r.length,c=t.value&&(a-n)/t.value;++o<l;)s=r[o],s.x0=e,s.x1=i,s.y0=n,s.y1=n+=s.value*c}var P0=(1+Math.sqrt(5))/2;function E0(t,e,n,i,a,r){for(var s=[],o=e.children,l,c,u=0,f=0,h=o.length,d,g,p=e.value,m,b,v,y,x,M,A;u<h;){d=a-n,g=r-i;do m=o[f++].value;while(!m&&f<h);for(b=v=m,M=Math.max(g/d,d/g)/(p*t),A=m*m*M,x=Math.max(v/A,A/b);f<h;++f){if(m+=c=o[f].value,c<b&&(b=c),c>v&&(v=c),A=m*m*M,y=Math.max(v/A,A/b),y>x){m-=c;break}x=y}s.push(l={value:m,dice:d<g,children:o.slice(u,f)}),l.dice?ma(l,n,i,a,p?i+=g*m/p:r):Ds(l,n,i,p?n+=d*m/p:a,r),p-=m,u=f}return s}const $0=function t(e){function n(i,a,r,s,o){E0(e,i,a,r,s,o)}return n.ratio=function(i){return t((i=+i)>1?i:1)},n}(P0);function Cw(){var t=$0,e=!1,n=1,i=1,a=[0],r=Je,s=Je,o=Je,l=Je,c=Je;function u(h){return h.x0=h.y0=0,h.x1=n,h.y1=i,h.eachBefore(f),a=[0],e&&h.eachBefore(R0),h}function f(h){var d=a[h.depth],g=h.x0+d,p=h.y0+d,m=h.x1-d,b=h.y1-d;m<g&&(g=m=(g+m)/2),b<p&&(p=b=(p+b)/2),h.x0=g,h.y0=p,h.x1=m,h.y1=b,h.children&&(d=a[h.depth+1]=r(h)/2,g+=c(h)-d,p+=s(h)-d,m-=o(h)-d,b-=l(h)-d,m<g&&(g=m=(g+m)/2),b<p&&(p=b=(p+b)/2),t(h,g,p,m,b))}return u.round=function(h){return arguments.length?(e=!!h,u):e},u.size=function(h){return arguments.length?(n=+h[0],i=+h[1],u):[n,i]},u.tile=function(h){return arguments.length?(t=Ur(h),u):t},u.padding=function(h){return arguments.length?u.paddingInner(h).paddingOuter(h):u.paddingInner()},u.paddingInner=function(h){return arguments.length?(r=typeof h=="function"?h:Rn(+h),u):r},u.paddingOuter=function(h){return arguments.length?u.paddingTop(h).paddingRight(h).paddingBottom(h).paddingLeft(h):u.paddingTop()},u.paddingTop=function(h){return arguments.length?(s=typeof h=="function"?h:Rn(+h),u):s},u.paddingRight=function(h){return arguments.length?(o=typeof h=="function"?h:Rn(+h),u):o},u.paddingBottom=function(h){return arguments.length?(l=typeof h=="function"?h:Rn(+h),u):l},u.paddingLeft=function(h){return arguments.length?(c=typeof h=="function"?h:Rn(+h),u):c},u}function Tw(t,e,n,i,a){var r=t.children,s,o=r.length,l,c=new Array(o+1);for(c[0]=l=s=0;s<o;++s)c[s+1]=l+=r[s].value;u(0,o,t.value,e,n,i,a);function u(f,h,d,g,p,m,b){if(f>=h-1){var v=r[f];v.x0=g,v.y0=p,v.x1=m,v.y1=b;return}for(var y=c[f],x=d/2+y,M=f+1,A=h-1;M<A;){var k=M+A>>>1;c[k]<x?M=k+1:A=k}x-c[M-1]<c[M]-x&&f+1<M&&--M;var I=c[M]-y,C=d-I;if(m-g>b-p){var T=(g*C+m*I)/d;u(f,M,I,g,p,T,b),u(M,h,C,T,p,m,b)}else{var L=(p*C+b*I)/d;u(f,M,I,g,p,m,L),u(M,h,C,g,L,m,b)}}}function Iw(t,e,n,i,a){(t.depth&1?Ds:ma)(t,e,n,i,a)}const Rw=function t(e){function n(i,a,r,s,o){if((l=i._squarify)&&l.ratio===e)for(var l,c,u,f,h=-1,d,g=l.length,p=i.value;++h<g;){for(c=l[h],u=c.children,f=c.value=0,d=u.length;f<d;++f)c.value+=u[f].value;c.dice?ma(c,a,r,s,r+=(o-r)*c.value/p):Ds(c,a,r,a+=(s-a)*c.value/p,o),p-=c.value}else i._squarify=l=E0(e,i,a,r,s,o),l.ratio=e}return n.ratio=function(i){return t((i=+i)>1?i:1)},n}(P0);function Pw(t){for(var e=-1,n=t.length,i,a=t[n-1],r=0;++e<n;)i=a,a=t[e],r+=i[1]*a[0]-i[0]*a[1];return r/2}function Ew(t){for(var e=-1,n=t.length,i=0,a=0,r,s=t[n-1],o,l=0;++e<n;)r=s,s=t[e],l+=o=r[0]*s[1]-s[0]*r[1],i+=(r[0]+s[0])*o,a+=(r[1]+s[1])*o;return l*=3,[i/l,a/l]}function $w(t,e,n){return(e[0]-t[0])*(n[1]-t[1])-(e[1]-t[1])*(n[0]-t[0])}function Nw(t,e){return t[0]-e[0]||t[1]-e[1]}function Rh(t){for(var e=t.length,n=[0,1],i=2,a=2;a<e;++a){for(;i>1&&$w(t[n[i-2]],t[n[i-1]],t[a])<=0;)--i;n[i++]=a}return n.slice(0,i)}function Yw(t){if((n=t.length)<3)return null;var e,n,i=new Array(n),a=new Array(n);for(e=0;e<n;++e)i[e]=[+t[e][0],+t[e][1],e];for(i.sort(Nw),e=0;e<n;++e)a[e]=[i[e][0],-i[e][1]];var r=Rh(i),s=Rh(a),o=s[0]===r[0],l=s[s.length-1]===r[r.length-1],c=[];for(e=r.length-1;e>=0;--e)c.push(t[i[r[e]][2]]);for(e=+o;e<s.length-l;++e)c.push(t[i[s[e]][2]]);return c}function zw(t,e){for(var n=t.length,i=t[n-1],a=e[0],r=e[1],s=i[0],o=i[1],l,c,u=!1,f=0;f<n;++f)i=t[f],l=i[0],c=i[1],c>r!=o>r&&a<(s-l)*(r-c)/(o-c)+l&&(u=!u),s=l,o=c;return u}function Xw(t){for(var e=-1,n=t.length,i=t[n-1],a,r,s=i[0],o=i[1],l=0;++e<n;)a=s,r=o,i=t[e],s=i[0],o=i[1],a-=s,r-=o,l+=Math.sqrt(a*a+r*r);return l}function ii(){return Math.random()}const Hw=function t(e){function n(i,a){return i=i==null?0:+i,a=a==null?1:+a,arguments.length===1?(a=i,i=0):a-=i,function(){return e()*a+i}}return n.source=t,n}(ii),N0=function t(e){function n(i,a){var r,s;return i=i==null?0:+i,a=a==null?1:+a,function(){var o;if(r!=null)o=r,r=null;else do r=e()*2-1,o=e()*2-1,s=r*r+o*o;while(!s||s>1);return i+a*o*Math.sqrt(-2*Math.log(s)/s)}}return n.source=t,n}(ii),Gw=function t(e){function n(){var i=N0.source(e).apply(this,arguments);return function(){return Math.exp(i())}}return n.source=t,n}(ii),Y0=function t(e){function n(i){return function(){for(var a=0,r=0;r<i;++r)a+=e();return a}}return n.source=t,n}(ii),Ow=function t(e){function n(i){var a=Y0.source(e)(i);return function(){return a()/i}}return n.source=t,n}(ii),Uw=function t(e){function n(i){return function(){return-Math.log(1-e())/i}}return n.source=t,n}(ii);function re(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function Ae(t,e){switch(arguments.length){case 0:break;case 1:this.interpolator(t);break;default:this.interpolator(e).domain(t);break}return this}var z0=Array.prototype,Br=z0.map,fn=z0.slice,Dl={name:"implicit"};function Ls(){var t=Me(),e=[],n=[],i=Dl;function a(r){var s=r+"",o=t.get(s);if(!o){if(i!==Dl)return i;t.set(s,o=e.push(r))}return n[(o-1)%n.length]}return a.domain=function(r){if(!arguments.length)return e.slice();e=[],t=Me();for(var s=-1,o=r.length,l,c;++s<o;)t.has(c=(l=r[s])+"")||t.set(c,e.push(l));return a},a.range=function(r){return arguments.length?(n=fn.call(r),a):n.slice()},a.unknown=function(r){return arguments.length?(i=r,a):i},a.copy=function(){return Ls(e,n).unknown(i)},re.apply(a,arguments),a}function Sc(){var t=Ls().unknown(void 0),e=t.domain,n=t.range,i=[0,1],a,r,s=!1,o=0,l=0,c=.5;delete t.unknown;function u(){var f=e().length,h=i[1]<i[0],d=i[h-0],g=i[1-h];a=(g-d)/Math.max(1,f-o+l*2),s&&(a=Math.floor(a)),d+=(g-d-a*(f-o))*c,r=a*(1-o),s&&(d=Math.round(d),r=Math.round(r));var p=Gt(f).map(function(m){return d+a*m});return n(h?p.reverse():p)}return t.domain=function(f){return arguments.length?(e(f),u()):e()},t.range=function(f){return arguments.length?(i=[+f[0],+f[1]],u()):i.slice()},t.rangeRound=function(f){return i=[+f[0],+f[1]],s=!0,u()},t.bandwidth=function(){return r},t.step=function(){return a},t.round=function(f){return arguments.length?(s=!!f,u()):s},t.padding=function(f){return arguments.length?(o=Math.min(1,l=+f),u()):o},t.paddingInner=function(f){return arguments.length?(o=Math.min(1,f),u()):o},t.paddingOuter=function(f){return arguments.length?(l=+f,u()):l},t.align=function(f){return arguments.length?(c=Math.max(0,Math.min(1,f)),u()):c},t.copy=function(){return Sc(e(),i).round(s).paddingInner(o).paddingOuter(l).align(c)},re.apply(u(),arguments)}function X0(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return X0(e())},t}function ai(){return X0(Sc.apply(null,arguments).paddingInner(1))}function Bw(t){return function(){return t}}function Ll(t){return+t}var Ph=[0,1];function vt(t){return t}function Cl(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:Bw(isNaN(e)?NaN:.5)}function Eh(t){var e=t[0],n=t[t.length-1],i;return e>n&&(i=e,e=n,n=i),function(a){return Math.max(e,Math.min(n,a))}}function Fw(t,e,n){var i=t[0],a=t[1],r=e[0],s=e[1];return a<i?(i=Cl(a,i),r=n(s,r)):(i=Cl(i,a),r=n(r,s)),function(o){return r(i(o))}}function Ww(t,e,n){var i=Math.min(t.length,e.length)-1,a=new Array(i),r=new Array(i),s=-1;for(t[i]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++s<i;)a[s]=Cl(t[s],t[s+1]),r[s]=n(e[s],e[s+1]);return function(o){var l=$e(t,o,1,i)-1;return r[l](a[l](o))}}function ba(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function Cs(){var t=Ph,e=Ph,n=ua,i,a,r,s=vt,o,l,c;function u(){return o=Math.min(t.length,e.length)>2?Ww:Fw,l=c=null,f}function f(h){return isNaN(h=+h)?r:(l||(l=o(t.map(i),e,n)))(i(s(h)))}return f.invert=function(h){return s(a((c||(c=o(e,t.map(i),Vt)))(h)))},f.domain=function(h){return arguments.length?(t=Br.call(h,Ll),s===vt||(s=Eh(t)),u()):t.slice()},f.range=function(h){return arguments.length?(e=fn.call(h),u()):e.slice()},f.rangeRound=function(h){return e=fn.call(h),n=ld,u()},f.clamp=function(h){return arguments.length?(s=h?Eh(t):vt,f):s!==vt},f.interpolate=function(h){return arguments.length?(n=h,u()):n},f.unknown=function(h){return arguments.length?(r=h,f):r},function(h,d){return i=h,a=d,u()}}function H0(t,e){return Cs()(t,e)}function G0(t,e,n,i){var a=sn(t,e,n),r;switch(i=Qi(i??",f"),i.type){case"s":{var s=Math.max(Math.abs(t),Math.abs(e));return i.precision==null&&!isNaN(r=Hd(a,s))&&(i.precision=r),sc(i,s)}case"":case"e":case"g":case"p":case"r":{i.precision==null&&!isNaN(r=Gd(a,Math.max(Math.abs(t),Math.abs(e))))&&(i.precision=r-(i.type==="e"));break}case"f":case"%":{i.precision==null&&!isNaN(r=Xd(a))&&(i.precision=r-(i.type==="%")*2);break}}return ha(i)}function wn(t){var e=t.domain;return t.ticks=function(n){var i=e();return Yl(i[0],i[i.length-1],n??10)},t.tickFormat=function(n,i){var a=e();return G0(a[0],a[a.length-1],n??10,i)},t.nice=function(n){n==null&&(n=10);var i=e(),a=0,r=i.length-1,s=i[a],o=i[r],l;return o<s&&(l=s,s=o,o=l,l=a,a=r,r=l),l=$i(s,o,n),l>0?(s=Math.floor(s/l)*l,o=Math.ceil(o/l)*l,l=$i(s,o,n)):l<0&&(s=Math.ceil(s*l)/l,o=Math.floor(o*l)/l,l=$i(s,o,n)),l>0?(i[a]=Math.floor(s/l)*l,i[r]=Math.ceil(o/l)*l,e(i)):l<0&&(i[a]=Math.ceil(s*l)/l,i[r]=Math.floor(o*l)/l,e(i)),t},t}function Xe(){var t=H0(vt,vt);return t.copy=function(){return ba(t,Xe())},re.apply(t,arguments),wn(t)}function O0(t){var e;function n(i){return isNaN(i=+i)?e:i}return n.invert=n,n.domain=n.range=function(i){return arguments.length?(t=Br.call(i,Ll),n):t.slice()},n.unknown=function(i){return arguments.length?(e=i,n):e},n.copy=function(){return O0(t).unknown(e)},t=arguments.length?Br.call(t,Ll):[0,1],wn(n)}function U0(t,e){t=t.slice();var n=0,i=t.length-1,a=t[n],r=t[i],s;return r<a&&(s=n,n=i,i=s,s=a,a=r,r=s),t[n]=e.floor(a),t[i]=e.ceil(r),t}function $h(t){return Math.log(t)}function Nh(t){return Math.exp(t)}function Vw(t){return-Math.log(-t)}function qw(t){return-Math.exp(-t)}function Zw(t){return isFinite(t)?+("1e"+t):t<0?0:t}function Kw(t){return t===10?Zw:t===Math.E?Math.exp:function(e){return Math.pow(t,e)}}function Qw(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),function(e){return Math.log(e)/t})}function Yh(t){return function(e){return-t(-e)}}function Ac(t){var e=t($h,Nh),n=e.domain,i=10,a,r;function s(){return a=Qw(i),r=Kw(i),n()[0]<0?(a=Yh(a),r=Yh(r),t(Vw,qw)):t($h,Nh),e}return e.base=function(o){return arguments.length?(i=+o,s()):i},e.domain=function(o){return arguments.length?(n(o),s()):n()},e.ticks=function(o){var l=n(),c=l[0],u=l[l.length-1],f;(f=u<c)&&(h=c,c=u,u=h);var h=a(c),d=a(u),g,p,m,b=o==null?10:+o,v=[];if(!(i%1)&&d-h<b){if(h=Math.round(h)-1,d=Math.round(d)+1,c>0){for(;h<d;++h)for(p=1,g=r(h);p<i;++p)if(m=g*p,!(m<c)){if(m>u)break;v.push(m)}}else for(;h<d;++h)for(p=i-1,g=r(h);p>=1;--p)if(m=g*p,!(m<c)){if(m>u)break;v.push(m)}}else v=Yl(h,d,Math.min(d-h,b)).map(r);return f?v.reverse():v},e.tickFormat=function(o,l){if(l==null&&(l=i===10?".0e":","),typeof l!="function"&&(l=ha(l)),o===1/0)return l;o==null&&(o=10);var c=Math.max(1,i*o/e.ticks().length);return function(u){var f=u/r(Math.round(a(u)));return f*i<i-.5&&(f*=i),f<=c?l(u):""}},e.nice=function(){return n(U0(n(),{floor:function(o){return r(Math.floor(a(o)))},ceil:function(o){return r(Math.ceil(a(o)))}}))},e}function B0(){var t=Ac(Cs()).domain([1,10]);return t.copy=function(){return ba(t,B0()).base(t.base())},re.apply(t,arguments),t}function zh(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function Xh(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function Dc(t){var e=1,n=t(zh(e),Xh(e));return n.constant=function(i){return arguments.length?t(zh(e=+i),Xh(e)):e},wn(n)}function F0(){var t=Dc(Cs());return t.copy=function(){return ba(t,F0()).constant(t.constant())},re.apply(t,arguments)}function Hh(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function Jw(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function jw(t){return t<0?-t*t:t*t}function Lc(t){var e=t(vt,vt),n=1;function i(){return n===1?t(vt,vt):n===.5?t(Jw,jw):t(Hh(n),Hh(1/n))}return e.exponent=function(a){return arguments.length?(n=+a,i()):n},wn(e)}function Cc(){var t=Lc(Cs());return t.copy=function(){return ba(t,Cc()).exponent(t.exponent())},re.apply(t,arguments),t}function t5(){return Cc.apply(null,arguments).exponent(.5)}function W0(){var t=[],e=[],n=[],i;function a(){var s=0,o=Math.max(1,e.length);for(n=new Array(o-1);++s<o;)n[s-1]=Gi(t,s/o);return r}function r(s){return isNaN(s=+s)?i:e[$e(n,s)]}return r.invertExtent=function(s){var o=e.indexOf(s);return o<0?[NaN,NaN]:[o>0?n[o-1]:t[0],o<n.length?n[o]:t[t.length-1]]},r.domain=function(s){if(!arguments.length)return t.slice();t=[];for(var o=0,l=s.length,c;o<l;++o)c=s[o],c!=null&&!isNaN(c=+c)&&t.push(c);return t.sort(Ue),a()},r.range=function(s){return arguments.length?(e=fn.call(s),a()):e.slice()},r.unknown=function(s){return arguments.length?(i=s,r):i},r.quantiles=function(){return n.slice()},r.copy=function(){return W0().domain(t).range(e).unknown(i)},re.apply(r,arguments)}function Tc(){var t=0,e=1,n=1,i=[.5],a=[0,1],r;function s(l){return l<=l?a[$e(i,l,0,n)]:r}function o(){var l=-1;for(i=new Array(n);++l<n;)i[l]=((l+1)*e-(l-n)*t)/(n+1);return s}return s.domain=function(l){return arguments.length?(t=+l[0],e=+l[1],o()):[t,e]},s.range=function(l){return arguments.length?(n=(a=fn.call(l)).length-1,o()):a.slice()},s.invertExtent=function(l){var c=a.indexOf(l);return c<0?[NaN,NaN]:c<1?[t,i[0]]:c>=n?[i[n-1],e]:[i[c-1],i[c]]},s.unknown=function(l){return arguments.length&&(r=l),s},s.thresholds=function(){return i.slice()},s.copy=function(){return Tc().domain([t,e]).range(a).unknown(r)},re.apply(wn(s),arguments)}function V0(){var t=[.5],e=[0,1],n,i=1;function a(r){return r<=r?e[$e(t,r,0,i)]:n}return a.domain=function(r){return arguments.length?(t=fn.call(r),i=Math.min(t.length,e.length-1),a):t.slice()},a.range=function(r){return arguments.length?(e=fn.call(r),i=Math.min(t.length,e.length-1),a):e.slice()},a.invertExtent=function(r){var s=e.indexOf(r);return[t[s-1],t[s]]},a.unknown=function(r){return arguments.length?(n=r,a):n},a.copy=function(){return V0().domain(t).range(e).unknown(n)},re.apply(a,arguments)}var _o=new Date,wo=new Date;function pt(t,e,n,i){function a(r){return t(r=arguments.length===0?new Date:new Date(+r)),r}return a.floor=function(r){return t(r=new Date(+r)),r},a.ceil=function(r){return t(r=new Date(r-1)),e(r,1),t(r),r},a.round=function(r){var s=a(r),o=a.ceil(r);return r-s<o-r?s:o},a.offset=function(r,s){return e(r=new Date(+r),s==null?1:Math.floor(s)),r},a.range=function(r,s,o){var l=[],c;if(r=a.ceil(r),o=o==null?1:Math.floor(o),!(r<s)||!(o>0))return l;do l.push(c=new Date(+r)),e(r,o),t(r);while(c<r&&r<s);return l},a.filter=function(r){return pt(function(s){if(s>=s)for(;t(s),!r(s);)s.setTime(s-1)},function(s,o){if(s>=s)if(o<0)for(;++o<=0;)for(;e(s,-1),!r(s););else for(;--o>=0;)for(;e(s,1),!r(s););})},n&&(a.count=function(r,s){return _o.setTime(+r),wo.setTime(+s),t(_o),t(wo),Math.floor(n(_o,wo))},a.every=function(r){return r=Math.floor(r),!isFinite(r)||!(r>0)?null:r>1?a.filter(i?function(s){return i(s)%r===0}:function(s){return a.count(0,s)%r===0}):a}),a}var Fr=pt(function(){},function(t,e){t.setTime(+t+e)},function(t,e){return e-t});Fr.every=function(t){return t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?pt(function(e){e.setTime(Math.floor(e/t)*t)},function(e,n){e.setTime(+e+n*t)},function(e,n){return(n-e)/t}):Fr};const Wr=Fr;var Gh=Fr.range,Vr=1e3,dn=6e4,qr=36e5,q0=864e5,Z0=6048e5,K0=pt(function(t){t.setTime(t-t.getMilliseconds())},function(t,e){t.setTime(+t+e*Vr)},function(t,e){return(e-t)/Vr},function(t){return t.getUTCSeconds()});const Zr=K0;var Oh=K0.range,Q0=pt(function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*Vr)},function(t,e){t.setTime(+t+e*dn)},function(t,e){return(e-t)/dn},function(t){return t.getMinutes()});const J0=Q0;var e5=Q0.range,j0=pt(function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*Vr-t.getMinutes()*dn)},function(t,e){t.setTime(+t+e*qr)},function(t,e){return(e-t)/qr},function(t){return t.getHours()});const tp=j0;var n5=j0.range,ep=pt(function(t){t.setHours(0,0,0,0)},function(t,e){t.setDate(t.getDate()+e)},function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*dn)/q0},function(t){return t.getDate()-1});const Ts=ep;var i5=ep.range;function Mn(t){return pt(function(e){e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},function(e,n){e.setDate(e.getDate()+n*7)},function(e,n){return(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*dn)/Z0})}var ea=Mn(0),na=Mn(1),np=Mn(2),ip=Mn(3),pn=Mn(4),ap=Mn(5),rp=Mn(6),Uh=ea.range,a5=na.range,r5=np.range,s5=ip.range,o5=pn.range,l5=ap.range,c5=rp.range,sp=pt(function(t){t.setDate(1),t.setHours(0,0,0,0)},function(t,e){t.setMonth(t.getMonth()+e)},function(t,e){return e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12},function(t){return t.getMonth()});const op=sp;var u5=sp.range,Ic=pt(function(t){t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t,e){return e.getFullYear()-t.getFullYear()},function(t){return t.getFullYear()});Ic.every=function(t){return!isFinite(t=Math.floor(t))||!(t>0)?null:pt(function(e){e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,n){e.setFullYear(e.getFullYear()+n*t)})};const gn=Ic;var h5=Ic.range,lp=pt(function(t){t.setUTCSeconds(0,0)},function(t,e){t.setTime(+t+e*dn)},function(t,e){return(e-t)/dn},function(t){return t.getUTCMinutes()});const cp=lp;var f5=lp.range,up=pt(function(t){t.setUTCMinutes(0,0,0)},function(t,e){t.setTime(+t+e*qr)},function(t,e){return(e-t)/qr},function(t){return t.getUTCHours()});const hp=up;var d5=up.range,fp=pt(function(t){t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCDate(t.getUTCDate()+e)},function(t,e){return(e-t)/q0},function(t){return t.getUTCDate()-1});const Is=fp;var p5=fp.range;function kn(t){return pt(function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},function(e,n){e.setUTCDate(e.getUTCDate()+n*7)},function(e,n){return(n-e)/Z0})}var ia=kn(0),aa=kn(1),dp=kn(2),pp=kn(3),mn=kn(4),gp=kn(5),mp=kn(6),Bh=ia.range,g5=aa.range,m5=dp.range,b5=pp.range,y5=mn.range,v5=gp.range,x5=mp.range,bp=pt(function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCMonth(t.getUTCMonth()+e)},function(t,e){return e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12},function(t){return t.getUTCMonth()});const yp=bp;var _5=bp.range,Rc=pt(function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e)},function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()},function(t){return t.getUTCFullYear()});Rc.every=function(t){return!isFinite(t=Math.floor(t))||!(t>0)?null:pt(function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,n){e.setUTCFullYear(e.getUTCFullYear()+n*t)})};const bn=Rc;var w5=Rc.range;function Mo(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function ko(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function hi(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function vp(t){var e=t.dateTime,n=t.date,i=t.time,a=t.periods,r=t.days,s=t.shortDays,o=t.months,l=t.shortMonths,c=fi(a),u=di(a),f=fi(r),h=di(r),d=fi(s),g=di(s),p=fi(o),m=di(o),b=fi(l),v=di(l),y={a:z,A:N,b:X,B:U,c:null,d:Kh,e:Kh,f:F5,g:e6,G:i6,H:O5,I:U5,j:B5,L:xp,m:W5,M:V5,p:B,q:rt,Q:jh,s:tf,S:q5,u:Z5,U:K5,V:Q5,w:J5,W:j5,x:null,X:null,y:t6,Y:n6,Z:a6,"%":Jh},x={a:et,A:J,b:ut,B:Ut,c:null,d:Qh,e:Qh,f:l6,g:y6,G:x6,H:r6,I:s6,j:o6,L:wp,m:c6,M:u6,p:Qt,q:Jt,Q:jh,s:tf,S:h6,u:f6,U:d6,V:p6,w:g6,W:m6,x:null,X:null,y:b6,Y:v6,Z:_6,"%":Jh},M={a:T,A:L,b:_,B:D,c:P,d:qh,e:qh,f:z5,g:Vh,G:Wh,H:Zh,I:Zh,j:E5,L:Y5,m:P5,M:$5,p:C,q:R5,Q:H5,s:G5,S:N5,u:D5,U:L5,V:C5,w:A5,W:T5,x:S,X:R,y:Vh,Y:Wh,Z:I5,"%":X5};y.x=A(n,y),y.X=A(i,y),y.c=A(e,y),x.x=A(n,x),x.X=A(i,x),x.c=A(e,x);function A($,F){return function(Z){var E=[],bt=-1,j=0,xt=$.length,St,be,At;for(Z instanceof Date||(Z=new Date(+Z));++bt<xt;)$.charCodeAt(bt)===37&&(E.push($.slice(j,bt)),(be=Fh[St=$.charAt(++bt)])!=null?St=$.charAt(++bt):be=St==="e"?" ":"0",(At=F[St])&&(St=At(Z,be)),E.push(St),j=bt+1);return E.push($.slice(j,bt)),E.join("")}}function k($,F){return function(Z){var E=hi(1900,void 0,1),bt=I(E,$,Z+="",0),j,xt;if(bt!=Z.length)return null;if("Q"in E)return new Date(E.Q);if("s"in E)return new Date(E.s*1e3+("L"in E?E.L:0));if(F&&!("Z"in E)&&(E.Z=0),"p"in E&&(E.H=E.H%12+E.p*12),E.m===void 0&&(E.m="q"in E?E.q:0),"V"in E){if(E.V<1||E.V>53)return null;"w"in E||(E.w=1),"Z"in E?(j=ko(hi(E.y,0,1)),xt=j.getUTCDay(),j=xt>4||xt===0?aa.ceil(j):aa(j),j=Is.offset(j,(E.V-1)*7),E.y=j.getUTCFullYear(),E.m=j.getUTCMonth(),E.d=j.getUTCDate()+(E.w+6)%7):(j=Mo(hi(E.y,0,1)),xt=j.getDay(),j=xt>4||xt===0?na.ceil(j):na(j),j=Ts.offset(j,(E.V-1)*7),E.y=j.getFullYear(),E.m=j.getMonth(),E.d=j.getDate()+(E.w+6)%7)}else("W"in E||"U"in E)&&("w"in E||(E.w="u"in E?E.u%7:"W"in E?1:0),xt="Z"in E?ko(hi(E.y,0,1)).getUTCDay():Mo(hi(E.y,0,1)).getDay(),E.m=0,E.d="W"in E?(E.w+6)%7+E.W*7-(xt+5)%7:E.w+E.U*7-(xt+6)%7);return"Z"in E?(E.H+=E.Z/100|0,E.M+=E.Z%100,ko(E)):Mo(E)}}function I($,F,Z,E){for(var bt=0,j=F.length,xt=Z.length,St,be;bt<j;){if(E>=xt)return-1;if(St=F.charCodeAt(bt++),St===37){if(St=F.charAt(bt++),be=M[St in Fh?F.charAt(bt++):St],!be||(E=be($,Z,E))<0)return-1}else if(St!=Z.charCodeAt(E++))return-1}return E}function C($,F,Z){var E=c.exec(F.slice(Z));return E?($.p=u[E[0].toLowerCase()],Z+E[0].length):-1}function T($,F,Z){var E=d.exec(F.slice(Z));return E?($.w=g[E[0].toLowerCase()],Z+E[0].length):-1}function L($,F,Z){var E=f.exec(F.slice(Z));return E?($.w=h[E[0].toLowerCase()],Z+E[0].length):-1}function _($,F,Z){var E=b.exec(F.slice(Z));return E?($.m=v[E[0].toLowerCase()],Z+E[0].length):-1}function D($,F,Z){var E=p.exec(F.slice(Z));return E?($.m=m[E[0].toLowerCase()],Z+E[0].length):-1}function P($,F,Z){return I($,e,F,Z)}function S($,F,Z){return I($,n,F,Z)}function R($,F,Z){return I($,i,F,Z)}function z($){return s[$.getDay()]}function N($){return r[$.getDay()]}function X($){return l[$.getMonth()]}function U($){return o[$.getMonth()]}function B($){return a[+($.getHours()>=12)]}function rt($){return 1+~~($.getMonth()/3)}function et($){return s[$.getUTCDay()]}function J($){return r[$.getUTCDay()]}function ut($){return l[$.getUTCMonth()]}function Ut($){return o[$.getUTCMonth()]}function Qt($){return a[+($.getUTCHours()>=12)]}function Jt($){return 1+~~($.getUTCMonth()/3)}return{format:function($){var F=A($+="",y);return F.toString=function(){return $},F},parse:function($){var F=k($+="",!1);return F.toString=function(){return $},F},utcFormat:function($){var F=A($+="",x);return F.toString=function(){return $},F},utcParse:function($){var F=k($+="",!0);return F.toString=function(){return $},F}}}var Fh={"-":"",_:" ",0:"0"},mt=/^\s*\d+/,M5=/^%/,k5=/[\\^$*+?|[\]().{}]/g;function tt(t,e,n){var i=t<0?"-":"",a=(i?-t:t)+"",r=a.length;return i+(r<n?new Array(n-r+1).join(e)+a:a)}function S5(t){return t.replace(k5,"\\$&")}function fi(t){return new RegExp("^(?:"+t.map(S5).join("|")+")","i")}function di(t){for(var e={},n=-1,i=t.length;++n<i;)e[t[n].toLowerCase()]=n;return e}function A5(t,e,n){var i=mt.exec(e.slice(n,n+1));return i?(t.w=+i[0],n+i[0].length):-1}function D5(t,e,n){var i=mt.exec(e.slice(n,n+1));return i?(t.u=+i[0],n+i[0].length):-1}function L5(t,e,n){var i=mt.exec(e.slice(n,n+2));return i?(t.U=+i[0],n+i[0].length):-1}function C5(t,e,n){var i=mt.exec(e.slice(n,n+2));return i?(t.V=+i[0],n+i[0].length):-1}function T5(t,e,n){var i=mt.exec(e.slice(n,n+2));return i?(t.W=+i[0],n+i[0].length):-1}function Wh(t,e,n){var i=mt.exec(e.slice(n,n+4));return i?(t.y=+i[0],n+i[0].length):-1}function Vh(t,e,n){var i=mt.exec(e.slice(n,n+2));return i?(t.y=+i[0]+(+i[0]>68?1900:2e3),n+i[0].length):-1}function I5(t,e,n){var i=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return i?(t.Z=i[1]?0:-(i[2]+(i[3]||"00")),n+i[0].length):-1}function R5(t,e,n){var i=mt.exec(e.slice(n,n+1));return i?(t.q=i[0]*3-3,n+i[0].length):-1}function P5(t,e,n){var i=mt.exec(e.slice(n,n+2));return i?(t.m=i[0]-1,n+i[0].length):-1}function qh(t,e,n){var i=mt.exec(e.slice(n,n+2));return i?(t.d=+i[0],n+i[0].length):-1}function E5(t,e,n){var i=mt.exec(e.slice(n,n+3));return i?(t.m=0,t.d=+i[0],n+i[0].length):-1}function Zh(t,e,n){var i=mt.exec(e.slice(n,n+2));return i?(t.H=+i[0],n+i[0].length):-1}function $5(t,e,n){var i=mt.exec(e.slice(n,n+2));return i?(t.M=+i[0],n+i[0].length):-1}function N5(t,e,n){var i=mt.exec(e.slice(n,n+2));return i?(t.S=+i[0],n+i[0].length):-1}function Y5(t,e,n){var i=mt.exec(e.slice(n,n+3));return i?(t.L=+i[0],n+i[0].length):-1}function z5(t,e,n){var i=mt.exec(e.slice(n,n+6));return i?(t.L=Math.floor(i[0]/1e3),n+i[0].length):-1}function X5(t,e,n){var i=M5.exec(e.slice(n,n+1));return i?n+i[0].length:-1}function H5(t,e,n){var i=mt.exec(e.slice(n));return i?(t.Q=+i[0],n+i[0].length):-1}function G5(t,e,n){var i=mt.exec(e.slice(n));return i?(t.s=+i[0],n+i[0].length):-1}function Kh(t,e){return tt(t.getDate(),e,2)}function O5(t,e){return tt(t.getHours(),e,2)}function U5(t,e){return tt(t.getHours()%12||12,e,2)}function B5(t,e){return tt(1+Ts.count(gn(t),t),e,3)}function xp(t,e){return tt(t.getMilliseconds(),e,3)}function F5(t,e){return xp(t,e)+"000"}function W5(t,e){return tt(t.getMonth()+1,e,2)}function V5(t,e){return tt(t.getMinutes(),e,2)}function q5(t,e){return tt(t.getSeconds(),e,2)}function Z5(t){var e=t.getDay();return e===0?7:e}function K5(t,e){return tt(ea.count(gn(t)-1,t),e,2)}function _p(t){var e=t.getDay();return e>=4||e===0?pn(t):pn.ceil(t)}function Q5(t,e){return t=_p(t),tt(pn.count(gn(t),t)+(gn(t).getDay()===4),e,2)}function J5(t){return t.getDay()}function j5(t,e){return tt(na.count(gn(t)-1,t),e,2)}function t6(t,e){return tt(t.getFullYear()%100,e,2)}function e6(t,e){return t=_p(t),tt(t.getFullYear()%100,e,2)}function n6(t,e){return tt(t.getFullYear()%1e4,e,4)}function i6(t,e){var n=t.getDay();return t=n>=4||n===0?pn(t):pn.ceil(t),tt(t.getFullYear()%1e4,e,4)}function a6(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+tt(e/60|0,"0",2)+tt(e%60,"0",2)}function Qh(t,e){return tt(t.getUTCDate(),e,2)}function r6(t,e){return tt(t.getUTCHours(),e,2)}function s6(t,e){return tt(t.getUTCHours()%12||12,e,2)}function o6(t,e){return tt(1+Is.count(bn(t),t),e,3)}function wp(t,e){return tt(t.getUTCMilliseconds(),e,3)}function l6(t,e){return wp(t,e)+"000"}function c6(t,e){return tt(t.getUTCMonth()+1,e,2)}function u6(t,e){return tt(t.getUTCMinutes(),e,2)}function h6(t,e){return tt(t.getUTCSeconds(),e,2)}function f6(t){var e=t.getUTCDay();return e===0?7:e}function d6(t,e){return tt(ia.count(bn(t)-1,t),e,2)}function Mp(t){var e=t.getUTCDay();return e>=4||e===0?mn(t):mn.ceil(t)}function p6(t,e){return t=Mp(t),tt(mn.count(bn(t),t)+(bn(t).getUTCDay()===4),e,2)}function g6(t){return t.getUTCDay()}function m6(t,e){return tt(aa.count(bn(t)-1,t),e,2)}function b6(t,e){return tt(t.getUTCFullYear()%100,e,2)}function y6(t,e){return t=Mp(t),tt(t.getUTCFullYear()%100,e,2)}function v6(t,e){return tt(t.getUTCFullYear()%1e4,e,4)}function x6(t,e){var n=t.getUTCDay();return t=n>=4||n===0?mn(t):mn.ceil(t),tt(t.getUTCFullYear()%1e4,e,4)}function _6(){return"+0000"}function Jh(){return"%"}function jh(t){return+t}function tf(t){return Math.floor(+t/1e3)}var Tn,Pc,kp,Rs,Ec;Sp({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Sp(t){return Tn=vp(t),Pc=Tn.format,kp=Tn.parse,Rs=Tn.utcFormat,Ec=Tn.utcParse,Tn}var Ap="%Y-%m-%dT%H:%M:%S.%LZ";function w6(t){return t.toISOString()}var M6=Date.prototype.toISOString?w6:Rs(Ap);const k6=M6;function S6(t){var e=new Date(t);return isNaN(e)?null:e}var A6=+new Date("2000-01-01T00:00:00.000Z")?S6:Ec(Ap);const D6=A6;var Ci=1e3,Ti=Ci*60,Ii=Ti*60,ra=Ii*24,L6=ra*7,ef=ra*30,So=ra*365;function C6(t){return new Date(t)}function T6(t){return t instanceof Date?+t:+new Date(+t)}function $c(t,e,n,i,a,r,s,o,l){var c=H0(vt,vt),u=c.invert,f=c.domain,h=l(".%L"),d=l(":%S"),g=l("%I:%M"),p=l("%I %p"),m=l("%a %d"),b=l("%b %d"),v=l("%B"),y=l("%Y"),x=[[s,1,Ci],[s,5,5*Ci],[s,15,15*Ci],[s,30,30*Ci],[r,1,Ti],[r,5,5*Ti],[r,15,15*Ti],[r,30,30*Ti],[a,1,Ii],[a,3,3*Ii],[a,6,6*Ii],[a,12,12*Ii],[i,1,ra],[i,2,2*ra],[n,1,L6],[e,1,ef],[e,3,3*ef],[t,1,So]];function M(k){return(s(k)<k?h:r(k)<k?d:a(k)<k?g:i(k)<k?p:e(k)<k?n(k)<k?m:b:t(k)<k?v:y)(k)}function A(k,I,C,T){if(k==null&&(k=10),typeof k=="number"){var L=Math.abs(C-I)/k,_=$l(function(D){return D[2]}).right(x,L);_===x.length?(T=sn(I/So,C/So,k),k=t):_?(_=x[L/x[_-1][2]<x[_][2]/L?_-1:_],T=_[1],k=_[0]):(T=Math.max(sn(I,C,k),1),k=o)}return T==null?k:k.every(T)}return c.invert=function(k){return new Date(u(k))},c.domain=function(k){return arguments.length?f(Br.call(k,T6)):f().map(C6)},c.ticks=function(k,I){var C=f(),T=C[0],L=C[C.length-1],_=L<T,D;return _&&(D=T,T=L,L=D),D=A(k,T,L,I),D=D?D.range(T,L+1):[],_?D.reverse():D},c.tickFormat=function(k,I){return I==null?M:l(I)},c.nice=function(k,I){var C=f();return(k=A(k,C[0],C[C.length-1],I))?f(U0(C,k)):c},c.copy=function(){return ba(c,$c(t,e,n,i,a,r,s,o,l))},c}function I6(){return re.apply($c(gn,op,ea,Ts,tp,J0,Zr,Wr,Pc).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function R6(){return re.apply($c(bn,yp,ia,Is,hp,cp,Zr,Wr,Rs).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Ps(){var t=0,e=1,n,i,a,r,s=vt,o=!1,l;function c(u){return isNaN(u=+u)?l:s(a===0?.5:(u=(r(u)-n)*a,o?Math.max(0,Math.min(1,u)):u))}return c.domain=function(u){return arguments.length?(n=r(t=+u[0]),i=r(e=+u[1]),a=n===i?0:1/(i-n),c):[t,e]},c.clamp=function(u){return arguments.length?(o=!!u,c):o},c.interpolator=function(u){return arguments.length?(s=u,c):s},c.unknown=function(u){return arguments.length?(l=u,c):l},function(u){return r=u,n=u(t),i=u(e),a=n===i?0:1/(i-n),c}}function Ve(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function Dp(){var t=wn(Ps()(vt));return t.copy=function(){return Ve(t,Dp())},Ae.apply(t,arguments)}function Lp(){var t=Ac(Ps()).domain([1,10]);return t.copy=function(){return Ve(t,Lp()).base(t.base())},Ae.apply(t,arguments)}function Cp(){var t=Dc(Ps());return t.copy=function(){return Ve(t,Cp()).constant(t.constant())},Ae.apply(t,arguments)}function Nc(){var t=Lc(Ps());return t.copy=function(){return Ve(t,Nc()).exponent(t.exponent())},Ae.apply(t,arguments)}function P6(){return Nc.apply(null,arguments).exponent(.5)}function Tp(){var t=[],e=vt;function n(i){if(!isNaN(i=+i))return e(($e(t,i)-1)/(t.length-1))}return n.domain=function(i){if(!arguments.length)return t.slice();t=[];for(var a=0,r=i.length,s;a<r;++a)s=i[a],s!=null&&!isNaN(s=+s)&&t.push(s);return t.sort(Ue),n},n.interpolator=function(i){return arguments.length?(e=i,n):e},n.copy=function(){return Tp(e).domain(t)},Ae.apply(n,arguments)}function Es(){var t=0,e=.5,n=1,i,a,r,s,o,l=vt,c,u=!1,f;function h(d){return isNaN(d=+d)?f:(d=.5+((d=+c(d))-a)*(d<a?s:o),l(u?Math.max(0,Math.min(1,d)):d))}return h.domain=function(d){return arguments.length?(i=c(t=+d[0]),a=c(e=+d[1]),r=c(n=+d[2]),s=i===a?0:.5/(a-i),o=a===r?0:.5/(r-a),h):[t,e,n]},h.clamp=function(d){return arguments.length?(u=!!d,h):u},h.interpolator=function(d){return arguments.length?(l=d,h):l},h.unknown=function(d){return arguments.length?(f=d,h):f},function(d){return c=d,i=d(t),a=d(e),r=d(n),s=i===a?0:.5/(a-i),o=a===r?0:.5/(r-a),h}}function Ip(){var t=wn(Es()(vt));return t.copy=function(){return Ve(t,Ip())},Ae.apply(t,arguments)}function Rp(){var t=Ac(Es()).domain([.1,1,10]);return t.copy=function(){return Ve(t,Rp()).base(t.base())},Ae.apply(t,arguments)}function Pp(){var t=Dc(Es());return t.copy=function(){return Ve(t,Pp()).constant(t.constant())},Ae.apply(t,arguments)}function Yc(){var t=Lc(Es());return t.copy=function(){return Ve(t,Yc()).exponent(t.exponent())},Ae.apply(t,arguments)}function E6(){return Yc.apply(null,arguments).exponent(.5)}function V(t){for(var e=t.length/6|0,n=new Array(e),i=0;i<e;)n[i]="#"+t.slice(i*6,++i*6);return n}const $6=V("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),N6=V("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),Y6=V("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),z6=V("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),X6=V("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),H6=V("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),G6=V("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),O6=V("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),U6=V("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),B6=V("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab");function at(t){return id(t[t.length-1])}var Ep=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(V);const F6=at(Ep);var $p=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(V);const W6=at($p);var Np=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(V);const V6=at(Np);var Yp=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(V);const q6=at(Yp);var zp=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(V);const Z6=at(zp);var Xp=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(V);const K6=at(Xp);var Hp=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(V);const Q6=at(Hp);var Gp=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(V);const J6=at(Gp);var Op=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(V);const j6=at(Op);var Up=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(V);const t3=at(Up);var Bp=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(V);const e3=at(Bp);var Fp=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(V);const n3=at(Fp);var Wp=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(V);const i3=at(Wp);var Vp=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(V);const a3=at(Vp);var qp=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(V);const r3=at(qp);var Zp=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(V);const s3=at(Zp);var Kp=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(V);const o3=at(Kp);var Qp=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(V);const l3=at(Qp);var Jp=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(V);const c3=at(Jp);var jp=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(V);const u3=at(jp);var tg=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(V);const h3=at(tg);var eg=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(V);const f3=at(eg);var ng=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(V);const d3=at(ng);var ig=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(V);const p3=at(ig);var ag=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(V);const g3=at(ag);var rg=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(V);const m3=at(rg);var sg=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(V);const b3=at(sg);function y3(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-t*(35.34-t*(2381.73-t*(6402.7-t*(7024.72-t*2710.57)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+t*(170.73+t*(52.82-t*(131.46-t*(176.58-t*67.37)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+t*(442.36-t*(2482.43-t*(6167.24-t*(6614.94-t*2475.67)))))))+")"}const v3=bs(ie(300,.5,0),ie(-240,.5,1));var x3=bs(ie(-100,.75,.35),ie(80,1.5,.8)),_3=bs(ie(260,.75,.35),ie(80,1.5,.8)),$a=ie();function w3(t){(t<0||t>1)&&(t-=Math.floor(t));var e=Math.abs(t-.5);return $a.h=360*t-100,$a.s=1.5-1.5*e,$a.l=.8-.9*e,$a+""}var Na=Un(),M3=Math.PI/3,k3=Math.PI*2/3;function S3(t){var e;return t=(.5-t)*Math.PI,Na.r=255*(e=Math.sin(t))*e,Na.g=255*(e=Math.sin(t+M3))*e,Na.b=255*(e=Math.sin(t+k3))*e,Na+""}function A3(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+t*(1172.33-t*(10793.56-t*(33300.12-t*(38394.49-t*14825.05)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+t*(557.33+t*(1225.33-t*(3574.96-t*(1073.77+t*707.56)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+t*(3211.1-t*(15327.97-t*(27814-t*(22569.18-t*6838.66)))))))+")"}function $s(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}}const D3=$s(V("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725"));var L3=$s(V("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),C3=$s(V("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),T3=$s(V("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));function K(t){return function(){return t}}var nf=Math.abs,_t=Math.atan2,Ze=Math.cos,I3=Math.max,Ao=Math.min,se=Math.sin,En=Math.sqrt,wt=1e-12,He=Math.PI,Kr=He/2,Pe=2*He;function R3(t){return t>1?0:t<-1?He:Math.acos(t)}function af(t){return t>=1?Kr:t<=-1?-Kr:Math.asin(t)}function P3(t){return t.innerRadius}function E3(t){return t.outerRadius}function $3(t){return t.startAngle}function N3(t){return t.endAngle}function Y3(t){return t&&t.padAngle}function z3(t,e,n,i,a,r,s,o){var l=n-t,c=i-e,u=s-a,f=o-r,h=f*l-u*c;if(!(h*h<wt))return h=(u*(e-r)-f*(t-a))/h,[t+h*l,e+h*c]}function Ya(t,e,n,i,a,r,s){var o=t-n,l=e-i,c=(s?r:-r)/En(o*o+l*l),u=c*l,f=-c*o,h=t+u,d=e+f,g=n+u,p=i+f,m=(h+g)/2,b=(d+p)/2,v=g-h,y=p-d,x=v*v+y*y,M=a-r,A=h*p-g*d,k=(y<0?-1:1)*En(I3(0,M*M*x-A*A)),I=(A*y-v*k)/x,C=(-A*v-y*k)/x,T=(A*y+v*k)/x,L=(-A*v+y*k)/x,_=I-m,D=C-b,P=T-m,S=L-b;return _*_+D*D>P*P+S*S&&(I=T,C=L),{cx:I,cy:C,x01:-u,y01:-f,x11:I*(a/M-1),y11:C*(a/M-1)}}function og(){var t=P3,e=E3,n=K(0),i=null,a=$3,r=N3,s=Y3,o=null;function l(){var c,u,f=+t.apply(this,arguments),h=+e.apply(this,arguments),d=a.apply(this,arguments)-Kr,g=r.apply(this,arguments)-Kr,p=nf(g-d),m=g>d;if(o||(o=c=Fe()),h<f&&(u=h,h=f,f=u),!(h>wt))o.moveTo(0,0);else if(p>Pe-wt)o.moveTo(h*Ze(d),h*se(d)),o.arc(0,0,h,d,g,!m),f>wt&&(o.moveTo(f*Ze(g),f*se(g)),o.arc(0,0,f,g,d,m));else{var b=d,v=g,y=d,x=g,M=p,A=p,k=s.apply(this,arguments)/2,I=k>wt&&(i?+i.apply(this,arguments):En(f*f+h*h)),C=Ao(nf(h-f)/2,+n.apply(this,arguments)),T=C,L=C,_,D;if(I>wt){var P=af(I/f*se(k)),S=af(I/h*se(k));(M-=P*2)>wt?(P*=m?1:-1,y+=P,x-=P):(M=0,y=x=(d+g)/2),(A-=S*2)>wt?(S*=m?1:-1,b+=S,v-=S):(A=0,b=v=(d+g)/2)}var R=h*Ze(b),z=h*se(b),N=f*Ze(x),X=f*se(x);if(C>wt){var U=h*Ze(v),B=h*se(v),rt=f*Ze(y),et=f*se(y),J;if(p<He&&(J=z3(R,z,rt,et,U,B,N,X))){var ut=R-J[0],Ut=z-J[1],Qt=U-J[0],Jt=B-J[1],$=1/se(R3((ut*Qt+Ut*Jt)/(En(ut*ut+Ut*Ut)*En(Qt*Qt+Jt*Jt)))/2),F=En(J[0]*J[0]+J[1]*J[1]);T=Ao(C,(f-F)/($-1)),L=Ao(C,(h-F)/($+1))}}A>wt?L>wt?(_=Ya(rt,et,R,z,h,L,m),D=Ya(U,B,N,X,h,L,m),o.moveTo(_.cx+_.x01,_.cy+_.y01),L<C?o.arc(_.cx,_.cy,L,_t(_.y01,_.x01),_t(D.y01,D.x01),!m):(o.arc(_.cx,_.cy,L,_t(_.y01,_.x01),_t(_.y11,_.x11),!m),o.arc(0,0,h,_t(_.cy+_.y11,_.cx+_.x11),_t(D.cy+D.y11,D.cx+D.x11),!m),o.arc(D.cx,D.cy,L,_t(D.y11,D.x11),_t(D.y01,D.x01),!m))):(o.moveTo(R,z),o.arc(0,0,h,b,v,!m)):o.moveTo(R,z),!(f>wt)||!(M>wt)?o.lineTo(N,X):T>wt?(_=Ya(N,X,U,B,f,-T,m),D=Ya(R,z,rt,et,f,-T,m),o.lineTo(_.cx+_.x01,_.cy+_.y01),T<C?o.arc(_.cx,_.cy,T,_t(_.y01,_.x01),_t(D.y01,D.x01),!m):(o.arc(_.cx,_.cy,T,_t(_.y01,_.x01),_t(_.y11,_.x11),!m),o.arc(0,0,f,_t(_.cy+_.y11,_.cx+_.x11),_t(D.cy+D.y11,D.cx+D.x11),m),o.arc(D.cx,D.cy,T,_t(D.y11,D.x11),_t(D.y01,D.x01),!m))):o.arc(0,0,f,x,y,m)}if(o.closePath(),c)return o=null,c+""||null}return l.centroid=function(){var c=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,u=(+a.apply(this,arguments)+ +r.apply(this,arguments))/2-He/2;return[Ze(u)*c,se(u)*c]},l.innerRadius=function(c){return arguments.length?(t=typeof c=="function"?c:K(+c),l):t},l.outerRadius=function(c){return arguments.length?(e=typeof c=="function"?c:K(+c),l):e},l.cornerRadius=function(c){return arguments.length?(n=typeof c=="function"?c:K(+c),l):n},l.padRadius=function(c){return arguments.length?(i=c==null?null:typeof c=="function"?c:K(+c),l):i},l.startAngle=function(c){return arguments.length?(a=typeof c=="function"?c:K(+c),l):a},l.endAngle=function(c){return arguments.length?(r=typeof c=="function"?c:K(+c),l):r},l.padAngle=function(c){return arguments.length?(s=typeof c=="function"?c:K(+c),l):s},l.context=function(c){return arguments.length?(o=c??null,l):o},l}function lg(t){this._context=t}lg.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function Ns(t){return new lg(t)}function zc(t){return t[0]}function Xc(t){return t[1]}function sa(){var t=zc,e=Xc,n=K(!0),i=null,a=Ns,r=null;function s(o){var l,c=o.length,u,f=!1,h;for(i==null&&(r=a(h=Fe())),l=0;l<=c;++l)!(l<c&&n(u=o[l],l,o))===f&&((f=!f)?r.lineStart():r.lineEnd()),f&&r.point(+t(u,l,o),+e(u,l,o));if(h)return r=null,h+""||null}return s.x=function(o){return arguments.length?(t=typeof o=="function"?o:K(+o),s):t},s.y=function(o){return arguments.length?(e=typeof o=="function"?o:K(+o),s):e},s.defined=function(o){return arguments.length?(n=typeof o=="function"?o:K(!!o),s):n},s.curve=function(o){return arguments.length?(a=o,i!=null&&(r=a(i)),s):a},s.context=function(o){return arguments.length?(o==null?i=r=null:r=a(i=o),s):i},s}function Hc(){var t=zc,e=null,n=K(0),i=Xc,a=K(!0),r=null,s=Ns,o=null;function l(u){var f,h,d,g=u.length,p,m=!1,b,v=new Array(g),y=new Array(g);for(r==null&&(o=s(b=Fe())),f=0;f<=g;++f){if(!(f<g&&a(p=u[f],f,u))===m)if(m=!m)h=f,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),d=f-1;d>=h;--d)o.point(v[d],y[d]);o.lineEnd(),o.areaEnd()}m&&(v[f]=+t(p,f,u),y[f]=+n(p,f,u),o.point(e?+e(p,f,u):v[f],i?+i(p,f,u):y[f]))}if(b)return o=null,b+""||null}function c(){return sa().defined(a).curve(s).context(r)}return l.x=function(u){return arguments.length?(t=typeof u=="function"?u:K(+u),e=null,l):t},l.x0=function(u){return arguments.length?(t=typeof u=="function"?u:K(+u),l):t},l.x1=function(u){return arguments.length?(e=u==null?null:typeof u=="function"?u:K(+u),l):e},l.y=function(u){return arguments.length?(n=typeof u=="function"?u:K(+u),i=null,l):n},l.y0=function(u){return arguments.length?(n=typeof u=="function"?u:K(+u),l):n},l.y1=function(u){return arguments.length?(i=u==null?null:typeof u=="function"?u:K(+u),l):i},l.lineX0=l.lineY0=function(){return c().x(t).y(n)},l.lineY1=function(){return c().x(t).y(i)},l.lineX1=function(){return c().x(e).y(n)},l.defined=function(u){return arguments.length?(a=typeof u=="function"?u:K(!!u),l):a},l.curve=function(u){return arguments.length?(s=u,r!=null&&(o=s(r)),l):s},l.context=function(u){return arguments.length?(u==null?r=o=null:o=s(r=u),l):r},l}function X3(t,e){return e<t?-1:e>t?1:e>=t?0:NaN}function H3(t){return t}function cg(){var t=H3,e=X3,n=null,i=K(0),a=K(Pe),r=K(0);function s(o){var l,c=o.length,u,f,h=0,d=new Array(c),g=new Array(c),p=+i.apply(this,arguments),m=Math.min(Pe,Math.max(-Pe,a.apply(this,arguments)-p)),b,v=Math.min(Math.abs(m)/c,r.apply(this,arguments)),y=v*(m<0?-1:1),x;for(l=0;l<c;++l)(x=g[d[l]=l]=+t(o[l],l,o))>0&&(h+=x);for(e!=null?d.sort(function(M,A){return e(g[M],g[A])}):n!=null&&d.sort(function(M,A){return n(o[M],o[A])}),l=0,f=h?(m-c*y)/h:0;l<c;++l,p=b)u=d[l],x=g[u],b=p+(x>0?x*f:0)+y,g[u]={data:o[u],index:l,value:x,startAngle:p,endAngle:b,padAngle:v};return g}return s.value=function(o){return arguments.length?(t=typeof o=="function"?o:K(+o),s):t},s.sortValues=function(o){return arguments.length?(e=o,n=null,s):e},s.sort=function(o){return arguments.length?(n=o,e=null,s):n},s.startAngle=function(o){return arguments.length?(i=typeof o=="function"?o:K(+o),s):i},s.endAngle=function(o){return arguments.length?(a=typeof o=="function"?o:K(+o),s):a},s.padAngle=function(o){return arguments.length?(r=typeof o=="function"?o:K(+o),s):r},s}var ug=Gc(Ns);function hg(t){this._curve=t}hg.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(t,e){this._curve.point(e*Math.sin(t),e*-Math.cos(t))}};function Gc(t){function e(n){return new hg(t(n))}return e._curve=t,e}function Ri(t){var e=t.curve;return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t.curve=function(n){return arguments.length?e(Gc(n)):e()._curve},t}function rf(){return Ri(sa().curve(ug))}function sf(){var t=Hc().curve(ug),e=t.curve,n=t.lineX0,i=t.lineX1,a=t.lineY0,r=t.lineY1;return t.angle=t.x,delete t.x,t.startAngle=t.x0,delete t.x0,t.endAngle=t.x1,delete t.x1,t.radius=t.y,delete t.y,t.innerRadius=t.y0,delete t.y0,t.outerRadius=t.y1,delete t.y1,t.lineStartAngle=function(){return Ri(n())},delete t.lineX0,t.lineEndAngle=function(){return Ri(i())},delete t.lineX1,t.lineInnerRadius=function(){return Ri(a())},delete t.lineY0,t.lineOuterRadius=function(){return Ri(r())},delete t.lineY1,t.curve=function(s){return arguments.length?e(Gc(s)):e()._curve},t}function Pi(t,e){return[(e=+e)*Math.cos(t-=Math.PI/2),e*Math.sin(t)]}var Tl=Array.prototype.slice;function G3(t){return t.source}function O3(t){return t.target}function Oc(t){var e=G3,n=O3,i=zc,a=Xc,r=null;function s(){var o,l=Tl.call(arguments),c=e.apply(this,l),u=n.apply(this,l);if(r||(r=o=Fe()),t(r,+i.apply(this,(l[0]=c,l)),+a.apply(this,l),+i.apply(this,(l[0]=u,l)),+a.apply(this,l)),o)return r=null,o+""||null}return s.source=function(o){return arguments.length?(e=o,s):e},s.target=function(o){return arguments.length?(n=o,s):n},s.x=function(o){return arguments.length?(i=typeof o=="function"?o:K(+o),s):i},s.y=function(o){return arguments.length?(a=typeof o=="function"?o:K(+o),s):a},s.context=function(o){return arguments.length?(r=o??null,s):r},s}function U3(t,e,n,i,a){t.moveTo(e,n),t.bezierCurveTo(e=(e+i)/2,n,e,a,i,a)}function B3(t,e,n,i,a){t.moveTo(e,n),t.bezierCurveTo(e,n=(n+a)/2,i,n,i,a)}function F3(t,e,n,i,a){var r=Pi(e,n),s=Pi(e,n=(n+a)/2),o=Pi(i,n),l=Pi(i,a);t.moveTo(r[0],r[1]),t.bezierCurveTo(s[0],s[1],o[0],o[1],l[0],l[1])}function W3(){return Oc(U3)}function V3(){return Oc(B3)}function q3(){var t=Oc(F3);return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t}const Uc={draw:function(t,e){var n=Math.sqrt(e/He);t.moveTo(n,0),t.arc(0,0,n,0,Pe)}},fg={draw:function(t,e){var n=Math.sqrt(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}};var dg=Math.sqrt(1/3),Z3=dg*2;const pg={draw:function(t,e){var n=Math.sqrt(e/Z3),i=n*dg;t.moveTo(0,-n),t.lineTo(i,0),t.lineTo(0,n),t.lineTo(-i,0),t.closePath()}};var K3=.8908130915292852,gg=Math.sin(He/10)/Math.sin(7*He/10),Q3=Math.sin(Pe/10)*gg,J3=-Math.cos(Pe/10)*gg;const mg={draw:function(t,e){var n=Math.sqrt(e*K3),i=Q3*n,a=J3*n;t.moveTo(0,-n),t.lineTo(i,a);for(var r=1;r<5;++r){var s=Pe*r/5,o=Math.cos(s),l=Math.sin(s);t.lineTo(l*n,-o*n),t.lineTo(o*i-l*a,l*i+o*a)}t.closePath()}},bg={draw:function(t,e){var n=Math.sqrt(e),i=-n/2;t.rect(i,i,n,n)}};var Do=Math.sqrt(3);const yg={draw:function(t,e){var n=-Math.sqrt(e/(Do*3));t.moveTo(0,n*2),t.lineTo(-Do*n,-n),t.lineTo(Do*n,-n),t.closePath()}};var Bt=-.5,Ft=Math.sqrt(3)/2,Il=1/Math.sqrt(12),j3=(Il/2+1)*3;const vg={draw:function(t,e){var n=Math.sqrt(e/j3),i=n/2,a=n*Il,r=i,s=n*Il+n,o=-r,l=s;t.moveTo(i,a),t.lineTo(r,s),t.lineTo(o,l),t.lineTo(Bt*i-Ft*a,Ft*i+Bt*a),t.lineTo(Bt*r-Ft*s,Ft*r+Bt*s),t.lineTo(Bt*o-Ft*l,Ft*o+Bt*l),t.lineTo(Bt*i+Ft*a,Bt*a-Ft*i),t.lineTo(Bt*r+Ft*s,Bt*s-Ft*r),t.lineTo(Bt*o+Ft*l,Bt*l-Ft*o),t.closePath()}};var t8=[Uc,fg,pg,bg,mg,yg,vg];function e8(){var t=K(Uc),e=K(64),n=null;function i(){var a;if(n||(n=a=Fe()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),a)return n=null,a+""||null}return i.type=function(a){return arguments.length?(t=typeof a=="function"?a:K(a),i):t},i.size=function(a){return arguments.length?(e=typeof a=="function"?a:K(+a),i):e},i.context=function(a){return arguments.length?(n=a??null,i):n},i}function Ge(){}function Qr(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function Ys(t){this._context=t}Ys.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Qr(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Qr(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function n8(t){return new Ys(t)}function xg(t){this._context=t}xg.prototype={areaStart:Ge,areaEnd:Ge,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:Qr(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function i8(t){return new xg(t)}function _g(t){this._context=t}_g.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,i=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,i):this._context.moveTo(n,i);break;case 3:this._point=4;default:Qr(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function a8(t){return new _g(t)}function wg(t,e){this._basis=new Ys(t),this._beta=e}wg.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,e=this._y,n=t.length-1;if(n>0)for(var i=t[0],a=e[0],r=t[n]-i,s=e[n]-a,o=-1,l;++o<=n;)l=o/n,this._basis.point(this._beta*t[o]+(1-this._beta)*(i+l*r),this._beta*e[o]+(1-this._beta)*(a+l*s));this._x=this._y=null,this._basis.lineEnd()},point:function(t,e){this._x.push(+t),this._y.push(+e)}};const r8=function t(e){function n(i){return e===1?new Ys(i):new wg(i,e)}return n.beta=function(i){return t(+i)},n}(.85);function Jr(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function Bc(t,e){this._context=t,this._k=(1-e)/6}Bc.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Jr(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:Jr(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const s8=function t(e){function n(i){return new Bc(i,e)}return n.tension=function(i){return t(+i)},n}(0);function Fc(t,e){this._context=t,this._k=(1-e)/6}Fc.prototype={areaStart:Ge,areaEnd:Ge,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:Jr(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const o8=function t(e){function n(i){return new Fc(i,e)}return n.tension=function(i){return t(+i)},n}(0);function Wc(t,e){this._context=t,this._k=(1-e)/6}Wc.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Jr(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const l8=function t(e){function n(i){return new Wc(i,e)}return n.tension=function(i){return t(+i)},n}(0);function Vc(t,e,n){var i=t._x1,a=t._y1,r=t._x2,s=t._y2;if(t._l01_a>wt){var o=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,l=3*t._l01_a*(t._l01_a+t._l12_a);i=(i*o-t._x0*t._l12_2a+t._x2*t._l01_2a)/l,a=(a*o-t._y0*t._l12_2a+t._y2*t._l01_2a)/l}if(t._l23_a>wt){var c=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,u=3*t._l23_a*(t._l23_a+t._l12_a);r=(r*c+t._x1*t._l23_2a-e*t._l12_2a)/u,s=(s*c+t._y1*t._l23_2a-n*t._l12_2a)/u}t._context.bezierCurveTo(i,a,r,s,t._x2,t._y2)}function Mg(t,e){this._context=t,this._alpha=e}Mg.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,i=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:Vc(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const c8=function t(e){function n(i){return e?new Mg(i,e):new Bc(i,0)}return n.alpha=function(i){return t(+i)},n}(.5);function kg(t,e){this._context=t,this._alpha=e}kg.prototype={areaStart:Ge,areaEnd:Ge,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,i=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:Vc(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const u8=function t(e){function n(i){return e?new kg(i,e):new Fc(i,0)}return n.alpha=function(i){return t(+i)},n}(.5);function Sg(t,e){this._context=t,this._alpha=e}Sg.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,i=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Vc(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const h8=function t(e){function n(i){return e?new Sg(i,e):new Wc(i,0)}return n.alpha=function(i){return t(+i)},n}(.5);function Ag(t){this._context=t}Ag.prototype={areaStart:Ge,areaEnd:Ge,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function f8(t){return new Ag(t)}function of(t){return t<0?-1:1}function lf(t,e,n){var i=t._x1-t._x0,a=e-t._x1,r=(t._y1-t._y0)/(i||a<0&&-0),s=(n-t._y1)/(a||i<0&&-0),o=(r*a+s*i)/(i+a);return(of(r)+of(s))*Math.min(Math.abs(r),Math.abs(s),.5*Math.abs(o))||0}function cf(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function Lo(t,e,n){var i=t._x0,a=t._y0,r=t._x1,s=t._y1,o=(r-i)/3;t._context.bezierCurveTo(i+o,a+o*e,r-o,s-o*n,r,s)}function jr(t){this._context=t}jr.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Lo(this,this._t0,cf(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,Lo(this,cf(this,n=lf(this,t,e)),n);break;default:Lo(this,this._t0,n=lf(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function Dg(t){this._context=new Lg(t)}(Dg.prototype=Object.create(jr.prototype)).point=function(t,e){jr.prototype.point.call(this,e,t)};function Lg(t){this._context=t}Lg.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,i,a,r){this._context.bezierCurveTo(e,t,i,n,r,a)}};function d8(t){return new jr(t)}function p8(t){return new Dg(t)}function Cg(t){this._context=t}Cg.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var i=uf(t),a=uf(e),r=0,s=1;s<n;++r,++s)this._context.bezierCurveTo(i[0][r],a[0][r],i[1][r],a[1][r],t[s],e[s]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function uf(t){var e,n=t.length-1,i,a=new Array(n),r=new Array(n),s=new Array(n);for(a[0]=0,r[0]=2,s[0]=t[0]+2*t[1],e=1;e<n-1;++e)a[e]=1,r[e]=4,s[e]=4*t[e]+2*t[e+1];for(a[n-1]=2,r[n-1]=7,s[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)i=a[e]/r[e-1],r[e]-=i,s[e]-=i*s[e-1];for(a[n-1]=s[n-1]/r[n-1],e=n-2;e>=0;--e)a[e]=(s[e]-a[e+1])/r[e];for(r[n-1]=(t[n]+a[n-1])/2,e=0;e<n-1;++e)r[e]=2*t[e+1]-a[e+1];return[a,r]}function g8(t){return new Cg(t)}function zs(t,e){this._context=t,this._t=e}zs.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function m8(t){return new zs(t,.5)}function b8(t){return new zs(t,0)}function y8(t){return new zs(t,1)}function Jn(t,e){if((s=t.length)>1)for(var n=1,i,a,r=t[e[0]],s,o=r.length;n<s;++n)for(a=r,r=t[e[n]],i=0;i<o;++i)r[i][1]+=r[i][0]=isNaN(a[i][1])?a[i][0]:a[i][1]}function jn(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function v8(t,e){return t[e]}function x8(){var t=K([]),e=jn,n=Jn,i=v8;function a(r){var s=t.apply(this,arguments),o,l=r.length,c=s.length,u=new Array(c),f;for(o=0;o<c;++o){for(var h=s[o],d=u[o]=new Array(l),g=0,p;g<l;++g)d[g]=p=[0,+i(r[g],h,g,r)],p.data=r[g];d.key=h}for(o=0,f=e(u);o<c;++o)u[f[o]].index=o;return n(u,f),u}return a.keys=function(r){return arguments.length?(t=typeof r=="function"?r:K(Tl.call(r)),a):t},a.value=function(r){return arguments.length?(i=typeof r=="function"?r:K(+r),a):i},a.order=function(r){return arguments.length?(e=r==null?jn:typeof r=="function"?r:K(Tl.call(r)),a):e},a.offset=function(r){return arguments.length?(n=r??Jn,a):n},a}function _8(t,e){if((i=t.length)>0){for(var n,i,a=0,r=t[0].length,s;a<r;++a){for(s=n=0;n<i;++n)s+=t[n][a][1]||0;if(s)for(n=0;n<i;++n)t[n][a][1]/=s}Jn(t,e)}}function w8(t,e){if((l=t.length)>0)for(var n,i=0,a,r,s,o,l,c=t[e[0]].length;i<c;++i)for(s=o=0,n=0;n<l;++n)(r=(a=t[e[n]][i])[1]-a[0])>0?(a[0]=s,a[1]=s+=r):r<0?(a[1]=o,a[0]=o+=r):(a[0]=0,a[1]=r)}function M8(t,e){if((a=t.length)>0){for(var n=0,i=t[e[0]],a,r=i.length;n<r;++n){for(var s=0,o=0;s<a;++s)o+=t[s][n][1]||0;i[n][1]+=i[n][0]=-o/2}Jn(t,e)}}function k8(t,e){if(!(!((s=t.length)>0)||!((r=(a=t[e[0]]).length)>0))){for(var n=0,i=1,a,r,s;i<r;++i){for(var o=0,l=0,c=0;o<s;++o){for(var u=t[e[o]],f=u[i][1]||0,h=u[i-1][1]||0,d=(f-h)/2,g=0;g<o;++g){var p=t[e[g]],m=p[i][1]||0,b=p[i-1][1]||0;d+=m-b}l+=f,c+=d*f}a[i-1][1]+=a[i-1][0]=n,l&&(n-=c/l)}a[i-1][1]+=a[i-1][0]=n,Jn(t,e)}}function Tg(t){var e=t.map(S8);return jn(t).sort(function(n,i){return e[n]-e[i]})}function S8(t){for(var e=-1,n=0,i=t.length,a,r=-1/0;++e<i;)(a=+t[e][1])>r&&(r=a,n=e);return n}function Ig(t){var e=t.map(Rg);return jn(t).sort(function(n,i){return e[n]-e[i]})}function Rg(t){for(var e=0,n=-1,i=t.length,a;++n<i;)(a=+t[n][1])&&(e+=a);return e}function A8(t){return Ig(t).reverse()}function D8(t){var e=t.length,n,i,a=t.map(Rg),r=Tg(t),s=0,o=0,l=[],c=[];for(n=0;n<e;++n)i=r[n],s<o?(s+=a[i],l.push(i)):(o+=a[i],c.push(i));return c.reverse().concat(l)}function L8(t){return jn(t).reverse()}function hf(t){return function(){return t}}function C8(t){return t[0]}function T8(t){return t[1]}function ts(){this._=null}function Xs(t){t.U=t.C=t.L=t.R=t.P=t.N=null}ts.prototype={constructor:ts,insert:function(t,e){var n,i,a;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;n=t}else this._?(t=ff(this._),e.P=null,e.N=t,t.P=t.L=e,n=t):(e.P=e.N=null,this._=e,n=null);for(e.L=e.R=null,e.U=n,e.C=!0,t=e;n&&n.C;)i=n.U,n===i.L?(a=i.R,a&&a.C?(n.C=a.C=!1,i.C=!0,t=i):(t===n.R&&(pi(this,n),t=n,n=t.U),n.C=!1,i.C=!0,gi(this,i))):(a=i.L,a&&a.C?(n.C=a.C=!1,i.C=!0,t=i):(t===n.L&&(gi(this,n),t=n,n=t.U),n.C=!1,i.C=!0,pi(this,i))),n=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e=t.U,n,i=t.L,a=t.R,r,s;if(i?a?r=ff(a):r=i:r=a,e?e.L===t?e.L=r:e.R=r:this._=r,i&&a?(s=r.C,r.C=t.C,r.L=i,i.U=r,r!==a?(e=r.U,r.U=t.U,t=r.R,e.L=t,r.R=a,a.U=r):(r.U=e,e=r,t=r.R)):(s=t.C,t=r),t&&(t.U=e),!s){if(t&&t.C){t.C=!1;return}do{if(t===this._)break;if(t===e.L){if(n=e.R,n.C&&(n.C=!1,e.C=!0,pi(this,e),n=e.R),n.L&&n.L.C||n.R&&n.R.C){(!n.R||!n.R.C)&&(n.L.C=!1,n.C=!0,gi(this,n),n=e.R),n.C=e.C,e.C=n.R.C=!1,pi(this,e),t=this._;break}}else if(n=e.L,n.C&&(n.C=!1,e.C=!0,gi(this,e),n=e.L),n.L&&n.L.C||n.R&&n.R.C){(!n.L||!n.L.C)&&(n.R.C=!1,n.C=!0,pi(this,n),n=e.L),n.C=e.C,e.C=n.L.C=!1,gi(this,e),t=this._;break}n.C=!0,t=e,e=e.U}while(!t.C);t&&(t.C=!1)}}};function pi(t,e){var n=e,i=e.R,a=n.U;a?a.L===n?a.L=i:a.R=i:t._=i,i.U=a,n.U=i,n.R=i.L,n.R&&(n.R.U=n),i.L=n}function gi(t,e){var n=e,i=e.L,a=n.U;a?a.L===n?a.L=i:a.R=i:t._=i,i.U=a,n.U=i,n.L=i.R,n.L&&(n.L.U=n),i.R=n}function ff(t){for(;t.L;)t=t.L;return t}function Ei(t,e,n,i){var a=[null,null],r=kt.push(a)-1;return a.left=t,a.right=e,n&&es(a,t,e,n),i&&es(a,e,t,i),Ht[t.index].halfedges.push(r),Ht[e.index].halfedges.push(r),a}function mi(t,e,n){var i=[e,n];return i.left=t,i}function es(t,e,n,i){!t[0]&&!t[1]?(t[0]=i,t.left=e,t.right=n):t.left===n?t[1]=i:t[0]=i}function I8(t,e,n,i,a){var r=t[0],s=t[1],o=r[0],l=r[1],c=s[0],u=s[1],f=0,h=1,d=c-o,g=u-l,p;if(p=e-o,!(!d&&p>0)){if(p/=d,d<0){if(p<f)return;p<h&&(h=p)}else if(d>0){if(p>h)return;p>f&&(f=p)}if(p=i-o,!(!d&&p<0)){if(p/=d,d<0){if(p>h)return;p>f&&(f=p)}else if(d>0){if(p<f)return;p<h&&(h=p)}if(p=n-l,!(!g&&p>0)){if(p/=g,g<0){if(p<f)return;p<h&&(h=p)}else if(g>0){if(p>h)return;p>f&&(f=p)}if(p=a-l,!(!g&&p<0)){if(p/=g,g<0){if(p>h)return;p>f&&(f=p)}else if(g>0){if(p<f)return;p<h&&(h=p)}return!(f>0)&&!(h<1)||(f>0&&(t[0]=[o+f*d,l+f*g]),h<1&&(t[1]=[o+h*d,l+h*g])),!0}}}}}function R8(t,e,n,i,a){var r=t[1];if(r)return!0;var s=t[0],o=t.left,l=t.right,c=o[0],u=o[1],f=l[0],h=l[1],d=(c+f)/2,g=(u+h)/2,p,m;if(h===u){if(d<e||d>=i)return;if(c>f){if(!s)s=[d,n];else if(s[1]>=a)return;r=[d,a]}else{if(!s)s=[d,a];else if(s[1]<n)return;r=[d,n]}}else if(p=(c-f)/(h-u),m=g-p*d,p<-1||p>1)if(c>f){if(!s)s=[(n-m)/p,n];else if(s[1]>=a)return;r=[(a-m)/p,a]}else{if(!s)s=[(a-m)/p,a];else if(s[1]<n)return;r=[(n-m)/p,n]}else if(u<h){if(!s)s=[e,p*e+m];else if(s[0]>=i)return;r=[i,p*i+m]}else{if(!s)s=[i,p*i+m];else if(s[0]<e)return;r=[e,p*e+m]}return t[0]=s,t[1]=r,!0}function P8(t,e,n,i){for(var a=kt.length,r;a--;)(!R8(r=kt[a],t,e,n,i)||!I8(r,t,e,n,i)||!(Math.abs(r[0][0]-r[1][0])>nt||Math.abs(r[0][1]-r[1][1])>nt))&&delete kt[a]}function E8(t){return Ht[t.index]={site:t,halfedges:[]}}function $8(t,e){var n=t.site,i=e.left,a=e.right;return n===a&&(a=i,i=n),a?Math.atan2(a[1]-i[1],a[0]-i[0]):(n===i?(i=e[1],a=e[0]):(i=e[0],a=e[1]),Math.atan2(i[0]-a[0],a[1]-i[1]))}function Pg(t,e){return e[+(e.left!==t.site)]}function N8(t,e){return e[+(e.left===t.site)]}function Y8(){for(var t=0,e=Ht.length,n,i,a,r;t<e;++t)if((n=Ht[t])&&(r=(i=n.halfedges).length)){var s=new Array(r),o=new Array(r);for(a=0;a<r;++a)s[a]=a,o[a]=$8(n,kt[i[a]]);for(s.sort(function(l,c){return o[c]-o[l]}),a=0;a<r;++a)o[a]=i[s[a]];for(a=0;a<r;++a)i[a]=o[a]}}function z8(t,e,n,i){var a=Ht.length,r,s,o,l,c,u,f,h,d,g,p,m,b=!0;for(r=0;r<a;++r)if(s=Ht[r]){for(o=s.site,c=s.halfedges,l=c.length;l--;)kt[c[l]]||c.splice(l,1);for(l=0,u=c.length;l<u;)g=N8(s,kt[c[l]]),p=g[0],m=g[1],f=Pg(s,kt[c[++l%u]]),h=f[0],d=f[1],(Math.abs(p-h)>nt||Math.abs(m-d)>nt)&&(c.splice(l,0,kt.push(mi(o,g,Math.abs(p-t)<nt&&i-m>nt?[t,Math.abs(h-t)<nt?d:i]:Math.abs(m-i)<nt&&n-p>nt?[Math.abs(d-i)<nt?h:n,i]:Math.abs(p-n)<nt&&m-e>nt?[n,Math.abs(h-n)<nt?d:e]:Math.abs(m-e)<nt&&p-t>nt?[Math.abs(d-e)<nt?h:t,e]:null))-1),++u);u&&(b=!1)}if(b){var v,y,x,M=1/0;for(r=0,b=null;r<a;++r)(s=Ht[r])&&(o=s.site,v=o[0]-t,y=o[1]-e,x=v*v+y*y,x<M&&(M=x,b=s));if(b){var A=[t,e],k=[t,i],I=[n,i],C=[n,e];b.halfedges.push(kt.push(mi(o=b.site,A,k))-1,kt.push(mi(o,k,I))-1,kt.push(mi(o,I,C))-1,kt.push(mi(o,C,A))-1)}}for(r=0;r<a;++r)(s=Ht[r])&&(s.halfedges.length||delete Ht[r])}var Eg=[],qc;function X8(){Xs(this),this.x=this.y=this.arc=this.site=this.cy=null}function $n(t){var e=t.P,n=t.N;if(!(!e||!n)){var i=e.site,a=t.site,r=n.site;if(i!==r){var s=a[0],o=a[1],l=i[0]-s,c=i[1]-o,u=r[0]-s,f=r[1]-o,h=2*(l*f-c*u);if(!(h>=-B8)){var d=l*l+c*c,g=u*u+f*f,p=(f*d-c*g)/h,m=(l*g-u*d)/h,b=Eg.pop()||new X8;b.arc=t,b.site=a,b.x=p+s,b.y=(b.cy=m+o)+Math.sqrt(p*p+m*m),t.circle=b;for(var v=null,y=oa._;y;)if(b.y<y.y||b.y===y.y&&b.x<=y.x)if(y.L)y=y.L;else{v=y.P;break}else if(y.R)y=y.R;else{v=y;break}oa.insert(v,b),v||(qc=b)}}}}function Hn(t){var e=t.circle;e&&(e.P||(qc=e.N),oa.remove(e),Eg.push(e),Xs(e),t.circle=null)}var $g=[];function H8(){Xs(this),this.edge=this.site=this.circle=null}function df(t){var e=$g.pop()||new H8;return e.site=t,e}function Co(t){Hn(t),Gn.remove(t),$g.push(t),Xs(t)}function G8(t){var e=t.circle,n=e.x,i=e.cy,a=[n,i],r=t.P,s=t.N,o=[t];Co(t);for(var l=r;l.circle&&Math.abs(n-l.circle.x)<nt&&Math.abs(i-l.circle.cy)<nt;)r=l.P,o.unshift(l),Co(l),l=r;o.unshift(l),Hn(l);for(var c=s;c.circle&&Math.abs(n-c.circle.x)<nt&&Math.abs(i-c.circle.cy)<nt;)s=c.N,o.push(c),Co(c),c=s;o.push(c),Hn(c);var u=o.length,f;for(f=1;f<u;++f)c=o[f],l=o[f-1],es(c.edge,l.site,c.site,a);l=o[0],c=o[u-1],c.edge=Ei(l.site,c.site,null,a),$n(l),$n(c)}function O8(t){for(var e=t[0],n=t[1],i,a,r,s,o=Gn._;o;)if(r=Ng(o,n)-e,r>nt)o=o.L;else if(s=e-U8(o,n),s>nt){if(!o.R){i=o;break}o=o.R}else{r>-nt?(i=o.P,a=o):s>-nt?(i=o,a=o.N):i=a=o;break}E8(t);var l=df(t);if(Gn.insert(i,l),!(!i&&!a)){if(i===a){Hn(i),a=df(i.site),Gn.insert(l,a),l.edge=a.edge=Ei(i.site,l.site),$n(i),$n(a);return}if(!a){l.edge=Ei(i.site,l.site);return}Hn(i),Hn(a);var c=i.site,u=c[0],f=c[1],h=t[0]-u,d=t[1]-f,g=a.site,p=g[0]-u,m=g[1]-f,b=2*(h*m-d*p),v=h*h+d*d,y=p*p+m*m,x=[(m*v-d*y)/b+u,(h*y-p*v)/b+f];es(a.edge,c,g,x),l.edge=Ei(c,t,null,x),a.edge=Ei(t,g,null,x),$n(i),$n(a)}}function Ng(t,e){var n=t.site,i=n[0],a=n[1],r=a-e;if(!r)return i;var s=t.P;if(!s)return-1/0;n=s.site;var o=n[0],l=n[1],c=l-e;if(!c)return o;var u=o-i,f=1/r-1/c,h=u/c;return f?(-h+Math.sqrt(h*h-2*f*(u*u/(-2*c)-l+c/2+a-r/2)))/f+i:(i+o)/2}function U8(t,e){var n=t.N;if(n)return Ng(n,e);var i=t.site;return i[1]===e?i[0]:1/0}var nt=1e-6,B8=1e-12,Gn,Ht,oa,kt;function F8(t,e,n){return(t[0]-n[0])*(e[1]-t[1])-(t[0]-e[0])*(n[1]-t[1])}function W8(t,e){return e[1]-t[1]||e[0]-t[0]}function Rl(t,e){var n=t.sort(W8).pop(),i,a,r;for(kt=[],Ht=new Array(t.length),Gn=new ts,oa=new ts;;)if(r=qc,n&&(!r||n[1]<r.y||n[1]===r.y&&n[0]<r.x))(n[0]!==i||n[1]!==a)&&(O8(n),i=n[0],a=n[1]),n=t.pop();else if(r)G8(r.arc);else break;if(Y8(),e){var s=+e[0][0],o=+e[0][1],l=+e[1][0],c=+e[1][1];P8(s,o,l,c),z8(s,o,l,c)}this.edges=kt,this.cells=Ht,Gn=oa=kt=Ht=null}Rl.prototype={constructor:Rl,polygons:function(){var t=this.edges;return this.cells.map(function(e){var n=e.halfedges.map(function(i){return Pg(e,t[i])});return n.data=e.site.data,n})},triangles:function(){var t=[],e=this.edges;return this.cells.forEach(function(n,i){if(o=(r=n.halfedges).length)for(var a=n.site,r,s=-1,o,l,c=e[r[o-1]],u=c.left===a?c.right:c.left;++s<o;)l=u,c=e[r[s]],u=c.left===a?c.right:c.left,l&&u&&i<l.index&&i<u.index&&F8(a,l,u)<0&&t.push([a.data,l.data,u.data])}),t},links:function(){return this.edges.filter(function(t){return t.right}).map(function(t){return{source:t.left.data,target:t.right.data}})},find:function(t,e,n){for(var i=this,a,r=i._found||0,s=i.cells.length,o;!(o=i.cells[r]);)if(++r>=s)return null;var l=t-o.site[0],c=e-o.site[1],u=l*l+c*c;do o=i.cells[a=r],r=null,o.halfedges.forEach(function(f){var h=i.edges[f],d=h.left;if(!((d===o.site||!d)&&!(d=h.right))){var g=t-d[0],p=e-d[1],m=g*g+p*p;m<u&&(u=m,r=d.index)}});while(r!==null);return i._found=a,n==null||u<=n*n?o.site:null}};function V8(){var t=C8,e=T8,n=null;function i(a){return new Rl(a.map(function(r,s){var o=[Math.round(t(r,s,a)/nt)*nt,Math.round(e(r,s,a)/nt)*nt];return o.index=s,o.data=r,o}),n)}return i.polygons=function(a){return i(a).polygons()},i.links=function(a){return i(a).links()},i.triangles=function(a){return i(a).triangles()},i.x=function(a){return arguments.length?(t=typeof a=="function"?a:hf(+a),i):t},i.y=function(a){return arguments.length?(e=typeof a=="function"?a:hf(+a),i):e},i.extent=function(a){return arguments.length?(n=a==null?null:[[+a[0][0],+a[0][1]],[+a[1][0],+a[1][1]]],i):n&&[[n[0][0],n[0][1]],[n[1][0],n[1][1]]]},i.size=function(a){return arguments.length?(n=a==null?null:[[0,0],[+a[0],+a[1]]],i):n&&[n[1][0]-n[0][0],n[1][1]-n[0][1]]},i}function za(t){return function(){return t}}function q8(t,e,n){this.target=t,this.type=e,this.transform=n}function we(t,e,n){this.k=t,this.x=e,this.y=n}we.prototype={constructor:we,scale:function(t){return t===1?this:new we(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new we(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Hs=new we(1,0,0);Yg.prototype=we.prototype;function Yg(t){for(;!t.__zoom;)if(!(t=t.parentNode))return Hs;return t.__zoom}function To(){w.stopImmediatePropagation()}function bi(){w.preventDefault(),w.stopImmediatePropagation()}function Z8(){return!w.ctrlKey&&!w.button}function K8(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function pf(){return this.__zoom||Hs}function Q8(){return-w.deltaY*(w.deltaMode===1?.05:w.deltaMode?1:.002)}function J8(){return navigator.maxTouchPoints||"ontouchstart"in this}function j8(t,e,n){var i=t.invertX(e[0][0])-n[0][0],a=t.invertX(e[1][0])-n[1][0],r=t.invertY(e[0][1])-n[0][1],s=t.invertY(e[1][1])-n[1][1];return t.translate(a>i?(i+a)/2:Math.min(0,i)||Math.max(0,a),s>r?(r+s)/2:Math.min(0,r)||Math.max(0,s))}function t4(){var t=Z8,e=K8,n=j8,i=Q8,a=J8,r=[0,1/0],s=[[-1/0,-1/0],[1/0,1/0]],o=250,l=dd,c=yn("start","zoom","end"),u,f,h=500,d=150,g=0;function p(_){_.property("__zoom",pf).on("wheel.zoom",A).on("mousedown.zoom",k).on("dblclick.zoom",I).filter(a).on("touchstart.zoom",C).on("touchmove.zoom",T).on("touchend.zoom touchcancel.zoom",L).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}p.transform=function(_,D,P){var S=_.selection?_.selection():_;S.property("__zoom",pf),_!==S?y(_,D,P):S.interrupt().each(function(){x(this,arguments).start().zoom(null,typeof D=="function"?D.apply(this,arguments):D).end()})},p.scaleBy=function(_,D,P){p.scaleTo(_,function(){var S=this.__zoom.k,R=typeof D=="function"?D.apply(this,arguments):D;return S*R},P)},p.scaleTo=function(_,D,P){p.transform(_,function(){var S=e.apply(this,arguments),R=this.__zoom,z=P==null?v(S):typeof P=="function"?P.apply(this,arguments):P,N=R.invert(z),X=typeof D=="function"?D.apply(this,arguments):D;return n(b(m(R,X),z,N),S,s)},P)},p.translateBy=function(_,D,P){p.transform(_,function(){return n(this.__zoom.translate(typeof D=="function"?D.apply(this,arguments):D,typeof P=="function"?P.apply(this,arguments):P),e.apply(this,arguments),s)})},p.translateTo=function(_,D,P,S){p.transform(_,function(){var R=e.apply(this,arguments),z=this.__zoom,N=S==null?v(R):typeof S=="function"?S.apply(this,arguments):S;return n(Hs.translate(N[0],N[1]).scale(z.k).translate(typeof D=="function"?-D.apply(this,arguments):-D,typeof P=="function"?-P.apply(this,arguments):-P),R,s)},S)};function m(_,D){return D=Math.max(r[0],Math.min(r[1],D)),D===_.k?_:new we(D,_.x,_.y)}function b(_,D,P){var S=D[0]-P[0]*_.k,R=D[1]-P[1]*_.k;return S===_.x&&R===_.y?_:new we(_.k,S,R)}function v(_){return[(+_[0][0]+ +_[1][0])/2,(+_[0][1]+ +_[1][1])/2]}function y(_,D,P){_.on("start.zoom",function(){x(this,arguments).start()}).on("interrupt.zoom end.zoom",function(){x(this,arguments).end()}).tween("zoom",function(){var S=this,R=arguments,z=x(S,R),N=e.apply(S,R),X=P==null?v(N):typeof P=="function"?P.apply(S,R):P,U=Math.max(N[1][0]-N[0][0],N[1][1]-N[0][1]),B=S.__zoom,rt=typeof D=="function"?D.apply(S,R):D,et=l(B.invert(X).concat(U/B.k),rt.invert(X).concat(U/rt.k));return function(J){if(J===1)J=rt;else{var ut=et(J),Ut=U/ut[2];J=new we(Ut,X[0]-ut[0]*Ut,X[1]-ut[1]*Ut)}z.zoom(null,J)}})}function x(_,D,P){return!P&&_.__zooming||new M(_,D)}function M(_,D){this.that=_,this.args=D,this.active=0,this.extent=e.apply(_,D),this.taps=0}M.prototype={start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(_,D){return this.mouse&&_!=="mouse"&&(this.mouse[1]=D.invert(this.mouse[0])),this.touch0&&_!=="touch"&&(this.touch0[1]=D.invert(this.touch0[0])),this.touch1&&_!=="touch"&&(this.touch1[1]=D.invert(this.touch1[0])),this.that.__zoom=D,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(_){Oi(new q8(p,_,this.that.__zoom),c.apply,c,[_,this.that,this.args])}};function A(){if(!t.apply(this,arguments))return;var _=x(this,arguments),D=this.__zoom,P=Math.max(r[0],Math.min(r[1],D.k*Math.pow(2,i.apply(this,arguments)))),S=tn(this);if(_.wheel)(_.mouse[0][0]!==S[0]||_.mouse[0][1]!==S[1])&&(_.mouse[1]=D.invert(_.mouse[0]=S)),clearTimeout(_.wheel);else{if(D.k===P)return;_.mouse=[S,D.invert(S)],nn(this),_.start()}bi(),_.wheel=setTimeout(R,d),_.zoom("mouse",n(b(m(D,P),_.mouse[0],_.mouse[1]),_.extent,s));function R(){_.wheel=null,_.end()}}function k(){if(f||!t.apply(this,arguments))return;var _=x(this,arguments,!0),D=W(w.view).on("mousemove.zoom",z,!0).on("mouseup.zoom",N,!0),P=tn(this),S=w.clientX,R=w.clientY;fs(w.view),To(),_.mouse=[P,this.__zoom.invert(P)],nn(this),_.start();function z(){if(bi(),!_.moved){var X=w.clientX-S,U=w.clientY-R;_.moved=X*X+U*U>g}_.zoom("mouse",n(b(_.that.__zoom,_.mouse[0]=tn(_.that),_.mouse[1]),_.extent,s))}function N(){D.on("mousemove.zoom mouseup.zoom",null),ds(w.view,_.moved),bi(),_.end()}}function I(){if(t.apply(this,arguments)){var _=this.__zoom,D=tn(this),P=_.invert(D),S=_.k*(w.shiftKey?.5:2),R=n(b(m(_,S),D,P),e.apply(this,arguments),s);bi(),o>0?W(this).transition().duration(o).call(y,R,D):W(this).call(p.transform,R)}}function C(){if(t.apply(this,arguments)){var _=w.touches,D=_.length,P=x(this,arguments,w.changedTouches.length===D),S,R,z,N;for(To(),R=0;R<D;++R)z=_[R],N=Ui(this,_,z.identifier),N=[N,this.__zoom.invert(N),z.identifier],P.touch0?!P.touch1&&P.touch0[2]!==N[2]&&(P.touch1=N,P.taps=0):(P.touch0=N,S=!0,P.taps=1+!!u);u&&(u=clearTimeout(u)),S&&(P.taps<2&&(u=setTimeout(function(){u=null},h)),nn(this),P.start())}}function T(){if(this.__zooming){var _=x(this,arguments),D=w.changedTouches,P=D.length,S,R,z,N;for(bi(),u&&(u=clearTimeout(u)),_.taps=0,S=0;S<P;++S)R=D[S],z=Ui(this,D,R.identifier),_.touch0&&_.touch0[2]===R.identifier?_.touch0[0]=z:_.touch1&&_.touch1[2]===R.identifier&&(_.touch1[0]=z);if(R=_.that.__zoom,_.touch1){var X=_.touch0[0],U=_.touch0[1],B=_.touch1[0],rt=_.touch1[1],et=(et=B[0]-X[0])*et+(et=B[1]-X[1])*et,J=(J=rt[0]-U[0])*J+(J=rt[1]-U[1])*J;R=m(R,Math.sqrt(et/J)),z=[(X[0]+B[0])/2,(X[1]+B[1])/2],N=[(U[0]+rt[0])/2,(U[1]+rt[1])/2]}else if(_.touch0)z=_.touch0[0],N=_.touch0[1];else return;_.zoom("touch",n(b(R,z,N),_.extent,s))}}function L(){if(this.__zooming){var _=x(this,arguments),D=w.changedTouches,P=D.length,S,R;for(To(),f&&clearTimeout(f),f=setTimeout(function(){f=null},h),S=0;S<P;++S)R=D[S],_.touch0&&_.touch0[2]===R.identifier?delete _.touch0:_.touch1&&_.touch1[2]===R.identifier&&delete _.touch1;if(_.touch1&&!_.touch0&&(_.touch0=_.touch1,delete _.touch1),_.touch0)_.touch0[1]=this.__zoom.invert(_.touch0[0]);else if(_.end(),_.taps===2){var z=W(this).on("dblclick.zoom");z&&z.apply(this,arguments)}}}return p.wheelDelta=function(_){return arguments.length?(i=typeof _=="function"?_:za(+_),p):i},p.filter=function(_){return arguments.length?(t=typeof _=="function"?_:za(!!_),p):t},p.touchable=function(_){return arguments.length?(a=typeof _=="function"?_:za(!!_),p):a},p.extent=function(_){return arguments.length?(e=typeof _=="function"?_:za([[+_[0][0],+_[0][1]],[+_[1][0],+_[1][1]]]),p):e},p.scaleExtent=function(_){return arguments.length?(r[0]=+_[0],r[1]=+_[1],p):[r[0],r[1]]},p.translateExtent=function(_){return arguments.length?(s[0][0]=+_[0][0],s[1][0]=+_[1][0],s[0][1]=+_[0][1],s[1][1]=+_[1][1],p):[[s[0][0],s[0][1]],[s[1][0],s[1][1]]]},p.constrain=function(_){return arguments.length?(n=_,p):n},p.duration=function(_){return arguments.length?(o=+_,p):o},p.interpolate=function(_){return arguments.length?(l=_,p):l},p.on=function(){var _=c.on.apply(c,arguments);return _===c?p:_},p.clickDistance=function(_){return arguments.length?(g=(_=+_)*_,p):Math.sqrt(g)},p}const e4=Object.freeze(Object.defineProperty({__proto__:null,FormatSpecifier:ks,active:Mv,arc:og,area:Hc,areaRadial:sf,ascending:Ue,autoType:D2,axisBottom:os,axisLeft:ls,axisRight:Tf,axisTop:Im,bisect:$e,bisectLeft:om,bisectRight:$e,bisector:$l,blob:T2,brush:Nv,brushSelection:Pv,brushX:Ev,brushY:$v,buffer:R2,chord:zv,clientPoint:hs,cluster:W_,color:Ye,contourDensity:h2,contours:Td,create:tb,creator:cs,cross:cm,csv:$2,csvFormat:m2,csvFormatBody:b2,csvFormatRow:v2,csvFormatRows:y2,csvFormatValue:x2,csvParse:Rd,csvParseRows:g2,cubehelix:ie,curveBasis:n8,curveBasisClosed:i8,curveBasisOpen:a8,curveBundle:r8,curveCardinal:s8,curveCardinalClosed:o8,curveCardinalOpen:l8,curveCatmullRom:c8,curveCatmullRomClosed:u8,curveCatmullRomOpen:h8,curveLinear:Ns,curveLinearClosed:f8,curveMonotoneX:d8,curveMonotoneY:p8,curveNatural:g8,curveStep:m8,curveStepAfter:y8,curveStepBefore:b8,customEvent:Oi,descending:um,deviation:Sf,dispatch:yn,drag:lb,dragDisable:fs,dragEnable:ds,dsv:E2,dsvFormat:_s,easeBack:Du,easeBackIn:mv,easeBackInOut:Du,easeBackOut:bv,easeBounce:Zi,easeBounceIn:pv,easeBounceInOut:gv,easeBounceOut:Zi,easeCircle:Au,easeCircleIn:av,easeCircleInOut:Au,easeCircleOut:rv,easeCubic:Qo,easeCubicIn:Ky,easeCubicInOut:Qo,easeCubicOut:Qy,easeElastic:Wn,easeElasticIn:yv,easeElasticInOut:vv,easeElasticOut:Wn,easeExp:Su,easeExpIn:nv,easeExpInOut:Su,easeExpOut:iv,easeLinear:Vy,easePoly:Mu,easePolyIn:Jy,easePolyInOut:Mu,easePolyOut:jy,easeQuad:wu,easeQuadIn:qy,easeQuadInOut:wu,easeQuadOut:Zy,easeSin:ku,easeSinIn:tv,easeSinInOut:ku,easeSinOut:ev,entries:Jv,get event(){return w},extent:Nl,forceCenter:U2,forceCollide:lx,forceLink:ux,forceManyBody:mx,forceRadial:bx,forceSimulation:gx,forceX:yx,forceY:vx,get format(){return ha},formatDefaultLocale:zd,formatLocale:Yd,get formatPrefix(){return sc},formatSpecifier:Qi,geoAlbers:w0,geoAlbersUsa:k_,geoArea:Cx,geoAzimuthalEqualArea:S_,geoAzimuthalEqualAreaRaw:mc,geoAzimuthalEquidistant:A_,geoAzimuthalEquidistantRaw:bc,geoBounds:Px,geoCentroid:Xx,geoCircle:Hx,geoClipAntimeridian:pl,geoClipCircle:s0,geoClipExtent:Vx,geoClipRectangle:Ss,geoConicConformal:L_,geoConicConformalRaw:S0,geoConicEqualArea:Gr,geoConicEqualAreaRaw:_0,geoConicEquidistant:T_,geoConicEquidistantRaw:A0,geoContains:t_,geoDistance:Pr,geoEqualEarth:R_,geoEqualEarthRaw:yc,geoEquirectangular:C_,geoEquirectangularRaw:ta,geoGnomonic:P_,geoGnomonicRaw:vc,geoGraticule:c0,geoGraticule10:e_,geoIdentity:E_,geoInterpolate:n_,geoLength:o0,geoMercator:D_,geoMercatorRaw:ga,geoNaturalEarth1:$_,geoNaturalEarth1Raw:xc,geoOrthographic:N_,geoOrthographicRaw:_c,geoPath:p_,geoProjection:me,geoProjectionMutator:pc,geoRotation:t0,geoStereographic:Y_,geoStereographicRaw:wc,geoStream:jt,geoTransform:g_,geoTransverseMercator:z_,geoTransverseMercatorRaw:Mc,gray:yb,hcl:hr,hierarchy:kc,histogram:pm,hsl:lr,html:G2,image:Y2,interpolate:ua,interpolateArray:kb,interpolateBasis:jf,interpolateBasisClosed:td,interpolateBlues:f3,interpolateBrBG:F6,interpolateBuGn:t3,interpolateBuPu:e3,interpolateCividis:y3,interpolateCool:_3,interpolateCubehelix:Xb,interpolateCubehelixDefault:v3,interpolateCubehelixLong:bs,interpolateDate:sd,interpolateDiscrete:Db,interpolateGnBu:n3,interpolateGreens:d3,interpolateGreys:p3,interpolateHcl:Yb,interpolateHclLong:zb,interpolateHsl:Eb,interpolateHslLong:$b,interpolateHue:Lb,interpolateInferno:C3,interpolateLab:Nb,interpolateMagma:L3,interpolateNumber:Vt,interpolateNumberArray:Zl,interpolateObject:od,interpolateOrRd:i3,interpolateOranges:b3,interpolatePRGn:W6,interpolatePiYG:V6,interpolatePlasma:T3,interpolatePuBu:r3,interpolatePuBuGn:a3,interpolatePuOr:q6,interpolatePuRd:s3,interpolatePurples:g3,interpolateRainbow:w3,interpolateRdBu:Z6,interpolateRdGy:K6,interpolateRdPu:o3,interpolateRdYlBu:Q6,interpolateRdYlGn:J6,interpolateReds:m3,interpolateRgb:Wi,interpolateRgbBasis:id,interpolateRgbBasisClosed:Mb,interpolateRound:ld,interpolateSinebow:S3,interpolateSpectral:j6,interpolateString:Kl,interpolateTransformCss:hd,interpolateTransformSvg:fd,interpolateTurbo:A3,interpolateViridis:D3,interpolateWarm:x3,interpolateYlGn:c3,interpolateYlGnBu:l3,interpolateYlOrBr:u3,interpolateYlOrRd:h3,interpolateZoom:dd,interrupt:nn,interval:Fb,isoFormat:k6,isoParse:D6,json:X2,keys:Kv,lab:ur,lch:vb,line:sa,lineRadial:rf,linkHorizontal:W3,linkRadial:q3,linkVertical:V3,local:Xf,map:Me,matcher:Gl,max:Df,mean:bm,median:ym,merge:Xl,min:Lf,mouse:tn,namespace:la,namespaces:Go,nest:Vv,now:ei,pack:bw,packEnclose:L0,packSiblings:pw,pairs:lm,partition:yw,path:Fe,permute:vm,pie:cg,piecewise:Hb,pointRadial:Pi,polygonArea:Pw,polygonCentroid:Ew,polygonContains:zw,polygonHull:Yw,polygonLength:Xw,precisionFixed:Xd,precisionPrefix:Hd,precisionRound:Gd,quadtree:Ms,quantile:Gi,quantize:Gb,radialArea:sf,radialLine:rf,randomBates:Ow,randomExponential:Uw,randomIrwinHall:Y0,randomLogNormal:Gw,randomNormal:N0,randomUniform:Hw,range:Gt,rgb:Un,ribbon:Wv,scaleBand:Sc,scaleDiverging:Ip,scaleDivergingLog:Rp,scaleDivergingPow:Yc,scaleDivergingSqrt:E6,scaleDivergingSymlog:Pp,scaleIdentity:O0,scaleImplicit:Dl,scaleLinear:Xe,scaleLog:B0,scaleOrdinal:Ls,scalePoint:ai,scalePow:Cc,scaleQuantile:W0,scaleQuantize:Tc,scaleSequential:Dp,scaleSequentialLog:Lp,scaleSequentialPow:Nc,scaleSequentialQuantile:Tp,scaleSequentialSqrt:P6,scaleSequentialSymlog:Cp,scaleSqrt:t5,scaleSymlog:F0,scaleThreshold:V0,scaleTime:I6,scaleUtc:R6,scan:xm,schemeAccent:N6,schemeBlues:eg,schemeBrBG:Ep,schemeBuGn:Up,schemeBuPu:Bp,schemeCategory10:$6,schemeDark2:Y6,schemeGnBu:Fp,schemeGreens:ng,schemeGreys:ig,schemeOrRd:Wp,schemeOranges:sg,schemePRGn:$p,schemePaired:z6,schemePastel1:X6,schemePastel2:H6,schemePiYG:Np,schemePuBu:qp,schemePuBuGn:Vp,schemePuOr:Yp,schemePuRd:Zp,schemePurples:ag,schemeRdBu:zp,schemeRdGy:Xp,schemeRdPu:Kp,schemeRdYlBu:Hp,schemeRdYlGn:Gp,schemeReds:rg,schemeSet1:G6,schemeSet2:O6,schemeSet3:U6,schemeSpectral:Op,schemeTableau10:B6,schemeYlGn:Jp,schemeYlGnBu:Qp,schemeYlOrBr:jp,schemeYlOrRd:tg,select:W,selectAll:nb,selection:vn,selector:us,selectorAll:Hl,set:Ld,shuffle:_m,stack:x8,stackOffsetDiverging:w8,stackOffsetExpand:_8,stackOffsetNone:Jn,stackOffsetSilhouette:M8,stackOffsetWiggle:k8,stackOrderAppearance:Tg,stackOrderAscending:Ig,stackOrderDescending:A8,stackOrderInsideOut:D8,stackOrderNone:jn,stackOrderReverse:L8,stratify:ww,style:on,sum:wm,svg:O2,symbol:e8,symbolCircle:Uc,symbolCross:fg,symbolDiamond:pg,symbolSquare:bg,symbolStar:mg,symbolTriangle:yg,symbolWye:vg,symbols:t8,text:ws,thresholdFreedmanDiaconis:gm,thresholdScott:mm,thresholdSturges:zl,tickFormat:G0,tickIncrement:$i,tickStep:sn,ticks:Yl,timeDay:Ts,timeDays:i5,get timeFormat(){return Pc},timeFormatDefaultLocale:Sp,timeFormatLocale:vp,timeFriday:ap,timeFridays:l5,timeHour:tp,timeHours:n5,timeInterval:pt,timeMillisecond:Wr,timeMilliseconds:Gh,timeMinute:J0,timeMinutes:e5,timeMonday:na,timeMondays:a5,timeMonth:op,timeMonths:u5,get timeParse(){return kp},timeSaturday:rp,timeSaturdays:c5,timeSecond:Zr,timeSeconds:Oh,timeSunday:ea,timeSundays:Uh,timeThursday:pn,timeThursdays:o5,timeTuesday:np,timeTuesdays:r5,timeWednesday:ip,timeWednesdays:s5,timeWeek:ea,timeWeeks:Uh,timeYear:gn,timeYears:h5,timeout:Vo,timer:vs,timerFlush:vd,touch:Ui,touches:ib,transition:Md,transpose:Cf,tree:Lw,treemap:Cw,treemapBinary:Tw,treemapDice:ma,treemapResquarify:Rw,treemapSlice:Ds,treemapSliceDice:Iw,treemapSquarify:$0,tsv:N2,tsvFormat:w2,tsvFormatBody:M2,tsvFormatRow:S2,tsvFormatRows:k2,tsvFormatValue:A2,tsvParse:Pd,tsvParseRows:_2,utcDay:Is,utcDays:p5,get utcFormat(){return Rs},utcFriday:gp,utcFridays:v5,utcHour:hp,utcHours:d5,utcMillisecond:Wr,utcMilliseconds:Gh,utcMinute:cp,utcMinutes:f5,utcMonday:aa,utcMondays:g5,utcMonth:yp,utcMonths:_5,get utcParse(){return Ec},utcSaturday:mp,utcSaturdays:x5,utcSecond:Zr,utcSeconds:Oh,utcSunday:ia,utcSundays:Bh,utcThursday:mn,utcThursdays:y5,utcTuesday:dp,utcTuesdays:m5,utcWednesday:pp,utcWednesdays:b5,utcWeek:ia,utcWeeks:Bh,utcYear:bn,utcYears:w5,values:Qv,variance:kf,version:rm,voronoi:V8,window:Ol,xml:H2,zip:km,zoom:t4,zoomIdentity:Hs,zoomTransform:Yg},Symbol.toStringTag,{value:"Module"})),zg=(t,e=250)=>{let n;return(...i)=>{let a;return n&&clearTimeout(n),n=setTimeout(()=>{a=t(...i)},e),a}};function n4({D3Module:t,props:e,listenersKeys:n}){const i=je(void 0),a=je(),s=zg(()=>{i.value&&i.value.render&&i.value.render()}),o=g=>g&&i.value.setParams&&i.value.setParams(g),l=g=>g&&i.value.setData&&i.value.setData(g),c=g=>g&&i.value.setDataset&&i.value.setDataset(g),u=g=>g&&i.value.setDatum&&i.value.setDatum(g),f=g=>g&&i.value.filter&&i.value.filter(g),h=({width:g,height:p})=>{i.value.resize&&i.value.resize({width:g&&typeof g=="number"?g:i.value.width,height:p&&typeof p=="number"?p:i.value.height})},d=g=>{g&&i.value.zoom&&i.value.transform&&i.value.transformZoom&&i.value.initZoom&&(i.value.initZoom(i.value.zoom),i.value.transformZoom(g))};return oe(()=>e.params,g=>{o(g||{})}),oe(()=>e.data,g=>{l(g)}),oe(()=>e.dataset,g=>{c(g)}),oe(()=>e.datum,g=>{u(g)}),oe(()=>e.filter,g=>{f(g)}),oe(()=>[e.width,e.height],({width:g,height:p})=>{(e.width||e.height)&&h({width:g,height:p})}),oe(()=>e.zoom,g=>{d(g)}),{d3Module:i,debounceRender:s,createModule(g){a.value=g,i.value=new t(W(g),e.params||{}),o(e.params||{}),l(e.data),c(e.dataset),u(e.datum),f(e.filter),h({width:e.width,height:e.height}),d(e.zoom)},eventHandler(g){let p=g;n.forEach(m=>{i.value.on!=null&&i.value.on(m,b=>{p&&(console.log(m,b),p(m,b))})})}}}function i4(t){const e=je({x:0,y:0,width:0,height:0,top:0,right:0,bottom:0,left:0}),n=zg(a=>{const r=a[0];e.value=r.contentRect});return new ResizeObserver((a,r)=>{n(a)}).observe(t),e}const Io=800,gf=500,a4=(t,e)=>e?Object.keys(e):t?Object.keys(t).filter(n=>n.substring(0,2)==="on").map(n=>`${n.substring(2,3).toLowerCase()}${n.substring(3,n.length)}`):[],r4=tm({props:{module:{},params:{},data:{},datum:{},dataset:{},filter:{},width:{default:()=>0},height:{default:()=>0},forceFit:{default:()=>!0},zoom:{}},setup(t,{emit:e,listeners:n}){const i=em(),a=a4(i,n),r=je(null),s=je(null),o=nu(()=>{let p=`${Io}px`;return t.forceFit&&!t.width?p="100%":typeof t.width=="string"?p=t.width:typeof t.width=="number"&&t.width?p=`${t.width}px`:p=`${Io}px`,p}),l=nu(()=>{let p=`${gf}px`;return typeof t.height=="string"?p=t.height:typeof t.height=="number"&&t.height&&(p=`${t.height}px`),p}),c=je(Io),u=je(gf),{d3Module:f,createModule:h,eventHandler:d,debounceRender:g}=n4({D3Module:t.module,props:t,listenersKeys:a});return nm(()=>{h(s.value),d((p,m)=>{e(p,m)}),setTimeout(()=>{if(c.value=r.value.clientWidth,u.value=r.value.clientHeight,t.forceFit){const p=i4(r.value);oe(p,()=>{c.value=p.value.width,u.value=p.value.height,f.value.resize&&f.value.resize({width:c.value,height:u.value}),g(),e("resize",{width:c.value,height:u.value})})}else g();oe(t,()=>g()),oe(()=>[t.width,t.height],()=>{e("resize",{width:t.width,height:t.height})})})}),{d3Module:f,container:r,svg:s,containerWidth:o,containerHeight:l,svgWidth:c,svgHeight:u}}}),Xg=(t,e)=>{const n=t.__vccOpts||t;for(const[i,a]of e)n[i]=a;return n},s4=["width","height"];function o4(t,e,n,i,a,r){return an(),rn("div",{ref:"container",style:im([{position:"relative"},{width:t.containerWidth,height:t.containerHeight}])},[(an(),rn("svg",{ref:"svg","xmlns:xlink":"http://www.w3.org/1999/xlink",xmls:"http://www.w3.org/2000/svg",version:"1.1",style:{position:"absolute"},width:t.svgWidth,height:t.svgHeight},null,8,s4))],4)}const Gs=Xg(r4,[["render",o4]]),ht=["#67B7DC","#6794DC","#6771DC","#8067DC","#A367DC","#C767DC","#DC67CE","#DC67AB","#DC6788","#DC6967","#DC8C67","#DCAF67"],De=800,Le=500,Ot={top:50,right:70,bottom:50,left:70},Zc="#e1e1e1",Ee="#7b7b7b",Kc={offsetX:20,offsetY:5,type:"white",templateHtml:()=>""},l4={...Kc,templateHtml:()=>"",yLine:void 0,alignCenter:void 0};({...Kc});class Hg{constructor(e,n){this.params=Kc,this.datum={x:-1,y:-1,data:null},this.renderData={_sourceData:{x:-1,y:-1},x:-1,y:-1,contentHtml:""},this.setTooltipStyle=i=>{},this.render=()=>{this.renderTooltip([this.renderData])},this.selection=e,this.params={...this.params,...n},this.params.type==="black"?this.setTooltipStyle=i=>{i.style("pointer-events","none").style("white-space","nowrap").style("padding","10px 10px").style("background","#333333").style("border-radius","5px").style("opacity",.9).style("color","white").style("font-size","14px").style("text-align","left")}:this.params.type==="white"&&(this.setTooltipStyle=i=>{i.style("pointer-events","none").style("white-space","nowrap").style("padding","10px 15px").style("background-color","rgba(255,255,255,.8)").style("border","1px solid rgba(152,152,152,0.5)").style("border-radius","5px").style("color","black").style("font-size","12px").style("line-height","20px").style("text-align","left")})}setDatum(e){if(e!=null&&e.data&&(this.datum.data=e.data,this.renderData.contentHtml=this.params.templateHtml?this.params.templateHtml(e.data):""),!this.renderData.contentHtml)return;const n=(e==null?void 0:e.x)??w.clientX,i=(e==null?void 0:e.y)??w.clientY;this.datum.x=n,this.datum.y=i,this.renderData.x=n,this.renderData.y=i,this.render()}select(){return this.selection}}function c4(t){var i;const e=document.createElementNS("http://www.w3.org/1999/xhtml","div");e.innerHTML='<svg xmlns="http://www.w3.org/2000/svg">'+t+"</svg>";const n=document.createDocumentFragment();for(;n&&((i=e==null?void 0:e.firstChild)!=null&&i.firstChild);)n.appendChild(e.firstChild.firstChild);return n}function u4(t,e){const n=t.node();for(;n.hasChildNodes();)n.removeChild(n.firstChild);t.node().appendChild(c4(e))}function ns(t){try{return t.node().getBoundingClientRect()}catch(e){throw new Error(e)}}const is=(t,e)=>e instanceof Function?e(t):ha(e)(t);class h4 extends Hg{constructor(e,n){super(e,n),this.tooltipSelection=void 0,this.setParams(n??this.params)}setParams(e){this.params={...this.params,...e},((e==null?void 0:e.insideBoxMode)??!0)===!0?this.renderTooltip=this.renderInsideBox:this.renderTooltip=this.renderDefault}renderDefault(e){try{this.tooltipSelection.interrupt("fadeout")}catch{}const n=W("body").selectAll(".bpchat___tooltip").data(e),i=n.enter().append("div").classed("bpchat___tooltip",!0).call(this.setTooltipStyle);this.tooltipSelection=n.merge(i).style("position","fixed").style("z-index",1e4).style("left",a=>`${a.x+this.params.offsetX}px`).style("top",a=>`${a.y+this.params.offsetY}px`).html(a=>a.contentHtml).on("interrupt",(a,r,s)=>{W(s[r]).style("opacity",1)}),n.exit().transition("fadeout").style("opacity",0).remove().on("interrupt",(a,r,s)=>{W(s[r]).style("opacity",1)})}renderInsideBox(e){var u;try{this.tooltipSelection.interrupt("fadeout")}catch{}const n=ns(this.selection),i=(u=this.tooltipSelection)!=null&&u.node()?ns(this.tooltipSelection):{width:0,height:0},a=n.x,r=n.x+n.width-i.width,s=n.y,o=n.y+n.height-i.height,l=W("body").selectAll(".bpchat___tooltip").data(e),c=l.enter().append("div").classed("bpchat___tooltip",!0).call(this.setTooltipStyle);this.tooltipSelection=l.merge(c).style("position","fixed").style("z-index",1e4).style("left",f=>{const h=f.x+this.params.offsetX;return h<a?`${a}px`:h>r?`${r}px`:`${h}px`}).style("top",f=>{const h=f.y+this.params.offsetY;return h<s?`${s}px`:h>o?`${o}px`:`${h}px`}).html(f=>f.contentHtml),l.exit().transition("fadeout").style("opacity",0).remove().on("interrupt",(f,h,d)=>{W(d[h]).style("opacity",1)})}renderTooltip(e){}remove(){this.tooltipSelection&&this.tooltipSelection.transition("fadeout").style("opacity",0).remove().on("interrupt",(e,n,i)=>{W(i[n]).style("opacity",1)})}}const Gg={colors:ht,outerRadius:.95,innerRadius:0,outerMouseoverRadius:1,enterDuration:800,startAngle:0,endAngle:Math.PI*2,padAngle:.02,cornerRadius:0,highlightTarget:"item",highlightDatumId:"",highlightItemId:""},Zt=(t,e)=>t-e.left-e.right,Kt=(t,e)=>t-e.top-e.bottom,Qc=({axisLabels:t,axisWidth:e,padding:n=.5,reverse:i=!1})=>{let a=[0,e];return i&&(a=[e,0]),ai().domain(t).range(a).padding(.5)},as=({maxValue:t,minValue:e,axisWidth:n,domainMinValue:i=void 0,domainMaxValue:a=void 0,domainMinRange:r=void 0,domainMaxRange:s=void 0,reverse:o=!1})=>{let l=e,c=t;if(i!=null){const f=i;l=f<l?f:l}if(r!=null){const f=t-(t-e)/(1-r);l=f<l?f:l}if(a!=null){const f=a;c=f>c?f:c}if(s!=null){const f=t/s;c=f>c?f:c}l==0&&c==0&&(c=1);let u=[l,c];return o&&(u=[c,l]),Xe().domain(u).range([0,n])},Jc=({axisLabels:t,axisWidth:e,reverse:n=!1})=>{let a=[];return n?a=t.map((r,s)=>t.length-1-s):a=t.map((r,s)=>s),Tc().domain([-0,e+0]).range(a)},ge=(t,e)=>Ls().domain(t.map(n=>n)).range(t.map((n,i)=>e[i])),Pl=({axisWidth:t,innerRadius:e,outerRadius:n,padAngle:i,cornerRadius:a})=>{const r=Xe().domain([0,1]).range([0,t/2]),s=r(n);return og().innerRadius(r(e)).outerRadius(s).padAngle(i).padRadius(s).cornerRadius(a)},f4=({pathSelection:t,enter:e,exit:n,data:i,lastData:a,params:r})=>t&&!e.size()&&!n.size()?s=>{const o=i.map((l,c)=>{const u=a[c]??{startAngle:0,endAngle:0,value:0};return{...l,startAngle:l.startAngle*s+u.startAngle*(1-s),endAngle:l.endAngle*s+u.endAngle*(1-s),value:l.value*s+u.value*(1-s)}});return El(o,r.startAngle,r.endAngle,1)}:s=>El(i,r.startAngle,r.endAngle,s),d4=t=>{const e=new Map;return t.forEach(n=>{const i=e.get(n.data.itemLabel)??[];i.push(n),e.set(n.data.itemLabel,i)}),e},El=(t,e,n,i)=>t.map((a,r)=>{const s=e+(a.startAngle-e)*i,o=s+(a.endAngle-a.startAngle)*i;return{...a,startAngle:s,endAngle:o}}),Xa=({dataset:t,datum:e,ItemDataMap:n,event:i})=>({dataset:t,groupData:e?[e]:[],itemData:e?n.get(e.data.itemLabel):[],datum:e||null,itemLabel:e?e.data.itemLabel:"",itemIndex:e?e.data.itemIndex:-1,clientX:i.clientX,clientY:i.clientY,offsetX:i.offsetX,offsetY:i.offsetY}),p4=t=>({dataset:t,groupData:[],itemData:[],datum:null,itemLabel:"",itemIndex:-1,clientX:-1,clientY:-1,offsetX:-1,offsetY:-1});let g4=class{constructor(e,n){this.params=Gg,this.dataset={data:[],itemLabels:[],axisWidth:0},this.width=De,this.height=Le,this.lastData=[],this.pieRenderData=[],this.pathSelection=void 0,this.ItemDataMap=new Map,this.mouseoverCallback=function(){},this.mousemoveCallback=function(){},this.mouseoutCallback=function(){},this.clickCallback=function(){},this.enterDurationCallback=function(){},this.setDonutEvent=i=>{i.on("mouseover",(a,r,s)=>{w.stopPropagation(),this.params.highlightTarget!=null&&this.params.highlightTarget!="none"&&(this.params.highlightTarget==="item"?this.highlight(i,a.data.itemLabel,void 0):this.params.highlightTarget==="datum"&&this.highlight(i,void 0,a.data.id));const o=Xa({dataset:this.dataset,datum:a,ItemDataMap:this.ItemDataMap,event:w});this.mouseoverCallback(o)}).on("mousemove",(a,r,s)=>{w.stopPropagation();const o=Xa({dataset:this.dataset,datum:a,ItemDataMap:this.ItemDataMap,event:w});this.mousemoveCallback(o)}).on("mouseout",(a,r,s)=>{w.stopPropagation(),this.initHighlight();const o=Xa({dataset:this.dataset,datum:a,ItemDataMap:this.ItemDataMap,event:w});this.mouseoutCallback(o)}).on("click",(a,r,s)=>{w.stopPropagation();const o=Xa({dataset:this.dataset,datum:a,ItemDataMap:this.ItemDataMap,event:w});this.clickCallback(o)})},this.selection=e,this.gSelection=e.append("g")}setParams(e){this.params={...this.params,...e},this.colorScale=ge(this.dataset.itemLabels,this.params.colors)}select(){return this.selection}remove(){this.selection.remove()}setDataset(e){this.dataset=e,this.ItemDataMap=d4(e.data),this.colorScale=ge(this.dataset.itemLabels,this.params.colors)}render(){this.arc=Pl({axisWidth:this.dataset.axisWidth,innerRadius:this.params.innerRadius,outerRadius:this.params.outerRadius,padAngle:this.params.padAngle,cornerRadius:this.params.cornerRadius}),this.arcMouseover=Pl({axisWidth:this.dataset.axisWidth,innerRadius:this.params.innerRadius,outerRadius:this.params.outerMouseoverRadius,padAngle:this.params.padAngle,cornerRadius:this.params.cornerRadius});let e=this.gSelection.selectAll("path").data(this.dataset.data,r=>r.data.id),n=e.enter(),i=e.exit();const a=f4({pathSelection:this.pathSelection,enter:n,exit:i,data:this.dataset.data,lastData:this.lastData,params:this.params});this.gSelection.transition().duration(this.params.enterDuration).tween("move",(r,s,o)=>l=>{this.pieRenderData=a(l),this.renderDonut(this.gSelection,this.pieRenderData,this.arc);const c=p4(this.dataset);this.enterDurationCallback(c,l)}).on("end",(r,s,o)=>{this.pieRenderData=El(this.dataset.data,this.params.startAngle,this.params.endAngle,1),this.renderDonut(this.gSelection,this.pieRenderData,this.arc),this.params.highlightTarget&&this.params.highlightTarget!="none"&&this.pathSelection.style("cursor","pointer"),this.pathSelection&&this.setDonutEvent(this.pathSelection),this.initHighlight(),this.lastData=Object.assign([],this.dataset.data)})}on(e,n){return e==="click"?this.clickCallback=n:e==="mouseover"?this.mouseoverCallback=n:e==="mousemove"?this.mousemoveCallback=n:e==="mouseout"?this.mouseoutCallback=n:e==="enterDuration"&&(this.enterDurationCallback=n),this}initHighlight(){this.removeHighlight(),(this.params.highlightItemId||this.params.highlightDatumId)&&this.highlight(this.pathSelection,this.params.highlightItemId,this.params.highlightDatumId)}highlight(e,n,i){if(!e)return;let a=[];if(i&&a.push(i),n){const r=this.dataset.data.filter(s=>s.data.itemLabel===n).map(s=>s.id);a=a.concat(r)}e.each((r,s,o)=>{const l=W(o[s]);a.includes(r.data.id)?l.transition().ease(Wn).duration(500).style("opacity",1).attr("d",c=>this.arcMouseover(c)):l.transition().style("opacity",.3).attr("d",c=>this.arc(c))})}removeHighlight(){this.pathSelection&&this.pathSelection.transition().style("opacity",1).attr("d",e=>this.arc(e))}renderDonut(e,n,i){let a=e.selectAll("path").data(n,o=>o.data.id),r=a.enter().append("path").classed("bpchart__pie-path",!0),s=a.exit();r.append("path"),this.pathSelection=a.merge(r),this.pathSelection.attr("fill",(o,l)=>this.colorScale(o.data.itemLabel)).attr("d",(o,l)=>i(o)),s.remove()}};const Og={solidColor:void 0,colors:ht,outerRadius:1,enterDuration:800,startAngle:0,endAngle:Math.PI*2,centroid:2.3,fontSize:12,text:t=>String(t.value),highlightTarget:"item",highlightDatumId:"",highlightItemId:""},m4=t=>{const e=new Map;return t.forEach(n=>{const i=e.get(n.data.itemLabel)??[];i.push(n),e.set(n.data.itemLabel,i)}),e},b4=(t,e,n)=>t.data.map((i,a)=>{const[r,s]=e.centroid(i);return{...i,arcIndex:a,arcLabel:t.arcLabels[a],x:r*n,y:s*n}}),Ha=({dataset:t,datum:e,ItemDataMap:n,event:i})=>({dataset:t,groupData:[e],itemData:n.get(e.data.itemLabel),datum:e,itemLabel:e.data.itemLabel,itemIndex:e.data.itemIndex,clientX:i.clientX,clientY:i.clientY,offsetX:i.offsetX,offsetY:i.offsetY});class y4{constructor(e,n){this.params=Og,this.dataset={data:[],itemLabels:[],arcLabels:[],axisWidth:0},this.width=De,this.height=Le,this.renderData=[],this.labelSelection=void 0,this.ItemDataMap=new Map,this.mouseoverCallback=function(){},this.mousemoveCallback=function(){},this.mouseoutCallback=function(){},this.clickCallback=function(){},this.setDonutEvent=i=>{i.on("mouseover",(a,r,s)=>{w.stopPropagation(),this.params.highlightTarget!=null&&this.params.highlightTarget!="none"&&(this.params.highlightTarget==="item"?this.highlight(i,a.data.itemLabel,void 0):this.params.highlightTarget==="datum"&&this.highlight(i,void 0,a.data.id));const o=Ha({dataset:this.dataset,datum:a,ItemDataMap:this.ItemDataMap,event:w});this.mouseoverCallback(o)}).on("mousemove",(a,r,s)=>{w.stopPropagation();const o=Ha({dataset:this.dataset,datum:a,ItemDataMap:this.ItemDataMap,event:w});this.mousemoveCallback(o)}).on("mouseout",(a,r,s)=>{w.stopPropagation(),this.initHighlight();const o=Ha({dataset:this.dataset,datum:a,ItemDataMap:this.ItemDataMap,event:w});this.mouseoutCallback(o)}).on("click",(a,r,s)=>{w.stopPropagation();const o=Ha({dataset:this.dataset,datum:a,ItemDataMap:this.ItemDataMap,event:w});this.clickCallback(o)})},this.selection=e,this.gSelection=e.append("g")}setParams(e){this.params={...this.params,...e},this.colorScale=ge(this.dataset.itemLabels,this.params.colors)}select(){return this.selection}remove(){this.selection.remove()}setDataset(e){this.dataset=e,this.ItemDataMap=m4(e.data),this.colorScale=ge(this.dataset.itemLabels,this.params.colors)}render(){this.arc=Pl({axisWidth:this.dataset.axisWidth,innerRadius:0,outerRadius:this.params.outerRadius,padAngle:0,cornerRadius:0});const e=b4(this.dataset,this.arc,this.params.centroid);this.renderLabel(this.gSelection,e,this.arc),this.labelSelection&&this.setDonutEvent(this.labelSelection)}on(e,n){return e==="click"?this.clickCallback=n:e==="mouseover"?this.mouseoverCallback=n:e==="mousemove"?this.mousemoveCallback=n:e==="mouseout"&&(this.mouseoutCallback=n),this}initHighlight(){this.removeHighlight(),(this.params.highlightItemId||this.params.highlightDatumId)&&this.highlight(this.labelSelection,this.params.highlightItemId,this.params.highlightDatumId)}highlight(e,n,i){if(!e)return;let a=[];if(i&&a.push(i),n){const r=this.dataset.data.filter(s=>s.data.itemLabel===n).map(s=>s.data.id);a=a.concat(r)}e.each((r,s,o)=>{const l=W(o[s]);a.includes(r.id)?l.transition().duration(200).style("opacity",1):l.transition().duration(200).style("opacity",.3)})}removeHighlight(){this.labelSelection&&this.labelSelection.transition().duration(200).style("opacity",1)}renderLabel(e,n,i){let a=e.selectAll("text").data(n,o=>o.id),r=a.enter().append("text").classed("bpchart__text",!0),s=a.exit();r.append("text"),this.labelSelection=a.merge(r),this.labelSelection.attr("font-weight","bold").attr("text-anchor","middle").style("dominant-baseline","middle").style("cursor",o=>this.params.highlightTarget&&this.params.highlightTarget!="none"?"pointer":"none").text(o=>this.params.text(o)).attr("font-size",this.params.fontSize).attr("fill",(o,l)=>this.params.solidColor??this.colorScale(o.data.itemLabel)).transition().attr("transform",o=>"translate("+o.x+","+o.y+")").on("end",()=>this.initHighlight()),s.remove()}}const Ug={padding:Ot,tooltipFollowing:{templateHtml:t=>`
      <div>
        <div>${t.datum.data.arcLabel}</div>
        <div>${t.datum.value}</div>
      </div>
    `}},v4={...Ug,graphicArcPie:Gg,labelArcPie:Og,startAngle:0,endAngle:Math.PI*2,colors:ht,enterDuration:800,highlightTarget:"datum",highlightDatumId:"",highlightItemId:"",centerText:(t,e,n)=>[],centerTextAttrs:[],centerTextStyles:[]},Bg="__DEFAULT__",mf=(t,e,n)=>{const i=t-n.left-n.right,a=e-n.top-n.bottom;return i<a?i:a},x4=(t,e,n)=>t.map((i,a)=>{const r=i.itemLabel??Bg;return{...i,arcIndex:a,arcLabel:n[a],itemIndex:e.indexOf(r),itemLabel:r,id:n[a]}});class _4{constructor(e,n){this.params=Ug,this.dataset={data:[],itemLabels:[],arcLabels:[]},this.width=De,this.height=Le,this.mouseoverCallback=function(){},this.mousemoveCallback=function(){},this.mouseoutCallback=function(){},this.clickCallback=function(){},this.graphicData=[],this.itemLabels=[],this.arcLabels=[],this.shorterSideWidth=0,this.middleX=0,this.middleY=0,this.selection=e,this.graphicGSelection=e.append("g")}setParams(e){this.initGraphic(e),this.shorterSideWidth=mf(this.width,this.height,this.params.padding),this.params.tooltipFollowing?this.tooltip=new h4(this.selection,{templateHtml:this.params.tooltipFollowing.templateHtml,type:this.params.tooltipFollowing.type??"white",insideBoxMode:this.params.tooltipFollowing.insideBoxMode??!0}):this.tooltip&&(this.tooltip.remove(),this.tooltip=void 0)}resize({width:e,height:n}={width:this.width,height:this.height}){this.width=e,this.height=n,this.shorterSideWidth=mf(this.width,this.height,this.params.padding);const i=this.width/2,a=this.height/2;(i!==this.middleX||a!==this.middleY)&&(this.middleX=i,this.middleY=a,this.graphicGSelection.transition().attr("transform",`translate(${this.middleX}, ${this.middleY})`))}select(){return this.selection}remove(){this.selection.remove()}setDataset(e){this.dataset=e,this.itemLabels=this.dataset.itemLabels&&this.dataset.itemLabels.length?this.dataset.itemLabels:[Bg],this.arcLabels=this.dataset.arcLabels,this.graphicData=x4(this.dataset.data,this.itemLabels,this.arcLabels)}render(){this.setGraphicData({graphicData:this.graphicData,itemLabels:this.itemLabels,arcLabels:this.arcLabels,shorterSideWidth:this.shorterSideWidth}),this.renderGraphic()}on(e,n){return e==="click"?this.clickCallback=n:e==="mouseover"?this.mouseoverCallback=n:e==="mousemove"?this.mousemoveCallback=n:e==="mouseout"&&(this.mouseoutCallback=n),this}showTooltip(e,n){this.tooltip&&(n&&e?this.tooltip.setDatum({data:e,x:w.clientX,y:w.clientY}):this.tooltip.remove())}}const w4=({data:t,startAngle:e,endAngle:n,itemLabels:i,arcLabels:a})=>cg().startAngle(e).endAngle(n).value(o=>o.value).sort(null)(t).map((o,l)=>{const c=o.data.itemLabel;return{...o,itemIndex:i.indexOf(c),itemLabel:c,id:a[l]}}),Ga=(t,e,n)=>{const i=t.dataset.data.findIndex(a=>t.datum&&a.id===t.datum.id);return{dataset:e,groupData:t.groupData,itemData:t.itemData,datum:t.datum,itemIndex:t.itemIndex,itemLabel:t.itemLabel,arcIndex:i,arcLabel:e.arcLabels[i],clientX:n.clientX,clientY:n.clientY,offsetX:n.offsetX,offsetY:n.offsetY}},Oa=(t,e,n)=>{const i=t.dataset.data.findIndex(a=>t.datum&&a.data.id===t.datum.data.id);return{dataset:e,groupData:t.groupData,itemData:t.itemData,datum:t.datum,itemIndex:t.itemIndex,itemLabel:t.itemLabel,arcIndex:i,arcLabel:e.arcLabels[i],clientX:n.clientX,clientY:n.clientY,offsetX:n.offsetX,offsetY:n.offsetY}},Ro=({eventCallback:t,eventName:e,t:n,centerText:i,centerTextAttrs:a,centerTextStyles:r})=>i(t,e,n).map((o,l)=>({text:o,attr:a[l],style:r[l]}));class M4 extends _4{constructor(e,n){super(e,n),this.params=v4,this.pieSelection=this.graphicGSelection.append("g"),this.labelSelection=this.graphicGSelection.append("g"),this.centerTextSelection=this.graphicGSelection.append("g"),this.pie=new g4(this.pieSelection,{}),this.label=new y4(this.labelSelection,{})}initGraphic(e){this.params={...this.params,...e,graphicArcPie:{...this.params.graphicArcPie,...e.graphicArcPie},labelArcPie:{...this.params.labelArcPie,...e.labelArcPie}},this.params.graphicArcPie={...this.params.graphicArcPie,colors:this.params.colors,startAngle:this.params.startAngle,endAngle:this.params.endAngle,highlightTarget:this.params.highlightTarget,highlightDatumId:this.params.highlightDatumId,highlightItemId:this.params.highlightItemId},this.params.labelArcPie={...this.params.labelArcPie,colors:this.params.colors,startAngle:this.params.startAngle,endAngle:this.params.endAngle,outerRadius:this.params.graphicArcPie.outerRadius,highlightTarget:this.params.highlightTarget,highlightDatumId:this.params.highlightDatumId,highlightItemId:this.params.highlightItemId},this.pie.setParams(this.params.graphicArcPie),this.pie.on("enterDuration",(n,i)=>{const a=Ro({eventCallback:n,eventName:"enterDuration",t:i,centerText:this.params.centerText,centerTextAttrs:this.params.centerTextAttrs,centerTextStyles:this.params.centerTextStyles});this.renderText(this.centerTextSelection,a)}).on("click",n=>{const i=Ga(n,this.dataset,w);this.clickCallback(i)}).on("mouseover",n=>{const i=Ga(n,this.dataset,w);this.showTooltip(i,w),this.mouseoverCallback(i),this.label.setParams({highlightItemId:this.params.highlightTarget==="item"?i.itemLabel:void 0,highlightDatumId:this.params.highlightTarget==="datum"?i.datum.id:void 0}),this.label.render();const a=Ro({eventCallback:i,eventName:"mouseover",t:1,centerText:this.params.centerText,centerTextAttrs:this.params.centerTextAttrs,centerTextStyles:this.params.centerTextStyles});this.renderText(this.centerTextSelection,a)}).on("mousemove",n=>{const i=Ga(n,this.dataset,w);this.showTooltip(i,w),this.mousemoveCallback(i)}).on("mouseout",n=>{const i=Ga(n,this.dataset,w);this.showTooltip(void 0,w),this.mouseoutCallback(i),this.label.setParams({highlightItemId:this.params.labelArcPie.highlightItemId,highlightDatumId:this.params.labelArcPie.highlightDatumId}),this.label.render();const a=Ro({eventCallback:i,eventName:"mouseout",t:1,centerText:this.params.centerText,centerTextAttrs:this.params.centerTextAttrs,centerTextStyles:this.params.centerTextStyles});this.renderText(this.centerTextSelection,a)}),this.label.setParams(this.params.labelArcPie),this.label.on("click",n=>{const i=Oa(n,this.dataset,w);this.clickCallback(i)}).on("mouseover",n=>{const i=Oa(n,this.dataset,w);this.showTooltip(i,w),this.mouseoverCallback(i),this.pie.setParams({highlightItemId:this.params.highlightTarget==="item"?i.itemLabel:void 0,highlightDatumId:this.params.highlightTarget==="datum"?i.datum.id:void 0}),this.pie.render()}).on("mousemove",n=>{const i=Oa(n,this.dataset,w);this.showTooltip(i,w),this.mousemoveCallback(i)}).on("mouseout",n=>{const i=Oa(n,this.dataset,w);this.showTooltip(void 0,w),this.mouseoutCallback(i),this.pie.setParams({highlightItemId:this.params.graphicArcPie.highlightItemId,highlightDatumId:this.params.graphicArcPie.highlightDatumId}),this.pie.render()})}setGraphicData({graphicData:e,itemLabels:n,arcLabels:i,shorterSideWidth:a}){const r=w4({data:e,startAngle:this.params.startAngle,endAngle:this.params.endAngle,itemLabels:n,arcLabels:i});this.pie.setDataset({data:r,itemLabels:n,axisWidth:a}),this.label.setDataset({data:r,itemLabels:n,arcLabels:i,axisWidth:a})}renderGraphic(){this.pie.render(),this.label.render()}renderText(e,n){const i=e.selectAll("text.bpchart__text").data(n),a=i.enter().append("text").classed("bpchart__text",!0);i.merge(a).each((s,o,l)=>{const c=W(l[o]).text(s.text);Object.keys(s.attr).forEach(u=>{c.attr(u,s.attr[u])}),Object.keys(s.style).forEach(u=>{c.style(u,s.style[u])})}),i.exit().remove()}}const k4=xe("ul",null,[xe("li",null,"中山區"),xe("li",null,"有效票數：141,880"),xe("li",null,"無效票數：1,922"),xe("li",null,"投票數：143,802"),xe("li",null,"投票率：75.6097％")],-1),Po={__name:"ChartArcPie",setup(t){const e={data:[{itemLabel:"宋楚瑜、余湘",value:6367},{itemLabel:"韓國瑜、張善政",value:56491},{itemLabel:"蔡英文、賴清德",value:79022}],itemLabels:["宋楚瑜、余湘","韓國瑜、張善政","蔡英文、賴清德"],arcLabels:["宋楚瑜、余湘","韓國瑜、張善政","蔡英文、賴清德"]},n={graphicArcPie:{outerMouseoverRadius:1,outerRadius:.95,innerRadius:.7,padAngle:.02,cornerRadius:0},centerText:(i,a,r=1)=>a==="mouseover"?[i.arcLabel,i.datum.value]:["蔡英文、賴清德",Math.round(i.dataset.data.reduce((s,o)=>s+o.value,0)*r)],centerTextStyles:[{"font-weight":"bold","text-anchor":"middle","pointer-events":"none","dominant-baseline":"middle","font-size":20,fill:"#000"},{"pointer-events":"none","dominant-baseline":"middle","text-anchor":"middle","font-size":18,fill:"rgb(96, 98, 102)"}],centerTextAttrs:[{transform:"translate(0, -12)"},{transform:"translate(0, 48)"}],colors:["#FF6310","#000095","#1B9431"]};return(i,a)=>(an(),rn("div",null,[Mt(Gs,{module:rs(M4),dataset:e,params:n},null,8,["module"]),Za(" 選區票數說明：(需另外切版) "),k4]))}};class jc extends Hg{constructor(e,n){super(e,n),this.params=l4,this.tooltipSelection=void 0,this.lineSelection=void 0,this.containerSize={height:0,width:0,x:0,y:0},this.setParams(n??this.params)}setParams(e){this.params={...this.params,...e}}doRenderTooltip(e){try{this.tooltipSelection.interrupt("fadeout")}catch{}const n=this.tooltipSelection&&this.tooltipSelection.node()?ns(this.tooltipSelection):{width:0,height:0},i=this.containerSize.x+this.containerSize.width-n.width,a=this.containerSize.y+this.containerSize.height-n.height,r=l=>{l.style("left",c=>c.x<i?`${c.x+20}px`:`${c.x-n.width-20}px`).style("top",c=>this.params.alignCenter?this.containerSize.y+this.containerSize.height/2-n.height/2:c.y<a?`${c.y}px`:`${a+5}px`)},s=W("body").selectAll(".bpchat___tooltip").data(e);s.transition().duration(50).call(r).on("interrupt",(l,c,u)=>{W(u[c]).style("opacity",1)});const o=s.enter().append("div").classed("bpchat___tooltip",!0).call(this.setTooltipStyle);o.call(r),this.tooltipSelection=s.merge(o),this.tooltipSelection.style("position","fixed").style("z-index",1e4).html(l=>l.contentHtml),s.exit().transition("fadeout").style("opacity",0).remove().on("interrupt",(l,c,u)=>{W(u[c]).style("opacity",1)})}renderYLine(e){const n=e[0]?e[0].x-this.containerSize.x:0,i=this.selection.selectAll(".bpchart__tooltip__line").data(e),a=i.enter().append("line").classed("bpchart__tooltip__line",!0).style("stroke","#E4E7ED").style("stroke-width",1).style("pointer-events","none");this.lineSelection=i.merge(a).attr("x1",n).attr("y1",0).attr("x2",n).attr("y2",this.containerSize.height),i.exit().transition("fadeout").style("opacity",0).remove().on("interrupt",(r,s,o)=>{W(o[s]).style("opacity",1)})}renderTooltip(e){this.containerSize=ns(this.selection),this.params.yLine==!0&&this.renderYLine(e),this.doRenderTooltip(e)}remove(){this.tooltipSelection&&this.tooltipSelection.transition("fadeout").style("opacity",0).remove().on("end",()=>{var e;this.params.yLine==!0&&((e=this.lineSelection)==null||e.remove())}),this.renderData.contentHtml=""}}class tu{constructor(e){this.data=[],this.auxLineSelection=void 0,this.selection=e}setData(e){this.data=e}render(){const e=this.selection.selectAll("line.bpchart__auxline").data(this.data),n=e.enter().append("line").classed("bpchart__auxline",!0).style("stroke",Ee).style("stroke-width",1).style("stroke-dasharray","3,3").style("pointer-events","none");this.auxLineSelection=e.merge(n).attr("opacity",i=>i.active==!0?1:0),e.exit().remove(),n.attr("x1",i=>i.x1).attr("y1",i=>i.y1).attr("x2",i=>i.x2).attr("y2",i=>i.y2),e.transition().duration(50).attr("x1",i=>i.x1).attr("y1",i=>i.y1).attr("x2",i=>i.x2).attr("y2",i=>i.y2)}remove(){this.selection.remove()}}const Fg={xLabel:"x",y1Label:"y1",y2Label:"y2",xLabelAnchor:"start",y1LabelAnchor:"end",y2LabelAnchor:"start",xLabelOffset:[0,0],y1LabelOffset:[0,0],y2LabelOffset:[0,0],y1LabelColor:Ee,y2LabelColor:Ee,y1TickFormat:",.0f",y2TickFormat:",.0f",xTickPadding:20,y1TickPadding:20,y2TickPadding:20,xTickLine:!1,y1TickLine:1,y2TickLine:1,xTickLineDasharray:"none",y1TickLineDasharray:"none",y2TickLineDasharray:"4",y1Ticks:4,y2Ticks:4,axisLineColor:Zc,axisLabelColor:Ee,rotateXLabel:!1,padding:Ot,xVisible:!0,y1Visible:!0,y2Visible:!0},yi=6;class S4{constructor(e,n){this.width=De,this.height=Le,this.dataset={xScale:ai(),y1Scale:Xe(),y2Scale:Xe(),y1MaxValue:0,y2MaxValue:0},this.params=Fg,this.xAxisSelection=void 0,this.y1AxisSelection=void 0,this.y2AxisSelection=void 0,this.xLabelSelection=void 0,this.y1LabelSelection=void 0,this.y2LabelSelection=void 0,this.axisWidth=Zt(this.width,Ot),this.axisHeight=Kt(this.height,Ot),this.selection=e}setParams(e){this.params={...this.params,...e}}setDataset(e){this.dataset=e}resize({width:e=this.width,height:n=this.height}){this.width=e,this.height=n,this.axisWidth=Zt(this.width,this.params.padding),this.axisHeight=Kt(this.height,this.params.padding)}render(){this.renderXPointAxis(),this.renderY1LinearAxis(),this.renderY2LinearAxis();const e=this.dataset.y1Scale(0),n=this.dataset.y2Scale(0);this.renderZeroLine(this.selection,[{x1:0,y1:e,x2:this.axisWidth,y2:e},{x1:0,y1:n,x2:this.axisWidth,y2:n}])}remove(){this.selection.remove()}renderXPointAxis(){let e=[];this.params.xVisible&&e.push(this.params);const n=this.selection.selectAll("g.xAxis").data(e),i=n.enter().append("g");this.xAxisSelection=n.merge(i).classed("xAxis",!0).attr("transform",l=>"translate("+l.padding.left+","+(l.padding.top+this.axisHeight)+")"),n.exit().remove();const a=this.selection.selectAll("text.xLabel").data(e),r=a.enter().append("text").classed("xLabel",!0).style("font-size","14px").style("font-weight","bold").style("dominant-baseline","hanging");if(this.xLabelSelection=a.merge(r).attr("x",l=>this.width-l.padding.right+l.xTickPadding).attr("y",l=>l.padding.top+this.axisHeight+l.y2TickPadding+yi).attr("transform",`translate(${this.params.xLabelOffset[0]}, ${this.params.xLabelOffset[1]})`).attr("text-anchor",this.params.xLabelAnchor).style("fill",this.params.axisLabelColor).text(l=>l.xLabel),a.exit().remove(),this.xLabelSelection.size()==0)return;this.xAxis=os(this.dataset.xScale).scale(this.dataset.xScale).tickSize(this.params.xTickLine&&typeof this.params.xTickLine=="boolean"?-this.axisHeight:this.params.xTickLine&&typeof this.params.xTickLine=="number"?-this.axisHeight*this.params.xTickLine:yi).tickSizeOuter(0).tickFormat(l=>l).tickPadding(this.params.xTickPadding);const s=this.xAxisSelection.transition().duration(50).call(this.xAxis).attr("text-anchor",()=>this.params.rotateXLabel!==!1?"end":"middle");s.selectAll("line").style("fill","none").style("stroke",this.params.axisLineColor).style("stroke-dasharray",this.params.xTickLineDasharray),s.selectAll("path").style("fill","none").style("stroke",this.params.axisLineColor).style("shape-rendering","crispEdges");const o=s.selectAll("text").style("font-family","sans-serif").style("font-size","14px").style("color",this.params.axisLabelColor).attr("transform-origin",`-5 ${this.params.xTickPadding+yi}`);this.params.rotateXLabel===!0?o.attr("transform","translate(0,0) rotate(-45)"):typeof this.params.rotateXLabel=="number"&&o.attr("transform",`translate(0,0) rotate(${this.params.rotateXLabel})`)}renderY1LinearAxis(){let e=[];this.params.y1Visible&&e.push(this.params);const n=this.selection.selectAll("g.y1Axis").data(e),i=n.enter().append("g");this.y1AxisSelection=n.merge(i).classed("y1Axis",!0).attr("transform",o=>"translate("+o.padding.left+","+o.padding.top+")"),n.exit().remove();const a=this.selection.selectAll("text.y1Label").data(e),r=a.enter().append("text").classed("y1Label",!0).style("font-size","14px").style("font-weight","bold");if(this.y1LabelSelection=a.merge(r).attr("fill",o=>o.y1LabelColor).attr("x",o=>o.padding.left-o.xTickPadding).attr("y",o=>o.padding.top-o.y1TickPadding).attr("transform",`translate(${this.params.y1LabelOffset[0]}, ${this.params.y1LabelOffset[1]})`).attr("text-anchor",this.params.y1LabelAnchor).text(o=>o.y1Label),a.exit().remove(),this.y1LabelSelection.size()==0)return;this.y1Axis=ls(this.dataset.y1Scale).scale(this.dataset.y1Scale).ticks(this.dataset.y1MaxValue>this.params.y1Ticks?this.params.y1Ticks:this.dataset.y1MaxValue===0?1:Math.ceil(this.dataset.y1MaxValue)).tickFormat(o=>is(o,this.params.y1TickFormat)).tickSize(this.params.y1TickLine&&typeof this.params.y1TickLine=="boolean"?-this.axisWidth:this.params.y1TickLine&&typeof this.params.y1TickLine=="number"?-this.axisWidth*this.params.y1TickLine:yi).tickPadding(this.params.y1TickPadding);const s=this.y1AxisSelection.transition().duration(100).call(this.y1Axis);s.selectAll("line").style("fill","none").style("stroke",this.params.axisLineColor).style("stroke-dasharray",this.params.y1TickLineDasharray),s.selectAll("path").style("fill","none").style("stroke","none").style("shape-rendering","crispEdges"),s.selectAll("text").style("font-family","sans-serif").style("font-size","14px").style("color",this.params.axisLabelColor)}renderY2LinearAxis(){let e=[];this.params.y2Visible&&e.push(this.params);const n=this.selection.selectAll("g.y2Axis").data(e),i=n.enter().append("g");this.y2AxisSelection=n.merge(i).classed("y2Axis",!0).attr("transform",o=>"translate("+(this.width-o.padding.right)+","+o.padding.top+")"),n.exit().remove();const a=this.selection.selectAll("text.y2Label").data(e),r=a.enter().append("text").classed("y1Label",!0).style("font-size","14px").style("font-weight","bold");if(this.y2LabelSelection=a.merge(r).attr("fill",o=>o.y2LabelColor).text(o=>o.y2Label).attr("x",o=>this.width-o.padding.right+o.xTickPadding).attr("y",o=>o.padding.top-o.y2TickPadding).attr("transform",`translate(${this.params.y2LabelOffset[0]}, ${this.params.y2LabelOffset[1]})`).attr("text-anchor",this.params.y2LabelAnchor),a.exit().remove(),this.y2LabelSelection.size()==0)return;this.y2Axis=Tf(this.dataset.y2Scale).scale(this.dataset.y2Scale).ticks(this.dataset.y2MaxValue>this.params.y2Ticks?this.params.y2Ticks:this.dataset.y2MaxValue===0?1:Math.ceil(this.dataset.y2MaxValue)).tickFormat(o=>is(o,this.params.y2TickFormat)).tickSize(this.params.y2TickLine&&typeof this.params.y2TickLine=="boolean"?-this.axisWidth:this.params.y2TickLine&&typeof this.params.y2TickLine=="number"?-this.axisWidth*this.params.y2TickLine:yi).tickPadding(this.params.y2TickPadding);const s=this.y2AxisSelection.transition().duration(100).call(this.y2Axis);s.selectAll("line").style("fill","none").style("stroke",this.params.axisLineColor).style("stroke-dasharray",this.params.y2TickLineDasharray),s.selectAll("path").style("fill","none").style("stroke","none").style("shape-rendering","crispEdges"),s.selectAll("text").style("font-family","sans-serif").style("font-size","14px").style("color",this.params.axisLabelColor)}renderZeroLine(e,n){const i=e.selectAll("g.bpchart__zero-line").data(n),a=i.enter().append("g").classed("bpchart__zero-line",!0).attr("transform",s=>"translate("+this.params.padding.left+","+this.params.padding.top+")");i.exit().remove();const r=i.merge(a);a.append("line"),r.select("line").attr("stroke",this.params.axisLabelColor).attr("stroke-width",1).transition().duration(100).attr("x1",s=>s.x1).attr("y1",s=>s.y1).attr("x2",s=>s.x2).attr("y2",s=>s.y2).attr("opacity",s=>s.y1>=0&&s.y1<=this.axisHeight?1:0)}}const ri={lineType:"line",lineCurve:"curveLinear",colors:ht,highlightTarget:"item",highlightItemId:"",enterDuration:800,labelTextMethod:(t,e)=>"",labelPositionMethod:(t,e)=>"top",labelStyleMethod:(t,e)=>"",labelFontSizeMethod:(t,e)=>10,labelColorMethod:(t,e)=>Ee,labelPadding:15},A4={barDirection:"right",positionPadding:5};function Wg(t,e=10){var a;const n=document.createElement("canvas").getContext("2d");return(((a=n==null?void 0:n.measureText(t))==null?void 0:a.width)??0)*e/10}const D4=(t,e)=>{const n=t.map(s=>{const o=Wg(s.text,s.fontSize)+2,l=s.fontSize;let c=0,u=0,f="middle",h="central",d=0,g=0,p=0,m=0;return s.position==="left"?(c=s.barX0-e.positionPadding,u=(s.barY0+s.barY1)/2,f="end",h="central",d=c-o,g=c,p=u-l/2,m=u+l/2):s.position==="right"?(c=s.barX1+e.positionPadding,u=(s.barY0+s.barY1)/2,f="start",h="central",d=c,g=c+o,p=u-l/2,m=u+l/2):s.position==="top"?(c=(s.barX0+s.barX1)/2,u=s.barY0-e.positionPadding,f="middle",h="auto",d=c-o/2,g=c+o/2,p=u-l,m=u):s.position==="bottom"?(c=(s.barX0+s.barX1)/2,u=s.barY1+e.positionPadding,f="middle",h="hanging",d=c-o/2,g=c+o/2,p=u,m=u+l):s.position==="center"&&(c=(s.barX0+s.barX1)/2,u=(s.barY0+s.barY1)/2,f="middle",h="central",d=c-o/2,g=c+o/2,p=u,m=u+l),{...s,width:o,height:l,boundaryX0:d,boundaryX1:g,boundaryY0:p,boundaryY1:m,positionX:c,positionY:u,textAnchor:f,dominantBaseline:h,renderX:0,renderY:0,offsetX:0,offsetY:0}}),i=Object.assign([],n).sort((s,o)=>e.barDirection==="left"?o.positionX-s.positionX:e.barDirection==="right"?s.positionX-o.positionX:e.barDirection==="up"?o.positionY-s.positionY:e.barDirection==="down"?s.positionY-o.positionY:s.positionX-o.positionX),a=(s,o)=>o.filter(l=>(l.boundaryX0>=s.boundaryX0&&l.boundaryX0<=s.boundaryX1||l.boundaryX1>=s.boundaryX0&&l.boundaryX1<=s.boundaryX1)&&(l.boundaryY0>=s.boundaryY0&&l.boundaryY0<=s.boundaryY1||l.boundaryY1>=s.boundaryY0&&l.boundaryY1<=s.boundaryY1)),r=[];return i.forEach(s=>{let o=s.positionX,l=s.positionY;const c=a(s,r);let u=0,f=0;c.length&&(e.barDirection==="left"?u=c.reduce((b,v)=>v.boundaryX0<b?v.boundaryX0:b,1/0)-s.boundaryX1:e.barDirection==="right"?u=c.reduce((b,v)=>v.boundaryX1>b?v.boundaryX1:b,-1/0)-s.boundaryX0:e.barDirection==="up"?f=c.reduce((b,v)=>v.boundaryY0<b?v.boundaryY0:b,1/0)-s.boundaryY1:e.barDirection==="down"&&(f=c.reduce((b,v)=>v.boundaryY1>b?v.boundaryY1:b,1/0)-s.boundaryY0));let h=0,d=0;e.barDirection==="left"&&(s.position==="top"||s.position==="bottom"||s.position==="center")&&s.boundaryX1>s.barX1?h=s.barX1-s.boundaryX1:e.barDirection==="right"&&(s.position==="top"||s.position==="bottom"||s.position==="center")&&s.boundaryX0<s.barX0?h=s.barX0-s.boundaryX0:e.barDirection==="up"&&(s.position==="left"||s.position==="right"||s.position==="center")&&s.boundaryY1>s.barY1?d=s.barY1-s.boundaryY1:e.barDirection==="down"&&(s.position==="left"||s.position==="right"||s.position==="center")&&s.boundaryY0<s.barY0&&(d=s.barY0-s.boundaryY0);const g=Math.abs(u)>Math.abs(h)?u:h,p=Math.abs(f)>Math.abs(d)?f:d;r.push({...s,boundaryX0:s.boundaryX0+g,boundaryX1:s.boundaryX1+g,boundaryY0:s.boundaryY0+p,boundaryY1:s.boundaryY1+p,renderX:o,renderY:l,offsetX:g,offsetY:p})}),r};class L4{constructor(e,n){this.data=[],this.params=A4,this.renderData=[],this.selection=e,this.labelGSelection=this.selection.append("g").style("pointer-events","none")}remove(){this.selection.remove()}setParams(e){this.params={...this.params,...e}}setData(e){this.data=e,this.renderData=D4(e,this.params)}render(){const e=this.labelGSelection.selectAll("text").data(this.renderData),n=e.enter().append("text");e.exit().remove(),this.labelSelection=e.merge(n).attr("text-anchor",i=>i.textAnchor).attr("dominant-baseline",i=>i.dominantBaseline).attr("font-size",(i,a)=>i.fontSize).attr("fill",(i,a)=>i.color).attr("style",i=>i.style).text(i=>i.text),n.attr("x",i=>this.params.barDirection==="left"||this.params.barDirection==="right"?0:i.positionX).attr("y",i=>this.params.barDirection==="left"||this.params.barDirection==="right"?i.positionY:0).attr("transform",(i,a)=>this.params.barDirection==="left"||this.params.barDirection==="right"?`translate(0, ${i.offsetY})`:`translate(${i.offsetX}, 0)`),this.labelSelection.transition().duration(200).attr("x",i=>i.positionX).attr("y",i=>i.positionY).attr("transform",(i,a)=>`translate(${i.offsetX}, ${i.offsetY})`)}}const Eo=e4,Ua=({lineData:t,data:e,event:n})=>({groupData:[],itemData:t,datum:void 0,itemLabel:t[0].itemLabel,itemIndex:t[0].itemIndex,clientX:n.clientX,clientY:n.clientY,offsetX:n.offsetX,offsetY:n.offsetY}),C4=t=>{let e=[[]],n=0;for(let i in t){if(t[i].value===void 0||t[i].value===null){e[n].length&&(n++,e[n]=[]);continue}e[n].push(t[i])}return e},T4=(t,e)=>{let n=[];return t.forEach((i,a)=>{i.forEach((r,s)=>{const o=[r.itemIndex,r.xIndex];n.push({id:r.id,data:r,barX0:r.x,barX1:r.x,barY0:r.y,barY1:r.y,position:e.labelPositionMethod(r,o),fontSize:e.labelFontSizeMethod(r,o),color:e.labelColorMethod(r,o),style:e.labelStyleMethod(r,o),text:e.labelTextMethod(r,o)})})}),n};let Vg=class{constructor(e,n){this.params=ri,this.dataset={data:[],itemLabels:[],axisWidth:0,axisHeight:0,zeroY:0},this.graphicGSelection=void 0,this.linePath=sa().x(i=>i.x).y(i=>i.y).curve(Eo[this.params.lineCurve]),this.axisWidth=0,this.clickCallback=function(){},this.mouseoverCallback=function(){},this.mousemoveCallback=function(){},this.mouseoutCallback=function(){},this.selection=e,this.labelBoxSelection=this.selection.append("g"),this.defsSelection=e.append("defs"),this.utilGraphicBarLabel=new L4(this.labelBoxSelection,{})}setParams(e){e.lineCurve&&e.lineCurve!=this.params.lineCurve&&(this.linePath=sa().x(n=>n.x).y(n=>n.y).curve(Eo[e.lineCurve])),this.params={...this.params,...e},this.colorScale=ge(this.dataset.itemLabels,this.params.colors),this.initHighlight(),this.params.lineType=="line"?this.renderGraphicItem=this.renderLine:this.params.lineType=="area"?this.renderGraphicItem=this.renderArea:this.params.lineType==="gradientArea"&&(this.renderGraphicItem=this.renderGradientArea),this.utilGraphicBarLabel.setParams({barDirection:"up",positionPadding:this.params.labelPadding})}setDataset(e){this.dataset=e,this.colorScale=ge(this.dataset.itemLabels,this.params.colors)}render(){this.axisWidth=this.dataset.axisWidth;const e=this.selection.selectAll("g.bpchart__graphic").data(this.dataset.data,(i,a)=>i[0]&&i[0].id?i[0].id:this.dataset.itemLabels[a]),n=e.enter().append("g").classed("bpchart__graphic",!0);if(e.exit().remove(),this.graphicGSelection=e.merge(n),this.graphicGSelection.attr("clip-path",(i,a)=>`url(#bpchart__clipPath_${this.dataset.itemLabels[a]})`),n.size()>0){const i=[];n.each((r,s,o)=>{i.push({id:`bpchart__clipPath_${r[s].itemLabel}`,x:0,y:0,width:0,height:this.dataset.axisHeight})}),this.renderClipPath(i);const a=[];e.each((r,s,o)=>{a.push({id:`bpchart__clipPath_${r[s].itemLabel}`,x:0,y:0,width:this.axisWidth,height:this.dataset.axisHeight})}),this.renderClipPath(i),this.selection.transition().duration(this.params.enterDuration).delay(100).tween("tween",(r,s,o)=>l=>{const c=this.axisWidth*l;n.each((u,f,h)=>{this.setClipPathItemWidth(`bpchart__clipPath_${u[f].itemLabel}`,c)})}).on("end",()=>{this.initHighlight()})}this.graphicGSelection.each((i,a,r)=>{const s=C4(i);this.renderGraphicItem({selection:W(r[a]),id:this.dataset.itemLabels&&this.dataset.itemLabels[a],data:s,linePath:this.linePath,colorScale:this.colorScale})}),this.graphicGSelection.on("mouseover",null),this.graphicGSelection.on("mouseout",null),this.graphicGSelection.on("click",(i,a)=>{const r=Ua({lineData:i,data:this.dataset.data,event:w});this.clickCallback(r)}).on("mouseover",(i,a,r)=>{const s=Ua({lineData:i,data:this.dataset.data,event:w});this.params.highlightTarget==="item"&&s&&s.itemLabel&&this.highlight(this.graphicGSelection,s.itemLabel),this.mouseoverCallback(s)}).on("mousemove",(i,a)=>{const r=Ua({lineData:i,data:this.dataset.data,event:w});this.mousemoveCallback(r)}).on("mouseout",(i,a)=>{this.params.highlightTarget==="item"&&this.removeHighlight(this.graphicGSelection);const r=Ua({lineData:i,data:this.dataset.data,event:w});this.initHighlight(),this.mouseoutCallback(r)}),this.utilGraphicBarLabel.setData(T4(this.dataset.data,this.params)),this.utilGraphicBarLabel.render()}on(e,n){return e==="click"?this.clickCallback=n:e==="mouseover"?this.mouseoverCallback=n:e==="mousemove"?this.mousemoveCallback=n:e==="mouseout"&&(this.mouseoutCallback=n),this}remove(){this.selection.remove()}renderClipPath(e){const n=this.defsSelection.selectAll("clipPath").data(e),i=n.enter().append("clipPath"),a=n.merge(i).attr("id",r=>r.id);n.exit().remove(),a.each((r,s,o)=>{const l=W(o[s]).selectAll("rect").data([r]),c=l.enter().append("rect");l.exit().remove(),l.merge(c).attr("x",u=>u.x).attr("y",u=>u.y).attr("width",u=>u.width).attr("height",u=>u.height)})}setClipPathItemWidth(e,n){this.defsSelection.select(`clipPath#${e}`).select("rect").attr("width",n)}renderGraphicItem({selection:e,id:n,data:i,linePath:a,colorScale:r}){}renderLine({selection:e,id:n,data:i,linePath:a,colorScale:r}){const s=e.selectAll("path.bpchart__graphic__line").data(i,(l,c)=>c),o=s.enter().append("path").classed("bpchart__graphic__line",!0).attr("fill","none").attr("stroke-width",2).style("vector-effect","non-scaling-stroke").style("cursor","pointer");s.exit(),s.merge(o).attr("stroke",(l,c)=>n?r(n):ht[c]).attr("d",l=>a(l))}renderArea({selection:e,id:n,data:i,linePath:a,colorScale:r}){const s=Hc().x(c=>c.x).y0(this.dataset.zeroY).y1(c=>c.y).curve(Eo[this.params.lineCurve]),o=e.selectAll("path.bpchart__graphic__area").data(i,(c,u)=>u),l=o.enter().append("path").classed("bpchart__graphic__area",!0).style("opacity",.5).style("pointer-events","none");o.exit(),o.merge(l).attr("transform","translate(0,0)").attr("fill",(c,u)=>this.params.lineType==="gradientArea"?`url(#bpchart__gradient__${n})`:n?r(n):ht[u]).attr("d",c=>s(c))}renderGradientArea({selection:e,id:n,data:i,linePath:a,colorScale:r}){const s=this.defsSelection.selectAll("linearGradient").data(this.dataset.itemLabels,l=>l),o=s.enter().append("linearGradient");s.merge(o).attr("id",(l,c)=>`bpchart__gradient__${this.dataset.itemLabels[Number(c)]}`).attr("x1","0%").attr("x2","0%").attr("y1","0%").attr("y2","100%").attr("spreadMethod","pad").html((l,c)=>`
          <stop offset="0%"   stop-color="${this.params.colors[Number(c)]}" stop-opacity="1"/>
          <stop offset="100%" stop-color="${this.params.colors[Number(c)]}" stop-opacity="0"/>
        `),s.exit().remove(),this.renderLine({selection:e,id:n,data:i,linePath:a,colorScale:r}),this.renderArea({selection:e,id:n,data:i,linePath:a,colorScale:r})}initHighlight(){this.graphicGSelection&&(this.params.highlightItemId?this.highlight(this.graphicGSelection,this.params.highlightItemId):this.removeHighlight(this.graphicGSelection))}highlight(e,n){e&&e.each((i,a,r)=>{i[0].itemLabel===n?W(r[a]).transition().duration(200).style("opacity",1):W(r[a]).transition().duration(200).style("opacity",.3)})}removeHighlight(e){this.params.highlightItemId?this.highlight(e,this.params.highlightItemId):this.params.highlightItemId||e.transition().duration(200).style("opacity",1)}};const Sn={r:4,fill:"#fff",strokeWidth:2,colors:ht,highlightTarget:"item",highlightItemId:"",highlightDatumId:"",enterDuration:20};class qg{constructor(e,n){this.params=Sn,this.dataset={data:[],itemLabels:[]},this.dotSelection=void 0,this.renderData=[],this.clickCallback=function(){},this.mouseoverCallback=function(){},this.mousemoveCallback=function(){},this.mouseoutCallback=function(){},this.selection=e}setParams(e){this.params={...this.params,...e},this.colorScale=ge(this.dataset.itemLabels&&this.dataset.itemLabels.length?this.dataset.itemLabels:[""],this.params.colors)}setDataset(e){this.dataset=e,this.renderData=this.dataset.data.map(n=>({...n,itemLabel:n.itemLabel??""})),this.colorScale=ge(this.dataset.itemLabels&&this.dataset.itemLabels.length?this.dataset.itemLabels:[""],this.params.colors)}render(){this.renderDot({selection:this.selection,data:this.renderData,colorScale:this.colorScale,params:this.params}),this.dotSelection.on("mouseover",null),this.dotSelection.on("mouseout",null),this.dotSelection.on("click",(e,n)=>{this.clickCallback(e)}).on("mouseover",(e,n)=>{this.params.highlightTarget==="item"&&e.itemLabel?this.highlight(this.dotSelection,e.itemLabel,""):this.params.highlightTarget==="datum"&&e.id&&this.highlight(this.dotSelection,"",e.id),this.mouseoverCallback(e)}).on("mousemove",(e,n)=>{this.mousemoveCallback(e)}).on("mouseout",(e,n)=>{this.params.highlightTarget==="item"&&this.removeHighlight(this.dotSelection),this.mouseoutCallback(e)})}on(e,n){return e==="click"?this.clickCallback=n:e==="mouseover"?this.mouseoverCallback=n:e==="mousemove"?this.mousemoveCallback=n:e==="mouseout"&&(this.mouseoutCallback=n),this}remove(){this.selection.remove()}renderDot({selection:e,data:n,colorScale:i,params:a}){const r=e.selectAll("circle.bpchart__circle").data(n,o=>o.id),s=r.enter().append("circle").attr("r",a.r).attr("fill",a.fill).attr("stroke-width",a.strokeWidth).style("cursor","pointer").classed("bpchart__circle",!0).attr("opacity",0);r.exit().remove(),this.dotSelection=r.merge(s),this.dotSelection.attr("stroke",(o,l)=>i(o.itemLabel)),s.attr("cx",o=>o.x).attr("cy",o=>o.y).attr("opacity",0).transition().delay((o,l)=>l*this.params.enterDuration).attr("opacity",1),r.transition().duration(50).attr("cx",o=>o.x).attr("cy",o=>o.y).attr("opacity",1),this.dotSelection.on("end",()=>{this.params.highlightItemId||this.params.highlightDatumId?this.highlight(this.dotSelection,this.params.highlightItemId,this.params.highlightDatumId):this.removeHighlight(this.dotSelection)})}highlight(e,n,i){if(!e)return;let a=[];if(i&&a.push(i),n){const r=this.dataset.data.flat().filter(s=>s.itemLabel===n).map(s=>s.id);a=a.concat(r)}e.each((r,s,o)=>{a.includes(r.id)?W(o[s]).style("opacity",1):W(o[s]).transition().duration(200).style("opacity",.3)})}removeHighlight(e){this.params.highlightItemId||this.params.highlightDatumId?this.highlight(e,this.params.highlightItemId,this.params.highlightDatumId):this.params.highlightItemId||e.style("opacity",1)}}const Zg={barType:"rect",barWidth:0,barPadding:1,barR:!1,colors:ht,highlightTarget:"datum",highlightDatumId:"",enterDuration:800},eu={barType:"rect",barWidth:0,barPadding:1,barGroupPadding:20,barR:!1,colors:ht,highlightTarget:"item",highlightGroupId:"",highlightItemId:"",highlightDatumId:"",enterDuration:800},I4=(t,e)=>{const n=new Map;return e.forEach((i,a)=>{n.set(i,t[a])}),n},R4=(t,e)=>{const n=new Map;return t.forEach((i,a)=>{i.forEach((r,s)=>{const o=n.get(e[s])??[];o.push(r),n.set(e[s],o)})}),n},P4=(t,e)=>e.map(n=>t.get(n)??[]),E4=(t,e,n)=>{const i=t/2,a=t*e.length+n.barPadding*e.length;return ai().domain(e).range([-a/2+i,a/2-i])},Ba=({datum:t,XDataMap:e,ItemDataMap:n,event:i})=>({groupData:e.get(t.xLabel),itemData:n.get(t.itemLabel),datum:t,xLabel:t.xLabel,xIndex:t.xIndex,itemLabel:t.itemLabel,itemIndex:t.itemIndex,clientX:i.clientX,clientY:i.clientY,offsetX:i.offsetX,offsetY:i.offsetY}),$4=({axisWidth:t,groupAmount:e,barAmountOfGroup:n,barPadding:i=0,barGroupPadding:a=0})=>{const r=(t/e-a)/n-i;return r>1?r:1},N4=(t,e=400)=>e/t;class Y4{constructor(e,n){this.params=eu,this.dataset={data:[],itemLabels:[],xLabels:[],axisWidth:0,zeroY:0},this.graphicData=[],this.graphicGroupSelection=void 0,this.graphicBarSelection=void 0,this.itemLabels=[],this.ItemDataMap=new Map,this.XDataMap=new Map,this.axisWidth=0,this.barWidth=0,this.delayDuration=0,this.clickCallback=function(){},this.mouseoverCallback=function(){},this.mousemoveCallback=function(){},this.mouseoutCallback=function(){},this.selection=e,this.defsSelection=e.append("defs")}setParams(e){this.params={...this.params,...e},this.itemLabels=[],this.params.barType=="rect"?this.renderGraphic=this.renderRect:this.params.barType=="triangle"&&(this.renderGraphic=this.renderTriangle)}setDataset(e){this.dataset=e,this.itemLabels=this.dataset.itemLabels,this.ItemDataMap=I4(this.dataset.data,this.dataset.itemLabels),this.XDataMap=R4(this.dataset.data,this.dataset.xLabels),this.delayDuration=N4(this.dataset.xLabels.length)}render(){if(!this.itemLabels.length)return;this.colorScale=ge(this.itemLabels,this.params.colors),this.setLinearGradient({defsSelection:this.defsSelection,itemLabels:this.itemLabels,colorScale:this.colorScale}),this.axisWidth=this.dataset.axisWidth,this.barWidth=this.params.barWidth?this.params.barWidth:$4({axisWidth:this.axisWidth,groupAmount:this.dataset.xLabels.length,barAmountOfGroup:this.dataset.itemLabels.length,barPadding:this.params.barPadding??0,barGroupPadding:this.params.barGroupPadding??0});const e=E4(this.barWidth,this.dataset.itemLabels,this.params);this.graphicData=P4(this.XDataMap,this.dataset.xLabels),this.renderGraphic({selection:this.selection,graphicData:this.graphicData,xLabels:this.dataset.xLabels,colorScale:this.colorScale,itemScale:e,params:this.params}),this.graphicBarSelection.on("click",(n,i)=>{const a=Ba({datum:n,XDataMap:this.XDataMap,ItemDataMap:this.ItemDataMap,event:w});this.clickCallback(a)}).on("mouseover",(n,i,a)=>{const r=Ba({datum:n,XDataMap:this.XDataMap,ItemDataMap:this.ItemDataMap,event:w});this.params.highlightTarget!=null&&this.params.highlightTarget!="none"&&(this.params.highlightTarget==="group"?this.highlight(this.graphicBarSelection,r.xLabel,void 0,void 0):this.params.highlightTarget==="item"?this.highlight(this.graphicBarSelection,void 0,r.itemLabel,void 0):this.params.highlightTarget==="datum"&&this.highlight(this.graphicBarSelection,void 0,void 0,r.datum&&r.datum.id)),this.mouseoverCallback(r)}).on("mousemove",(n,i)=>{const a=Ba({datum:n,XDataMap:this.XDataMap,ItemDataMap:this.ItemDataMap,event:w});this.mousemoveCallback(a)}).on("mouseout",(n,i)=>{this.params.highlightTarget!=null&&this.params.highlightTarget!="none"&&this.removeHighlight(this.graphicBarSelection);const a=Ba({datum:n,XDataMap:this.XDataMap,ItemDataMap:this.ItemDataMap,event:w});this.initHighlight(),this.mouseoutCallback(a)})}on(e,n){return e==="click"?this.clickCallback=n:e==="mouseover"?this.mouseoverCallback=n:e==="mousemove"?this.mousemoveCallback=n:e==="mouseout"&&(this.mouseoutCallback=n),this}remove(){this.selection.remove()}setLinearGradient({defsSelection:e,itemLabels:n,colorScale:i}){const a=e.selectAll("linearGradient").data(n,s=>s),r=a.enter().append("linearGradient").attr("x1","0%").attr("x2","0%").attr("y1","0%").attr("y2","100%").attr("spreadMethod","pad");a.merge(r).attr("id",(s,o)=>`bpchart__lineargradient__${s}`).html((s,o)=>`
          <stop offset="0%"   stop-color="${i(s)}" stop-opacity="1"/>
          <stop offset="100%" stop-color="${i(s)}" stop-opacity="0"/>
        `),a.exit().remove()}renderGraphic({selection:e,graphicData:n,xLabels:i,colorScale:a,itemScale:r,params:s}){}renderRect({selection:e,graphicData:n,xLabels:i,colorScale:a,itemScale:r,params:s}){if(this.barWidth<=0)return;const o=e.selectAll("g.bpchart__bar-g").data(n,(u,f)=>u[0]&&u[0].id?u[0].id:i[f]),l=o.enter().append("g").classed("bpchart__bar-g",!0).attr("cursor","pointer");o.exit().remove(),this.graphicGroupSelection=o.merge(l),l.attr("transform",(u,f)=>`translate(${u[0]?u[0].x:0}, 0)`),o.transition().duration(200).attr("transform",(u,f)=>`translate(${u[0]?u[0].x:0}, 0)`);const c=this.barWidth/2;this.graphicGroupSelection.each((u,f,h)=>{const d=W(h[f]).selectAll("g").data(u,p=>p.id),g=d.enter().append("g").classed("bpchart__bar",!0);g.append("rect").attr("rx",s.barR==!0?c:s.barR==!1?0:typeof s.barR=="number"?s.barR:0).attr("transform",`translate(${-c}, 0)`).attr("x",p=>r(p.itemLabel)).attr("y",p=>this.dataset.zeroY).attr("width",this.barWidth).attr("height",p=>0),d.merge(g).select("rect").attr("fill",p=>a(p.itemLabel)).transition().duration(this.params.enterDuration).ease(Wn).delay((p,m)=>p.xIndex*this.delayDuration).attr("transform",`translate(${-c}, 0)`).attr("x",p=>r(p.itemLabel)).attr("y",p=>p.y<this.dataset.zeroY?p.y:this.dataset.zeroY).attr("width",this.barWidth).attr("height",p=>Math.abs(this.dataset.zeroY-p.y)).on("end",()=>this.initHighlight()),d.exit().remove()}),this.graphicBarSelection=this.graphicGroupSelection.selectAll("g.bpchart__bar")}renderTriangle({selection:e,graphicData:n,xLabels:i,colorScale:a,itemScale:r,params:s}){if(this.barWidth<=0)return;const o=e.selectAll("g.bpchart__bar-g").data(n,(u,f)=>u[0]&&u[0].id?u[0].id:i[f]),l=o.enter().append("g").classed("bpchart__bar-g",!0).attr("cursor","pointer");o.exit().remove(),this.graphicGroupSelection=o.merge(l).attr("transform",(u,f)=>`translate(${u[0]?u[0].x:0}, 0)`);const c=this.barWidth/2;this.graphicGroupSelection.each((u,f,h)=>{const d=W(h[f]).selectAll("g").data(u,p=>p.id),g=d.enter().append("g").classed("bpchart__bar",!0);g.append("path").attr("transform",`translate(${-c}, 0)`).attr("height",p=>0).attr("d",p=>{const m=r(p.itemLabel),b=0,v=b;return`M${m-this.params.barWidth/2},${b} L${m},${v} ${m+this.params.barWidth/2},${b}`}),d.merge(g).select("path").style("fill",p=>`url(#bpchart__lineargradient__${p.itemLabel})`).attr("stroke",p=>a(p.itemLabel)).attr("transform",`translate(${-c}, 0)`).transition().duration(this.params.enterDuration).ease(Wn).delay((p,m)=>p.xIndex*this.delayDuration).attr("transform",`translate(${-c}, 0)`).attr("height",p=>Math.abs(this.dataset.zeroY-p.y)).attr("d",p=>{const m=r(p.itemLabel),b=this.dataset.zeroY,v=p.y;return`M${m},${b} L${m+this.params.barWidth/2},${v} ${m+this.params.barWidth},${b}`}).on("end",()=>this.initHighlight()),d.exit().remove()}),this.graphicBarSelection=this.graphicGroupSelection.selectAll("g.bpchart__bar")}initHighlight(){this.graphicBarSelection&&(this.params.highlightDatumId||this.params.highlightItemId||this.params.highlightGroupId)&&this.highlight(this.graphicBarSelection,this.params.highlightGroupId,this.params.highlightItemId,this.params.highlightDatumId)}highlight(e,n,i,a){if(!e)return;let r=[];if(a&&r.push(a),i){const s=this.dataset.data.flat().filter(o=>o.itemLabel===i).map(o=>o.id);r=r.concat(s)}if(n){const s=this.dataset.data.flat().filter(o=>o.xLabel===n).map(o=>o.id);r=r.concat(s)}e.each((s,o,l)=>{r.includes(s.id)?W(l[o]).transition().duration(200).style("opacity",1):W(l[o]).transition().duration(200).style("opacity",.3)})}removeHighlight(e){this.params.highlightDatumId||this.params.highlightItemId||this.params.highlightGroupId?this.highlight(e,this.params.highlightGroupId,this.params.highlightItemId,this.params.highlightDatumId):e.transition().duration(200).style("opacity",1)}}const Kg={barWidth:0,barGroupPadding:1,barR:!1,colors:ht,highlightTarget:"item",highlightGroupId:"",highlightItemId:"",highlightDatumId:"",enterDuration:800},z4=ht.map(t=>t).reverse(),ya={axisColumnTwoScales:Fg,tooltipAside:{templateHtml:t=>t.y1.groupData&&t.y2.groupData?`
          <div>
            <div>${t.xLabel}</div>
            <div>${t.y1.groupData.map(e=>e.value).join(",")}</div>          
            <div>${t.y2.groupData.map(e=>e.value).join(",")}</div>          
          </div>
        `:""},y1Colors:ht,y2Colors:z4,padding:Ot,highlightTarget:"datum",highlightDatumId:"",highlightItemId:"",highlightGroupId:"",showAuxLine:!1,y1DomainMinValue:0,y1DomainMaxValue:void 0,y1DomainMinRange:void 0,y1DomainMaxRange:.95,y2DomainMinValue:0,y2DomainMaxValue:void 0,y2DomainMinRange:void 0,y2DomainMaxRange:.95,showDot:"hover"};({...ya});const X4={...ya,graphicColumnLine:ri,graphicDot:Sn,graphicColumnBarGroup:eu};({...ya});({...ya});const bf=(t,e)=>({...t,padding:e}),H4=({dataset:t,activedItemId:e,Y1XDataMap:n,Y2XDataMap:i,Y1ItemDataMap:a,Y2ItemDataMap:r,padding:s,xRangeScale:o,event:l})=>{if(!l||!o)return{dataset:t,y1:{groupData:[],itemData:[],datum:void 0,itemLabel:"",itemIndex:-1},y2:{groupData:[],itemData:[],datum:void 0,itemLabel:"",itemIndex:-1},xLabel:"",xIndex:-1,rangeIndex:-1,clientX:-1,clientY:-1,offsetX:-1,offsetY:-1};const c=Number(l.offsetX)-s.left,u=Number(o(c)??0),f=t.xLabels[u],h=n.get(f)??[],d=i.get(f)??[];let g=[],p,m=[],b;return e&&(g=a.get(e)??[],p=h.find(v=>v.itemLabel===e),m=r.get(e)??[],b=d.find(v=>v.itemLabel===e)),{dataset:t,y1:{groupData:h,itemData:g,datum:p,itemLabel:p?p.itemLabel:"",itemIndex:p?p.itemIndex:-1},y2:{groupData:d,itemData:m,datum:b,itemLabel:b?b.itemLabel:"",itemIndex:b?b.itemIndex:-1},xLabel:f,xIndex:u,rangeIndex:u,clientX:w.clientX,clientY:w.clientY,offsetX:w.offsetX,offsetY:w.offsetY}};let G4=class{constructor(e,n){this.width=De,this.height=Le,this.dataset={y1Data:[],y2Data:[],xLabels:[],y1ItemLabels:[],y2ItemLabels:[]},this.params=ya,this.graphicY1Selection=void 0,this.graphicY2Selection=void 0,this.axisWidth=0,this.axisHeight=0,this.clickCallback=function(){},this.mouseoverCallback=function(){},this.mousemoveCallback=function(){},this.mouseoutCallback=function(){},this.Y1XDataMap=new Map,this.Y2XDataMap=new Map,this.Y1ItemDataMap=new Map,this.Y2ItemDataMap=new Map,this.y1RenderData=[],this.y2RenderData=[],this.axisParams=this.params.axisColumnTwoScales,this.xAxisSelection=void 0,this.yAxisSelection=void 0,this.xLabelSelection=void 0,this.yLabelSelection=void 0,this.auxLineSelection=void 0,this.y1MinValue=0,this.y1MaxValue=0,this.y2MinValue=0,this.y2MaxValue=0,this.makeActivedCallbackData=(i,a)=>H4({dataset:this.dataset,activedItemId:i,Y1XDataMap:this.Y1XDataMap,Y2XDataMap:this.Y2XDataMap,Y1ItemDataMap:this.Y1ItemDataMap,Y2ItemDataMap:this.Y2ItemDataMap,padding:this.params.padding,xRangeScale:this.xRangeScale,event:a}),this.selection=e,this.axisSelection=e.append("g"),this.axisColumnTwoScales=new S4(this.axisSelection,{}),this.rangeSelection=this.selection.append("rect").attr("opacity",0),this.setRangeEvent(this.rangeSelection),this.graphicY1Selection=e.append("g"),this.graphicY2Selection=e.append("g"),this.coverSelection=this.selection.append("g").classed("bpchart__cover",!0),this.utilAuxLine=new tu(this.coverSelection),this.setCoverEvent(this.selection)}setParams(e){this.params={...this.params,...e,axisColumnTwoScales:{...this.params.axisColumnTwoScales,...e.axisColumnTwoScales}},this.params.tooltipAside&&!this.tooltip&&(this.tooltip=new jc(this.selection,{templateHtml:this.params.tooltipAside.templateHtml,type:this.params.tooltipAside.type??"white",yLine:this.params.tooltipAside.yLine??!1})),this.axisParams=bf(this.params.axisColumnTwoScales,this.params.padding),this.axisWidth=Zt(this.width,this.params.padding),this.axisHeight=Kt(this.height,this.params.padding),this.axisColumnTwoScales.setParams(this.axisParams),this.graphicY1Selection.attr("transform",`translate(${this.params.padding.left}, ${this.params.padding.top})`),this.graphicY2Selection.attr("transform",`translate(${this.params.padding.left}, ${this.params.padding.top})`),this.coverSelection.attr("transform",`translate(${this.params.padding.left}, ${this.params.padding.top})`),this.initGraphic(this.params)}select(){return this.selection}remove(){this.selection.remove()}resize({width:e=this.width,height:n=this.height}){this.width=e,this.height=n,this.axisParams=bf(this.params.axisColumnTwoScales,this.params.padding),this.axisWidth=Zt(this.width,this.params.padding),this.axisHeight=Kt(this.height,this.params.padding),this.axisColumnTwoScales.setParams(this.axisParams),this.axisColumnTwoScales.resize({width:e,height:n}),this.rangeSelection.attr("x",this.params.padding.left).attr("y",this.params.padding.top).attr("width",this.axisWidth).attr("height",this.axisHeight)}setDataset(e){this.dataset=e;const[n,i]=this.getY1MinAndMaxValue(this.dataset.y1Data),[a,r]=this.getY2MinAndMaxValue(this.dataset.y2Data);this.y1MinValue=n,this.y1MaxValue=i,this.y2MinValue=a,this.y2MaxValue=r}render(){this.xScale=Qc({axisLabels:this.dataset.xLabels,axisWidth:this.axisWidth}),this.y1Scale=as({maxValue:this.y1MaxValue,minValue:this.y1MinValue,axisWidth:this.axisHeight,domainMinValue:this.params.y1DomainMinValue,domainMaxValue:this.params.y1DomainMaxValue,domainMinRange:this.params.y1DomainMinRange,domainMaxRange:this.params.y1DomainMaxRange,reverse:!0}),this.y2Scale=as({maxValue:this.y2MaxValue,minValue:this.y2MinValue,axisWidth:this.axisHeight,domainMinValue:this.params.y2DomainMinValue,domainMaxValue:this.params.y2DomainMaxValue,domainMinRange:this.params.y2DomainMinRange,domainMaxRange:this.params.y2DomainMaxRange,reverse:!0}),this.xRangeScale=Jc({axisLabels:this.dataset.xLabels,axisWidth:this.axisWidth}),this.y1RenderData=this.makeY1GraphicRenderData({dataset:this.dataset,xScale:this.xScale,y1Scale:this.y1Scale}),this.y2RenderData=this.makeY2GraphicRenderData({dataset:this.dataset,xScale:this.xScale,y2Scale:this.y2Scale}),this.Y1XDataMap=this.makeY1XDataMap({y1RenderData:this.y1RenderData,xLabels:this.dataset.xLabels}),this.Y2XDataMap=this.makeY2XDataMap({y2RenderData:this.y2RenderData,xLabels:this.dataset.xLabels}),this.Y1ItemDataMap=this.makeY1ItemDataMap({y1RenderData:this.y1RenderData,y1ItemLabels:this.dataset.y1ItemLabels??[]}),this.Y1ItemDataMap=this.makeY2ItemDataMap({y2RenderData:this.y2RenderData,y2ItemLabels:this.dataset.y2ItemLabels??[]}),this.setGraphicData({y1RenderData:this.y1RenderData,y2RenderData:this.y2RenderData,y1ItemLabels:this.dataset.y1ItemLabels??[],y2ItemLabels:this.dataset.y2ItemLabels??[],xLabels:this.dataset.xLabels,xScale:this.xScale,y1Scale:this.y1Scale,y2Scale:this.y2Scale}),this.axisColumnTwoScales.setDataset({xScale:this.xScale,y1Scale:this.y1Scale,y2Scale:this.y2Scale,y1MaxValue:this.y1MaxValue,y2MaxValue:this.y2MaxValue}),this.axisColumnTwoScales.render(),this.renderGraphic()}on(e,n){return e==="click"?this.clickCallback=n:e==="mouseover"?this.mouseoverCallback=n:e==="mousemove"?this.mousemoveCallback=n:e==="mouseout"&&(this.mouseoutCallback=n),this}setRangeEvent(e){e.on("click",(n,i)=>{const a=this.makeActivedCallbackData("",w);this.clickCallback(a)}).on("mouseover",(n,i)=>{const a=this.makeActivedCallbackData("",w);this.mouseoverCallback(a)}).on("mousemove",n=>{const i=this.makeActivedCallbackData("",w);this.mousemoveCallback(i)}).on("mouseout",n=>{if(w.offsetX>0&&w.offsetX<this.width&&w.offsetY>0&&w.offsetY<this.height)return;const i=this.makeActivedCallbackData("",w);this.mouseoutCallback(i)})}showTooltip(e,n){n&&e&&this.xScale?this.tooltip.setDatum({data:e,x:e.clientX-e.offsetX+this.params.padding.left+this.xScale(e.xLabel),y:w.clientY}):this.tooltip.remove()}setCoverEvent(e){e.on("mouseover",(n,i)=>{const a=this.makeActivedCallbackData("",w);this.coverHighlight(a),this.showTooltip(a,w)}).on("mousemove",n=>{const i=this.makeActivedCallbackData("",w);this.coverHighlight(i),this.showTooltip(i,w)}).on("mouseout",n=>{w.offsetX>0&&w.offsetX<this.width&&w.offsetY>0&&w.offsetY<this.height||(this.coverHighlight(void 0),this.tooltip.remove())})}coverHighlight(e){this.params.showAuxLine&&this.renderAuxLine({coverSelection:this.coverSelection,xLabels:this.dataset.xLabels,activeRangeIndex:e?e.rangeIndex:-1,xScale:this.xScale,padding:this.params.padding,axisHeight:this.axisHeight}),this.renderGraphicCoverHighlight({eventData:e,xScale:this.xScale,y1Scale:this.y1Scale,y2Scale:this.y2Scale,padding:this.params.padding})}renderAuxLine({coverSelection:e,xLabels:n,activeRangeIndex:i,xScale:a,padding:r,axisHeight:s}){if(!a)return;const o=n.map((l,c)=>{const u=a(l)||0;return{x1:u,x2:u,y1:0,y2:s,active:i==c}});this.utilAuxLine.setData(o),this.utilAuxLine.render()}};const In="__DEFAULT__";class O4 extends G4{constructor(e,n){super(e,n),this.params=X4,this.bar=new Y4(this.graphicY1Selection,{}),this.line=new Vg(this.graphicY2Selection,{}),this.dot=new qg(this.coverSelection,{})}initGraphic(e){this.params={...this.params,...e},this.params.graphicColumnBarGroup={...this.params.graphicColumnBarGroup,colors:this.params.y1Colors,highlightTarget:this.params.highlightTarget,highlightDatumId:this.params.highlightDatumId,highlightItemId:this.params.highlightItemId,highlightGroupId:this.params.highlightGroupId},this.params.graphicColumnLine={...this.params.graphicColumnLine,colors:this.params.y2Colors,highlightItemId:this.params.highlightItemId,highlightTarget:this.params.highlightTarget==="item"?"item":"none"},this.params.graphicDot={...this.params.graphicDot,colors:this.params.y2Colors,highlightItemId:this.params.highlightItemId,highlightTarget:this.params.highlightTarget==="item"?"item":"none"},this.bar.setParams(this.params.graphicColumnBarGroup),this.bar.on("click",n=>{const i=this.makeActivedCallbackData(n.itemLabel??"",w);this.clickCallback(i)}).on("mouseover",n=>{const i=this.makeActivedCallbackData(n.itemLabel??"",w);this.showTooltip(i,w),this.mouseoverCallback(i)}).on("mousemove",n=>{const i=this.makeActivedCallbackData(n.itemLabel??"",w);this.showTooltip(i,w),this.mousemoveCallback(i)}).on("mouseout",n=>{const i=this.makeActivedCallbackData("",w);this.showTooltip(void 0,w),this.mouseoutCallback(i)}),this.line.setParams(this.params.graphicColumnLine),this.line.on("click",n=>{const i=this.makeActivedCallbackData(n.itemLabel??"",w);this.clickCallback(i)}).on("mouseover",n=>{const i=this.makeActivedCallbackData(n.itemLabel??"",w);this.showTooltip(i,w),this.mouseoverCallback(i),this.params.highlightTarget==="item"&&(this.dot.setParams({highlightItemId:n.itemLabel}),this.dot.render())}).on("mousemove",n=>{const i=this.makeActivedCallbackData(n.itemLabel??"",w);this.showTooltip(i,w),this.mousemoveCallback(i)}).on("mouseout",n=>{const i=this.makeActivedCallbackData("",w);this.showTooltip(void 0,w),this.mouseoutCallback(i),this.params.highlightTarget==="item"&&(this.dot.setParams({highlightItemId:this.params.highlightItemId}),this.dot.render())}),this.dot.setParams(this.params.graphicDot),this.dot.on("click",n=>{const i=this.makeActivedCallbackData(n.itemLabel??"",w);this.clickCallback(i)}).on("mouseover",n=>{const i=this.makeActivedCallbackData(n.itemLabel??"",w);this.showTooltip(i,w),this.mouseoverCallback(i),this.params.highlightTarget==="item"&&(this.line.setParams({highlightItemId:n.itemLabel}),this.line.render())}).on("mousemove",n=>{const i=this.makeActivedCallbackData(n.itemLabel??"",w);this.showTooltip(i,w),this.mousemoveCallback(i)}).on("mouseout",n=>{const i=this.makeActivedCallbackData("",w);this.showTooltip(void 0,w),this.mouseoutCallback(i),this.params.highlightTarget==="item"&&(this.line.setParams({highlightItemId:this.params.highlightItemId}),this.line.render())})}makeY1GraphicRenderData({dataset:e,xScale:n,y1Scale:i}){return e.y1Data.map((a,r)=>{const s=e.y1ItemLabels&&e.y1ItemLabels[r]?e.y1ItemLabels[r]:In;return a.map((o,l)=>{const c=e.xLabels[l];return{...o,id:`${s}_${c}`,itemIndex:r,itemLabel:s,xIndex:l,xLabel:c,x:n(c)||0,y:i(o.value)||0}})})}makeY2GraphicRenderData({dataset:e,xScale:n,y2Scale:i}){return e.y2Data.map((a,r)=>{const s=e.y2ItemLabels&&e.y2ItemLabels[r]?e.y2ItemLabels[r]:In;return a.map((o,l)=>{const c=e.xLabels[l];return{...o,id:`${s}_${c}`,itemIndex:r,itemLabel:s,xIndex:l,xLabel:c,x:n(c)||0,y:i(o.value)||0}})})}getY1MinAndMaxValue(e){return e.length?e.flat().reduce((n,i)=>[i.value<n[0]?i.value:n[0],i.value>n[1]?i.value:n[1]],[1/0,0]):[0,0]}getY2MinAndMaxValue(e){return e.length?e.flat().reduce((n,i)=>[i.value<n[0]?i.value:n[0],i.value>n[1]?i.value:n[1]],[1/0,0]):[0,0]}makeY1XDataMap({y1RenderData:e,xLabels:n}){let i=new Map;return e.length&&e.forEach((a,r)=>{i.set(n[r]??"",a)}),i}makeY2XDataMap({y2RenderData:e,xLabels:n}){let i=new Map;return e.length&&e.forEach((a,r)=>{a.forEach((s,o)=>{const l=i.get(n[o])??[];l.push(s),i.set(n[o]??"",l)})}),i}makeY1ItemDataMap({y1RenderData:e,y1ItemLabels:n}){let i=new Map;return e.length&&e.forEach((a,r)=>{a.forEach(s=>{const o=i.get(s.itemLabel??"")??[];o.push(s),i.set(s.itemLabel??"",o)})}),i}makeY2ItemDataMap({y2RenderData:e,y2ItemLabels:n}){let i=new Map;return e.length&&e.forEach((a,r)=>{i.set(n[r]??"",a)}),i}setGraphicData({y1RenderData:e,y2RenderData:n,y1ItemLabels:i,y2ItemLabels:a,xLabels:r,xScale:s,y1Scale:o,y2Scale:l}){if(this.bar.setDataset({data:e,itemLabels:i&&i.length?i:[In],xLabels:r,axisWidth:this.axisWidth,zeroY:o(0)}),this.line.setDataset({data:n,itemLabels:a&&a.length?a:[In],axisWidth:this.axisWidth,axisHeight:this.axisHeight,zeroY:l(0)}),this.params.showDot==="always"){const c=n.flat();this.dot.setDataset({data:c,itemLabels:a??[In]})}}renderGraphic(){this.bar.render(),this.line.render(),this.params.showDot==="always"&&this.dot.render()}renderGraphicCoverHighlight({eventData:e,xScale:n,y1Scale:i,y2Scale:a,padding:r}){if(this.params.showDot==="hover"&&this.params.highlightTarget!=="none"){const s=e?e.y2.groupData.map(o=>({...o,id:o.itemLabel,x:n(o.xLabel),y:a(o.value)})):[];this.dot.setDataset({data:s,itemLabels:this.dataset.y2ItemLabels??[In]}),this.dot.render()}}}const $o={__name:"ChartColumnTwoScalesBarGroupAndLine",setup(t){const e={y1Data:[[{value:70769},{value:14103},{value:41075},{value:55309}],[{value:685830},{value:102725},{value:339702},{value:610896}],[{value:875854},{value:144274},{value:786471},{value:1097621}]],y2Data:[[{value:76.3098},{value:75.7679},{value:77.4424},{value:76.5973}]],xLabels:["台北市","新竹市","台南市","高雄市"],y1ItemLabels:["宋楚瑜、余湘","韓國瑜、張善政","蔡英文、賴清德"],y2ItemLabels:["得票率"]},n={y1Colors:["#FF6310","#000095","#1B9431"]};return(i,a)=>(an(),rn("div",null,[Mt(Gs,{module:rs(O4),dataset:e,params:n},null,8,["module"])]))}},Qg={xLabel:"x",yLabel:"y",xLabelAnchor:"start",yLabelAnchor:"end",xLabelOffset:[0,0],yLabelOffset:[0,0],xTickPadding:20,yTickPadding:20,xTickLine:!0,yTickLine:!1,xTickLineDasharray:"none",yTickLineDasharray:"none",xTickFormat:",.0f",xTicks:4,axisLineColor:Zc,axisLabelColor:Ee,rotateYLabel:!1,padding:Ot,xVisible:!0,yVisible:!0,yLabelIconMethod:void 0},Fa=6;class U4{constructor(e,n){this.width=De,this.height=Le,this.dataset={xScale:Xe(),yScale:ai(),maxValue:0},this.params=Qg,this.xAxisSelection=void 0,this.yAxisSelection=void 0,this.xLabelSelection=void 0,this.yLabelSelection=void 0,this.axisWidth=Zt(this.width,Ot),this.axisHeight=Kt(this.height,Ot),this.selection=e}setParams(e){this.params={...this.params,...e}}setDataset(e){this.dataset=e}resize({width:e=this.width,height:n=this.height}){this.width=e,this.height=n,this.axisWidth=Zt(this.width,this.params.padding),this.axisHeight=Kt(this.height,this.params.padding)}render(){this.renderYPointAxis(),this.renderXLinearAxis();const e=this.dataset.xScale(0);this.renderZeroLine(this.selection,[{x1:e,y1:0,x2:e,y2:this.axisHeight}])}remove(){this.selection.remove()}renderYPointAxis(){let e=[];this.params.yVisible&&e.push(this.params);const n=this.selection.selectAll("g.yAxis").data(e),i=n.enter().append("g");this.yAxisSelection=n.merge(i).classed("yAxis",!0).attr("transform",l=>"translate("+l.padding.left+","+l.padding.top+")"),n.exit().remove();const a=this.selection.selectAll("text.yLabel").data(e),r=a.enter().append("text").classed("yLabel",!0).style("font-size","14px").style("font-weight","bold");if(this.yLabelSelection=a.merge(r).attr("x",l=>l.padding.left-l.xTickPadding-Fa).attr("y",l=>l.padding.top-l.yTickPadding).attr("text-anchor",this.params.yLabelAnchor).attr("transform",`translate(${this.params.yLabelOffset[0]}, ${this.params.yLabelOffset[1]})`).style("fill",this.params.axisLabelColor).text(l=>l.yLabel),a.exit().remove(),this.yLabelSelection.size()==0)return;this.yAxis=ls(this.dataset.yScale).scale(this.dataset.yScale).tickSize(this.params.yTickLine&&typeof this.params.yTickLine=="boolean"?-this.axisWidth:this.params.yTickLine&&typeof this.params.yTickLine=="number"?-this.axisWidth*this.params.yTickLine:Fa).tickSizeOuter(0).tickFormat(l=>l).tickPadding(this.params.yTickPadding);const s=this.yAxisSelection.transition().duration(50).call(this.yAxis).attr("text-anchor",()=>(this.params.rotateYLabel!==!1,"end"));s.selectAll("line").style("fill","none").style("stroke",this.params.axisLineColor).style("stroke-dasharray",this.params.yTickLineDasharray),s.selectAll("path").style("fill","none").style("stroke",this.params.axisLineColor).style("shape-rendering","crispEdges");const o=s.selectAll("text").style("font-family","sans-serif").style("font-size","14px").style("color",this.params.axisLabelColor).attr("transform-origin",`-5 ${this.params.xTickPadding+Fa}`);this.params.rotateYLabel===!0?o.attr("transform","translate(0,0) rotate(-45)"):typeof this.params.rotateYLabel=="number"&&o.attr("transform",`translate(0,0) rotate(${this.params.rotateYLabel})`),this.appendLabelIcon(this.yAxisSelection.selectAll("g.tick"),this.params.yLabelIconMethod)}appendLabelIcon(e,n){e.each((i,a,r)=>{const s=W(r[a]),o=s.select("text"),l=o.data(),c=Math.abs(Number(o.attr("x"))),u=Wg(l,14),f=-c-u-21,h=-7,d=s.selectAll("g.bpchart__icon").data([l]),g=d.enter().append("g").classed("bpchart__icon",!0);d.exit().remove(),g.size()&&n&&(console.log("enter.size()",g.size()),u4(g,n(l,a))),d.merge(g).attr("transform",`translate(${f}, ${h})`)})}renderXLinearAxis(){let e=[];this.params.xVisible&&e.push(this.params);const n=this.selection.selectAll("g.xAxis").data(e),i=n.enter().append("g");this.xAxisSelection=n.merge(i).classed("xAxis",!0).attr("transform",o=>"translate("+o.padding.left+","+(o.padding.top+this.axisHeight)+")"),n.exit().remove();const a=this.selection.selectAll("text.xLabel").data(e),r=a.enter().append("text").classed("xLabel",!0).style("font-size","14px").style("font-weight","bold").style("fill",this.params.axisLabelColor).style("dominant-baseline","hanging");if(this.xLabelSelection=a.merge(r).attr("x",o=>this.width-o.padding.right+o.xTickPadding).attr("y",o=>o.padding.top+this.axisHeight+o.yTickPadding).attr("transform",`translate(${this.params.xLabelOffset[0]}, ${this.params.xLabelOffset[1]})`).attr("text-anchor",this.params.xLabelAnchor).text(o=>o.xLabel),a.exit().remove(),this.xLabelSelection.size()==0)return;this.xAxis=os(this.dataset.xScale).scale(this.dataset.xScale).ticks(this.dataset.maxValue>this.params.xTicks?this.params.xTicks:this.dataset.maxValue===0?1:Math.ceil(this.dataset.maxValue)).tickFormat(o=>is(o,this.params.xTickFormat)).tickSize(this.params.xTickLine&&typeof this.params.xTickLine=="boolean"?-this.axisHeight:this.params.xTickLine&&typeof this.params.xTickLine=="number"?-this.axisHeight*this.params.xTickLine:Fa).tickPadding(this.params.xTickPadding);const s=this.xAxisSelection.transition().duration(100).call(this.xAxis);s.selectAll("line").style("fill","none").style("stroke",this.params.axisLineColor).style("stroke-dasharray",this.params.xTickLineDasharray),s.selectAll("path").style("fill","none").style("stroke","none").style("shape-rendering","crispEdges"),s.selectAll("text").style("font-family","sans-serif").style("font-size","14px").style("color",this.params.axisLabelColor)}renderZeroLine(e,n){const i=e.selectAll("g.bpchart__zero-line").data(n),a=i.enter().append("g").classed("bpchart__zero-line",!0).attr("transform",s=>"translate("+this.params.padding.left+","+this.params.padding.top+")");i.exit().remove();const r=i.merge(a);a.append("line"),r.select("line").attr("stroke",this.params.axisLabelColor).attr("stroke-width",1).transition().duration(100).attr("x1",s=>s.x1).attr("y1",s=>s.y1).attr("x2",s=>s.x2).attr("y2",s=>s.y2).attr("opacity",s=>s.x1>=0&&s.x1<=this.axisWidth?1:0)}}const B4={barWidth:0,barPadding:1,barR:!1,colors:ht,highlightTarget:"datum",highlightDatumId:"",enterDuration:800},F4={barWidth:0,barPadding:1,barGroupPadding:20,barR:!1,colors:ht,highlightTarget:"item",highlightGroupId:"",highlightItemId:"",highlightDatumId:"",enterDuration:800},W4={barWidth:0,barGroupPadding:20,barR:!1,colors:ht,highlightTarget:"item",highlightGroupId:"",highlightItemId:"",highlightDatumId:"",enterDuration:800},V4={groupLayout:[],barPadding:1,barGroupPadding:20,colors:ht,highlightTarget:"item",highlightGroupId:"",highlightItemId:"",highlightDatumId:"",enterDuration:800,labelTextMethod:(t,e)=>String(t.value),labelPositionMethod:(t,e)=>"top",labelStyleMethod:(t,e)=>"",labelFontSizeMethod:(t,e)=>10,labelColorMethod:(t,e)=>Ee,labelPadding:5},Jg={barWidth:0,barGroupPadding:1,barR:!1,colors:ht,highlightTarget:"item",highlightGroupId:"",highlightItemId:"",highlightDatumId:"",enterDuration:800},q4=(t,e)=>{const n=new Map;return e.forEach((i,a)=>{n.set(i,t[a])}),n},Z4=(t,e)=>{const n=new Map;return t.forEach((i,a)=>{i.forEach((r,s)=>{const o=n.get(e[s])??[];o.push(r),n.set(e[s],o)})}),n},K4=(t,e,n)=>e.map((i,a)=>{const r=t.get(i)??[];let s=[],o=0;for(let l=0;l<r.length;l++){const c=r[l],u=c.x;s.push({...c,graphicX:o,graphicY:c.y,width:u}),o=o+u}return s}),Wa=({datum:t,YDataMap:e,ItemDataMap:n,event:i})=>({groupData:e.get(t.yLabel),itemData:n.get(t.itemLabel),datum:t,yLabel:t.yLabel,yIndex:t.yIndex,itemLabel:t.itemLabel,itemIndex:t.itemIndex,clientX:i.clientX,clientY:i.clientY,offsetX:i.offsetX,offsetY:i.offsetY}),Q4=({axisWidth:t,groupAmount:e,barGroupPadding:n=0})=>{const i=t/e-n;return i>1?i:1},J4=(t,e=400)=>e/t;class j4{constructor(e,n){this.params=Jg,this.dataset={data:[],itemLabels:[],yLabels:[],axisHeight:0,zeroX:0},this.graphicData=[],this.graphicGroupSelection=void 0,this.graphicBarSelection=void 0,this.itemLabels=[],this.ItemDataMap=new Map,this.YDataMap=new Map,this.axisHeight=0,this.barWidth=0,this.delayDuration=0,this.clickCallback=function(){},this.mouseoverCallback=function(){},this.mousemoveCallback=function(){},this.mouseoutCallback=function(){},this.selection=e,this.defsSelection=e.append("defs")}setParams(e){this.params={...this.params,...e},this.itemLabels=[]}setDataset(e){this.dataset=e,this.itemLabels=this.dataset.itemLabels,this.ItemDataMap=q4(this.dataset.data,this.dataset.itemLabels),this.YDataMap=Z4(this.dataset.data,this.dataset.yLabels),this.delayDuration=J4(this.dataset.yLabels.length)}render(){console.log(this.dataset),this.itemLabels.length&&(this.colorScale=ge(this.itemLabels,this.params.colors),this.axisHeight=this.dataset.axisHeight,this.barWidth=this.params.barWidth?this.params.barWidth:Q4({axisWidth:this.axisHeight,groupAmount:this.dataset.yLabels.length,barGroupPadding:this.params.barGroupPadding??0}),this.graphicData=K4(this.YDataMap,this.dataset.yLabels,this.dataset.zeroX),this.renderGraphic({selection:this.selection,graphicData:this.graphicData,yLabels:this.dataset.yLabels,colorScale:this.colorScale,params:this.params}),this.graphicBarSelection.on("click",(e,n)=>{const i=Wa({datum:e,YDataMap:this.YDataMap,ItemDataMap:this.ItemDataMap,event:w});this.clickCallback(i)}).on("mouseover",(e,n,i)=>{const a=Wa({datum:e,YDataMap:this.YDataMap,ItemDataMap:this.ItemDataMap,event:w});this.params.highlightTarget!=null&&this.params.highlightTarget!="none"&&(this.params.highlightTarget==="group"?this.highlight(this.graphicBarSelection,a.yLabel,void 0,void 0):this.params.highlightTarget==="item"?this.highlight(this.graphicBarSelection,void 0,a.itemLabel,void 0):this.params.highlightTarget==="datum"&&this.highlight(this.graphicBarSelection,void 0,void 0,a.datum&&a.datum.id)),this.mouseoverCallback(a)}).on("mousemove",(e,n)=>{const i=Wa({datum:e,YDataMap:this.YDataMap,ItemDataMap:this.ItemDataMap,event:w});this.mousemoveCallback(i)}).on("mouseout",(e,n)=>{this.params.highlightTarget!=null&&this.params.highlightTarget!="none"&&this.removeHighlight(this.graphicBarSelection);const i=Wa({datum:e,YDataMap:this.YDataMap,ItemDataMap:this.ItemDataMap,event:w});this.initHighlight(),this.mouseoutCallback(i)}))}on(e,n){return e==="click"?this.clickCallback=n:e==="mouseover"?this.mouseoverCallback=n:e==="mousemove"?this.mousemoveCallback=n:e==="mouseout"&&(this.mouseoutCallback=n),this}remove(){this.selection.remove()}renderGraphic({selection:e,graphicData:n,yLabels:i,colorScale:a,params:r}){if(this.barWidth<=0)return;const s=e.selectAll("g.bpchart__bar-g").data(n,(c,u)=>i[u]),o=s.enter().append("g").classed("bpchart__bar-g",!0).attr("cursor","pointer");s.exit().remove(),this.graphicGroupSelection=s.merge(o),o.attr("transform",(c,u)=>`translate(0, ${c[0]?c[0].graphicY:0})`),s.transition().duration(200).attr("transform",(c,u)=>`translate(0, ${c[0]?c[0].graphicY:0})`);const l=this.barWidth/2;this.graphicGroupSelection.each((c,u,f)=>{const h=W(f[u]).selectAll("g").data(c,p=>p.id),d=h.enter().append("g").classed("bpchart__bar",!0);d.append("rect").attr("rx",r.barR==!0?l:r.barR==!1?0:typeof r.barR=="number"?r.barR:0).attr("transform",`translate(0, ${-l})`).attr("x",this.dataset.zeroX).attr("y",0).attr("width",0).attr("height",this.barWidth),h.merge(d).select("rect").attr("fill",p=>a(p.itemLabel)).transition().duration(this.params.enterDuration).ease(Wn).delay((p,m)=>p.yIndex*this.delayDuration).attr("transform",`translate(0, ${-l})`).attr("x",p=>p.graphicX).attr("y",0).attr("width",p=>p.width).attr("height",this.barWidth).on("end",()=>this.initHighlight()),h.exit().remove()}),this.graphicBarSelection=this.graphicGroupSelection.selectAll("g.bpchart__bar")}initHighlight(){this.graphicBarSelection&&(this.params.highlightDatumId||this.params.highlightItemId||this.params.highlightGroupId)&&this.highlight(this.graphicBarSelection,this.params.highlightGroupId,this.params.highlightItemId,this.params.highlightDatumId)}highlight(e,n,i,a){if(!e)return;let r=[];if(a&&r.push(a),i){const s=this.dataset.data.flat().filter(o=>o.itemLabel===i).map(o=>o.id);r=r.concat(s)}if(n){const s=this.dataset.data.flat().filter(o=>o.yLabel===n).map(o=>o.id);r=r.concat(s)}e.each((s,o,l)=>{r.includes(s.id)?W(l[o]).transition().duration(200).style("opacity",1):W(l[o]).transition().duration(200).style("opacity",.3)})}removeHighlight(e){this.params.highlightDatumId||this.params.highlightItemId||this.params.highlightGroupId?this.highlight(e,this.params.highlightGroupId,this.params.highlightItemId,this.params.highlightDatumId):e.transition().duration(200).style("opacity",1)}}const si={axisRow:Qg,tooltipAside:{templateHtml:t=>t.groupData&&t.groupData[0]?`
          <div>
            <div>${t.groupData[0].yLabel}</div>
            <div>${t.groupData.map(e=>e.value).join(",")}</div>          
          </div>
        `:""},colors:ht,padding:Ot,highlightTarget:"datum",highlightDatumId:"",highlightItemId:"",showAuxLine:!1,domainMinValue:0,domainMaxValue:void 0,domainMinRange:void 0,domainMaxRange:.95};({...si});({...si});({...si});({...si});const t7={...si,graphicRowBarStack:Jg},yf=(t,e)=>({...t,padding:e}),e7=({dataset:t,activedItemId:e,yDataMap:n,ItemDataMap:i,padding:a,yRangeScale:r,event:s})=>{if(!s||!r)return{dataset:t,groupData:[],itemData:[],datum:void 0,yLabel:"",yIndex:-1,itemLabel:"",itemIndex:-1,rangeIndex:-1,clientX:-1,clientY:-1,offsetX:-1,offsetY:-1};const o=Number(s.offsetY)-a.top,l=Number(r(o)??0),c=t.yLabels[l],u=n.get(c)??[];let f=[],h;return e&&(f=i.get(e)??[],h=u.find(d=>d.itemLabel===e)),{dataset:t,groupData:u,itemData:f,datum:h,yLabel:c,yIndex:l,itemLabel:h?h.itemLabel:"",itemIndex:h?h.itemIndex:-1,rangeIndex:l,clientX:w.clientX,clientY:w.clientY,offsetX:w.offsetX,offsetY:w.offsetY}};class n7{constructor(e,n){this.width=De,this.height=Le,this.dataset={data:[],yLabels:[]},this.params=si,this.graphicSelection=void 0,this.axisWidth=0,this.axisHeight=0,this.clickCallback=function(){},this.mouseoverCallback=function(){},this.mousemoveCallback=function(){},this.mouseoutCallback=function(){},this.yDataMap=new Map,this.ItemDataMap=new Map,this.renderData=[],this.axisParams=this.params.axisRow,this.xAxisSelection=void 0,this.yAxisSelection=void 0,this.xLabelSelection=void 0,this.yLabelSelection=void 0,this.auxLineSelection=void 0,this.minValue=0,this.maxValue=0,this.makeActivedCallbackData=(i,a)=>e7({dataset:this.dataset,activedItemId:i,yDataMap:this.yDataMap,ItemDataMap:this.ItemDataMap,padding:this.params.padding,yRangeScale:this.yRangeScale,event:a}),this.selection=e,this.axisSelection=e.append("g"),this.axisRow=new U4(this.axisSelection,{}),this.rangeSelection=this.selection.append("rect").attr("opacity",0),this.setRangeEvent(this.rangeSelection),this.graphicSelection=e.append("g"),this.coverSelection=this.selection.append("g").classed("bpchart__cover",!0),this.utilAuxLine=new tu(this.coverSelection),this.setCoverEvent(this.selection)}setParams(e){this.params={...this.params,...e,axisRow:{...this.params.axisRow,...e.axisRow}},this.params.tooltipAside&&!this.tooltip&&(this.tooltip=new jc(this.selection,{templateHtml:this.params.tooltipAside.templateHtml,type:this.params.tooltipAside.type??"white",yLine:this.params.tooltipAside.yLine??!1})),this.axisParams=yf(this.params.axisRow,this.params.padding),this.axisWidth=Zt(this.width,this.params.padding),this.axisHeight=Kt(this.height,this.params.padding),this.axisRow.setParams(this.axisParams),this.graphicSelection.attr("transform",`translate(${this.params.padding.left}, ${this.params.padding.top})`),this.coverSelection.attr("transform",`translate(${this.params.padding.left}, ${this.params.padding.top})`),this.initGraphic(this.params)}select(){return this.selection}remove(){this.selection.remove()}resize({width:e=this.width,height:n=this.height}){this.width=e,this.height=n,this.axisParams=yf(this.params.axisRow,this.params.padding),this.axisWidth=Zt(this.width,this.params.padding),this.axisHeight=Kt(this.height,this.params.padding),this.axisRow.setParams(this.axisParams),this.axisRow.resize({width:e,height:n}),this.rangeSelection.attr("x",this.params.padding.left).attr("y",this.params.padding.top).attr("width",this.axisWidth).attr("height",this.axisHeight)}setDataset(e){this.dataset=e;const[n,i]=this.getMinAndMaxValue(this.dataset.data);this.minValue=n,this.maxValue=i}render(){this.yScale=Qc({axisLabels:this.dataset.yLabels,axisWidth:this.axisHeight,reverse:!0}),this.xScale=as({maxValue:this.maxValue,minValue:this.minValue,axisWidth:this.axisWidth,domainMinValue:this.params.domainMinValue,domainMaxValue:this.params.domainMaxValue,domainMinRange:this.params.domainMinRange,domainMaxRange:this.params.domainMaxRange}),this.yRangeScale=Jc({axisLabels:this.dataset.yLabels,axisWidth:this.axisHeight,reverse:!0}),this.renderData=this.makeGraphicRenderData({dataset:this.dataset,xScale:this.xScale,yScale:this.yScale}),this.yDataMap=this.makeYDataMap({renderData:this.renderData,yLabels:this.dataset.yLabels}),this.ItemDataMap=this.makeItemDataMap({renderData:this.renderData,itemLabels:this.dataset.itemLabels??[]}),this.setGraphicData({renderData:this.renderData,itemLabels:this.dataset.itemLabels??[],yLabels:this.dataset.yLabels,xScale:this.xScale,yScale:this.yScale}),this.axisRow.setDataset({xScale:this.xScale,yScale:this.yScale,maxValue:this.maxValue}),this.axisRow.render(),this.renderGraphic()}on(e,n){return e==="click"?this.clickCallback=n:e==="mouseover"?this.mouseoverCallback=n:e==="mousemove"?this.mousemoveCallback=n:e==="mouseout"&&(this.mouseoutCallback=n),this}setRangeEvent(e){e.on("click",(n,i)=>{const a=this.makeActivedCallbackData("",w);this.clickCallback(a)}).on("mouseover",(n,i)=>{const a=this.makeActivedCallbackData("",w);this.mouseoverCallback(a)}).on("mousemove",n=>{const i=this.makeActivedCallbackData("",w);this.mousemoveCallback(i)}).on("mouseout",n=>{if(w.offsetX>0&&w.offsetX<this.width&&w.offsetY>0&&w.offsetY<this.height)return;const i=this.makeActivedCallbackData("",w);this.mouseoutCallback(i)})}showTooltip(e,n){n&&e&&this.yScale?this.tooltip.setDatum({data:e,x:w.clientX,y:e.clientY-e.offsetY+this.params.padding.top+this.yScale(e.yLabel)}):this.tooltip.remove()}setCoverEvent(e){e.on("mouseover",(n,i)=>{const a=this.makeActivedCallbackData("",w);this.coverHighlight(a),this.showTooltip(a,w)}).on("mousemove",n=>{const i=this.makeActivedCallbackData("",w);this.coverHighlight(i),this.showTooltip(i,w)}).on("mouseout",n=>{w.offsetX>0&&w.offsetX<this.width&&w.offsetY>0&&w.offsetY<this.height||(this.coverHighlight(void 0),this.tooltip.remove())})}coverHighlight(e){this.params.showAuxLine&&this.renderAuxLine({coverSelection:this.coverSelection,yLabels:this.dataset.yLabels,activeRangeIndex:e?e.rangeIndex:-1,yScale:this.yScale,padding:this.params.padding,axisWidth:this.axisWidth}),this.renderGraphicCoverHighlight({eventData:e,xScale:this.xScale,yScale:this.yScale,padding:this.params.padding})}renderAuxLine({coverSelection:e,yLabels:n,activeRangeIndex:i,yScale:a,padding:r,axisWidth:s}){if(!a)return;const o=n.map((l,c)=>{const u=a(l)||0;return{x1:0,x2:s,y1:u,y2:u,active:i==c}});this.utilAuxLine.setData(o),this.utilAuxLine.render()}}const vf="__DEFAULT__";class i7 extends n7{constructor(e,n){super(e,n),this.params=t7,this.bar=new j4(this.graphicSelection,{})}initGraphic(e){this.params={...this.params,...e,graphicRowBarStack:{...this.params.graphicRowBarStack,...e.graphicRowBarStack}},this.bar.setParams({...this.params.graphicRowBarStack,colors:this.params.colors,highlightTarget:this.params.highlightTarget,highlightDatumId:this.params.highlightDatumId,highlightItemId:this.params.highlightItemId,highlightGroupId:this.params.highlightGroupId}),this.bar.on("click",n=>{const i=this.makeActivedCallbackData(n.itemLabel??"",w);this.clickCallback(i)}).on("mouseover",n=>{const i=this.makeActivedCallbackData(n.itemLabel??"",w);this.showTooltip(i,w),this.mouseoverCallback(i)}).on("mousemove",n=>{const i=this.makeActivedCallbackData(n.itemLabel??"",w);this.showTooltip(i,w),this.mousemoveCallback(i)}).on("mouseout",n=>{const i=this.makeActivedCallbackData("",w);this.showTooltip(void 0,w),this.mouseoutCallback(i)})}makeGraphicRenderData({dataset:e,xScale:n,yScale:i}){return e.data.map((a,r)=>{const s=e.itemLabels&&e.itemLabels[r]?e.itemLabels[r]:vf;return a.map((o,l)=>{const c=e.yLabels[l],u=i(c)||0;return{...o,id:`${s}_${c}`,itemIndex:r,itemLabel:s,yIndex:l,yLabel:c,x:n(o.value)||0,y:u}})})}getMinAndMaxValue(e){if(!e.length)return[0,0];let n=[];for(let i=0;i<e[0].length;i++){n[i]=0;for(let a=0;a<e.length;a++)n[i]+=e[a][i].value}return n.reduce((i,a)=>[a<i[0]?a:i[0],a>i[1]?a:i[1]],[1/0,0])}makeYDataMap({renderData:e,yLabels:n}){let i=new Map;return e.length&&e.forEach((a,r)=>{a.forEach((s,o)=>{const l=i.get(n[o])??[];l.push(s),i.set(n[o],l)})}),i}makeItemDataMap({renderData:e,itemLabels:n}){let i=new Map;return e.length&&n.forEach((a,r)=>{i.set(a,e[r])}),i}setGraphicData({renderData:e,itemLabels:n,yLabels:i,xScale:a,yScale:r}){this.bar.setDataset({data:e,yLabels:i,itemLabels:n??[vf],axisHeight:this.axisHeight,zeroX:0})}renderGraphic(){this.bar.render()}renderGraphicCoverHighlight({eventData:e,xScale:n,yScale:i,padding:a}){}}const xf={__name:"ChartRow",setup(t){const e={data:[[{value:1653834},{value:264533},{value:1179611},{value:1780844}],[{value:513287},{value:80812},{value:377234},{value:518714}]],yLabels:["台北市","新竹市","台南市","高雄市"],itemLabels:["發出票數","剩餘票數"]},n={graphicRowBarStack:{barWidth:20,barR:5}};return(i,a)=>(an(),rn("div",null,[Mt(Gs,{module:rs(i7),dataset:e,params:n},null,8,["module"])]))}},jg={xLabel:"x",yLabel:"y",xLabelAnchor:"start",yLabelAnchor:"end",xLabelOffset:[0,0],yLabelOffset:[0,0],xTickPadding:20,yTickPadding:20,xTickLine:!1,yTickLine:!0,xTickLineDasharray:"none",yTickLineDasharray:"none",yTickFormat:",.0f",yTicks:4,axisLineColor:Zc,axisLabelColor:Ee,rotateXLabel:!1,padding:Ot,xVisible:!0,yVisible:!0},Va=6;class a7{constructor(e,n){this.width=De,this.height=Le,this.dataset={xScale:ai(),yScale:Xe(),maxValue:0},this.params=jg,this.xAxisSelection=void 0,this.yAxisSelection=void 0,this.xLabelSelection=void 0,this.yLabelSelection=void 0,this.axisWidth=Zt(this.width,Ot),this.axisHeight=Kt(this.height,Ot),this.selection=e}setParams(e){this.params={...this.params,...e}}setDataset(e){this.dataset=e}resize({width:e=this.width,height:n=this.height}){this.width=e,this.height=n,this.axisWidth=Zt(this.width,this.params.padding),this.axisHeight=Kt(this.height,this.params.padding)}render(){this.renderXPointAxis(),this.renderYLinearAxis();const e=this.dataset.yScale(0);this.renderZeroLine(this.selection,[{x1:0,y1:e,x2:this.axisWidth,y2:e}])}remove(){this.selection.remove()}renderXPointAxis(){let e=[];this.params.xVisible&&e.push(this.params);const n=this.selection.selectAll("g.xAxis").data(e),i=n.enter().append("g");this.xAxisSelection=n.merge(i).classed("xAxis",!0).attr("transform",l=>"translate("+l.padding.left+","+(l.padding.top+this.axisHeight)+")"),n.exit().remove();const a=this.selection.selectAll("text.xLabel").data(e),r=a.enter().append("text").classed("xLabel",!0).style("font-size","14px").style("font-weight","bold").style("dominant-baseline","hanging");if(this.xLabelSelection=a.merge(r).attr("x",l=>this.width-l.padding.right+l.xTickPadding).attr("y",l=>l.padding.top+this.axisHeight+l.yTickPadding+Va).attr("transform",`translate(${this.params.xLabelOffset[0]}, ${this.params.xLabelOffset[1]})`).attr("text-anchor",this.params.xLabelAnchor).style("fill",this.params.axisLabelColor).text(l=>l.xLabel),a.exit().remove(),this.xLabelSelection.size()==0)return;this.xAxis=os(this.dataset.xScale).scale(this.dataset.xScale).tickSize(this.params.xTickLine&&typeof this.params.xTickLine=="boolean"?-this.axisHeight:this.params.xTickLine&&typeof this.params.xTickLine=="number"?-this.axisHeight*this.params.xTickLine:Va).tickSizeOuter(0).tickFormat(l=>l).tickPadding(this.params.xTickPadding);const s=this.xAxisSelection.transition().duration(50).call(this.xAxis).attr("text-anchor",()=>this.params.rotateXLabel!==!1?"end":"middle");s.selectAll("line").style("fill","none").style("stroke",this.params.axisLineColor).style("stroke-dasharray",this.params.xTickLineDasharray),s.selectAll("path").style("fill","none").style("stroke",this.params.axisLineColor).style("shape-rendering","crispEdges");const o=s.selectAll("text").style("font-family","sans-serif").style("font-size","14px").style("color",this.params.axisLabelColor).attr("transform-origin",`-5 ${this.params.xTickPadding+Va}`);this.params.rotateXLabel===!0?o.attr("transform","translate(0,0) rotate(-45)"):typeof this.params.rotateXLabel=="number"&&o.attr("transform",`translate(0,0) rotate(${this.params.rotateXLabel})`)}renderYLinearAxis(){let e=[];this.params.xVisible&&e.push(this.params);const n=this.selection.selectAll("g.yAxis").data(e),i=n.enter().append("g");this.yAxisSelection=n.merge(i).classed("yAxis",!0).attr("transform",o=>"translate("+o.padding.left+","+o.padding.top+")"),n.exit().remove();const a=this.selection.selectAll("text.yLabel").data(e),r=a.enter().append("text").classed("yLabel",!0).style("font-size","14px").style("font-weight","bold");if(this.yLabelSelection=a.merge(r).attr("x",o=>o.padding.left-o.xTickPadding).attr("y",o=>o.padding.top-o.yTickPadding).attr("text-anchor",this.params.yLabelAnchor).attr("transform",`translate(${this.params.yLabelOffset[0]}, ${this.params.yLabelOffset[1]})`).style("fill",this.params.axisLabelColor).text(o=>o.yLabel),a.exit().remove(),this.yLabelSelection.size()==0)return;this.yAxis=ls(this.dataset.yScale).scale(this.dataset.yScale).ticks(this.dataset.maxValue>this.params.yTicks?this.params.yTicks:this.dataset.maxValue===0?1:Math.ceil(this.dataset.maxValue)).tickFormat(o=>is(o,this.params.yTickFormat)).tickSize(this.params.yTickLine&&typeof this.params.yTickLine=="boolean"?-this.axisWidth:this.params.yTickLine&&typeof this.params.yTickLine=="number"?-this.axisWidth*this.params.yTickLine:Va).tickPadding(this.params.yTickPadding);const s=this.yAxisSelection.transition().duration(100).call(this.yAxis);s.selectAll("line").style("fill","none").style("stroke",this.params.axisLineColor).style("stroke-dasharray",this.params.yTickLineDasharray),s.selectAll("path").style("fill","none").style("stroke","none").style("shape-rendering","crispEdges"),s.selectAll("text").style("font-family","sans-serif").style("font-size","14px").style("color",this.params.axisLabelColor)}renderZeroLine(e,n){const i=e.selectAll("g.bpchart__zero-line").data(n),a=i.enter().append("g").classed("bpchart__zero-line",!0).attr("transform",s=>"translate("+this.params.padding.left+","+this.params.padding.top+")");i.exit().remove();const r=i.merge(a);a.append("line"),r.select("line").attr("stroke",this.params.axisLabelColor).attr("stroke-width",1).transition().duration(100).attr("x1",s=>s.x1).attr("y1",s=>s.y1).attr("x2",s=>s.x2).attr("y2",s=>s.y2).attr("opacity",s=>s.y1>=0&&s.y1<=this.axisHeight?1:0)}}const r7={barWidth:0,barGroupPadding:20,barR:!1,colors:ht,highlightTarget:"item",highlightGroupId:"",highlightItemId:"",highlightDatumId:"",enterDuration:800},s7={lineCurve:"curveLinear",colors:ht,highlightTarget:"item",highlightItemId:"",enterDuration:800},Oe={axisColumn:jg,tooltipAside:{templateHtml:t=>t.groupData&&t.groupData[0]?`
          <div>
            <div>${t.groupData[0].xLabel}</div>
            <div>${t.groupData.map(e=>e.value).join(",")}</div>          
          </div>
        `:""},colors:ht,padding:Ot,highlightTarget:"datum",highlightDatumId:"",highlightItemId:"",showAuxLine:!1,domainMinValue:0,domainMaxValue:void 0,domainMinRange:void 0,domainMaxRange:.95},o7={...Oe,highlightTarget:"item",graphicColumnLine:ri,graphicDot:Sn,showDot:"hover"};({...Oe});({...Oe});({...Oe});({...Oe});({...Oe});const _f=(t,e)=>({...t,padding:e}),l7=({dataset:t,activedItemId:e,XDataMap:n,ItemDataMap:i,padding:a,xRangeScale:r,event:s})=>{if(!s||!r)return{dataset:t,groupData:[],itemData:[],datum:void 0,xLabel:"",xIndex:-1,itemLabel:"",itemIndex:-1,rangeIndex:-1,clientX:-1,clientY:-1,offsetX:-1,offsetY:-1};const o=Number(s.offsetX)-a.left,l=Number(r(o)??0),c=t.xLabels[l],u=n.get(c)??[];let f=[],h;return e&&(f=i.get(e)??[],h=u.find(d=>d.itemLabel===e)),{dataset:t,groupData:u,itemData:f,datum:h,xLabel:c,xIndex:l,itemLabel:h?h.itemLabel:"",itemIndex:h?h.itemIndex:-1,rangeIndex:l,clientX:w.clientX,clientY:w.clientY,offsetX:w.offsetX,offsetY:w.offsetY}},c7=({dataset:t,filterConfig:e,params:n})=>{let i=[];if(!e||!e.filterItems||!t.itemLabels)return{filteredDataset:t,filteredParams:n};const a=e.filterItems.reduce((s,o)=>(s[o]=!0,s),{}),r=s=>!s.itemLabel||a[s.itemLabel]==!0;return t.data[0]&&Array.isArray(t.data[0])?i=t.data.filter((s,o)=>a[t.itemLabels[o]]==!0).map(s=>s.filter(r)):i=t.data.filter(r),{filteredDataset:{...t,data:i,itemLabels:e&&e.filterItems?e.filterItems:t.itemLabels},filteredParams:{...n,colors:t.itemLabels&&e.filterItems?n.colors.filter((s,o)=>!t.itemLabels[o]||a[t.itemLabels[o]]):n.colors}}};class u7{constructor(e,n){this.width=De,this.height=Le,this.dataset={data:[],xLabels:[]},this.params=Oe,this.filterConfig={},this.graphicSelection=void 0,this.axisWidth=0,this.axisHeight=0,this.clickCallback=function(){},this.mouseoverCallback=function(){},this.mousemoveCallback=function(){},this.mouseoutCallback=function(){},this.XDataMap=new Map,this.ItemDataMap=new Map,this.renderData=[],this.filteredDataset={data:[],xLabels:[]},this.filteredParams=Oe,this.axisParams=this.params.axisColumn,this.xAxisSelection=void 0,this.yAxisSelection=void 0,this.xLabelSelection=void 0,this.yLabelSelection=void 0,this.auxLineSelection=void 0,this.minValue=0,this.maxValue=0,this.makeActivedCallbackData=(i,a)=>l7({dataset:this.dataset,activedItemId:i,XDataMap:this.XDataMap,ItemDataMap:this.ItemDataMap,padding:this.params.padding,xRangeScale:this.xRangeScale,event:a}),this.selection=e,this.axisSelection=e.append("g"),this.axisColumn=new a7(this.axisSelection,{}),this.rangeSelection=this.selection.append("rect").attr("opacity",0),this.setRangeEvent(this.rangeSelection),this.graphicSelection=e.append("g"),this.coverSelection=this.selection.append("g").classed("bpchart__cover",!0),this.utilAuxLine=new tu(this.coverSelection),this.setCoverEvent(this.selection)}setParams(e){this.params={...this.params,...e,axisColumn:{...this.params.axisColumn,...e.axisColumn}},this.params.tooltipAside&&!this.tooltip&&(this.tooltip=new jc(this.selection,{templateHtml:this.params.tooltipAside.templateHtml,type:this.params.tooltipAside.type??"white",yLine:this.params.tooltipAside.yLine??!1})),this.axisParams=_f(this.params.axisColumn,this.params.padding),this.axisWidth=Zt(this.width,this.params.padding),this.axisHeight=Kt(this.height,this.params.padding),this.axisColumn.setParams(this.axisParams),this.graphicSelection.attr("transform",`translate(${this.params.padding.left}, ${this.params.padding.top})`),this.coverSelection.attr("transform",`translate(${this.params.padding.left}, ${this.params.padding.top})`)}select(){return this.selection}remove(){this.selection.remove()}resize({width:e=this.width,height:n=this.height}){this.width=e,this.height=n,this.axisParams=_f(this.params.axisColumn,this.params.padding),this.axisWidth=Zt(this.width,this.params.padding),this.axisHeight=Kt(this.height,this.params.padding),this.axisColumn.setParams(this.axisParams),this.axisColumn.resize({width:e,height:n}),this.rangeSelection.attr("x",this.params.padding.left).attr("y",this.params.padding.top).attr("width",this.axisWidth).attr("height",this.axisHeight)}setDataset(e){this.dataset=e}filter(e){this.filterConfig={...this.filterConfig,...e}}render(){this.xRangeScale=Jc({axisLabels:this.dataset.xLabels,axisWidth:this.axisWidth});const{filteredDataset:e,filteredParams:n}=c7({dataset:this.dataset,filterConfig:this.filterConfig,params:this.params});this.filteredDataset=e,this.filteredParams=n;const[i,a]=this.getMinAndMaxValue(this.filteredDataset.data);this.minValue=i,this.maxValue=a,this.xScale=Qc({axisLabels:this.filteredDataset.xLabels,axisWidth:this.axisWidth}),this.yScale=as({maxValue:this.maxValue,minValue:this.minValue,axisWidth:this.axisHeight,domainMinValue:this.params.domainMinValue,domainMaxValue:this.params.domainMaxValue,domainMinRange:this.params.domainMinRange,domainMaxRange:this.params.domainMaxRange,reverse:!0}),this.renderData=this.makeGraphicRenderData({dataset:this.filteredDataset,xScale:this.xScale,yScale:this.yScale}),this.XDataMap=this.makeXDataMap({renderData:this.renderData,xLabels:this.filteredDataset.xLabels}),this.ItemDataMap=this.makeItemDataMap({renderData:this.renderData,itemLabels:this.filteredDataset.itemLabels??[]}),this.initGraphic(this.filteredParams),this.setGraphicData({renderData:this.renderData,itemLabels:this.filteredDataset.itemLabels??[],xLabels:this.filteredDataset.xLabels,xScale:this.xScale,yScale:this.yScale}),this.axisColumn.setDataset({xScale:this.xScale,yScale:this.yScale,maxValue:this.maxValue}),this.axisColumn.render(),this.renderGraphic()}on(e,n){return e==="click"?this.clickCallback=n:e==="mouseover"?this.mouseoverCallback=n:e==="mousemove"?this.mousemoveCallback=n:e==="mouseout"&&(this.mouseoutCallback=n),this}setRangeEvent(e){e.on("click",(n,i)=>{const a=this.makeActivedCallbackData("",w);this.clickCallback(a)}).on("mouseover",(n,i)=>{const a=this.makeActivedCallbackData("",w);this.mouseoverCallback(a)}).on("mousemove",n=>{const i=this.makeActivedCallbackData("",w);this.mousemoveCallback(i)}).on("mouseout",n=>{if(w.offsetX>0&&w.offsetX<this.width&&w.offsetY>0&&w.offsetY<this.height)return;const i=this.makeActivedCallbackData("",w);this.mouseoutCallback(i)})}showTooltip(e,n){n&&e&&this.xScale?this.tooltip.setDatum({data:e,x:e.clientX-e.offsetX+this.params.padding.left+this.xScale(e.xLabel),y:w.clientY}):this.tooltip.remove()}setCoverEvent(e){e.on("mouseover",(n,i)=>{const a=this.makeActivedCallbackData("",w);this.coverHighlight(a),this.showTooltip(a,w)}).on("mousemove",n=>{const i=this.makeActivedCallbackData("",w);this.coverHighlight(i),this.showTooltip(i,w)}).on("mouseout",n=>{w.offsetX>0&&w.offsetX<this.width&&w.offsetY>0&&w.offsetY<this.height||(this.coverHighlight(void 0),this.tooltip.remove())})}coverHighlight(e){this.params.showAuxLine&&this.renderAuxLine({coverSelection:this.coverSelection,xLabels:this.dataset.xLabels,activeRangeIndex:e?e.rangeIndex:-1,xScale:this.xScale,padding:this.params.padding,axisHeight:this.axisHeight}),this.renderGraphicCoverHighlight({eventData:e,xScale:this.xScale,yScale:this.yScale,padding:this.params.padding})}renderAuxLine({coverSelection:e,xLabels:n,activeRangeIndex:i,xScale:a,padding:r,axisHeight:s}){if(!a)return;const o=n.map((l,c)=>{const u=a(l)||0;return{x1:u,x2:u,y1:0,y2:s,active:i==c}});this.utilAuxLine.setData(o),this.utilAuxLine.render()}}const qa="__DEFAULT__";class h7 extends u7{constructor(e,n){super(e,n),this.params=o7,this.line=new Vg(this.graphicSelection,{}),this.dot=new qg(this.coverSelection,{})}initGraphic(e){this.params.graphicColumnLine={...this.params.graphicColumnLine,colors:e.colors,highlightItemId:e.highlightItemId,highlightTarget:e.highlightTarget==="item"?"item":"none"},this.params.graphicDot={...this.params.graphicDot,colors:e.colors,highlightItemId:e.highlightItemId,highlightTarget:e.highlightTarget==="item"?"item":"none"},this.line.setParams(this.params.graphicColumnLine),this.line.on("click",n=>{const i=this.makeActivedCallbackData(n.itemLabel??"",w);this.clickCallback(i)}).on("mouseover",n=>{const i=this.makeActivedCallbackData(n.itemLabel??"",w);this.showTooltip(i,w),this.mouseoverCallback(i),this.params.highlightTarget==="item"&&(this.dot.setParams({highlightItemId:n.itemLabel}),this.dot.render())}).on("mousemove",n=>{const i=this.makeActivedCallbackData(n.itemLabel??"",w);this.showTooltip(i,w),this.mousemoveCallback(i)}).on("mouseout",n=>{const i=this.makeActivedCallbackData("",w);this.showTooltip(void 0,w),this.mouseoutCallback(i),this.params.highlightTarget==="item"&&(this.dot.setParams({highlightItemId:this.params.highlightItemId}),this.dot.render())}),this.dot.setParams(this.params.graphicDot),this.dot.on("click",n=>{const i=this.makeActivedCallbackData(n.itemLabel??"",w);this.clickCallback(i)}).on("mouseover",n=>{const i=this.makeActivedCallbackData(n.itemLabel??"",w);this.showTooltip(i,w),this.mouseoverCallback(i),this.params.highlightTarget==="item"&&(this.line.setParams({highlightItemId:n.itemLabel}),this.line.render())}).on("mousemove",n=>{const i=this.makeActivedCallbackData(n.itemLabel??"",w);this.showTooltip(i,w),this.mousemoveCallback(i)}).on("mouseout",n=>{const i=this.makeActivedCallbackData("",w);this.showTooltip(void 0,w),this.mouseoutCallback(i),this.params.highlightTarget==="item"&&(this.line.setParams({highlightItemId:this.params.highlightItemId}),this.line.render())})}makeGraphicRenderData({dataset:e,xScale:n,yScale:i}){return e.data.map((a,r)=>{const s=e.itemLabels&&e.itemLabels[r]?e.itemLabels[r]:qa;return a.map((o,l)=>{const c=e.xLabels[l];return{...o,id:`${s}_${c}`,itemIndex:r,itemLabel:s,xIndex:l,xLabel:c,x:n(c)||0,y:o.value?i(o.value):i(0)}})})}getMinAndMaxValue(e){return e.length?e.flat().reduce((n,i)=>[i.value&&i.value<n[0]?i.value:n[0],i.value&&i.value>n[1]?i.value:n[1]],[1/0,0]):[0,0]}makeXDataMap({renderData:e,xLabels:n}){let i=new Map;return e.length&&e.forEach((a,r)=>{a.forEach((s,o)=>{const l=i.get(n[o])??[];l.push(s),i.set(n[o]??"",l)})}),i}makeItemDataMap({renderData:e,itemLabels:n}){let i=new Map;return e.length&&e.forEach((a,r)=>{i.set(n[r]??"",a)}),i}setGraphicData({renderData:e,itemLabels:n,xLabels:i,xScale:a,yScale:r}){if(this.line.setDataset({data:e,itemLabels:n??[qa],axisWidth:this.axisWidth,axisHeight:this.axisHeight,zeroY:r(0)}),this.params.showDot==="always"){const s=e.flat();this.dot.setDataset({data:s,itemLabels:this.filteredDataset.itemLabels??[qa]})}}renderGraphic(){this.line.render(),this.params.showDot==="always"&&this.dot.render()}renderGraphicCoverHighlight({eventData:e,xScale:n,yScale:i,padding:a}){if(this.params.showDot==="hover"&&this.params.highlightTarget!=="none"){const r=e?e.groupData.filter(s=>s.value!=null).map(s=>({...s,id:s.itemLabel,x:n(s.xLabel),y:i(s.value)})):[];this.dot.setDataset({data:r,itemLabels:this.filteredDataset.itemLabels??[qa]}),this.dot.render()}}}const f7={__name:"ChartColumn",setup(t){const e={data:[[{value:76.3098},{value:76.5973},{value:75.7679},{value:77.4424}]],xLabels:["台北市","新竹市","台南市","高雄市"],itemLabels:["投票率"]};return(n,i)=>(an(),rn("div",null,[Mt(Gs,{module:rs(h7),dataset:e},null,8,["module"])]))}};const d7={style:{width:"100vw"}},p7={class:"container"},g7={class:"container"},m7={class:"container"},b7={__name:"Index",setup(t){return(e,n)=>{const i=am("el-button");return an(),rn("div",d7,[xe("div",p7,[Mt(i,null,{default:Os(()=>[Za("投票統計類別摘要區塊")]),_:1}),Mt(xf,{class:"child"}),Mt(xf,{class:"child"}),Mt(f7,{class:"child"})]),xe("div",g7,[Mt(i,null,{default:Os(()=>[Za("候選人區域比較區塊")]),_:1}),Mt($o,{class:"child"}),Mt($o,{class:"child"}),Mt($o,{class:"child"})]),xe("div",m7,[Mt(i,null,{default:Os(()=>[Za("候選人各單區得票顯示區塊")]),_:1}),Mt(Po,{class:"child"}),Mt(Po,{class:"child"}),Mt(Po,{class:"child"})])])}}},w7=Xg(b7,[["__scopeId","data-v-a4d0c773"]]);export{w7 as default};
