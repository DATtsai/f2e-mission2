import{D as et,m as k,e as o,s as D,b as K,c as it,d as st,f as L,g as v,h as I,i as F,j as A,T as ht,p as lt,k as B,l as rt,n as ot,o as nt,q as ct,r as G,t as E,u as mt,v as dt,w as pt,x as gt,y as Z,z as ut,A as bt,B as xt,U as ft,E as Dt,F as Lt,G as kt,H as At,I as vt,J as It,K as Ct,M as yt,C as _t,a as _,_ as St}from"./MapCounty-89a9ec79.js";import{b as X,c as Y,e as d,u as V,f as b,d as p,a as Tt,w as f}from"./index-6155382c.js";const Mt=(l,t)=>{const e=new Map;return t.forEach((a,i)=>{e.set(a,l[i])}),e},Pt=(l,t)=>{const e=new Map;return l.forEach((a,i)=>{a.forEach((r,s)=>{const h=e.get(t[s])??[];h.push(r),e.set(t[s],h)})}),e},Rt=(l,t,e)=>t.map((a,i)=>{const r=l.get(a)??[];let s=[],h=0;for(let n=0;n<r.length;n++){const c=r[n],m=c.x;s.push({...c,graphicX:h,graphicY:c.y,width:m}),h=h+m}return s}),S=({datum:l,YDataMap:t,ItemDataMap:e,event:a})=>({groupData:t.get(l.yLabel),itemData:e.get(l.itemLabel),datum:l,yLabel:l.yLabel,yIndex:l.yIndex,itemLabel:l.itemLabel,itemIndex:l.itemIndex,clientX:a.clientX,clientY:a.clientY,offsetX:a.offsetX,offsetY:a.offsetY}),wt=({axisWidth:l,groupAmount:t,barGroupPadding:e=0})=>{const a=l/t-e;return a>1?a:1},Ht=(l,t=400)=>t/l;class Gt{constructor(t,e){this.params=et,this.dataset={data:[],itemLabels:[],yLabels:[],axisHeight:0,zeroX:0},this.graphicData=[],this.graphicGroupSelection=void 0,this.graphicBarSelection=void 0,this.itemLabels=[],this.ItemDataMap=new Map,this.YDataMap=new Map,this.axisHeight=0,this.barWidth=0,this.delayDuration=0,this.clickCallback=function(){},this.mouseoverCallback=function(){},this.mousemoveCallback=function(){},this.mouseoutCallback=function(){},this.selection=t,this.defsSelection=t.append("defs")}setParams(t){this.params={...this.params,...t},this.itemLabels=[]}setDataset(t){this.dataset=t,this.itemLabels=this.dataset.itemLabels,this.ItemDataMap=Mt(this.dataset.data,this.dataset.itemLabels),this.YDataMap=Pt(this.dataset.data,this.dataset.yLabels),this.delayDuration=Ht(this.dataset.yLabels.length)}render(){console.log(this.dataset),this.itemLabels.length&&(this.colorScale=k(this.itemLabels,this.params.colors),this.axisHeight=this.dataset.axisHeight,this.barWidth=this.params.barWidth?this.params.barWidth:wt({axisWidth:this.axisHeight,groupAmount:this.dataset.yLabels.length,barGroupPadding:this.params.barGroupPadding??0}),this.graphicData=Rt(this.YDataMap,this.dataset.yLabels,this.dataset.zeroX),this.renderGraphic({selection:this.selection,graphicData:this.graphicData,yLabels:this.dataset.yLabels,colorScale:this.colorScale,params:this.params}),this.graphicBarSelection.on("click",(t,e)=>{const a=S({datum:t,YDataMap:this.YDataMap,ItemDataMap:this.ItemDataMap,event:o});this.clickCallback(a)}).on("mouseover",(t,e,a)=>{const i=S({datum:t,YDataMap:this.YDataMap,ItemDataMap:this.ItemDataMap,event:o});this.params.highlightTarget!=null&&this.params.highlightTarget!="none"&&(this.params.highlightTarget==="group"?this.highlight(this.graphicBarSelection,i.yLabel,void 0,void 0):this.params.highlightTarget==="item"?this.highlight(this.graphicBarSelection,void 0,i.itemLabel,void 0):this.params.highlightTarget==="datum"&&this.highlight(this.graphicBarSelection,void 0,void 0,i.datum&&i.datum.id)),this.mouseoverCallback(i)}).on("mousemove",(t,e)=>{const a=S({datum:t,YDataMap:this.YDataMap,ItemDataMap:this.ItemDataMap,event:o});this.mousemoveCallback(a)}).on("mouseout",(t,e)=>{this.params.highlightTarget!=null&&this.params.highlightTarget!="none"&&this.removeHighlight(this.graphicBarSelection);const a=S({datum:t,YDataMap:this.YDataMap,ItemDataMap:this.ItemDataMap,event:o});this.initHighlight(),this.mouseoutCallback(a)}))}on(t,e){return t==="click"?this.clickCallback=e:t==="mouseover"?this.mouseoverCallback=e:t==="mousemove"?this.mousemoveCallback=e:t==="mouseout"&&(this.mouseoutCallback=e),this}remove(){this.selection.remove()}renderGraphic({selection:t,graphicData:e,yLabels:a,colorScale:i,params:r}){if(this.barWidth<=0)return;const s=t.selectAll("g.bpchart__bar-g").data(e,(c,m)=>a[m]),h=s.enter().append("g").classed("bpchart__bar-g",!0).attr("cursor","pointer");s.exit().remove(),this.graphicGroupSelection=s.merge(h),h.attr("transform",(c,m)=>`translate(0, ${c[0]?c[0].graphicY:0})`),s.transition().duration(200).attr("transform",(c,m)=>`translate(0, ${c[0]?c[0].graphicY:0})`);const n=this.barWidth/2;this.graphicGroupSelection.each((c,m,C)=>{const g=D(C[m]).selectAll("g").data(c,u=>u.id),y=g.enter().append("g").classed("bpchart__bar",!0);y.append("rect").attr("rx",r.barR==!0?n:r.barR==!1?0:typeof r.barR=="number"?r.barR:0).attr("transform",`translate(0, ${-n})`).attr("x",this.dataset.zeroX).attr("y",0).attr("width",0).attr("height",this.barWidth),g.merge(y).select("rect").attr("fill",u=>i(u.itemLabel)).transition().duration(this.params.enterDuration).ease(K).delay((u,ma)=>u.yIndex*this.delayDuration).attr("transform",`translate(0, ${-n})`).attr("x",u=>u.graphicX).attr("y",0).attr("width",u=>u.width).attr("height",this.barWidth).on("end",()=>this.initHighlight()),g.exit().remove()}),this.graphicBarSelection=this.graphicGroupSelection.selectAll("g.bpchart__bar")}initHighlight(){this.graphicBarSelection&&(this.params.highlightDatumId||this.params.highlightItemId||this.params.highlightGroupId)&&this.highlight(this.graphicBarSelection,this.params.highlightGroupId,this.params.highlightItemId,this.params.highlightDatumId)}highlight(t,e,a,i){if(!t)return;let r=[];if(i&&r.push(i),a){const s=this.dataset.data.flat().filter(h=>h.itemLabel===a).map(h=>h.id);r=r.concat(s)}if(e){const s=this.dataset.data.flat().filter(h=>h.yLabel===e).map(h=>h.id);r=r.concat(s)}t.each((s,h,n)=>{r.includes(s.id)?D(n[h]).transition().duration(200).style("opacity",1):D(n[h]).transition().duration(200).style("opacity",.3)})}removeHighlight(t){this.params.highlightDatumId||this.params.highlightItemId||this.params.highlightGroupId?this.highlight(t,this.params.highlightGroupId,this.params.highlightItemId,this.params.highlightDatumId):t.transition().duration(200).style("opacity",1)}}const O="__DEFAULT__";class Et extends it{constructor(t,e){super(t,e),this.params=st,this.bar=new Gt(this.graphicSelection,{})}initGraphic(t){this.params={...this.params,...t,graphicRowBarStack:{...this.params.graphicRowBarStack,...t.graphicRowBarStack}},this.bar.setParams({...this.params.graphicRowBarStack,colors:this.params.colors,highlightTarget:this.params.highlightTarget,highlightDatumId:this.params.highlightDatumId,highlightItemId:this.params.highlightItemId,highlightGroupId:this.params.highlightGroupId}),this.bar.on("click",e=>{const a=this.makeActivedCallbackData(e.itemLabel??"",o);this.clickCallback(a)}).on("mouseover",e=>{const a=this.makeActivedCallbackData(e.itemLabel??"",o);this.showTooltip(a,o),this.mouseoverCallback(a)}).on("mousemove",e=>{const a=this.makeActivedCallbackData(e.itemLabel??"",o);this.showTooltip(a,o),this.mousemoveCallback(a)}).on("mouseout",e=>{const a=this.makeActivedCallbackData("",o);this.showTooltip(void 0,o),this.mouseoutCallback(a)})}makeGraphicRenderData({dataset:t,xScale:e,yScale:a}){return t.data.map((i,r)=>{const s=t.itemLabels&&t.itemLabels[r]?t.itemLabels[r]:O;return i.map((h,n)=>{const c=t.yLabels[n],m=a(c)||0;return{...h,id:`${s}_${c}`,itemIndex:r,itemLabel:s,yIndex:n,yLabel:c,x:e(h.value)||0,y:m}})})}getMinAndMaxValue(t){if(!t.length)return[0,0];let e=[];for(let a=0;a<t[0].length;a++){e[a]=0;for(let i=0;i<t.length;i++)e[a]+=t[i][a].value}return e.reduce((a,i)=>[i<a[0]?i:a[0],i>a[1]?i:a[1]],[1/0,0])}makeYDataMap({renderData:t,yLabels:e}){let a=new Map;return t.length&&t.forEach((i,r)=>{i.forEach((s,h)=>{const n=a.get(e[h])??[];n.push(s),a.set(e[h],n)})}),a}makeItemDataMap({renderData:t,itemLabels:e}){let a=new Map;return t.length&&e.forEach((i,r)=>{a.set(i,t[r])}),a}setGraphicData({renderData:t,itemLabels:e,yLabels:a,xScale:i,yScale:r}){this.bar.setDataset({data:t,yLabels:a,itemLabels:e??[O],axisHeight:this.axisHeight,zeroX:0})}renderGraphic(){this.bar.render()}renderGraphicCoverHighlight({eventData:t,xScale:e,yScale:a,padding:i}){}}const q={colors:L,outerRadius:.95,innerRadius:0,outerMouseoverRadius:1,enterDuration:800,startAngle:0,endAngle:Math.PI*2,padAngle:.02,cornerRadius:0,highlightTarget:"item",highlightDatumId:"",highlightItemId:""},Xt=({pathSelection:l,enter:t,exit:e,data:a,lastData:i,params:r})=>l&&!t.size()&&!e.size()?s=>{const h=a.map((n,c)=>{const m=i[c]??{startAngle:0,endAngle:0,value:0};return{...n,startAngle:n.startAngle*s+m.startAngle*(1-s),endAngle:n.endAngle*s+m.endAngle*(1-s),value:n.value*s+m.value*(1-s)}});return $(h,r.startAngle,r.endAngle,1)}:s=>$(a,r.startAngle,r.endAngle,s),Yt=l=>{const t=new Map;return l.forEach(e=>{const a=t.get(e.data.itemLabel)??[];a.push(e),t.set(e.data.itemLabel,a)}),t},$=(l,t,e,a)=>l.map((i,r)=>{const s=t+(i.startAngle-t)*a,h=s+(i.endAngle-i.startAngle)*a;return{...i,startAngle:s,endAngle:h}}),T=({dataset:l,datum:t,ItemDataMap:e,event:a})=>({dataset:l,groupData:t?[t]:[],itemData:t?e.get(t.data.itemLabel):[],datum:t||null,itemLabel:t?t.data.itemLabel:"",itemIndex:t?t.data.itemIndex:-1,clientX:a.clientX,clientY:a.clientY,offsetX:a.offsetX,offsetY:a.offsetY}),Wt=l=>({dataset:l,groupData:[],itemData:[],datum:null,itemLabel:"",itemIndex:-1,clientX:-1,clientY:-1,offsetX:-1,offsetY:-1});let Ut=class{constructor(t,e){this.params=q,this.dataset={data:[],itemLabels:[],axisWidth:0},this.width=v,this.height=I,this.lastData=[],this.pieRenderData=[],this.pathSelection=void 0,this.ItemDataMap=new Map,this.mouseoverCallback=function(){},this.mousemoveCallback=function(){},this.mouseoutCallback=function(){},this.clickCallback=function(){},this.enterDurationCallback=function(){},this.setDonutEvent=a=>{a.on("mouseover",(i,r,s)=>{o.stopPropagation(),this.params.highlightTarget!=null&&this.params.highlightTarget!="none"&&(this.params.highlightTarget==="item"?this.highlight(a,i.data.itemLabel,void 0):this.params.highlightTarget==="datum"&&this.highlight(a,void 0,i.data.id));const h=T({dataset:this.dataset,datum:i,ItemDataMap:this.ItemDataMap,event:o});this.mouseoverCallback(h)}).on("mousemove",(i,r,s)=>{o.stopPropagation();const h=T({dataset:this.dataset,datum:i,ItemDataMap:this.ItemDataMap,event:o});this.mousemoveCallback(h)}).on("mouseout",(i,r,s)=>{o.stopPropagation(),this.initHighlight();const h=T({dataset:this.dataset,datum:i,ItemDataMap:this.ItemDataMap,event:o});this.mouseoutCallback(h)}).on("click",(i,r,s)=>{o.stopPropagation();const h=T({dataset:this.dataset,datum:i,ItemDataMap:this.ItemDataMap,event:o});this.clickCallback(h)})},this.selection=t,this.gSelection=t.append("g")}setParams(t){this.params={...this.params,...t},this.colorScale=k(this.dataset.itemLabels,this.params.colors)}select(){return this.selection}remove(){this.selection.remove()}setDataset(t){this.dataset=t,this.ItemDataMap=Yt(t.data),this.colorScale=k(this.dataset.itemLabels,this.params.colors)}render(){this.arc=F({axisWidth:this.dataset.axisWidth,innerRadius:this.params.innerRadius,outerRadius:this.params.outerRadius,padAngle:this.params.padAngle,cornerRadius:this.params.cornerRadius}),this.arcMouseover=F({axisWidth:this.dataset.axisWidth,innerRadius:this.params.innerRadius,outerRadius:this.params.outerMouseoverRadius,padAngle:this.params.padAngle,cornerRadius:this.params.cornerRadius});let t=this.gSelection.selectAll("path").data(this.dataset.data,r=>r.data.id),e=t.enter(),a=t.exit();const i=Xt({pathSelection:this.pathSelection,enter:e,exit:a,data:this.dataset.data,lastData:this.lastData,params:this.params});this.gSelection.transition().duration(this.params.enterDuration).tween("move",(r,s,h)=>n=>{this.pieRenderData=i(n),this.renderDonut(this.gSelection,this.pieRenderData,this.arc);const c=Wt(this.dataset);this.enterDurationCallback(c,n)}).on("end",(r,s,h)=>{this.pieRenderData=$(this.dataset.data,this.params.startAngle,this.params.endAngle,1),this.renderDonut(this.gSelection,this.pieRenderData,this.arc),this.params.highlightTarget&&this.params.highlightTarget!="none"&&this.pathSelection.style("cursor","pointer"),this.pathSelection&&this.setDonutEvent(this.pathSelection),this.initHighlight(),this.lastData=Object.assign([],this.dataset.data)})}on(t,e){return t==="click"?this.clickCallback=e:t==="mouseover"?this.mouseoverCallback=e:t==="mousemove"?this.mousemoveCallback=e:t==="mouseout"?this.mouseoutCallback=e:t==="enterDuration"&&(this.enterDurationCallback=e),this}initHighlight(){this.removeHighlight(),(this.params.highlightItemId||this.params.highlightDatumId)&&this.highlight(this.pathSelection,this.params.highlightItemId,this.params.highlightDatumId)}highlight(t,e,a){if(!t)return;let i=[];if(a&&i.push(a),e){const r=this.dataset.data.filter(s=>s.data.itemLabel===e).map(s=>s.id);i=i.concat(r)}t.each((r,s,h)=>{const n=D(h[s]);i.includes(r.data.id)?n.transition().ease(K).duration(500).style("opacity",1).attr("d",c=>this.arcMouseover(c)):n.transition().style("opacity",.3).attr("d",c=>this.arc(c))})}removeHighlight(){this.pathSelection&&this.pathSelection.transition().style("opacity",1).attr("d",t=>this.arc(t))}renderDonut(t,e,a){let i=t.selectAll("path").data(e,h=>h.data.id),r=i.enter().append("path").classed("bpchart__pie-path",!0),s=i.exit();r.append("path"),this.pathSelection=i.merge(r),this.pathSelection.attr("fill",(h,n)=>this.colorScale(h.data.itemLabel)).attr("d",(h,n)=>a(h)),s.remove()}};const J={solidColor:void 0,colors:L,outerRadius:1,enterDuration:800,startAngle:0,endAngle:Math.PI*2,centroid:2.3,fontSize:12,text:l=>String(l.value),highlightTarget:"item",highlightDatumId:"",highlightItemId:""},Ft=l=>{const t=new Map;return l.forEach(e=>{const a=t.get(e.data.itemLabel)??[];a.push(e),t.set(e.data.itemLabel,a)}),t},$t=(l,t,e)=>l.data.map((a,i)=>{const[r,s]=t.centroid(a);return{...a,arcIndex:i,arcLabel:l.arcLabels[i],x:r*e,y:s*e}}),M=({dataset:l,datum:t,ItemDataMap:e,event:a})=>({dataset:l,groupData:[t],itemData:e.get(t.data.itemLabel),datum:t,itemLabel:t.data.itemLabel,itemIndex:t.data.itemIndex,clientX:a.clientX,clientY:a.clientY,offsetX:a.offsetX,offsetY:a.offsetY});class Bt{constructor(t,e){this.params=J,this.dataset={data:[],itemLabels:[],arcLabels:[],axisWidth:0},this.width=v,this.height=I,this.renderData=[],this.labelSelection=void 0,this.ItemDataMap=new Map,this.mouseoverCallback=function(){},this.mousemoveCallback=function(){},this.mouseoutCallback=function(){},this.clickCallback=function(){},this.setDonutEvent=a=>{a.on("mouseover",(i,r,s)=>{o.stopPropagation(),this.params.highlightTarget!=null&&this.params.highlightTarget!="none"&&(this.params.highlightTarget==="item"?this.highlight(a,i.data.itemLabel,void 0):this.params.highlightTarget==="datum"&&this.highlight(a,void 0,i.data.id));const h=M({dataset:this.dataset,datum:i,ItemDataMap:this.ItemDataMap,event:o});this.mouseoverCallback(h)}).on("mousemove",(i,r,s)=>{o.stopPropagation();const h=M({dataset:this.dataset,datum:i,ItemDataMap:this.ItemDataMap,event:o});this.mousemoveCallback(h)}).on("mouseout",(i,r,s)=>{o.stopPropagation(),this.initHighlight();const h=M({dataset:this.dataset,datum:i,ItemDataMap:this.ItemDataMap,event:o});this.mouseoutCallback(h)}).on("click",(i,r,s)=>{o.stopPropagation();const h=M({dataset:this.dataset,datum:i,ItemDataMap:this.ItemDataMap,event:o});this.clickCallback(h)})},this.selection=t,this.gSelection=t.append("g")}setParams(t){this.params={...this.params,...t},this.colorScale=k(this.dataset.itemLabels,this.params.colors)}select(){return this.selection}remove(){this.selection.remove()}setDataset(t){this.dataset=t,this.ItemDataMap=Ft(t.data),this.colorScale=k(this.dataset.itemLabels,this.params.colors)}render(){this.arc=F({axisWidth:this.dataset.axisWidth,innerRadius:0,outerRadius:this.params.outerRadius,padAngle:0,cornerRadius:0});const t=$t(this.dataset,this.arc,this.params.centroid);this.renderLabel(this.gSelection,t,this.arc),this.labelSelection&&this.setDonutEvent(this.labelSelection)}on(t,e){return t==="click"?this.clickCallback=e:t==="mouseover"?this.mouseoverCallback=e:t==="mousemove"?this.mousemoveCallback=e:t==="mouseout"&&(this.mouseoutCallback=e),this}initHighlight(){this.removeHighlight(),(this.params.highlightItemId||this.params.highlightDatumId)&&this.highlight(this.labelSelection,this.params.highlightItemId,this.params.highlightDatumId)}highlight(t,e,a){if(!t)return;let i=[];if(a&&i.push(a),e){const r=this.dataset.data.filter(s=>s.data.itemLabel===e).map(s=>s.data.id);i=i.concat(r)}t.each((r,s,h)=>{const n=D(h[s]);i.includes(r.id)?n.transition().duration(200).style("opacity",1):n.transition().duration(200).style("opacity",.3)})}removeHighlight(){this.labelSelection&&this.labelSelection.transition().duration(200).style("opacity",1)}renderLabel(t,e,a){let i=t.selectAll("text").data(e,h=>h.id),r=i.enter().append("text").classed("bpchart__text",!0),s=i.exit();r.append("text"),this.labelSelection=i.merge(r),this.labelSelection.attr("font-weight","bold").attr("text-anchor","middle").style("dominant-baseline","middle").style("cursor",h=>this.params.highlightTarget&&this.params.highlightTarget!="none"?"pointer":"none").text(h=>this.params.text(h)).attr("font-size",this.params.fontSize).attr("fill",(h,n)=>this.params.solidColor??this.colorScale(h.data.itemLabel)).transition().attr("transform",h=>"translate("+h.x+","+h.y+")").on("end",()=>this.initHighlight()),s.remove()}}const Q={padding:A,tooltipFollowing:{templateHtml:l=>`
      <div>
        <div>${l.datum.data.arcLabel}</div>
        <div>${l.datum.value}</div>
      </div>
    `}},Vt={...Q,graphicArcPie:q,labelArcPie:J,startAngle:0,endAngle:Math.PI*2,colors:L,enterDuration:800,highlightTarget:"datum",highlightDatumId:"",highlightItemId:"",centerText:(l,t,e)=>[],centerTextAttrs:[],centerTextStyles:[]},tt="__DEFAULT__",z=(l,t,e)=>{const a=l-e.left-e.right,i=t-e.top-e.bottom;return a<i?a:i},Ot=(l,t,e)=>l.map((a,i)=>{const r=a.itemLabel??tt;return{...a,arcIndex:i,arcLabel:e[i],itemIndex:t.indexOf(r),itemLabel:r,id:e[i]}});class zt{constructor(t,e){this.params=Q,this.dataset={data:[],itemLabels:[],arcLabels:[]},this.width=v,this.height=I,this.mouseoverCallback=function(){},this.mousemoveCallback=function(){},this.mouseoutCallback=function(){},this.clickCallback=function(){},this.graphicData=[],this.itemLabels=[],this.arcLabels=[],this.shorterSideWidth=0,this.middleX=0,this.middleY=0,this.selection=t,this.graphicGSelection=t.append("g")}setParams(t){this.initGraphic(t),this.shorterSideWidth=z(this.width,this.height,this.params.padding),this.params.tooltipFollowing?this.tooltip=new ht(this.selection,{templateHtml:this.params.tooltipFollowing.templateHtml,type:this.params.tooltipFollowing.type??"white",insideBoxMode:this.params.tooltipFollowing.insideBoxMode??!0}):this.tooltip&&(this.tooltip.remove(),this.tooltip=void 0)}resize({width:t,height:e}={width:this.width,height:this.height}){this.width=t,this.height=e,this.shorterSideWidth=z(this.width,this.height,this.params.padding);const a=this.width/2,i=this.height/2;(a!==this.middleX||i!==this.middleY)&&(this.middleX=a,this.middleY=i,this.graphicGSelection.transition().attr("transform",`translate(${this.middleX}, ${this.middleY})`))}select(){return this.selection}remove(){this.selection.remove()}setDataset(t){this.dataset=t,this.itemLabels=this.dataset.itemLabels&&this.dataset.itemLabels.length?this.dataset.itemLabels:[tt],this.arcLabels=this.dataset.arcLabels,this.graphicData=Ot(this.dataset.data,this.itemLabels,this.arcLabels)}render(){this.setGraphicData({graphicData:this.graphicData,itemLabels:this.itemLabels,arcLabels:this.arcLabels,shorterSideWidth:this.shorterSideWidth}),this.renderGraphic()}on(t,e){return t==="click"?this.clickCallback=e:t==="mouseover"?this.mouseoverCallback=e:t==="mousemove"?this.mousemoveCallback=e:t==="mouseout"&&(this.mouseoutCallback=e),this}showTooltip(t,e){this.tooltip&&(e&&t?this.tooltip.setDatum({data:t,x:o.clientX,y:o.clientY}):this.tooltip.remove())}}const jt=({data:l,startAngle:t,endAngle:e,itemLabels:a,arcLabels:i})=>lt().startAngle(t).endAngle(e).value(h=>h.value).sort(null)(l).map((h,n)=>{const c=h.data.itemLabel;return{...h,itemIndex:a.indexOf(c),itemLabel:c,id:i[n]}}),P=(l,t,e)=>{const a=l.dataset.data.findIndex(i=>l.datum&&i.id===l.datum.id);return{dataset:t,groupData:l.groupData,itemData:l.itemData,datum:l.datum,itemIndex:l.itemIndex,itemLabel:l.itemLabel,arcIndex:a,arcLabel:t.arcLabels[a],clientX:e.clientX,clientY:e.clientY,offsetX:e.offsetX,offsetY:e.offsetY}},R=(l,t,e)=>{const a=l.dataset.data.findIndex(i=>l.datum&&i.data.id===l.datum.data.id);return{dataset:t,groupData:l.groupData,itemData:l.itemData,datum:l.datum,itemIndex:l.itemIndex,itemLabel:l.itemLabel,arcIndex:a,arcLabel:t.arcLabels[a],clientX:e.clientX,clientY:e.clientY,offsetX:e.offsetX,offsetY:e.offsetY}},W=({eventCallback:l,eventName:t,t:e,centerText:a,centerTextAttrs:i,centerTextStyles:r})=>a(l,t,e).map((h,n)=>({text:h,attr:i[n],style:r[n]}));class Nt extends zt{constructor(t,e){super(t,e),this.params=Vt,this.pieSelection=this.graphicGSelection.append("g"),this.labelSelection=this.graphicGSelection.append("g"),this.centerTextSelection=this.graphicGSelection.append("g"),this.pie=new Ut(this.pieSelection,{}),this.label=new Bt(this.labelSelection,{})}initGraphic(t){this.params={...this.params,...t,graphicArcPie:{...this.params.graphicArcPie,...t.graphicArcPie},labelArcPie:{...this.params.labelArcPie,...t.labelArcPie}},this.params.graphicArcPie={...this.params.graphicArcPie,colors:this.params.colors,startAngle:this.params.startAngle,endAngle:this.params.endAngle,highlightTarget:this.params.highlightTarget,highlightDatumId:this.params.highlightDatumId,highlightItemId:this.params.highlightItemId},this.params.labelArcPie={...this.params.labelArcPie,colors:this.params.colors,startAngle:this.params.startAngle,endAngle:this.params.endAngle,outerRadius:this.params.graphicArcPie.outerRadius,highlightTarget:this.params.highlightTarget,highlightDatumId:this.params.highlightDatumId,highlightItemId:this.params.highlightItemId},this.pie.setParams(this.params.graphicArcPie),this.pie.on("enterDuration",(e,a)=>{const i=W({eventCallback:e,eventName:"enterDuration",t:a,centerText:this.params.centerText,centerTextAttrs:this.params.centerTextAttrs,centerTextStyles:this.params.centerTextStyles});this.renderText(this.centerTextSelection,i)}).on("click",e=>{const a=P(e,this.dataset,o);this.clickCallback(a)}).on("mouseover",e=>{const a=P(e,this.dataset,o);this.showTooltip(a,o),this.mouseoverCallback(a),this.label.setParams({highlightItemId:this.params.highlightTarget==="item"?a.itemLabel:void 0,highlightDatumId:this.params.highlightTarget==="datum"?a.datum.id:void 0}),this.label.render();const i=W({eventCallback:a,eventName:"mouseover",t:1,centerText:this.params.centerText,centerTextAttrs:this.params.centerTextAttrs,centerTextStyles:this.params.centerTextStyles});this.renderText(this.centerTextSelection,i)}).on("mousemove",e=>{const a=P(e,this.dataset,o);this.showTooltip(a,o),this.mousemoveCallback(a)}).on("mouseout",e=>{const a=P(e,this.dataset,o);this.showTooltip(void 0,o),this.mouseoutCallback(a),this.label.setParams({highlightItemId:this.params.labelArcPie.highlightItemId,highlightDatumId:this.params.labelArcPie.highlightDatumId}),this.label.render();const i=W({eventCallback:a,eventName:"mouseout",t:1,centerText:this.params.centerText,centerTextAttrs:this.params.centerTextAttrs,centerTextStyles:this.params.centerTextStyles});this.renderText(this.centerTextSelection,i)}),this.label.setParams(this.params.labelArcPie),this.label.on("click",e=>{const a=R(e,this.dataset,o);this.clickCallback(a)}).on("mouseover",e=>{const a=R(e,this.dataset,o);this.showTooltip(a,o),this.mouseoverCallback(a),this.pie.setParams({highlightItemId:this.params.highlightTarget==="item"?a.itemLabel:void 0,highlightDatumId:this.params.highlightTarget==="datum"?a.datum.id:void 0}),this.pie.render()}).on("mousemove",e=>{const a=R(e,this.dataset,o);this.showTooltip(a,o),this.mousemoveCallback(a)}).on("mouseout",e=>{const a=R(e,this.dataset,o);this.showTooltip(void 0,o),this.mouseoutCallback(a),this.pie.setParams({highlightItemId:this.params.graphicArcPie.highlightItemId,highlightDatumId:this.params.graphicArcPie.highlightDatumId}),this.pie.render()})}setGraphicData({graphicData:t,itemLabels:e,arcLabels:a,shorterSideWidth:i}){const r=jt({data:t,startAngle:this.params.startAngle,endAngle:this.params.endAngle,itemLabels:e,arcLabels:a});this.pie.setDataset({data:r,itemLabels:e,axisWidth:i}),this.label.setDataset({data:r,itemLabels:e,arcLabels:a,axisWidth:i})}renderGraphic(){this.pie.render(),this.label.render()}renderText(t,e){const a=t.selectAll("text.bpchart__text").data(e),i=a.enter().append("text").classed("bpchart__text",!0);a.merge(i).each((s,h,n)=>{const c=D(n[h]).text(s.text);Object.keys(s.attr).forEach(m=>{c.attr(m,s.attr[m])}),Object.keys(s.style).forEach(m=>{c.style(m,s.style[m])})}),a.exit().remove()}}const Kt=p("ul",null,[p("li",null,"中山區"),p("li",null,"有效票數：141,880"),p("li",null,"無效票數：1,922"),p("li",null,"投票數：143,802"),p("li",null,"投票率：75.6097％")],-1),U={__name:"ChartArcPie",setup(l){const t={data:[{itemLabel:"宋楚瑜、余湘",value:6367},{itemLabel:"韓國瑜、張善政",value:56491},{itemLabel:"蔡英文、賴清德",value:79022}],itemLabels:["宋楚瑜、余湘","韓國瑜、張善政","蔡英文、賴清德"],arcLabels:["宋楚瑜、余湘","韓國瑜、張善政","蔡英文、賴清德"]},e={graphicArcPie:{outerMouseoverRadius:1,outerRadius:.95,innerRadius:.7,padAngle:.02,cornerRadius:0},centerText:(a,i,r=1)=>i==="mouseover"?[a.arcLabel,a.datum.value]:["蔡英文、賴清德",Math.round(a.dataset.data.reduce((s,h)=>s+h.value,0)*r)],centerTextStyles:[{"font-weight":"bold","text-anchor":"middle","pointer-events":"none","dominant-baseline":"middle","font-size":20,fill:"#000"},{"pointer-events":"none","dominant-baseline":"middle","text-anchor":"middle","font-size":18,fill:"rgb(96, 98, 102)"}],centerTextAttrs:[{transform:"translate(0, -12)"},{transform:"translate(0, 48)"}],colors:["#FF6310","#000095","#1B9431"]};return(a,i)=>(X(),Y("div",null,[d(B,{module:V(Nt),dataset:t,params:e},null,8,["module"]),b(" 選區票數說明：(需另外切版) "),Kt]))}},j={__name:"ChartRow",setup(l){const t={data:[[{value:1653834},{value:264533},{value:1179611},{value:1780844}],[{value:513287},{value:80812},{value:377234},{value:518714}]],yLabels:["台北市","新竹市","台南市","高雄市"],itemLabels:["發出票數","剩餘票數"]},e={graphicRowBarStack:{barWidth:20,barR:5}};return(a,i)=>(X(),Y("div",null,[d(B,{module:V(Et),dataset:t,params:e},null,8,["module"])]))}},at={xLabel:"x",yLabel:"y",xLabelAnchor:"start",yLabelAnchor:"end",xLabelOffset:[0,0],yLabelOffset:[0,0],xTickPadding:20,yTickPadding:20,xTickLine:!1,yTickLine:!0,xTickLineDasharray:"none",yTickLineDasharray:"none",yTickFormat:",.0f",yTicks:4,axisLineColor:rt,axisLabelColor:ot,rotateXLabel:!1,padding:A,xVisible:!0,yVisible:!0},w=6;class Zt{constructor(t,e){this.width=v,this.height=I,this.dataset={xScale:nt(),yScale:ct(),maxValue:0},this.params=at,this.xAxisSelection=void 0,this.yAxisSelection=void 0,this.xLabelSelection=void 0,this.yLabelSelection=void 0,this.axisWidth=G(this.width,A),this.axisHeight=E(this.height,A),this.selection=t}setParams(t){this.params={...this.params,...t}}setDataset(t){this.dataset=t}resize({width:t=this.width,height:e=this.height}){this.width=t,this.height=e,this.axisWidth=G(this.width,this.params.padding),this.axisHeight=E(this.height,this.params.padding)}render(){this.renderXPointAxis(),this.renderYLinearAxis();const t=this.dataset.yScale(0);this.renderZeroLine(this.selection,[{x1:0,y1:t,x2:this.axisWidth,y2:t}])}remove(){this.selection.remove()}renderXPointAxis(){let t=[];this.params.xVisible&&t.push(this.params);const e=this.selection.selectAll("g.xAxis").data(t),a=e.enter().append("g");this.xAxisSelection=e.merge(a).classed("xAxis",!0).attr("transform",n=>"translate("+n.padding.left+","+(n.padding.top+this.axisHeight)+")"),e.exit().remove();const i=this.selection.selectAll("text.xLabel").data(t),r=i.enter().append("text").classed("xLabel",!0).style("font-size","14px").style("font-weight","bold").style("dominant-baseline","hanging");if(this.xLabelSelection=i.merge(r).attr("x",n=>this.width-n.padding.right+n.xTickPadding).attr("y",n=>n.padding.top+this.axisHeight+n.yTickPadding+w).attr("transform",`translate(${this.params.xLabelOffset[0]}, ${this.params.xLabelOffset[1]})`).attr("text-anchor",this.params.xLabelAnchor).style("fill",this.params.axisLabelColor).text(n=>n.xLabel),i.exit().remove(),this.xLabelSelection.size()==0)return;this.xAxis=mt(this.dataset.xScale).scale(this.dataset.xScale).tickSize(this.params.xTickLine&&typeof this.params.xTickLine=="boolean"?-this.axisHeight:this.params.xTickLine&&typeof this.params.xTickLine=="number"?-this.axisHeight*this.params.xTickLine:w).tickSizeOuter(0).tickFormat(n=>n).tickPadding(this.params.xTickPadding);const s=this.xAxisSelection.transition().duration(50).call(this.xAxis).attr("text-anchor",()=>this.params.rotateXLabel!==!1?"end":"middle");s.selectAll("line").style("fill","none").style("stroke",this.params.axisLineColor).style("stroke-dasharray",this.params.xTickLineDasharray),s.selectAll("path").style("fill","none").style("stroke",this.params.axisLineColor).style("shape-rendering","crispEdges");const h=s.selectAll("text").style("font-family","sans-serif").style("font-size","14px").style("color",this.params.axisLabelColor).attr("transform-origin",`-5 ${this.params.xTickPadding+w}`);this.params.rotateXLabel===!0?h.attr("transform","translate(0,0) rotate(-45)"):typeof this.params.rotateXLabel=="number"&&h.attr("transform",`translate(0,0) rotate(${this.params.rotateXLabel})`)}renderYLinearAxis(){let t=[];this.params.xVisible&&t.push(this.params);const e=this.selection.selectAll("g.yAxis").data(t),a=e.enter().append("g");this.yAxisSelection=e.merge(a).classed("yAxis",!0).attr("transform",h=>"translate("+h.padding.left+","+h.padding.top+")"),e.exit().remove();const i=this.selection.selectAll("text.yLabel").data(t),r=i.enter().append("text").classed("yLabel",!0).style("font-size","14px").style("font-weight","bold");if(this.yLabelSelection=i.merge(r).attr("x",h=>h.padding.left-h.xTickPadding).attr("y",h=>h.padding.top-h.yTickPadding).attr("text-anchor",this.params.yLabelAnchor).attr("transform",`translate(${this.params.yLabelOffset[0]}, ${this.params.yLabelOffset[1]})`).style("fill",this.params.axisLabelColor).text(h=>h.yLabel),i.exit().remove(),this.yLabelSelection.size()==0)return;this.yAxis=dt(this.dataset.yScale).scale(this.dataset.yScale).ticks(this.dataset.maxValue>this.params.yTicks?this.params.yTicks:this.dataset.maxValue===0?1:Math.ceil(this.dataset.maxValue)).tickFormat(h=>pt(h,this.params.yTickFormat)).tickSize(this.params.yTickLine&&typeof this.params.yTickLine=="boolean"?-this.axisWidth:this.params.yTickLine&&typeof this.params.yTickLine=="number"?-this.axisWidth*this.params.yTickLine:w).tickPadding(this.params.yTickPadding);const s=this.yAxisSelection.transition().duration(100).call(this.yAxis);s.selectAll("line").style("fill","none").style("stroke",this.params.axisLineColor).style("stroke-dasharray",this.params.yTickLineDasharray),s.selectAll("path").style("fill","none").style("stroke","none").style("shape-rendering","crispEdges"),s.selectAll("text").style("font-family","sans-serif").style("font-size","14px").style("color",this.params.axisLabelColor)}renderZeroLine(t,e){const a=t.selectAll("g.bpchart__zero-line").data(e),i=a.enter().append("g").classed("bpchart__zero-line",!0).attr("transform",s=>"translate("+this.params.padding.left+","+this.params.padding.top+")");a.exit().remove();const r=a.merge(i);i.append("line"),r.select("line").attr("stroke",this.params.axisLabelColor).attr("stroke-width",1).transition().duration(100).attr("x1",s=>s.x1).attr("y1",s=>s.y1).attr("x2",s=>s.x2).attr("y2",s=>s.y2).attr("opacity",s=>s.y1>=0&&s.y1<=this.axisHeight?1:0)}}const qt={barWidth:0,barGroupPadding:20,barR:!1,colors:L,highlightTarget:"item",highlightGroupId:"",highlightItemId:"",highlightDatumId:"",enterDuration:800},Jt={lineCurve:"curveLinear",colors:L,highlightTarget:"item",highlightItemId:"",enterDuration:800},x={axisColumn:at,tooltipAside:{templateHtml:l=>l.groupData&&l.groupData[0]?`
          <div>
            <div>${l.groupData[0].xLabel}</div>
            <div>${l.groupData.map(t=>t.value).join(",")}</div>          
          </div>
        `:""},colors:L,padding:A,highlightTarget:"datum",highlightDatumId:"",highlightItemId:"",showAuxLine:!1,domainMinValue:0,domainMaxValue:void 0,domainMinRange:void 0,domainMaxRange:.95},Qt={...x,highlightTarget:"item",graphicColumnLine:gt,graphicDot:Z,showDot:"hover"};({...x,graphicColumnBar:ut});({...x,graphicColumnBarGroup:bt});({...x});({...x,graphicColumnBarStack:xt});({...x,graphicDot:Z});const N=(l,t)=>({...l,padding:t}),ta=({dataset:l,activedItemId:t,XDataMap:e,ItemDataMap:a,padding:i,xRangeScale:r,event:s})=>{if(!s||!r)return{dataset:l,groupData:[],itemData:[],datum:void 0,xLabel:"",xIndex:-1,itemLabel:"",itemIndex:-1,rangeIndex:-1,clientX:-1,clientY:-1,offsetX:-1,offsetY:-1};const h=Number(s.offsetX)-i.left,n=Number(r(h)??0),c=l.xLabels[n],m=e.get(c)??[];let C=[],g;return t&&(C=a.get(t)??[],g=m.find(y=>y.itemLabel===t)),{dataset:l,groupData:m,itemData:C,datum:g,xLabel:c,xIndex:n,itemLabel:g?g.itemLabel:"",itemIndex:g?g.itemIndex:-1,rangeIndex:n,clientX:o.clientX,clientY:o.clientY,offsetX:o.offsetX,offsetY:o.offsetY}},aa=({dataset:l,filterConfig:t,params:e})=>{let a=[];if(!t||!t.filterItems||!l.itemLabels)return{filteredDataset:l,filteredParams:e};const i=t.filterItems.reduce((s,h)=>(s[h]=!0,s),{}),r=s=>!s.itemLabel||i[s.itemLabel]==!0;return l.data[0]&&Array.isArray(l.data[0])?a=l.data.filter((s,h)=>i[l.itemLabels[h]]==!0).map(s=>s.filter(r)):a=l.data.filter(r),{filteredDataset:{...l,data:a,itemLabels:t&&t.filterItems?t.filterItems:l.itemLabels},filteredParams:{...e,colors:l.itemLabels&&t.filterItems?e.colors.filter((s,h)=>!l.itemLabels[h]||i[l.itemLabels[h]]):e.colors}}};class ea{constructor(t,e){this.width=v,this.height=I,this.dataset={data:[],xLabels:[]},this.params=x,this.filterConfig={},this.graphicSelection=void 0,this.axisWidth=0,this.axisHeight=0,this.clickCallback=function(){},this.mouseoverCallback=function(){},this.mousemoveCallback=function(){},this.mouseoutCallback=function(){},this.XDataMap=new Map,this.ItemDataMap=new Map,this.renderData=[],this.filteredDataset={data:[],xLabels:[]},this.filteredParams=x,this.axisParams=this.params.axisColumn,this.xAxisSelection=void 0,this.yAxisSelection=void 0,this.xLabelSelection=void 0,this.yLabelSelection=void 0,this.auxLineSelection=void 0,this.minValue=0,this.maxValue=0,this.makeActivedCallbackData=(a,i)=>ta({dataset:this.dataset,activedItemId:a,XDataMap:this.XDataMap,ItemDataMap:this.ItemDataMap,padding:this.params.padding,xRangeScale:this.xRangeScale,event:i}),this.selection=t,this.axisSelection=t.append("g"),this.axisColumn=new Zt(this.axisSelection,{}),this.rangeSelection=this.selection.append("rect").attr("opacity",0),this.setRangeEvent(this.rangeSelection),this.graphicSelection=t.append("g"),this.coverSelection=this.selection.append("g").classed("bpchart__cover",!0),this.utilAuxLine=new ft(this.coverSelection),this.setCoverEvent(this.selection)}setParams(t){this.params={...this.params,...t,axisColumn:{...this.params.axisColumn,...t.axisColumn}},this.params.tooltipAside&&!this.tooltip&&(this.tooltip=new Dt(this.selection,{templateHtml:this.params.tooltipAside.templateHtml,type:this.params.tooltipAside.type??"white",yLine:this.params.tooltipAside.yLine??!1})),this.axisParams=N(this.params.axisColumn,this.params.padding),this.axisWidth=G(this.width,this.params.padding),this.axisHeight=E(this.height,this.params.padding),this.axisColumn.setParams(this.axisParams),this.graphicSelection.attr("transform",`translate(${this.params.padding.left}, ${this.params.padding.top})`),this.coverSelection.attr("transform",`translate(${this.params.padding.left}, ${this.params.padding.top})`)}select(){return this.selection}remove(){this.selection.remove()}resize({width:t=this.width,height:e=this.height}){this.width=t,this.height=e,this.axisParams=N(this.params.axisColumn,this.params.padding),this.axisWidth=G(this.width,this.params.padding),this.axisHeight=E(this.height,this.params.padding),this.axisColumn.setParams(this.axisParams),this.axisColumn.resize({width:t,height:e}),this.rangeSelection.attr("x",this.params.padding.left).attr("y",this.params.padding.top).attr("width",this.axisWidth).attr("height",this.axisHeight)}setDataset(t){this.dataset=t}filter(t){this.filterConfig={...this.filterConfig,...t}}render(){this.xRangeScale=Lt({axisLabels:this.dataset.xLabels,axisWidth:this.axisWidth});const{filteredDataset:t,filteredParams:e}=aa({dataset:this.dataset,filterConfig:this.filterConfig,params:this.params});this.filteredDataset=t,this.filteredParams=e;const[a,i]=this.getMinAndMaxValue(this.filteredDataset.data);this.minValue=a,this.maxValue=i,this.xScale=kt({axisLabels:this.filteredDataset.xLabels,axisWidth:this.axisWidth}),this.yScale=At({maxValue:this.maxValue,minValue:this.minValue,axisWidth:this.axisHeight,domainMinValue:this.params.domainMinValue,domainMaxValue:this.params.domainMaxValue,domainMinRange:this.params.domainMinRange,domainMaxRange:this.params.domainMaxRange,reverse:!0}),this.renderData=this.makeGraphicRenderData({dataset:this.filteredDataset,xScale:this.xScale,yScale:this.yScale}),this.XDataMap=this.makeXDataMap({renderData:this.renderData,xLabels:this.filteredDataset.xLabels}),this.ItemDataMap=this.makeItemDataMap({renderData:this.renderData,itemLabels:this.filteredDataset.itemLabels??[]}),this.initGraphic(this.filteredParams),this.setGraphicData({renderData:this.renderData,itemLabels:this.filteredDataset.itemLabels??[],xLabels:this.filteredDataset.xLabels,xScale:this.xScale,yScale:this.yScale}),this.axisColumn.setDataset({xScale:this.xScale,yScale:this.yScale,maxValue:this.maxValue}),this.axisColumn.render(),this.renderGraphic()}on(t,e){return t==="click"?this.clickCallback=e:t==="mouseover"?this.mouseoverCallback=e:t==="mousemove"?this.mousemoveCallback=e:t==="mouseout"&&(this.mouseoutCallback=e),this}setRangeEvent(t){t.on("click",(e,a)=>{const i=this.makeActivedCallbackData("",o);this.clickCallback(i)}).on("mouseover",(e,a)=>{const i=this.makeActivedCallbackData("",o);this.mouseoverCallback(i)}).on("mousemove",e=>{const a=this.makeActivedCallbackData("",o);this.mousemoveCallback(a)}).on("mouseout",e=>{if(o.offsetX>0&&o.offsetX<this.width&&o.offsetY>0&&o.offsetY<this.height)return;const a=this.makeActivedCallbackData("",o);this.mouseoutCallback(a)})}showTooltip(t,e){e&&t&&this.xScale?this.tooltip.setDatum({data:t,x:t.clientX-t.offsetX+this.params.padding.left+this.xScale(t.xLabel),y:o.clientY}):this.tooltip.remove()}setCoverEvent(t){t.on("mouseover",(e,a)=>{const i=this.makeActivedCallbackData("",o);this.coverHighlight(i),this.showTooltip(i,o)}).on("mousemove",e=>{const a=this.makeActivedCallbackData("",o);this.coverHighlight(a),this.showTooltip(a,o)}).on("mouseout",e=>{o.offsetX>0&&o.offsetX<this.width&&o.offsetY>0&&o.offsetY<this.height||(this.coverHighlight(void 0),this.tooltip.remove())})}coverHighlight(t){this.params.showAuxLine&&this.renderAuxLine({coverSelection:this.coverSelection,xLabels:this.dataset.xLabels,activeRangeIndex:t?t.rangeIndex:-1,xScale:this.xScale,padding:this.params.padding,axisHeight:this.axisHeight}),this.renderGraphicCoverHighlight({eventData:t,xScale:this.xScale,yScale:this.yScale,padding:this.params.padding})}renderAuxLine({coverSelection:t,xLabels:e,activeRangeIndex:a,xScale:i,padding:r,axisHeight:s}){if(!i)return;const h=e.map((n,c)=>{const m=i(n)||0;return{x1:m,x2:m,y1:0,y2:s,active:a==c}});this.utilAuxLine.setData(h),this.utilAuxLine.render()}}const H="__DEFAULT__";class ia extends ea{constructor(t,e){super(t,e),this.params=Qt,this.line=new vt(this.graphicSelection,{}),this.dot=new It(this.coverSelection,{})}initGraphic(t){this.params.graphicColumnLine={...this.params.graphicColumnLine,colors:t.colors,highlightItemId:t.highlightItemId,highlightTarget:t.highlightTarget==="item"?"item":"none"},this.params.graphicDot={...this.params.graphicDot,colors:t.colors,highlightItemId:t.highlightItemId,highlightTarget:t.highlightTarget==="item"?"item":"none"},this.line.setParams(this.params.graphicColumnLine),this.line.on("click",e=>{const a=this.makeActivedCallbackData(e.itemLabel??"",o);this.clickCallback(a)}).on("mouseover",e=>{const a=this.makeActivedCallbackData(e.itemLabel??"",o);this.showTooltip(a,o),this.mouseoverCallback(a),this.params.highlightTarget==="item"&&(this.dot.setParams({highlightItemId:e.itemLabel}),this.dot.render())}).on("mousemove",e=>{const a=this.makeActivedCallbackData(e.itemLabel??"",o);this.showTooltip(a,o),this.mousemoveCallback(a)}).on("mouseout",e=>{const a=this.makeActivedCallbackData("",o);this.showTooltip(void 0,o),this.mouseoutCallback(a),this.params.highlightTarget==="item"&&(this.dot.setParams({highlightItemId:this.params.highlightItemId}),this.dot.render())}),this.dot.setParams(this.params.graphicDot),this.dot.on("click",e=>{const a=this.makeActivedCallbackData(e.itemLabel??"",o);this.clickCallback(a)}).on("mouseover",e=>{const a=this.makeActivedCallbackData(e.itemLabel??"",o);this.showTooltip(a,o),this.mouseoverCallback(a),this.params.highlightTarget==="item"&&(this.line.setParams({highlightItemId:e.itemLabel}),this.line.render())}).on("mousemove",e=>{const a=this.makeActivedCallbackData(e.itemLabel??"",o);this.showTooltip(a,o),this.mousemoveCallback(a)}).on("mouseout",e=>{const a=this.makeActivedCallbackData("",o);this.showTooltip(void 0,o),this.mouseoutCallback(a),this.params.highlightTarget==="item"&&(this.line.setParams({highlightItemId:this.params.highlightItemId}),this.line.render())})}makeGraphicRenderData({dataset:t,xScale:e,yScale:a}){return t.data.map((i,r)=>{const s=t.itemLabels&&t.itemLabels[r]?t.itemLabels[r]:H;return i.map((h,n)=>{const c=t.xLabels[n];return{...h,id:`${s}_${c}`,itemIndex:r,itemLabel:s,xIndex:n,xLabel:c,x:e(c)||0,y:h.value?a(h.value):a(0)}})})}getMinAndMaxValue(t){return t.length?t.flat().reduce((e,a)=>[a.value&&a.value<e[0]?a.value:e[0],a.value&&a.value>e[1]?a.value:e[1]],[1/0,0]):[0,0]}makeXDataMap({renderData:t,xLabels:e}){let a=new Map;return t.length&&t.forEach((i,r)=>{i.forEach((s,h)=>{const n=a.get(e[h])??[];n.push(s),a.set(e[h]??"",n)})}),a}makeItemDataMap({renderData:t,itemLabels:e}){let a=new Map;return t.length&&t.forEach((i,r)=>{a.set(e[r]??"",i)}),a}setGraphicData({renderData:t,itemLabels:e,xLabels:a,xScale:i,yScale:r}){if(this.line.setDataset({data:t,itemLabels:e??[H],axisWidth:this.axisWidth,axisHeight:this.axisHeight,zeroY:r(0)}),this.params.showDot==="always"){const s=t.flat();this.dot.setDataset({data:s,itemLabels:this.filteredDataset.itemLabels??[H]})}}renderGraphic(){this.line.render(),this.params.showDot==="always"&&this.dot.render()}renderGraphicCoverHighlight({eventData:t,xScale:e,yScale:a,padding:i}){if(this.params.showDot==="hover"&&this.params.highlightTarget!=="none"){const r=t?t.groupData.filter(s=>s.value!=null).map(s=>({...s,id:s.itemLabel,x:e(s.xLabel),y:a(s.value)})):[];this.dot.setDataset({data:r,itemLabels:this.filteredDataset.itemLabels??[H]}),this.dot.render()}}}const sa={__name:"ChartColumn",setup(l){const t={data:[[{value:76.3098},{value:76.5973},{value:75.7679},{value:77.4424}]],xLabels:["台北市","新竹市","台南市","高雄市"],itemLabels:["投票率"]};return(e,a)=>(X(),Y("div",null,[d(B,{module:V(ia),dataset:t},null,8,["module"])]))}};const ha={style:{width:"100vh"}},la={class:"container"},ra={class:"container"},oa={class:"container"},na={__name:"Index(old)",setup(l){return(t,e)=>{const a=Tt("el-button");return X(),Y("div",ha,[p("div",null,[d(a,null,{default:f(()=>[b("地圖")]),_:1}),d(yt)]),p("div",null,[d(a,null,{default:f(()=>[b("投票統計類別摘要區塊")]),_:1}),d(_t,{groupMode:"type"})]),p("div",null,[d(a,null,{default:f(()=>[b("候選人區域比較區塊")]),_:1}),d(_,{class:"child"})]),p("div",null,[d(a,null,{default:f(()=>[b("候選人各單區得票顯示區塊")]),_:1}),d(St)]),p("div",la,[d(a,null,{default:f(()=>[b("投票統計類別摘要區塊")]),_:1}),d(j,{class:"child"}),d(j,{class:"child"}),d(sa,{class:"child"})]),p("div",ra,[d(a,null,{default:f(()=>[b("候選人區域比較區塊")]),_:1}),d(_,{class:"child"}),d(_,{class:"child"}),d(_,{class:"child"})]),p("div",oa,[d(a,null,{default:f(()=>[b("候選人各單區得票顯示區塊")]),_:1}),d(U,{class:"child"}),d(U,{class:"child"}),d(U,{class:"child"})])])}}},ua=Ct(na,[["__scopeId","data-v-fb26c3a4"]]);export{ua as default};
