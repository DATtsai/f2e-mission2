import{r as Z,w as H,d as Ti,u as Ei,c as je,o as Ni,a as W,b as q,n as Pi,e as X,f as Yi,g as tn,h as nt,i as Et,j as Yn,F as Nt,k as Pt}from"./index-edeec6c2.js";const Xi="/f2e-mission2/assets/tw-d742483e.svg",Hi="/f2e-mission2/assets/logo-57deb82d.svg";function Xn(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function zi(t){return t.length===1&&(t=Bi(t)),{left:function(e,n,i,r){for(i==null&&(i=0),r==null&&(r=e.length);i<r;){var a=i+r>>>1;t(e[a],n)<0?i=a+1:r=a}return i},right:function(e,n,i,r){for(i==null&&(i=0),r==null&&(r=e.length);i<r;){var a=i+r>>>1;t(e[a],n)>0?r=a:i=a+1}return i}}}function Bi(t){return function(e,n){return Xn(t(e),n)}}var $i=zi(Xn),Hn=$i.right;function Oi(t,e,n){t=+t,e=+e,n=(r=arguments.length)<2?(e=t,t=0,1):r<3?1:+n;for(var i=-1,r=Math.max(0,Math.ceil((e-t)/n))|0,a=new Array(r);++i<r;)a[i]=t+i*n;return a}var ke=Math.sqrt(50),Ae=Math.sqrt(10),Me=Math.sqrt(2);function Fi(t,e,n){var i,r=-1,a,s,o;if(e=+e,t=+t,n=+n,t===e&&n>0)return[t];if((i=e<t)&&(a=t,t=e,e=a),(o=$t(t,e,n))===0||!isFinite(o))return[];if(o>0)for(t=Math.ceil(t/o),e=Math.floor(e/o),s=new Array(a=Math.ceil(e-t+1));++r<a;)s[r]=(t+r)*o;else for(t=Math.floor(t*o),e=Math.ceil(e*o),s=new Array(a=Math.ceil(t-e+1));++r<a;)s[r]=(t-r)/o;return i&&s.reverse(),s}function $t(t,e,n){var i=(e-t)/Math.max(0,n),r=Math.floor(Math.log(i)/Math.LN10),a=i/Math.pow(10,r);return r>=0?(a>=ke?10:a>=Ae?5:a>=Me?2:1)*Math.pow(10,r):-Math.pow(10,-r)/(a>=ke?10:a>=Ae?5:a>=Me?2:1)}function Gi(t,e,n){var i=Math.abs(e-t)/Math.max(0,n),r=Math.pow(10,Math.floor(Math.log(i)/Math.LN10)),a=i/r;return a>=ke?r*=10:a>=Ae?r*=5:a>=Me&&(r*=2),e<t?-r:r}var pe=Array.prototype.slice;function Vi(t){return t}var ge=1,me=2,Le=3,vt=4,en=1e-6;function Ui(t){return"translate("+(t+.5)+",0)"}function Wi(t){return"translate(0,"+(t+.5)+")"}function qi(t){return function(e){return+t(e)}}function Zi(t){var e=Math.max(0,t.bandwidth()-1)/2;return t.round()&&(e=Math.round(e)),function(n){return+t(n)+e}}function Ki(){return!this.__axis}function zn(t,e){var n=[],i=null,r=null,a=6,s=6,o=3,l=t===ge||t===vt?-1:1,u=t===vt||t===me?"x":"y",h=t===ge||t===Le?Ui:Wi;function c(f){var p=i??(e.ticks?e.ticks.apply(e,n):e.domain()),d=r??(e.tickFormat?e.tickFormat.apply(e,n):Vi),g=Math.max(a,0)+o,m=e.range(),y=+m[0]+.5,v=+m[m.length-1]+.5,b=(e.bandwidth?Zi:qi)(e.copy()),A=f.selection?f.selection():f,_=A.selectAll(".domain").data([null]),M=A.selectAll(".tick").data(p,e).order(),V=M.exit(),P=M.enter().append("g").attr("class","tick"),Y=M.select("line"),U=M.select("text");_=_.merge(_.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),M=M.merge(P),Y=Y.merge(P.append("line").attr("stroke","currentColor").attr(u+"2",l*a)),U=U.merge(P.append("text").attr("fill","currentColor").attr(u,l*g).attr("dy",t===ge?"0em":t===Le?"0.71em":"0.32em")),f!==A&&(_=_.transition(f),M=M.transition(f),Y=Y.transition(f),U=U.transition(f),V=V.transition(f).attr("opacity",en).attr("transform",function(x){return isFinite(x=b(x))?h(x):this.getAttribute("transform")}),P.attr("opacity",en).attr("transform",function(x){var R=this.parentNode.__axis;return h(R&&isFinite(R=R(x))?R:b(x))})),V.remove(),_.attr("d",t===vt||t==me?s?"M"+l*s+","+y+"H0.5V"+v+"H"+l*s:"M0.5,"+y+"V"+v:s?"M"+y+","+l*s+"V0.5H"+v+"V"+l*s:"M"+y+",0.5H"+v),M.attr("opacity",1).attr("transform",function(x){return h(b(x))}),Y.attr(u+"2",l*a),U.attr(u,l*g).text(d),A.filter(Ki).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===me?"start":t===vt?"end":"middle"),A.each(function(){this.__axis=b})}return c.scale=function(f){return arguments.length?(e=f,c):e},c.ticks=function(){return n=pe.call(arguments),c},c.tickArguments=function(f){return arguments.length?(n=f==null?[]:pe.call(f),c):n.slice()},c.tickValues=function(f){return arguments.length?(i=f==null?null:pe.call(f),c):i&&i.slice()},c.tickFormat=function(f){return arguments.length?(r=f,c):r},c.tickSize=function(f){return arguments.length?(a=s=+f,c):a},c.tickSizeInner=function(f){return arguments.length?(a=+f,c):a},c.tickSizeOuter=function(f){return arguments.length?(s=+f,c):s},c.tickPadding=function(f){return arguments.length?(o=+f,c):o},c}function Qi(t){return zn(Le,t)}function Ji(t){return zn(vt,t)}var ji={value:function(){}};function Bn(){for(var t=0,e=arguments.length,n={},i;t<e;++t){if(!(i=arguments[t]+"")||i in n||/[\s.]/.test(i))throw new Error("illegal type: "+i);n[i]=[]}return new Ot(n)}function Ot(t){this._=t}function tr(t,e){return t.trim().split(/^|\s+/).map(function(n){var i="",r=n.indexOf(".");if(r>=0&&(i=n.slice(r+1),n=n.slice(0,r)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:i}})}Ot.prototype=Bn.prototype={constructor:Ot,on:function(t,e){var n=this._,i=tr(t+"",n),r,a=-1,s=i.length;if(arguments.length<2){for(;++a<s;)if((r=(t=i[a]).type)&&(r=er(n[r],t.name)))return r;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++a<s;)if(r=(t=i[a]).type)n[r]=nn(n[r],t.name,e);else if(e==null)for(r in n)n[r]=nn(n[r],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new Ot(t)},call:function(t,e){if((r=arguments.length-2)>0)for(var n=new Array(r),i=0,r,a;i<r;++i)n[i]=arguments[i+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(a=this._[t],i=0,r=a.length;i<r;++i)a[i].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var i=this._[t],r=0,a=i.length;r<a;++r)i[r].value.apply(e,n)}};function er(t,e){for(var n=0,i=t.length,r;n<i;++n)if((r=t[n]).name===e)return r.value}function nn(t,e,n){for(var i=0,r=t.length;i<r;++i)if(t[i].name===e){t[i]=ji,t=t.slice(0,i).concat(t.slice(i+1));break}return n!=null&&t.push({name:e,value:n}),t}var Se="http://www.w3.org/1999/xhtml";const rn={svg:"http://www.w3.org/2000/svg",xhtml:Se,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function le(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),rn.hasOwnProperty(e)?{space:rn[e],local:t}:t}function nr(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===Se&&e.documentElement.namespaceURI===Se?e.createElement(t):e.createElementNS(n,t)}}function ir(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function $n(t){var e=le(t);return(e.local?ir:nr)(e)}function rr(){}function Ye(t){return t==null?rr:function(){return this.querySelector(t)}}function ar(t){typeof t!="function"&&(t=Ye(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var a=e[r],s=a.length,o=i[r]=new Array(s),l,u,h=0;h<s;++h)(l=a[h])&&(u=t.call(l,l.__data__,h,a))&&("__data__"in l&&(u.__data__=l.__data__),o[h]=u);return new C(i,this._parents)}function sr(){return[]}function On(t){return t==null?sr:function(){return this.querySelectorAll(t)}}function or(t){typeof t!="function"&&(t=On(t));for(var e=this._groups,n=e.length,i=[],r=[],a=0;a<n;++a)for(var s=e[a],o=s.length,l,u=0;u<o;++u)(l=s[u])&&(i.push(t.call(l,l.__data__,u,s)),r.push(l));return new C(i,r)}function Fn(t){return function(){return this.matches(t)}}function lr(t){typeof t!="function"&&(t=Fn(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var a=e[r],s=a.length,o=i[r]=[],l,u=0;u<s;++u)(l=a[u])&&t.call(l,l.__data__,u,a)&&o.push(l);return new C(i,this._parents)}function Gn(t){return new Array(t.length)}function ur(){return new C(this._enter||this._groups.map(Gn),this._parents)}function Vt(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}Vt.prototype={constructor:Vt,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function hr(t){return function(){return t}}var an="$";function cr(t,e,n,i,r,a){for(var s=0,o,l=e.length,u=a.length;s<u;++s)(o=e[s])?(o.__data__=a[s],i[s]=o):n[s]=new Vt(t,a[s]);for(;s<l;++s)(o=e[s])&&(r[s]=o)}function fr(t,e,n,i,r,a,s){var o,l,u={},h=e.length,c=a.length,f=new Array(h),p;for(o=0;o<h;++o)(l=e[o])&&(f[o]=p=an+s.call(l,l.__data__,o,e),p in u?r[o]=l:u[p]=l);for(o=0;o<c;++o)p=an+s.call(t,a[o],o,a),(l=u[p])?(i[o]=l,l.__data__=a[o],u[p]=null):n[o]=new Vt(t,a[o]);for(o=0;o<h;++o)(l=e[o])&&u[f[o]]===l&&(r[o]=l)}function dr(t,e){if(!t)return p=new Array(this.size()),u=-1,this.each(function(M){p[++u]=M}),p;var n=e?fr:cr,i=this._parents,r=this._groups;typeof t!="function"&&(t=hr(t));for(var a=r.length,s=new Array(a),o=new Array(a),l=new Array(a),u=0;u<a;++u){var h=i[u],c=r[u],f=c.length,p=t.call(h,h&&h.__data__,u,i),d=p.length,g=o[u]=new Array(d),m=s[u]=new Array(d),y=l[u]=new Array(f);n(h,c,g,m,y,p,e);for(var v=0,b=0,A,_;v<d;++v)if(A=g[v]){for(v>=b&&(b=v+1);!(_=m[b])&&++b<d;);A._next=_||null}}return s=new C(s,i),s._enter=o,s._exit=l,s}function pr(){return new C(this._exit||this._groups.map(Gn),this._parents)}function gr(t,e,n){var i=this.enter(),r=this,a=this.exit();return i=typeof t=="function"?t(i):i.append(t+""),e!=null&&(r=e(r)),n==null?a.remove():n(a),i&&r?i.merge(r).order():r}function mr(t){for(var e=this._groups,n=t._groups,i=e.length,r=n.length,a=Math.min(i,r),s=new Array(i),o=0;o<a;++o)for(var l=e[o],u=n[o],h=l.length,c=s[o]=new Array(h),f,p=0;p<h;++p)(f=l[p]||u[p])&&(c[p]=f);for(;o<i;++o)s[o]=e[o];return new C(s,this._parents)}function yr(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var i=t[e],r=i.length-1,a=i[r],s;--r>=0;)(s=i[r])&&(a&&s.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(s,a),a=s);return this}function xr(t){t||(t=vr);function e(c,f){return c&&f?t(c.__data__,f.__data__):!c-!f}for(var n=this._groups,i=n.length,r=new Array(i),a=0;a<i;++a){for(var s=n[a],o=s.length,l=r[a]=new Array(o),u,h=0;h<o;++h)(u=s[h])&&(l[h]=u);l.sort(e)}return new C(r,this._parents).order()}function vr(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function br(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function wr(){var t=new Array(this.size()),e=-1;return this.each(function(){t[++e]=this}),t}function _r(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i=t[e],r=0,a=i.length;r<a;++r){var s=i[r];if(s)return s}return null}function kr(){var t=0;return this.each(function(){++t}),t}function Ar(){return!this.node()}function Mr(t){for(var e=this._groups,n=0,i=e.length;n<i;++n)for(var r=e[n],a=0,s=r.length,o;a<s;++a)(o=r[a])&&t.call(o,o.__data__,a,r);return this}function Lr(t){return function(){this.removeAttribute(t)}}function Sr(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Dr(t,e){return function(){this.setAttribute(t,e)}}function Cr(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function Rr(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function Ir(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function Tr(t,e){var n=le(t);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((e==null?n.local?Sr:Lr:typeof e=="function"?n.local?Ir:Rr:n.local?Cr:Dr)(n,e))}function Vn(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function Er(t){return function(){this.style.removeProperty(t)}}function Nr(t,e,n){return function(){this.style.setProperty(t,e,n)}}function Pr(t,e,n){return function(){var i=e.apply(this,arguments);i==null?this.style.removeProperty(t):this.style.setProperty(t,i,n)}}function Yr(t,e,n){return arguments.length>1?this.each((e==null?Er:typeof e=="function"?Pr:Nr)(t,e,n??"")):lt(this.node(),t)}function lt(t,e){return t.style.getPropertyValue(e)||Vn(t).getComputedStyle(t,null).getPropertyValue(e)}function Xr(t){return function(){delete this[t]}}function Hr(t,e){return function(){this[t]=e}}function zr(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function Br(t,e){return arguments.length>1?this.each((e==null?Xr:typeof e=="function"?zr:Hr)(t,e)):this.node()[t]}function Un(t){return t.trim().split(/^|\s+/)}function Xe(t){return t.classList||new Wn(t)}function Wn(t){this._node=t,this._names=Un(t.getAttribute("class")||"")}Wn.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function qn(t,e){for(var n=Xe(t),i=-1,r=e.length;++i<r;)n.add(e[i])}function Zn(t,e){for(var n=Xe(t),i=-1,r=e.length;++i<r;)n.remove(e[i])}function $r(t){return function(){qn(this,t)}}function Or(t){return function(){Zn(this,t)}}function Fr(t,e){return function(){(e.apply(this,arguments)?qn:Zn)(this,t)}}function Gr(t,e){var n=Un(t+"");if(arguments.length<2){for(var i=Xe(this.node()),r=-1,a=n.length;++r<a;)if(!i.contains(n[r]))return!1;return!0}return this.each((typeof e=="function"?Fr:e?$r:Or)(n,e))}function Vr(){this.textContent=""}function Ur(t){return function(){this.textContent=t}}function Wr(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function qr(t){return arguments.length?this.each(t==null?Vr:(typeof t=="function"?Wr:Ur)(t)):this.node().textContent}function Zr(){this.innerHTML=""}function Kr(t){return function(){this.innerHTML=t}}function Qr(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function Jr(t){return arguments.length?this.each(t==null?Zr:(typeof t=="function"?Qr:Kr)(t)):this.node().innerHTML}function jr(){this.nextSibling&&this.parentNode.appendChild(this)}function ta(){return this.each(jr)}function ea(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function na(){return this.each(ea)}function ia(t){var e=typeof t=="function"?t:$n(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function ra(){return null}function aa(t,e){var n=typeof t=="function"?t:$n(t),i=e==null?ra:typeof e=="function"?e:Ye(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)})}function sa(){var t=this.parentNode;t&&t.removeChild(this)}function oa(){return this.each(sa)}function la(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function ua(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function ha(t){return this.select(t?ua:la)}function ca(t){return arguments.length?this.property("__data__",t):this.node().__data__}var Kn={},w=null;if(typeof document<"u"){var fa=document.documentElement;"onmouseenter"in fa||(Kn={mouseenter:"mouseover",mouseleave:"mouseout"})}function da(t,e,n){return t=Qn(t,e,n),function(i){var r=i.relatedTarget;(!r||r!==this&&!(r.compareDocumentPosition(this)&8))&&t.call(this,i)}}function Qn(t,e,n){return function(i){var r=w;w=i;try{t.call(this,this.__data__,e,n)}finally{w=r}}}function pa(t){return t.trim().split(/^|\s+/).map(function(e){var n="",i=e.indexOf(".");return i>=0&&(n=e.slice(i+1),e=e.slice(0,i)),{type:e,name:n}})}function ga(t){return function(){var e=this.__on;if(e){for(var n=0,i=-1,r=e.length,a;n<r;++n)a=e[n],(!t.type||a.type===t.type)&&a.name===t.name?this.removeEventListener(a.type,a.listener,a.capture):e[++i]=a;++i?e.length=i:delete this.__on}}}function ma(t,e,n){var i=Kn.hasOwnProperty(t.type)?da:Qn;return function(r,a,s){var o=this.__on,l,u=i(e,a,s);if(o){for(var h=0,c=o.length;h<c;++h)if((l=o[h]).type===t.type&&l.name===t.name){this.removeEventListener(l.type,l.listener,l.capture),this.addEventListener(l.type,l.listener=u,l.capture=n),l.value=e;return}}this.addEventListener(t.type,u,n),l={type:t.type,name:t.name,value:e,listener:u,capture:n},o?o.push(l):this.__on=[l]}}function ya(t,e,n){var i=pa(t+""),r,a=i.length,s;if(arguments.length<2){var o=this.node().__on;if(o){for(var l=0,u=o.length,h;l<u;++l)for(r=0,h=o[l];r<a;++r)if((s=i[r]).type===h.type&&s.name===h.name)return h.value}return}for(o=e?ma:ga,n==null&&(n=!1),r=0;r<a;++r)this.each(o(i[r],e,n));return this}function Jn(t,e,n){var i=Vn(t),r=i.CustomEvent;typeof r=="function"?r=new r(e,n):(r=i.document.createEvent("Event"),n?(r.initEvent(e,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(e,!1,!1)),t.dispatchEvent(r)}function xa(t,e){return function(){return Jn(this,t,e)}}function va(t,e){return function(){return Jn(this,t,e.apply(this,arguments))}}function ba(t,e){return this.each((typeof e=="function"?va:xa)(t,e))}var jn=[null];function C(t,e){this._groups=t,this._parents=e}function Dt(){return new C([[document.documentElement]],jn)}C.prototype=Dt.prototype={constructor:C,select:ar,selectAll:or,filter:lr,data:dr,enter:ur,exit:pr,join:gr,merge:mr,order:yr,sort:xr,call:br,nodes:wr,node:_r,size:kr,empty:Ar,each:Mr,attr:Tr,style:Yr,property:Br,classed:Gr,text:qr,html:Jr,raise:ta,lower:na,append:ia,insert:aa,remove:oa,clone:ha,datum:ca,on:ya,dispatch:ba};function O(t){return typeof t=="string"?new C([[document.querySelector(t)]],[document.documentElement]):new C([[t]],jn)}function He(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function ti(t,e){var n=Object.create(t.prototype);for(var i in e)n[i]=e[i];return n}function Ct(){}var At=.7,Ut=1/At,at="\\s*([+-]?\\d+)\\s*",Mt="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",B="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",wa=/^#([0-9a-f]{3,8})$/,_a=new RegExp("^rgb\\("+[at,at,at]+"\\)$"),ka=new RegExp("^rgb\\("+[B,B,B]+"\\)$"),Aa=new RegExp("^rgba\\("+[at,at,at,Mt]+"\\)$"),Ma=new RegExp("^rgba\\("+[B,B,B,Mt]+"\\)$"),La=new RegExp("^hsl\\("+[Mt,B,B]+"\\)$"),Sa=new RegExp("^hsla\\("+[Mt,B,B,Mt]+"\\)$"),sn={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};He(Ct,Q,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:on,formatHex:on,formatHsl:Da,formatRgb:ln,toString:ln});function on(){return this.rgb().formatHex()}function Da(){return ei(this).formatHsl()}function ln(){return this.rgb().formatRgb()}function Q(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=wa.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?un(e):n===3?new D(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?Yt(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?Yt(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=_a.exec(t))?new D(e[1],e[2],e[3],1):(e=ka.exec(t))?new D(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Aa.exec(t))?Yt(e[1],e[2],e[3],e[4]):(e=Ma.exec(t))?Yt(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=La.exec(t))?fn(e[1],e[2]/100,e[3]/100,1):(e=Sa.exec(t))?fn(e[1],e[2]/100,e[3]/100,e[4]):sn.hasOwnProperty(t)?un(sn[t]):t==="transparent"?new D(NaN,NaN,NaN,0):null}function un(t){return new D(t>>16&255,t>>8&255,t&255,1)}function Yt(t,e,n,i){return i<=0&&(t=e=n=NaN),new D(t,e,n,i)}function Ca(t){return t instanceof Ct||(t=Q(t)),t?(t=t.rgb(),new D(t.r,t.g,t.b,t.opacity)):new D}function De(t,e,n,i){return arguments.length===1?Ca(t):new D(t,e,n,i??1)}function D(t,e,n,i){this.r=+t,this.g=+e,this.b=+n,this.opacity=+i}He(D,De,ti(Ct,{brighter:function(t){return t=t==null?Ut:Math.pow(Ut,t),new D(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=t==null?At:Math.pow(At,t),new D(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:hn,formatHex:hn,formatRgb:cn,toString:cn}));function hn(){return"#"+ye(this.r)+ye(this.g)+ye(this.b)}function cn(){var t=this.opacity;return t=isNaN(t)?1:Math.max(0,Math.min(1,t)),(t===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(t===1?")":", "+t+")")}function ye(t){return t=Math.max(0,Math.min(255,Math.round(t)||0)),(t<16?"0":"")+t.toString(16)}function fn(t,e,n,i){return i<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new z(t,e,n,i)}function ei(t){if(t instanceof z)return new z(t.h,t.s,t.l,t.opacity);if(t instanceof Ct||(t=Q(t)),!t)return new z;if(t instanceof z)return t;t=t.rgb();var e=t.r/255,n=t.g/255,i=t.b/255,r=Math.min(e,n,i),a=Math.max(e,n,i),s=NaN,o=a-r,l=(a+r)/2;return o?(e===a?s=(n-i)/o+(n<i)*6:n===a?s=(i-e)/o+2:s=(e-n)/o+4,o/=l<.5?a+r:2-a-r,s*=60):o=l>0&&l<1?0:s,new z(s,o,l,t.opacity)}function Ra(t,e,n,i){return arguments.length===1?ei(t):new z(t,e,n,i??1)}function z(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}He(z,Ra,ti(Ct,{brighter:function(t){return t=t==null?Ut:Math.pow(Ut,t),new z(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=t==null?At:Math.pow(At,t),new z(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*e,r=2*n-i;return new D(xe(t>=240?t-240:t+120,r,i),xe(t,r,i),xe(t<120?t+240:t-120,r,i),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return t=isNaN(t)?1:Math.max(0,Math.min(1,t)),(t===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(t===1?")":", "+t+")")}}));function xe(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}function ze(t){return function(){return t}}function Ia(t,e){return function(n){return t+n*e}}function Ta(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(i){return Math.pow(t+i*e,n)}}function Ea(t){return(t=+t)==1?ni:function(e,n){return n-e?Ta(e,n,t):ze(isNaN(e)?n:e)}}function ni(t,e){var n=e-t;return n?Ia(t,n):ze(isNaN(t)?e:t)}const Wt=function t(e){var n=Ea(e);function i(r,a){var s=n((r=De(r)).r,(a=De(a)).r),o=n(r.g,a.g),l=n(r.b,a.b),u=ni(r.opacity,a.opacity);return function(h){return r.r=s(h),r.g=o(h),r.b=l(h),r.opacity=u(h),r+""}}return i.gamma=t,i}(1);function Na(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,i=e.slice(),r;return function(a){for(r=0;r<n;++r)i[r]=t[r]*(1-a)+e[r]*a;return i}}function Pa(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Ya(t,e){var n=e?e.length:0,i=t?Math.min(n,t.length):0,r=new Array(i),a=new Array(n),s;for(s=0;s<i;++s)r[s]=Be(t[s],e[s]);for(;s<n;++s)a[s]=e[s];return function(o){for(s=0;s<i;++s)a[s]=r[s](o);return a}}function Xa(t,e){var n=new Date;return t=+t,e=+e,function(i){return n.setTime(t*(1-i)+e*i),n}}function E(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function Ha(t,e){var n={},i={},r;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(r in e)r in t?n[r]=Be(t[r],e[r]):i[r]=e[r];return function(a){for(r in n)i[r]=n[r](a);return i}}var Ce=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ve=new RegExp(Ce.source,"g");function za(t){return function(){return t}}function Ba(t){return function(e){return t(e)+""}}function ii(t,e){var n=Ce.lastIndex=ve.lastIndex=0,i,r,a,s=-1,o=[],l=[];for(t=t+"",e=e+"";(i=Ce.exec(t))&&(r=ve.exec(e));)(a=r.index)>n&&(a=e.slice(n,a),o[s]?o[s]+=a:o[++s]=a),(i=i[0])===(r=r[0])?o[s]?o[s]+=r:o[++s]=r:(o[++s]=null,l.push({i:s,x:E(i,r)})),n=ve.lastIndex;return n<e.length&&(a=e.slice(n),o[s]?o[s]+=a:o[++s]=a),o.length<2?l[0]?Ba(l[0].x):za(e):(e=l.length,function(u){for(var h=0,c;h<e;++h)o[(c=l[h]).i]=c.x(u);return o.join("")})}function Be(t,e){var n=typeof e,i;return e==null||n==="boolean"?ze(e):(n==="number"?E:n==="string"?(i=Q(e))?(e=i,Wt):ii:e instanceof Q?Wt:e instanceof Date?Xa:Pa(e)?Na:Array.isArray(e)?Ya:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?Ha:E)(t,e)}function $a(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}var dn=180/Math.PI,Re={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function ri(t,e,n,i,r,a){var s,o,l;return(s=Math.sqrt(t*t+e*e))&&(t/=s,e/=s),(l=t*n+e*i)&&(n-=t*l,i-=e*l),(o=Math.sqrt(n*n+i*i))&&(n/=o,i/=o,l/=o),t*i<e*n&&(t=-t,e=-e,l=-l,s=-s),{translateX:r,translateY:a,rotate:Math.atan2(e,t)*dn,skewX:Math.atan(l)*dn,scaleX:s,scaleY:o}}var pt,be,pn,Xt;function Oa(t){return t==="none"?Re:(pt||(pt=document.createElement("DIV"),be=document.documentElement,pn=document.defaultView),pt.style.transform=t,t=pn.getComputedStyle(be.appendChild(pt),null).getPropertyValue("transform"),be.removeChild(pt),t=t.slice(7,-1).split(","),ri(+t[0],+t[1],+t[2],+t[3],+t[4],+t[5]))}function Fa(t){return t==null||(Xt||(Xt=document.createElementNS("http://www.w3.org/2000/svg","g")),Xt.setAttribute("transform",t),!(t=Xt.transform.baseVal.consolidate()))?Re:(t=t.matrix,ri(t.a,t.b,t.c,t.d,t.e,t.f))}function ai(t,e,n,i){function r(u){return u.length?u.pop()+" ":""}function a(u,h,c,f,p,d){if(u!==c||h!==f){var g=p.push("translate(",null,e,null,n);d.push({i:g-4,x:E(u,c)},{i:g-2,x:E(h,f)})}else(c||f)&&p.push("translate("+c+e+f+n)}function s(u,h,c,f){u!==h?(u-h>180?h+=360:h-u>180&&(u+=360),f.push({i:c.push(r(c)+"rotate(",null,i)-2,x:E(u,h)})):h&&c.push(r(c)+"rotate("+h+i)}function o(u,h,c,f){u!==h?f.push({i:c.push(r(c)+"skewX(",null,i)-2,x:E(u,h)}):h&&c.push(r(c)+"skewX("+h+i)}function l(u,h,c,f,p,d){if(u!==c||h!==f){var g=p.push(r(p)+"scale(",null,",",null,")");d.push({i:g-4,x:E(u,c)},{i:g-2,x:E(h,f)})}else(c!==1||f!==1)&&p.push(r(p)+"scale("+c+","+f+")")}return function(u,h){var c=[],f=[];return u=t(u),h=t(h),a(u.translateX,u.translateY,h.translateX,h.translateY,c,f),s(u.rotate,h.rotate,c,f),o(u.skewX,h.skewX,c,f),l(u.scaleX,u.scaleY,h.scaleX,h.scaleY,c,f),u=h=null,function(p){for(var d=-1,g=f.length,m;++d<g;)c[(m=f[d]).i]=m.x(p);return c.join("")}}}var Ga=ai(Oa,"px, ","px)","deg)"),Va=ai(Fa,", ",")",")"),ut=0,bt=0,gt=0,si=1e3,qt,wt,Zt=0,J=0,ue=0,Lt=typeof performance=="object"&&performance.now?performance:Date,oi=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function he(){return J||(oi(Ua),J=Lt.now()+ue)}function Ua(){J=0}function Kt(){this._call=this._time=this._next=null}Kt.prototype=li.prototype={constructor:Kt,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?he():+n)+(e==null?0:+e),!this._next&&wt!==this&&(wt?wt._next=this:qt=this,wt=this),this._call=t,this._time=n,Ie()},stop:function(){this._call&&(this._call=null,this._time=1/0,Ie())}};function li(t,e,n){var i=new Kt;return i.restart(t,e,n),i}function Wa(){he(),++ut;for(var t=qt,e;t;)(e=J-t._time)>=0&&t._call.call(null,e),t=t._next;--ut}function gn(){J=(Zt=Lt.now())+ue,ut=bt=0;try{Wa()}finally{ut=0,Za(),J=0}}function qa(){var t=Lt.now(),e=t-Zt;e>si&&(ue-=e,Zt=t)}function Za(){for(var t,e=qt,n,i=1/0;e;)e._call?(i>e._time&&(i=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:qt=n);wt=t,Ie(i)}function Ie(t){if(!ut){bt&&(bt=clearTimeout(bt));var e=t-J;e>24?(t<1/0&&(bt=setTimeout(gn,t-Lt.now()-ue)),gt&&(gt=clearInterval(gt))):(gt||(Zt=Lt.now(),gt=setInterval(qa,si)),ut=1,oi(gn))}}function mn(t,e,n){var i=new Kt;return e=e==null?0:+e,i.restart(function(r){i.stop(),t(r+e)},e,n),i}var Ka=Bn("start","end","cancel","interrupt"),Qa=[],ui=0,yn=1,Te=2,Ft=3,xn=4,Ee=5,Gt=6;function ce(t,e,n,i,r,a){var s=t.__transition;if(!s)t.__transition={};else if(n in s)return;Ja(t,n,{name:e,index:i,group:r,on:Ka,tween:Qa,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:ui})}function $e(t,e){var n=N(t,e);if(n.state>ui)throw new Error("too late; already scheduled");return n}function G(t,e){var n=N(t,e);if(n.state>Ft)throw new Error("too late; already running");return n}function N(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function Ja(t,e,n){var i=t.__transition,r;i[e]=n,n.timer=li(a,0,n.time);function a(u){n.state=yn,n.timer.restart(s,n.delay,n.time),n.delay<=u&&s(u-n.delay)}function s(u){var h,c,f,p;if(n.state!==yn)return l();for(h in i)if(p=i[h],p.name===n.name){if(p.state===Ft)return mn(s);p.state===xn?(p.state=Gt,p.timer.stop(),p.on.call("interrupt",t,t.__data__,p.index,p.group),delete i[h]):+h<e&&(p.state=Gt,p.timer.stop(),p.on.call("cancel",t,t.__data__,p.index,p.group),delete i[h])}if(mn(function(){n.state===Ft&&(n.state=xn,n.timer.restart(o,n.delay,n.time),o(u))}),n.state=Te,n.on.call("start",t,t.__data__,n.index,n.group),n.state===Te){for(n.state=Ft,r=new Array(f=n.tween.length),h=0,c=-1;h<f;++h)(p=n.tween[h].value.call(t,t.__data__,n.index,n.group))&&(r[++c]=p);r.length=c+1}}function o(u){for(var h=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(l),n.state=Ee,1),c=-1,f=r.length;++c<f;)r[c].call(t,h);n.state===Ee&&(n.on.call("end",t,t.__data__,n.index,n.group),l())}function l(){n.state=Gt,n.timer.stop(),delete i[e];for(var u in i)return;delete t.__transition}}function ja(t,e){var n=t.__transition,i,r,a=!0,s;if(n){e=e==null?null:e+"";for(s in n){if((i=n[s]).name!==e){a=!1;continue}r=i.state>Te&&i.state<Ee,i.state=Gt,i.timer.stop(),i.on.call(r?"interrupt":"cancel",t,t.__data__,i.index,i.group),delete n[s]}a&&delete t.__transition}}function ts(t){return this.each(function(){ja(this,t)})}function es(t,e){var n,i;return function(){var r=G(this,t),a=r.tween;if(a!==n){i=n=a;for(var s=0,o=i.length;s<o;++s)if(i[s].name===e){i=i.slice(),i.splice(s,1);break}}r.tween=i}}function ns(t,e,n){var i,r;if(typeof n!="function")throw new Error;return function(){var a=G(this,t),s=a.tween;if(s!==i){r=(i=s).slice();for(var o={name:e,value:n},l=0,u=r.length;l<u;++l)if(r[l].name===e){r[l]=o;break}l===u&&r.push(o)}a.tween=r}}function is(t,e){var n=this._id;if(t+="",arguments.length<2){for(var i=N(this.node(),n).tween,r=0,a=i.length,s;r<a;++r)if((s=i[r]).name===t)return s.value;return null}return this.each((e==null?es:ns)(n,t,e))}function Oe(t,e,n){var i=t._id;return t.each(function(){var r=G(this,i);(r.value||(r.value={}))[e]=n.apply(this,arguments)}),function(r){return N(r,i).value[e]}}function hi(t,e){var n;return(typeof e=="number"?E:e instanceof Q?Wt:(n=Q(e))?(e=n,Wt):ii)(t,e)}function rs(t){return function(){this.removeAttribute(t)}}function as(t){return function(){this.removeAttributeNS(t.space,t.local)}}function ss(t,e,n){var i,r=n+"",a;return function(){var s=this.getAttribute(t);return s===r?null:s===i?a:a=e(i=s,n)}}function os(t,e,n){var i,r=n+"",a;return function(){var s=this.getAttributeNS(t.space,t.local);return s===r?null:s===i?a:a=e(i=s,n)}}function ls(t,e,n){var i,r,a;return function(){var s,o=n(this),l;return o==null?void this.removeAttribute(t):(s=this.getAttribute(t),l=o+"",s===l?null:s===i&&l===r?a:(r=l,a=e(i=s,o)))}}function us(t,e,n){var i,r,a;return function(){var s,o=n(this),l;return o==null?void this.removeAttributeNS(t.space,t.local):(s=this.getAttributeNS(t.space,t.local),l=o+"",s===l?null:s===i&&l===r?a:(r=l,a=e(i=s,o)))}}function hs(t,e){var n=le(t),i=n==="transform"?Va:hi;return this.attrTween(t,typeof e=="function"?(n.local?us:ls)(n,i,Oe(this,"attr."+t,e)):e==null?(n.local?as:rs)(n):(n.local?os:ss)(n,i,e))}function cs(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function fs(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function ds(t,e){var n,i;function r(){var a=e.apply(this,arguments);return a!==i&&(n=(i=a)&&fs(t,a)),n}return r._value=e,r}function ps(t,e){var n,i;function r(){var a=e.apply(this,arguments);return a!==i&&(n=(i=a)&&cs(t,a)),n}return r._value=e,r}function gs(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var i=le(t);return this.tween(n,(i.local?ds:ps)(i,e))}function ms(t,e){return function(){$e(this,t).delay=+e.apply(this,arguments)}}function ys(t,e){return e=+e,function(){$e(this,t).delay=e}}function xs(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?ms:ys)(e,t)):N(this.node(),e).delay}function vs(t,e){return function(){G(this,t).duration=+e.apply(this,arguments)}}function bs(t,e){return e=+e,function(){G(this,t).duration=e}}function ws(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?vs:bs)(e,t)):N(this.node(),e).duration}function _s(t,e){if(typeof e!="function")throw new Error;return function(){G(this,t).ease=e}}function ks(t){var e=this._id;return arguments.length?this.each(_s(e,t)):N(this.node(),e).ease}function As(t){typeof t!="function"&&(t=Fn(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var a=e[r],s=a.length,o=i[r]=[],l,u=0;u<s;++u)(l=a[u])&&t.call(l,l.__data__,u,a)&&o.push(l);return new F(i,this._parents,this._name,this._id)}function Ms(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,i=e.length,r=n.length,a=Math.min(i,r),s=new Array(i),o=0;o<a;++o)for(var l=e[o],u=n[o],h=l.length,c=s[o]=new Array(h),f,p=0;p<h;++p)(f=l[p]||u[p])&&(c[p]=f);for(;o<i;++o)s[o]=e[o];return new F(s,this._parents,this._name,this._id)}function Ls(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function Ss(t,e,n){var i,r,a=Ls(e)?$e:G;return function(){var s=a(this,t),o=s.on;o!==i&&(r=(i=o).copy()).on(e,n),s.on=r}}function Ds(t,e){var n=this._id;return arguments.length<2?N(this.node(),n).on.on(t):this.each(Ss(n,t,e))}function Cs(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function Rs(){return this.on("end.remove",Cs(this._id))}function Is(t){var e=this._name,n=this._id;typeof t!="function"&&(t=Ye(t));for(var i=this._groups,r=i.length,a=new Array(r),s=0;s<r;++s)for(var o=i[s],l=o.length,u=a[s]=new Array(l),h,c,f=0;f<l;++f)(h=o[f])&&(c=t.call(h,h.__data__,f,o))&&("__data__"in h&&(c.__data__=h.__data__),u[f]=c,ce(u[f],e,n,f,u,N(h,n)));return new F(a,this._parents,e,n)}function Ts(t){var e=this._name,n=this._id;typeof t!="function"&&(t=On(t));for(var i=this._groups,r=i.length,a=[],s=[],o=0;o<r;++o)for(var l=i[o],u=l.length,h,c=0;c<u;++c)if(h=l[c]){for(var f=t.call(h,h.__data__,c,l),p,d=N(h,n),g=0,m=f.length;g<m;++g)(p=f[g])&&ce(p,e,n,g,f,d);a.push(f),s.push(h)}return new F(a,s,e,n)}var Es=Dt.prototype.constructor;function Ns(){return new Es(this._groups,this._parents)}function Ps(t,e){var n,i,r;return function(){var a=lt(this,t),s=(this.style.removeProperty(t),lt(this,t));return a===s?null:a===n&&s===i?r:r=e(n=a,i=s)}}function ci(t){return function(){this.style.removeProperty(t)}}function Ys(t,e,n){var i,r=n+"",a;return function(){var s=lt(this,t);return s===r?null:s===i?a:a=e(i=s,n)}}function Xs(t,e,n){var i,r,a;return function(){var s=lt(this,t),o=n(this),l=o+"";return o==null&&(l=o=(this.style.removeProperty(t),lt(this,t))),s===l?null:s===i&&l===r?a:(r=l,a=e(i=s,o))}}function Hs(t,e){var n,i,r,a="style."+e,s="end."+a,o;return function(){var l=G(this,t),u=l.on,h=l.value[a]==null?o||(o=ci(e)):void 0;(u!==n||r!==h)&&(i=(n=u).copy()).on(s,r=h),l.on=i}}function zs(t,e,n){var i=(t+="")=="transform"?Ga:hi;return e==null?this.styleTween(t,Ps(t,i)).on("end.style."+t,ci(t)):typeof e=="function"?this.styleTween(t,Xs(t,i,Oe(this,"style."+t,e))).each(Hs(this._id,t)):this.styleTween(t,Ys(t,i,e),n).on("end.style."+t,null)}function Bs(t,e,n){return function(i){this.style.setProperty(t,e.call(this,i),n)}}function $s(t,e,n){var i,r;function a(){var s=e.apply(this,arguments);return s!==r&&(i=(r=s)&&Bs(t,s,n)),i}return a._value=e,a}function Os(t,e,n){var i="style."+(t+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(e==null)return this.tween(i,null);if(typeof e!="function")throw new Error;return this.tween(i,$s(t,e,n??""))}function Fs(t){return function(){this.textContent=t}}function Gs(t){return function(){var e=t(this);this.textContent=e??""}}function Vs(t){return this.tween("text",typeof t=="function"?Gs(Oe(this,"text",t)):Fs(t==null?"":t+""))}function Us(t){return function(e){this.textContent=t.call(this,e)}}function Ws(t){var e,n;function i(){var r=t.apply(this,arguments);return r!==n&&(e=(n=r)&&Us(r)),e}return i._value=t,i}function qs(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,Ws(t))}function Zs(){for(var t=this._name,e=this._id,n=fi(),i=this._groups,r=i.length,a=0;a<r;++a)for(var s=i[a],o=s.length,l,u=0;u<o;++u)if(l=s[u]){var h=N(l,e);ce(l,t,n,u,s,{time:h.time+h.delay+h.duration,delay:0,duration:h.duration,ease:h.ease})}return new F(i,this._parents,t,n)}function Ks(){var t,e,n=this,i=n._id,r=n.size();return new Promise(function(a,s){var o={value:s},l={value:function(){--r===0&&a()}};n.each(function(){var u=G(this,i),h=u.on;h!==t&&(e=(t=h).copy(),e._.cancel.push(o),e._.interrupt.push(o),e._.end.push(l)),u.on=e})})}var Qs=0;function F(t,e,n,i){this._groups=t,this._parents=e,this._name=n,this._id=i}function fi(){return++Qs}var et=Dt.prototype;F.prototype={constructor:F,select:Is,selectAll:Ts,filter:As,merge:Ms,selection:Ns,transition:Zs,call:et.call,nodes:et.nodes,node:et.node,size:et.size,empty:et.empty,each:et.each,on:Ds,attr:hs,attrTween:gs,style:zs,styleTween:Os,text:Vs,textTween:qs,remove:Rs,tween:is,delay:xs,duration:ws,ease:ks,end:Ks};function Js(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}function Qt(t){return(Math.pow(2,-10*t)-.0009765625)*1.0009775171065494}var ht=2*Math.PI,Fe=1,Ge=.3;(function t(e,n){var i=Math.asin(1/(e=Math.max(1,e)))*(n/=ht);function r(a){return e*Qt(- --a)*Math.sin((i-a)/n)}return r.amplitude=function(a){return t(a,n*ht)},r.period=function(a){return t(e,a)},r})(Fe,Ge);var js=function t(e,n){var i=Math.asin(1/(e=Math.max(1,e)))*(n/=ht);function r(a){return 1-e*Qt(a=+a)*Math.sin((a+i)/n)}return r.amplitude=function(a){return t(a,n*ht)},r.period=function(a){return t(e,a)},r}(Fe,Ge);(function t(e,n){var i=Math.asin(1/(e=Math.max(1,e)))*(n/=ht);function r(a){return((a=a*2-1)<0?e*Qt(-a)*Math.sin((i-a)/n):2-e*Qt(a)*Math.sin((i+a)/n))/2}return r.amplitude=function(a){return t(a,n*ht)},r.period=function(a){return t(e,a)},r})(Fe,Ge);var Ne={time:null,delay:0,duration:250,ease:Js};function to(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))return Ne.time=he(),Ne;return n}function eo(t){var e,n;t instanceof F?(e=t._id,t=t._name):(e=fi(),(n=Ne).time=he(),t=t==null?null:t+"");for(var i=this._groups,r=i.length,a=0;a<r;++a)for(var s=i[a],o=s.length,l,u=0;u<o;++u)(l=s[u])&&ce(l,t,e,u,s,n||to(l,e));return new F(i,this._parents,t,e)}Dt.prototype.interrupt=ts;Dt.prototype.transition=eo;var T="$";function Jt(){}Jt.prototype=jt.prototype={constructor:Jt,has:function(t){return T+t in this},get:function(t){return this[T+t]},set:function(t,e){return this[T+t]=e,this},remove:function(t){var e=T+t;return e in this&&delete this[e]},clear:function(){for(var t in this)t[0]===T&&delete this[t]},keys:function(){var t=[];for(var e in this)e[0]===T&&t.push(e.slice(1));return t},values:function(){var t=[];for(var e in this)e[0]===T&&t.push(this[e]);return t},entries:function(){var t=[];for(var e in this)e[0]===T&&t.push({key:e.slice(1),value:this[e]});return t},size:function(){var t=0;for(var e in this)e[0]===T&&++t;return t},empty:function(){for(var t in this)if(t[0]===T)return!1;return!0},each:function(t){for(var e in this)e[0]===T&&t(this[e],e.slice(1),this)}};function jt(t,e){var n=new Jt;if(t instanceof Jt)t.each(function(o,l){n.set(l,o)});else if(Array.isArray(t)){var i=-1,r=t.length,a;if(e==null)for(;++i<r;)n.set(i,t[i]);else for(;++i<r;)n.set(e(a=t[i],i,t),a)}else if(t)for(var s in t)n.set(s,t[s]);return n}function vn(){}var K=jt.prototype;vn.prototype={constructor:vn,has:K.has,add:function(t){return t+="",this[T+t]=t,this},remove:K.remove,clear:K.clear,values:K.keys,size:K.size,empty:K.empty,each:K.each};function no(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function te(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,i=t.slice(0,n);return[i.length>1?i[0]+i.slice(2):i,+t.slice(n+1)]}function ct(t){return t=te(Math.abs(t)),t?t[1]:NaN}function io(t,e){return function(n,i){for(var r=n.length,a=[],s=0,o=t[0],l=0;r>0&&o>0&&(l+o+1>i&&(o=Math.max(1,i-l)),a.push(n.substring(r-=o,r+o)),!((l+=o+1)>i));)o=t[s=(s+1)%t.length];return a.reverse().join(e)}}function ro(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var ao=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function ee(t){if(!(e=ao.exec(t)))throw new Error("invalid format: "+t);var e;return new Ve({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}ee.prototype=Ve.prototype;function Ve(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}Ve.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function so(t){t:for(var e=t.length,n=1,i=-1,r;n<e;++n)switch(t[n]){case".":i=r=n;break;case"0":i===0&&(i=n),r=n;break;default:if(!+t[n])break t;i>0&&(i=0);break}return i>0?t.slice(0,i)+t.slice(r+1):t}var di;function oo(t,e){var n=te(t,e);if(!n)return t+"";var i=n[0],r=n[1],a=r-(di=Math.max(-8,Math.min(8,Math.floor(r/3)))*3)+1,s=i.length;return a===s?i:a>s?i+new Array(a-s+1).join("0"):a>0?i.slice(0,a)+"."+i.slice(a):"0."+new Array(1-a).join("0")+te(t,Math.max(0,e+a-1))[0]}function bn(t,e){var n=te(t,e);if(!n)return t+"";var i=n[0],r=n[1];return r<0?"0."+new Array(-r).join("0")+i:i.length>r+1?i.slice(0,r+1)+"."+i.slice(r+1):i+new Array(r-i.length+2).join("0")}const wn={"%":function(t,e){return(t*100).toFixed(e)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:no,e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},g:function(t,e){return t.toPrecision(e)},o:function(t){return Math.round(t).toString(8)},p:function(t,e){return bn(t*100,e)},r:bn,s:oo,X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}};function _n(t){return t}var kn=Array.prototype.map,An=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function lo(t){var e=t.grouping===void 0||t.thousands===void 0?_n:io(kn.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",i=t.currency===void 0?"":t.currency[1]+"",r=t.decimal===void 0?".":t.decimal+"",a=t.numerals===void 0?_n:ro(kn.call(t.numerals,String)),s=t.percent===void 0?"%":t.percent+"",o=t.minus===void 0?"-":t.minus+"",l=t.nan===void 0?"NaN":t.nan+"";function u(c){c=ee(c);var f=c.fill,p=c.align,d=c.sign,g=c.symbol,m=c.zero,y=c.width,v=c.comma,b=c.precision,A=c.trim,_=c.type;_==="n"?(v=!0,_="g"):wn[_]||(b===void 0&&(b=12),A=!0,_="g"),(m||f==="0"&&p==="=")&&(m=!0,f="0",p="=");var M=g==="$"?n:g==="#"&&/[boxX]/.test(_)?"0"+_.toLowerCase():"",V=g==="$"?i:/[%p]/.test(_)?s:"",P=wn[_],Y=/[defgprs%]/.test(_);b=b===void 0?6:/[gprs]/.test(_)?Math.max(1,Math.min(21,b)):Math.max(0,Math.min(20,b));function U(x){var R=M,I=V,tt,Je,Rt;if(_==="c")I=P(x)+I,x="";else{x=+x;var It=x<0||1/x<0;if(x=isNaN(x)?l:P(Math.abs(x),b),A&&(x=so(x)),It&&+x==0&&d!=="+"&&(It=!1),R=(It?d==="("?d:o:d==="-"||d==="("?"":d)+R,I=(_==="s"?An[8+di/3]:"")+I+(It&&d==="("?")":""),Y){for(tt=-1,Je=x.length;++tt<Je;)if(Rt=x.charCodeAt(tt),48>Rt||Rt>57){I=(Rt===46?r+x.slice(tt+1):x.slice(tt))+I,x=x.slice(0,tt);break}}}v&&!m&&(x=e(x,1/0));var Tt=R.length+x.length+I.length,$=Tt<y?new Array(y-Tt+1).join(f):"";switch(v&&m&&(x=e($+x,$.length?y-I.length:1/0),$=""),p){case"<":x=R+x+I+$;break;case"=":x=R+$+x+I;break;case"^":x=$.slice(0,Tt=$.length>>1)+R+x+I+$.slice(Tt);break;default:x=$+R+x+I;break}return a(x)}return U.toString=function(){return c+""},U}function h(c,f){var p=u((c=ee(c),c.type="f",c)),d=Math.max(-8,Math.min(8,Math.floor(ct(f)/3)))*3,g=Math.pow(10,-d),m=An[8+d/3];return function(y){return p(g*y)+m}}return{format:u,formatPrefix:h}}var Ht,Ue,pi;uo({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"});function uo(t){return Ht=lo(t),Ue=Ht.format,pi=Ht.formatPrefix,Ht}function ho(t){return Math.max(0,-ct(Math.abs(t)))}function co(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(ct(e)/3)))*3-ct(Math.abs(t)))}function fo(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,ct(e)-ct(t))+1}function ft(){return Math.random()}(function t(e){function n(i,r){return i=i==null?0:+i,r=r==null?1:+r,arguments.length===1?(r=i,i=0):r-=i,function(){return e()*r+i}}return n.source=t,n})(ft);const po=function t(e){function n(i,r){var a,s;return i=i==null?0:+i,r=r==null?1:+r,function(){var o;if(a!=null)o=a,a=null;else do a=e()*2-1,o=e()*2-1,s=a*a+o*o;while(!s||s>1);return i+r*o*Math.sqrt(-2*Math.log(s)/s)}}return n.source=t,n}(ft);(function t(e){function n(){var i=po.source(e).apply(this,arguments);return function(){return Math.exp(i())}}return n.source=t,n})(ft);const go=function t(e){function n(i){return function(){for(var r=0,a=0;a<i;++a)r+=e();return r}}return n.source=t,n}(ft);(function t(e){function n(i){var r=go.source(e)(i);return function(){return r()/i}}return n.source=t,n})(ft);(function t(e){function n(i){return function(){return-Math.log(1-e())/i}}return n.source=t,n})(ft);function fe(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}var gi=Array.prototype,mo=gi.map,ne=gi.slice,Mn={name:"implicit"};function We(){var t=jt(),e=[],n=[],i=Mn;function r(a){var s=a+"",o=t.get(s);if(!o){if(i!==Mn)return i;t.set(s,o=e.push(a))}return n[(o-1)%n.length]}return r.domain=function(a){if(!arguments.length)return e.slice();e=[],t=jt();for(var s=-1,o=a.length,l,u;++s<o;)t.has(u=(l=a[s])+"")||t.set(u,e.push(l));return r},r.range=function(a){return arguments.length?(n=ne.call(a),r):n.slice()},r.unknown=function(a){return arguments.length?(i=a,r):i},r.copy=function(){return We(e,n).unknown(i)},fe.apply(r,arguments),r}function mi(){var t=We().unknown(void 0),e=t.domain,n=t.range,i=[0,1],r,a,s=!1,o=0,l=0,u=.5;delete t.unknown;function h(){var c=e().length,f=i[1]<i[0],p=i[f-0],d=i[1-f];r=(d-p)/Math.max(1,c-o+l*2),s&&(r=Math.floor(r)),p+=(d-p-r*(c-o))*u,a=r*(1-o),s&&(p=Math.round(p),a=Math.round(a));var g=Oi(c).map(function(m){return p+r*m});return n(f?g.reverse():g)}return t.domain=function(c){return arguments.length?(e(c),h()):e()},t.range=function(c){return arguments.length?(i=[+c[0],+c[1]],h()):i.slice()},t.rangeRound=function(c){return i=[+c[0],+c[1]],s=!0,h()},t.bandwidth=function(){return a},t.step=function(){return r},t.round=function(c){return arguments.length?(s=!!c,h()):s},t.padding=function(c){return arguments.length?(o=Math.min(1,l=+c),h()):o},t.paddingInner=function(c){return arguments.length?(o=Math.min(1,c),h()):o},t.paddingOuter=function(c){return arguments.length?(l=+c,h()):l},t.align=function(c){return arguments.length?(u=Math.max(0,Math.min(1,c)),h()):u},t.copy=function(){return mi(e(),i).round(s).paddingInner(o).paddingOuter(l).align(u)},fe.apply(h(),arguments)}function yi(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return yi(e())},t}function xi(){return yi(mi.apply(null,arguments).paddingInner(1))}function yo(t){return function(){return t}}function xo(t){return+t}var Ln=[0,1];function it(t){return t}function Pe(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:yo(isNaN(e)?NaN:.5)}function Sn(t){var e=t[0],n=t[t.length-1],i;return e>n&&(i=e,e=n,n=i),function(r){return Math.max(e,Math.min(n,r))}}function vo(t,e,n){var i=t[0],r=t[1],a=e[0],s=e[1];return r<i?(i=Pe(r,i),a=n(s,a)):(i=Pe(i,r),a=n(a,s)),function(o){return a(i(o))}}function bo(t,e,n){var i=Math.min(t.length,e.length)-1,r=new Array(i),a=new Array(i),s=-1;for(t[i]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++s<i;)r[s]=Pe(t[s],t[s+1]),a[s]=n(e[s],e[s+1]);return function(o){var l=Hn(t,o,1,i)-1;return a[l](r[l](o))}}function wo(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function _o(){var t=Ln,e=Ln,n=Be,i,r,a,s=it,o,l,u;function h(){return o=Math.min(t.length,e.length)>2?bo:vo,l=u=null,c}function c(f){return isNaN(f=+f)?a:(l||(l=o(t.map(i),e,n)))(i(s(f)))}return c.invert=function(f){return s(r((u||(u=o(e,t.map(i),E)))(f)))},c.domain=function(f){return arguments.length?(t=mo.call(f,xo),s===it||(s=Sn(t)),h()):t.slice()},c.range=function(f){return arguments.length?(e=ne.call(f),h()):e.slice()},c.rangeRound=function(f){return e=ne.call(f),n=$a,h()},c.clamp=function(f){return arguments.length?(s=f?Sn(t):it,c):s!==it},c.interpolate=function(f){return arguments.length?(n=f,h()):n},c.unknown=function(f){return arguments.length?(a=f,c):a},function(f,p){return i=f,r=p,h()}}function ko(t,e){return _o()(t,e)}function Ao(t,e,n,i){var r=Gi(t,e,n),a;switch(i=ee(i??",f"),i.type){case"s":{var s=Math.max(Math.abs(t),Math.abs(e));return i.precision==null&&!isNaN(a=co(r,s))&&(i.precision=a),pi(i,s)}case"":case"e":case"g":case"p":case"r":{i.precision==null&&!isNaN(a=fo(r,Math.max(Math.abs(t),Math.abs(e))))&&(i.precision=a-(i.type==="e"));break}case"f":case"%":{i.precision==null&&!isNaN(a=ho(r))&&(i.precision=a-(i.type==="%")*2);break}}return Ue(i)}function vi(t){var e=t.domain;return t.ticks=function(n){var i=e();return Fi(i[0],i[i.length-1],n??10)},t.tickFormat=function(n,i){var r=e();return Ao(r[0],r[r.length-1],n??10,i)},t.nice=function(n){n==null&&(n=10);var i=e(),r=0,a=i.length-1,s=i[r],o=i[a],l;return o<s&&(l=s,s=o,o=l,l=r,r=a,a=l),l=$t(s,o,n),l>0?(s=Math.floor(s/l)*l,o=Math.ceil(o/l)*l,l=$t(s,o,n)):l<0&&(s=Math.ceil(s*l)/l,o=Math.floor(o*l)/l,l=$t(s,o,n)),l>0?(i[r]=Math.floor(s/l)*l,i[a]=Math.ceil(o/l)*l,e(i)):l<0&&(i[r]=Math.ceil(s*l)/l,i[a]=Math.floor(o*l)/l,e(i)),t},t}function qe(){var t=ko(it,it);return t.copy=function(){return wo(t,qe())},fe.apply(t,arguments),vi(t)}function bi(){var t=0,e=1,n=1,i=[.5],r=[0,1],a;function s(l){return l<=l?r[Hn(i,l,0,n)]:a}function o(){var l=-1;for(i=new Array(n);++l<n;)i[l]=((l+1)*e-(l-n)*t)/(n+1);return s}return s.domain=function(l){return arguments.length?(t=+l[0],e=+l[1],o()):[t,e]},s.range=function(l){return arguments.length?(n=(r=ne.call(l)).length-1,o()):r.slice()},s.invertExtent=function(l){var u=r.indexOf(l);return u<0?[NaN,NaN]:u<1?[t,i[0]]:u>=n?[i[n-1],e]:[i[u-1],i[u]]},s.unknown=function(l){return arguments.length&&(a=l),s},s.thresholds=function(){return i.slice()},s.copy=function(){return bi().domain([t,e]).range(r).unknown(a)},fe.apply(vi(s),arguments)}function ie(){this._=null}function de(t){t.U=t.C=t.L=t.R=t.P=t.N=null}ie.prototype={constructor:ie,insert:function(t,e){var n,i,r;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;n=t}else this._?(t=Dn(this._),e.P=null,e.N=t,t.P=t.L=e,n=t):(e.P=e.N=null,this._=e,n=null);for(e.L=e.R=null,e.U=n,e.C=!0,t=e;n&&n.C;)i=n.U,n===i.L?(r=i.R,r&&r.C?(n.C=r.C=!1,i.C=!0,t=i):(t===n.R&&(mt(this,n),t=n,n=t.U),n.C=!1,i.C=!0,yt(this,i))):(r=i.L,r&&r.C?(n.C=r.C=!1,i.C=!0,t=i):(t===n.L&&(yt(this,n),t=n,n=t.U),n.C=!1,i.C=!0,mt(this,i))),n=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e=t.U,n,i=t.L,r=t.R,a,s;if(i?r?a=Dn(r):a=i:a=r,e?e.L===t?e.L=a:e.R=a:this._=a,i&&r?(s=a.C,a.C=t.C,a.L=i,i.U=a,a!==r?(e=a.U,a.U=t.U,t=a.R,e.L=t,a.R=r,r.U=a):(a.U=e,e=a,t=a.R)):(s=t.C,t=a),t&&(t.U=e),!s){if(t&&t.C){t.C=!1;return}do{if(t===this._)break;if(t===e.L){if(n=e.R,n.C&&(n.C=!1,e.C=!0,mt(this,e),n=e.R),n.L&&n.L.C||n.R&&n.R.C){(!n.R||!n.R.C)&&(n.L.C=!1,n.C=!0,yt(this,n),n=e.R),n.C=e.C,e.C=n.R.C=!1,mt(this,e),t=this._;break}}else if(n=e.L,n.C&&(n.C=!1,e.C=!0,yt(this,e),n=e.L),n.L&&n.L.C||n.R&&n.R.C){(!n.L||!n.L.C)&&(n.R.C=!1,n.C=!0,mt(this,n),n=e.L),n.C=e.C,e.C=n.L.C=!1,yt(this,e),t=this._;break}n.C=!0,t=e,e=e.U}while(!t.C);t&&(t.C=!1)}}};function mt(t,e){var n=e,i=e.R,r=n.U;r?r.L===n?r.L=i:r.R=i:t._=i,i.U=r,n.U=i,n.R=i.L,n.R&&(n.R.U=n),i.L=n}function yt(t,e){var n=e,i=e.L,r=n.U;r?r.L===n?r.L=i:r.R=i:t._=i,i.U=r,n.U=i,n.L=i.R,n.L&&(n.L.U=n),i.R=n}function Dn(t){for(;t.L;)t=t.L;return t}function _t(t,e,n,i){var r=[null,null],a=L.push(r)-1;return r.left=t,r.right=e,n&&re(r,t,e,n),i&&re(r,e,t,i),S[t.index].halfedges.push(a),S[e.index].halfedges.push(a),r}function xt(t,e,n){var i=[e,n];return i.left=t,i}function re(t,e,n,i){!t[0]&&!t[1]?(t[0]=i,t.left=e,t.right=n):t.left===n?t[1]=i:t[0]=i}function Mo(t,e,n,i,r){var a=t[0],s=t[1],o=a[0],l=a[1],u=s[0],h=s[1],c=0,f=1,p=u-o,d=h-l,g;if(g=e-o,!(!p&&g>0)){if(g/=p,p<0){if(g<c)return;g<f&&(f=g)}else if(p>0){if(g>f)return;g>c&&(c=g)}if(g=i-o,!(!p&&g<0)){if(g/=p,p<0){if(g>f)return;g>c&&(c=g)}else if(p>0){if(g<c)return;g<f&&(f=g)}if(g=n-l,!(!d&&g>0)){if(g/=d,d<0){if(g<c)return;g<f&&(f=g)}else if(d>0){if(g>f)return;g>c&&(c=g)}if(g=r-l,!(!d&&g<0)){if(g/=d,d<0){if(g>f)return;g>c&&(c=g)}else if(d>0){if(g<c)return;g<f&&(f=g)}return!(c>0)&&!(f<1)||(c>0&&(t[0]=[o+c*p,l+c*d]),f<1&&(t[1]=[o+f*p,l+f*d])),!0}}}}}function Lo(t,e,n,i,r){var a=t[1];if(a)return!0;var s=t[0],o=t.left,l=t.right,u=o[0],h=o[1],c=l[0],f=l[1],p=(u+c)/2,d=(h+f)/2,g,m;if(f===h){if(p<e||p>=i)return;if(u>c){if(!s)s=[p,n];else if(s[1]>=r)return;a=[p,r]}else{if(!s)s=[p,r];else if(s[1]<n)return;a=[p,n]}}else if(g=(u-c)/(f-h),m=d-g*p,g<-1||g>1)if(u>c){if(!s)s=[(n-m)/g,n];else if(s[1]>=r)return;a=[(r-m)/g,r]}else{if(!s)s=[(r-m)/g,r];else if(s[1]<n)return;a=[(n-m)/g,n]}else if(h<f){if(!s)s=[e,g*e+m];else if(s[0]>=i)return;a=[i,g*i+m]}else{if(!s)s=[i,g*i+m];else if(s[0]<e)return;a=[e,g*e+m]}return t[0]=s,t[1]=a,!0}function So(t,e,n,i){for(var r=L.length,a;r--;)(!Lo(a=L[r],t,e,n,i)||!Mo(a,t,e,n,i)||!(Math.abs(a[0][0]-a[1][0])>k||Math.abs(a[0][1]-a[1][1])>k))&&delete L[r]}function Do(t){return S[t.index]={site:t,halfedges:[]}}function Co(t,e){var n=t.site,i=e.left,r=e.right;return n===r&&(r=i,i=n),r?Math.atan2(r[1]-i[1],r[0]-i[0]):(n===i?(i=e[1],r=e[0]):(i=e[0],r=e[1]),Math.atan2(i[0]-r[0],r[1]-i[1]))}function wi(t,e){return e[+(e.left!==t.site)]}function Ro(t,e){return e[+(e.left===t.site)]}function Io(){for(var t=0,e=S.length,n,i,r,a;t<e;++t)if((n=S[t])&&(a=(i=n.halfedges).length)){var s=new Array(a),o=new Array(a);for(r=0;r<a;++r)s[r]=r,o[r]=Co(n,L[i[r]]);for(s.sort(function(l,u){return o[u]-o[l]}),r=0;r<a;++r)o[r]=i[s[r]];for(r=0;r<a;++r)i[r]=o[r]}}function To(t,e,n,i){var r=S.length,a,s,o,l,u,h,c,f,p,d,g,m,y=!0;for(a=0;a<r;++a)if(s=S[a]){for(o=s.site,u=s.halfedges,l=u.length;l--;)L[u[l]]||u.splice(l,1);for(l=0,h=u.length;l<h;)d=Ro(s,L[u[l]]),g=d[0],m=d[1],c=wi(s,L[u[++l%h]]),f=c[0],p=c[1],(Math.abs(g-f)>k||Math.abs(m-p)>k)&&(u.splice(l,0,L.push(xt(o,d,Math.abs(g-t)<k&&i-m>k?[t,Math.abs(f-t)<k?p:i]:Math.abs(m-i)<k&&n-g>k?[Math.abs(p-i)<k?f:n,i]:Math.abs(g-n)<k&&m-e>k?[n,Math.abs(f-n)<k?p:e]:Math.abs(m-e)<k&&g-t>k?[Math.abs(p-e)<k?f:t,e]:null))-1),++h);h&&(y=!1)}if(y){var v,b,A,_=1/0;for(a=0,y=null;a<r;++a)(s=S[a])&&(o=s.site,v=o[0]-t,b=o[1]-e,A=v*v+b*b,A<_&&(_=A,y=s));if(y){var M=[t,e],V=[t,i],P=[n,i],Y=[n,e];y.halfedges.push(L.push(xt(o=y.site,M,V))-1,L.push(xt(o,V,P))-1,L.push(xt(o,P,Y))-1,L.push(xt(o,Y,M))-1)}}for(a=0;a<r;++a)(s=S[a])&&(s.halfedges.length||delete S[a])}var _i=[],Ze;function Eo(){de(this),this.x=this.y=this.arc=this.site=this.cy=null}function rt(t){var e=t.P,n=t.N;if(!(!e||!n)){var i=e.site,r=t.site,a=n.site;if(i!==a){var s=r[0],o=r[1],l=i[0]-s,u=i[1]-o,h=a[0]-s,c=a[1]-o,f=2*(l*c-u*h);if(!(f>=-Ho)){var p=l*l+u*u,d=h*h+c*c,g=(c*p-u*d)/f,m=(l*d-h*p)/f,y=_i.pop()||new Eo;y.arc=t,y.site=r,y.x=g+s,y.y=(y.cy=m+o)+Math.sqrt(g*g+m*m),t.circle=y;for(var v=null,b=St._;b;)if(y.y<b.y||y.y===b.y&&y.x<=b.x)if(b.L)b=b.L;else{v=b.P;break}else if(b.R)b=b.R;else{v=b;break}St.insert(v,y),v||(Ze=y)}}}}function st(t){var e=t.circle;e&&(e.P||(Ze=e.N),St.remove(e),_i.push(e),de(e),t.circle=null)}var ki=[];function No(){de(this),this.edge=this.site=this.circle=null}function Cn(t){var e=ki.pop()||new No;return e.site=t,e}function we(t){st(t),ot.remove(t),ki.push(t),de(t)}function Po(t){var e=t.circle,n=e.x,i=e.cy,r=[n,i],a=t.P,s=t.N,o=[t];we(t);for(var l=a;l.circle&&Math.abs(n-l.circle.x)<k&&Math.abs(i-l.circle.cy)<k;)a=l.P,o.unshift(l),we(l),l=a;o.unshift(l),st(l);for(var u=s;u.circle&&Math.abs(n-u.circle.x)<k&&Math.abs(i-u.circle.cy)<k;)s=u.N,o.push(u),we(u),u=s;o.push(u),st(u);var h=o.length,c;for(c=1;c<h;++c)u=o[c],l=o[c-1],re(u.edge,l.site,u.site,r);l=o[0],u=o[h-1],u.edge=_t(l.site,u.site,null,r),rt(l),rt(u)}function Yo(t){for(var e=t[0],n=t[1],i,r,a,s,o=ot._;o;)if(a=Ai(o,n)-e,a>k)o=o.L;else if(s=e-Xo(o,n),s>k){if(!o.R){i=o;break}o=o.R}else{a>-k?(i=o.P,r=o):s>-k?(i=o,r=o.N):i=r=o;break}Do(t);var l=Cn(t);if(ot.insert(i,l),!(!i&&!r)){if(i===r){st(i),r=Cn(i.site),ot.insert(l,r),l.edge=r.edge=_t(i.site,l.site),rt(i),rt(r);return}if(!r){l.edge=_t(i.site,l.site);return}st(i),st(r);var u=i.site,h=u[0],c=u[1],f=t[0]-h,p=t[1]-c,d=r.site,g=d[0]-h,m=d[1]-c,y=2*(f*m-p*g),v=f*f+p*p,b=g*g+m*m,A=[(m*v-p*b)/y+h,(f*b-g*v)/y+c];re(r.edge,u,d,A),l.edge=_t(u,t,null,A),r.edge=_t(t,d,null,A),rt(i),rt(r)}}function Ai(t,e){var n=t.site,i=n[0],r=n[1],a=r-e;if(!a)return i;var s=t.P;if(!s)return-1/0;n=s.site;var o=n[0],l=n[1],u=l-e;if(!u)return o;var h=o-i,c=1/a-1/u,f=h/u;return c?(-f+Math.sqrt(f*f-2*c*(h*h/(-2*u)-l+u/2+r-a/2)))/c+i:(i+o)/2}function Xo(t,e){var n=t.N;if(n)return Ai(n,e);var i=t.site;return i[1]===e?i[0]:1/0}var k=1e-6,Ho=1e-12,ot,S,St,L;function zo(t,e,n){return(t[0]-n[0])*(e[1]-t[1])-(t[0]-e[0])*(n[1]-t[1])}function Bo(t,e){return e[1]-t[1]||e[0]-t[0]}function Rn(t,e){var n=t.sort(Bo).pop(),i,r,a;for(L=[],S=new Array(t.length),ot=new ie,St=new ie;;)if(a=Ze,n&&(!a||n[1]<a.y||n[1]===a.y&&n[0]<a.x))(n[0]!==i||n[1]!==r)&&(Yo(n),i=n[0],r=n[1]),n=t.pop();else if(a)Po(a.arc);else break;if(Io(),e){var s=+e[0][0],o=+e[0][1],l=+e[1][0],u=+e[1][1];So(s,o,l,u),To(s,o,l,u)}this.edges=L,this.cells=S,ot=St=L=S=null}Rn.prototype={constructor:Rn,polygons:function(){var t=this.edges;return this.cells.map(function(e){var n=e.halfedges.map(function(i){return wi(e,t[i])});return n.data=e.site.data,n})},triangles:function(){var t=[],e=this.edges;return this.cells.forEach(function(n,i){if(o=(a=n.halfedges).length)for(var r=n.site,a,s=-1,o,l,u=e[a[o-1]],h=u.left===r?u.right:u.left;++s<o;)l=h,u=e[a[s]],h=u.left===r?u.right:u.left,l&&h&&i<l.index&&i<h.index&&zo(r,l,h)<0&&t.push([r.data,l.data,h.data])}),t},links:function(){return this.edges.filter(function(t){return t.right}).map(function(t){return{source:t.left.data,target:t.right.data}})},find:function(t,e,n){for(var i=this,r,a=i._found||0,s=i.cells.length,o;!(o=i.cells[a]);)if(++a>=s)return null;var l=t-o.site[0],u=e-o.site[1],h=l*l+u*u;do o=i.cells[r=a],a=null,o.halfedges.forEach(function(c){var f=i.edges[c],p=f.left;if(!((p===o.site||!p)&&!(p=f.right))){var d=t-p[0],g=e-p[1],m=d*d+g*g;m<h&&(h=m,a=p.index)}});while(a!==null);return i._found=r,n==null||h<=n*n?o.site:null}};function kt(t,e,n){this.k=t,this.x=e,this.y=n}kt.prototype={constructor:kt,scale:function(t){return t===1?this:new kt(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new kt(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};kt.prototype;const Mi=(t,e=250)=>{let n;return(...i)=>{let r;return n&&clearTimeout(n),n=setTimeout(()=>{r=t(...i)},e),r}};function $o({D3Module:t,props:e,listenersKeys:n}){const i=Z(void 0),r=Z(),s=Mi(()=>{i.value&&i.value.render&&i.value.render()}),o=d=>d&&i.value.setParams&&i.value.setParams(d),l=d=>d&&i.value.setData&&i.value.setData(d),u=d=>d&&i.value.setDataset&&i.value.setDataset(d),h=d=>d&&i.value.setDatum&&i.value.setDatum(d),c=d=>d&&i.value.filter&&i.value.filter(d),f=({width:d,height:g})=>{i.value.resize&&i.value.resize({width:d&&typeof d=="number"?d:i.value.width,height:g&&typeof g=="number"?g:i.value.height})},p=d=>{d&&i.value.zoom&&i.value.transform&&i.value.transformZoom&&i.value.initZoom&&(i.value.initZoom(i.value.zoom),i.value.transformZoom(d))};return H(()=>e.params,d=>{o(d||{})}),H(()=>e.data,d=>{l(d)}),H(()=>e.dataset,d=>{u(d)}),H(()=>e.datum,d=>{h(d)}),H(()=>e.filter,d=>{c(d)}),H(()=>[e.width,e.height],({width:d,height:g})=>{(e.width||e.height)&&f({width:d,height:g})}),H(()=>e.zoom,d=>{p(d)}),{d3Module:i,debounceRender:s,createModule(d){r.value=d,i.value=new t(O(d),e.params||{}),o(e.params||{}),l(e.data),u(e.dataset),h(e.datum),c(e.filter),f({width:e.width,height:e.height}),p(e.zoom)},eventHandler(d){let g=d;n.forEach(m=>{i.value.on!=null&&i.value.on(m,y=>{g&&(console.log(m,y),g(m,y))})})}}}function Oo(t){const e=Z({x:0,y:0,width:0,height:0,top:0,right:0,bottom:0,left:0}),n=Mi(r=>{const a=r[0];e.value=a.contentRect});return new ResizeObserver((r,a)=>{n(r)}).observe(t),e}const _e=800,In=500,Fo=(t,e)=>e?Object.keys(e):t?Object.keys(t).filter(n=>n.substring(0,2)==="on").map(n=>`${n.substring(2,3).toLowerCase()}${n.substring(3,n.length)}`):[],Go=Ti({props:{module:{},params:{},data:{},datum:{},dataset:{},filter:{},width:{default:()=>0},height:{default:()=>0},forceFit:{default:()=>!0},zoom:{}},setup(t,{emit:e,listeners:n}){const i=Ei(),r=Fo(i,n),a=Z(null),s=Z(null),o=je(()=>{let g=`${_e}px`;return t.forceFit&&!t.width?g="100%":typeof t.width=="string"?g=t.width:typeof t.width=="number"&&t.width?g=`${t.width}px`:g=`${_e}px`,g}),l=je(()=>{let g=`${In}px`;return typeof t.height=="string"?g=t.height:typeof t.height=="number"&&t.height&&(g=`${t.height}px`),g}),u=Z(_e),h=Z(In),{d3Module:c,createModule:f,eventHandler:p,debounceRender:d}=$o({D3Module:t.module,props:t,listenersKeys:r});return Ni(()=>{f(s.value),p((g,m)=>{e(g,m)}),setTimeout(()=>{if(u.value=a.value.clientWidth,h.value=a.value.clientHeight,t.forceFit){const g=Oo(a.value);H(g,()=>{u.value=g.value.width,h.value=g.value.height,c.value.resize&&c.value.resize({width:u.value,height:h.value}),d(),e("resize",{width:u.value,height:h.value})})}else d();H(t,()=>d()),H(()=>[t.width,t.height],()=>{e("resize",{width:t.width,height:t.height})})})}),{d3Module:c,container:a,svg:s,containerWidth:o,containerHeight:l,svgWidth:u,svgHeight:h}}}),Vo=(t,e)=>{const n=t.__vccOpts||t;for(const[i,r]of e)n[i]=r;return n},Uo=["width","height"];function Wo(t,e,n,i,r,a){return W(),q("div",{ref:"container",style:Pi([{position:"relative"},{width:t.containerWidth,height:t.containerHeight}])},[(W(),q("svg",{ref:"svg","xmlns:xlink":"http://www.w3.org/1999/xlink",xmls:"http://www.w3.org/2000/svg",version:"1.1",style:{position:"absolute"},width:t.svgWidth,height:t.svgHeight},null,8,Uo))],4)}const qo=Vo(Go,[["render",Wo]]),j=["#67B7DC","#6794DC","#6771DC","#8067DC","#A367DC","#C767DC","#DC67CE","#DC67AB","#DC6788","#DC6967","#DC8C67","#DCAF67"],Li=800,Si=500,ae={top:50,right:70,bottom:50,left:70},Zo="#e1e1e1",Ke="#7b7b7b",Qe={offsetX:20,offsetY:5,type:"white",templateHtml:()=>""},Ko={...Qe,templateHtml:()=>"",yLine:void 0,alignCenter:void 0};({...Qe});class Qo{constructor(e,n){this.params=Qe,this.datum={x:-1,y:-1,data:null},this.renderData={_sourceData:{x:-1,y:-1},x:-1,y:-1,contentHtml:""},this.setTooltipStyle=i=>{},this.render=()=>{this.renderTooltip([this.renderData])},this.selection=e,this.params={...this.params,...n},this.params.type==="black"?this.setTooltipStyle=i=>{i.style("pointer-events","none").style("white-space","nowrap").style("padding","10px 10px").style("background","#333333").style("border-radius","5px").style("opacity",.9).style("color","white").style("font-size","14px").style("text-align","left")}:this.params.type==="white"&&(this.setTooltipStyle=i=>{i.style("pointer-events","none").style("white-space","nowrap").style("padding","10px 15px").style("background-color","rgba(255,255,255,.8)").style("border","1px solid rgba(152,152,152,0.5)").style("border-radius","5px").style("color","black").style("font-size","12px").style("line-height","20px").style("text-align","left")})}setDatum(e){if(e!=null&&e.data&&(this.datum.data=e.data,this.renderData.contentHtml=this.params.templateHtml?this.params.templateHtml(e.data):""),!this.renderData.contentHtml)return;const n=(e==null?void 0:e.x)??w.clientX,i=(e==null?void 0:e.y)??w.clientY;this.datum.x=n,this.datum.y=i,this.renderData.x=n,this.renderData.y=i,this.render()}select(){return this.selection}}function Jo(t){var i;const e=document.createElementNS("http://www.w3.org/1999/xhtml","div");e.innerHTML='<svg xmlns="http://www.w3.org/2000/svg">'+t+"</svg>";const n=document.createDocumentFragment();for(;n&&((i=e==null?void 0:e.firstChild)!=null&&i.firstChild);)n.appendChild(e.firstChild.firstChild);return n}function jo(t,e){const n=t.node();for(;n.hasChildNodes();)n.removeChild(n.firstChild);t.node().appendChild(Jo(e))}function Tn(t){try{return t.node().getBoundingClientRect()}catch(e){throw new Error(e)}}const tl=(t,e)=>e instanceof Function?e(t):Ue(e)(t),se=(t,e)=>t-e.left-e.right,oe=(t,e)=>t-e.top-e.bottom,el=({axisLabels:t,axisWidth:e,padding:n=.5,reverse:i=!1})=>{let r=[0,e];return i&&(r=[e,0]),xi().domain(t).range(r).padding(.5)},nl=({maxValue:t,minValue:e,axisWidth:n,domainMinValue:i=void 0,domainMaxValue:r=void 0,domainMinRange:a=void 0,domainMaxRange:s=void 0,reverse:o=!1})=>{let l=e,u=t;if(i!=null){const c=i;l=c<l?c:l}if(a!=null){const c=t-(t-e)/(1-a);l=c<l?c:l}if(r!=null){const c=r;u=c>u?c:u}if(s!=null){const c=t/s;u=c>u?c:u}l==0&&u==0&&(u=1);let h=[l,u];return o&&(h=[u,l]),qe().domain(h).range([0,n])},il=({axisLabels:t,axisWidth:e,reverse:n=!1})=>{let r=[];return n?r=t.map((a,s)=>t.length-1-s):r=t.map((a,s)=>s),bi().domain([-0,e+0]).range(r)},rl=(t,e)=>We().domain(t.map(n=>n)).range(t.map((n,i)=>e[i]));class al extends Qo{constructor(e,n){super(e,n),this.params=Ko,this.tooltipSelection=void 0,this.lineSelection=void 0,this.containerSize={height:0,width:0,x:0,y:0},this.setParams(n??this.params)}setParams(e){this.params={...this.params,...e}}doRenderTooltip(e){try{this.tooltipSelection.interrupt("fadeout")}catch{}const n=this.tooltipSelection&&this.tooltipSelection.node()?Tn(this.tooltipSelection):{width:0,height:0},i=this.containerSize.x+this.containerSize.width-n.width,r=this.containerSize.y+this.containerSize.height-n.height,a=l=>{l.style("left",u=>u.x<i?`${u.x+20}px`:`${u.x-n.width-20}px`).style("top",u=>this.params.alignCenter?this.containerSize.y+this.containerSize.height/2-n.height/2:u.y<r?`${u.y}px`:`${r+5}px`)},s=O("body").selectAll(".bpchat___tooltip").data(e);s.transition().duration(50).call(a).on("interrupt",(l,u,h)=>{O(h[u]).style("opacity",1)});const o=s.enter().append("div").classed("bpchat___tooltip",!0).call(this.setTooltipStyle);o.call(a),this.tooltipSelection=s.merge(o),this.tooltipSelection.style("position","fixed").style("z-index",1e4).html(l=>l.contentHtml),s.exit().transition("fadeout").style("opacity",0).remove().on("interrupt",(l,u,h)=>{O(h[u]).style("opacity",1)})}renderYLine(e){const n=e[0]?e[0].x-this.containerSize.x:0,i=this.selection.selectAll(".bpchart__tooltip__line").data(e),r=i.enter().append("line").classed("bpchart__tooltip__line",!0).style("stroke","#E4E7ED").style("stroke-width",1).style("pointer-events","none");this.lineSelection=i.merge(r).attr("x1",n).attr("y1",0).attr("x2",n).attr("y2",this.containerSize.height),i.exit().transition("fadeout").style("opacity",0).remove().on("interrupt",(a,s,o)=>{O(o[s]).style("opacity",1)})}renderTooltip(e){this.containerSize=Tn(this.selection),this.params.yLine==!0&&this.renderYLine(e),this.doRenderTooltip(e)}remove(){this.tooltipSelection&&this.tooltipSelection.transition("fadeout").style("opacity",0).remove().on("end",()=>{var e;this.params.yLine==!0&&((e=this.lineSelection)==null||e.remove())}),this.renderData.contentHtml=""}}class sl{constructor(e){this.data=[],this.auxLineSelection=void 0,this.selection=e}setData(e){this.data=e}render(){const e=this.selection.selectAll("line.bpchart__auxline").data(this.data),n=e.enter().append("line").classed("bpchart__auxline",!0).style("stroke",Ke).style("stroke-width",1).style("stroke-dasharray","3,3").style("pointer-events","none");this.auxLineSelection=e.merge(n).attr("opacity",i=>i.active==!0?1:0),e.exit().remove(),n.attr("x1",i=>i.x1).attr("y1",i=>i.y1).attr("x2",i=>i.x2).attr("y2",i=>i.y2),e.transition().duration(50).attr("x1",i=>i.x1).attr("y1",i=>i.y1).attr("x2",i=>i.x2).attr("y2",i=>i.y2)}remove(){this.selection.remove()}}const ol={barDirection:"right",positionPadding:5};function Di(t,e=10){var r;const n=document.createElement("canvas").getContext("2d");return(((r=n==null?void 0:n.measureText(t))==null?void 0:r.width)??0)*e/10}const ll=(t,e)=>{const n=t.map(s=>{const o=Di(s.text,s.fontSize)+2,l=s.fontSize;let u=0,h=0,c="middle",f="central",p=0,d=0,g=0,m=0;return s.position==="left"?(u=s.barX0-e.positionPadding,h=(s.barY0+s.barY1)/2,c="end",f="central",p=u-o,d=u,g=h-l/2,m=h+l/2):s.position==="right"?(u=s.barX1+e.positionPadding,h=(s.barY0+s.barY1)/2,c="start",f="central",p=u,d=u+o,g=h-l/2,m=h+l/2):s.position==="top"?(u=(s.barX0+s.barX1)/2,h=s.barY0-e.positionPadding,c="middle",f="auto",p=u-o/2,d=u+o/2,g=h-l,m=h):s.position==="bottom"?(u=(s.barX0+s.barX1)/2,h=s.barY1+e.positionPadding,c="middle",f="hanging",p=u-o/2,d=u+o/2,g=h,m=h+l):s.position==="center"&&(u=(s.barX0+s.barX1)/2,h=(s.barY0+s.barY1)/2,c="middle",f="central",p=u-o/2,d=u+o/2,g=h,m=h+l),{...s,width:o,height:l,boundaryX0:p,boundaryX1:d,boundaryY0:g,boundaryY1:m,positionX:u,positionY:h,textAnchor:c,dominantBaseline:f,renderX:0,renderY:0,offsetX:0,offsetY:0}}),i=Object.assign([],n).sort((s,o)=>e.barDirection==="left"?o.positionX-s.positionX:e.barDirection==="right"?s.positionX-o.positionX:e.barDirection==="up"?o.positionY-s.positionY:e.barDirection==="down"?s.positionY-o.positionY:s.positionX-o.positionX),r=(s,o)=>o.filter(l=>(l.boundaryX0>=s.boundaryX0&&l.boundaryX0<=s.boundaryX1||l.boundaryX1>=s.boundaryX0&&l.boundaryX1<=s.boundaryX1)&&(l.boundaryY0>=s.boundaryY0&&l.boundaryY0<=s.boundaryY1||l.boundaryY1>=s.boundaryY0&&l.boundaryY1<=s.boundaryY1)),a=[];return i.forEach(s=>{let o=s.positionX,l=s.positionY;const u=r(s,a);let h=0,c=0;u.length&&(e.barDirection==="left"?h=u.reduce((y,v)=>v.boundaryX0<y?v.boundaryX0:y,1/0)-s.boundaryX1:e.barDirection==="right"?h=u.reduce((y,v)=>v.boundaryX1>y?v.boundaryX1:y,-1/0)-s.boundaryX0:e.barDirection==="up"?c=u.reduce((y,v)=>v.boundaryY0<y?v.boundaryY0:y,1/0)-s.boundaryY1:e.barDirection==="down"&&(c=u.reduce((y,v)=>v.boundaryY1>y?v.boundaryY1:y,1/0)-s.boundaryY0));let f=0,p=0;e.barDirection==="left"&&(s.position==="top"||s.position==="bottom"||s.position==="center")&&s.boundaryX1>s.barX1?f=s.barX1-s.boundaryX1:e.barDirection==="right"&&(s.position==="top"||s.position==="bottom"||s.position==="center")&&s.boundaryX0<s.barX0?f=s.barX0-s.boundaryX0:e.barDirection==="up"&&(s.position==="left"||s.position==="right"||s.position==="center")&&s.boundaryY1>s.barY1?p=s.barY1-s.boundaryY1:e.barDirection==="down"&&(s.position==="left"||s.position==="right"||s.position==="center")&&s.boundaryY0<s.barY0&&(p=s.barY0-s.boundaryY0);const d=Math.abs(h)>Math.abs(f)?h:f,g=Math.abs(c)>Math.abs(p)?c:p;a.push({...s,boundaryX0:s.boundaryX0+d,boundaryX1:s.boundaryX1+d,boundaryY0:s.boundaryY0+g,boundaryY1:s.boundaryY1+g,renderX:o,renderY:l,offsetX:d,offsetY:g})}),a};class ul{constructor(e,n){this.data=[],this.params=ol,this.renderData=[],this.selection=e,this.labelGSelection=this.selection.append("g").style("pointer-events","none")}remove(){this.selection.remove()}setParams(e){this.params={...this.params,...e}}setData(e){this.data=e,this.renderData=ll(e,this.params)}render(){const e=this.labelGSelection.selectAll("text").data(this.renderData),n=e.enter().append("text");e.exit().remove(),this.labelSelection=e.merge(n).attr("text-anchor",i=>i.textAnchor).attr("dominant-baseline",i=>i.dominantBaseline).attr("font-size",(i,r)=>i.fontSize).attr("fill",(i,r)=>i.color).attr("style",i=>i.style).text(i=>i.text),n.attr("x",i=>this.params.barDirection==="left"||this.params.barDirection==="right"?0:i.positionX).attr("y",i=>this.params.barDirection==="left"||this.params.barDirection==="right"?i.positionY:0).attr("transform",(i,r)=>this.params.barDirection==="left"||this.params.barDirection==="right"?`translate(0, ${i.offsetY})`:`translate(${i.offsetX}, 0)`),this.labelSelection.transition().duration(200).attr("x",i=>i.positionX).attr("y",i=>i.positionY).attr("transform",(i,r)=>`translate(${i.offsetX}, ${i.offsetY})`)}}j.map(t=>t).reverse();const Ci={xLabel:"x",yLabel:"y",xLabelAnchor:"start",yLabelAnchor:"end",xLabelOffset:[0,0],yLabelOffset:[0,0],xTickPadding:20,yTickPadding:20,xTickLine:!0,yTickLine:!1,xTickLineDasharray:"none",yTickLineDasharray:"none",xTickFormat:",.0f",xTicks:4,axisLineColor:Zo,axisLabelColor:Ke,rotateYLabel:!1,padding:ae,xVisible:!0,yVisible:!0,yLabelIconMethod:void 0},zt=6;class hl{constructor(e,n){this.width=Li,this.height=Si,this.dataset={xScale:qe(),yScale:xi(),maxValue:0},this.params=Ci,this.xAxisSelection=void 0,this.yAxisSelection=void 0,this.xLabelSelection=void 0,this.yLabelSelection=void 0,this.axisWidth=se(this.width,ae),this.axisHeight=oe(this.height,ae),this.selection=e}setParams(e){this.params={...this.params,...e}}setDataset(e){this.dataset=e}resize({width:e=this.width,height:n=this.height}){this.width=e,this.height=n,this.axisWidth=se(this.width,this.params.padding),this.axisHeight=oe(this.height,this.params.padding)}render(){this.renderYPointAxis(),this.renderXLinearAxis();const e=this.dataset.xScale(0);this.renderZeroLine(this.selection,[{x1:e,y1:0,x2:e,y2:this.axisHeight}])}remove(){this.selection.remove()}renderYPointAxis(){let e=[];this.params.yVisible&&e.push(this.params);const n=this.selection.selectAll("g.yAxis").data(e),i=n.enter().append("g");this.yAxisSelection=n.merge(i).classed("yAxis",!0).attr("transform",l=>"translate("+l.padding.left+","+l.padding.top+")"),n.exit().remove();const r=this.selection.selectAll("text.yLabel").data(e),a=r.enter().append("text").classed("yLabel",!0).style("font-size","14px").style("font-weight","bold");if(this.yLabelSelection=r.merge(a).attr("x",l=>l.padding.left-l.xTickPadding-zt).attr("y",l=>l.padding.top-l.yTickPadding).attr("text-anchor",this.params.yLabelAnchor).attr("transform",`translate(${this.params.yLabelOffset[0]}, ${this.params.yLabelOffset[1]})`).style("fill",this.params.axisLabelColor).text(l=>l.yLabel),r.exit().remove(),this.yLabelSelection.size()==0)return;this.yAxis=Ji(this.dataset.yScale).scale(this.dataset.yScale).tickSize(this.params.yTickLine&&typeof this.params.yTickLine=="boolean"?-this.axisWidth:this.params.yTickLine&&typeof this.params.yTickLine=="number"?-this.axisWidth*this.params.yTickLine:zt).tickSizeOuter(0).tickFormat(l=>l).tickPadding(this.params.yTickPadding);const s=this.yAxisSelection.transition().duration(50).call(this.yAxis).attr("text-anchor",()=>(this.params.rotateYLabel!==!1,"end"));s.selectAll("line").style("fill","none").style("stroke",this.params.axisLineColor).style("stroke-dasharray",this.params.yTickLineDasharray),s.selectAll("path").style("fill","none").style("stroke",this.params.axisLineColor).style("shape-rendering","crispEdges");const o=s.selectAll("text").style("font-family","sans-serif").style("font-size","14px").style("color",this.params.axisLabelColor).attr("transform-origin",`-5 ${this.params.xTickPadding+zt}`);this.params.rotateYLabel===!0?o.attr("transform","translate(0,0) rotate(-45)"):typeof this.params.rotateYLabel=="number"&&o.attr("transform",`translate(0,0) rotate(${this.params.rotateYLabel})`),this.appendLabelIcon(this.yAxisSelection.selectAll("g.tick"),this.params.yLabelIconMethod)}appendLabelIcon(e,n){e.each((i,r,a)=>{const s=O(a[r]),o=s.select("text"),l=o.data(),u=Math.abs(Number(o.attr("x"))),h=Di(l,14),c=-u-h-21,f=-7,p=s.selectAll("g.bpchart__icon").data([l]),d=p.enter().append("g").classed("bpchart__icon",!0);p.exit().remove(),d.size()&&n&&(console.log("enter.size()",d.size()),jo(d,n(l,r))),p.merge(d).attr("transform",`translate(${c}, ${f})`)})}renderXLinearAxis(){let e=[];this.params.xVisible&&e.push(this.params);const n=this.selection.selectAll("g.xAxis").data(e),i=n.enter().append("g");this.xAxisSelection=n.merge(i).classed("xAxis",!0).attr("transform",o=>"translate("+o.padding.left+","+(o.padding.top+this.axisHeight)+")"),n.exit().remove();const r=this.selection.selectAll("text.xLabel").data(e),a=r.enter().append("text").classed("xLabel",!0).style("font-size","14px").style("font-weight","bold").style("fill",this.params.axisLabelColor).style("dominant-baseline","hanging");if(this.xLabelSelection=r.merge(a).attr("x",o=>this.width-o.padding.right+o.xTickPadding).attr("y",o=>o.padding.top+this.axisHeight+o.yTickPadding).attr("transform",`translate(${this.params.xLabelOffset[0]}, ${this.params.xLabelOffset[1]})`).attr("text-anchor",this.params.xLabelAnchor).text(o=>o.xLabel),r.exit().remove(),this.xLabelSelection.size()==0)return;this.xAxis=Qi(this.dataset.xScale).scale(this.dataset.xScale).ticks(this.dataset.maxValue>this.params.xTicks?this.params.xTicks:this.dataset.maxValue===0?1:Math.ceil(this.dataset.maxValue)).tickFormat(o=>tl(o,this.params.xTickFormat)).tickSize(this.params.xTickLine&&typeof this.params.xTickLine=="boolean"?-this.axisHeight:this.params.xTickLine&&typeof this.params.xTickLine=="number"?-this.axisHeight*this.params.xTickLine:zt).tickPadding(this.params.xTickPadding);const s=this.xAxisSelection.transition().duration(100).call(this.xAxis);s.selectAll("line").style("fill","none").style("stroke",this.params.axisLineColor).style("stroke-dasharray",this.params.xTickLineDasharray),s.selectAll("path").style("fill","none").style("stroke","none").style("shape-rendering","crispEdges"),s.selectAll("text").style("font-family","sans-serif").style("font-size","14px").style("color",this.params.axisLabelColor)}renderZeroLine(e,n){const i=e.selectAll("g.bpchart__zero-line").data(n),r=i.enter().append("g").classed("bpchart__zero-line",!0).attr("transform",s=>"translate("+this.params.padding.left+","+this.params.padding.top+")");i.exit().remove();const a=i.merge(r);r.append("line"),a.select("line").attr("stroke",this.params.axisLabelColor).attr("stroke-width",1).transition().duration(100).attr("x1",s=>s.x1).attr("y1",s=>s.y1).attr("x2",s=>s.x2).attr("y2",s=>s.y2).attr("opacity",s=>s.x1>=0&&s.x1<=this.axisWidth?1:0)}}const cl={barWidth:0,barPadding:1,barR:!1,colors:j,highlightTarget:"datum",highlightDatumId:"",enterDuration:800},fl={barWidth:0,barPadding:1,barGroupPadding:20,barR:!1,colors:j,highlightTarget:"item",highlightGroupId:"",highlightItemId:"",highlightDatumId:"",enterDuration:800},dl={barWidth:0,barGroupPadding:20,barR:!1,colors:j,highlightTarget:"item",highlightGroupId:"",highlightItemId:"",highlightDatumId:"",enterDuration:800},Ri={groupLayout:[],barPadding:1,barGroupPadding:20,colors:j,highlightTarget:"item",highlightGroupId:"",highlightItemId:"",highlightDatumId:"",enterDuration:800,labelTextMethod:(t,e)=>String(t.value),labelPositionMethod:(t,e)=>"top",labelStyleMethod:(t,e)=>"",labelFontSizeMethod:(t,e)=>10,labelColorMethod:(t,e)=>Ke,labelPadding:5},pl=(t,e)=>{const n=new Map;return e.forEach((i,r)=>{n.set(i,t[r])}),n},gl=(t,e)=>{const n=new Map;return t.forEach((i,r)=>{i.forEach((a,s)=>{const o=n.get(e[s])??[];o.push(a),n.set(e[s],o)})}),n},ml=({groupLayout:t,yLabels:e,itemLabels:n,axisHeight:i,barPadding:r,barGroupPadding:a})=>{if(!t.length)return[{stackAmount:n.length,barWidth:En({axisHeight:i,groupAmount:e.length,barAmountOfGroup:1,barPadding:r,barGroupPadding:a}),barR:!1,datumIndexList:n.map((c,f)=>f)}];const s=t.reduce((c,f)=>{let p=0;return f.barWidth&&(p=f.barWidth+r),c+p},0),o=t.reduce((c,f)=>c+(f.barWidth?1:0),0),l=s*e.length,u=En({axisHeight:i-l,groupAmount:e.length,barAmountOfGroup:t.length-o,barPadding:r,barGroupPadding:a});let h=-1;return t.map((c,f)=>{const p=c.stackAmount??1;let d=[];h+=1;for(let g=h;g<h+p;g++)d.push(g);return h=d[d.length-1],{stackAmount:p,barWidth:c.barWidth??u,barR:c.barR??!1,datumIndexList:d}})},yl=({YDataMap:t,yLabels:e,axisHeight:n,groupLayout:i,barGroupPadding:r,barPadding:a})=>{let s=0;return i.every(o=>o.barWidth)?(s=i.reduce((o,l)=>o+l.barWidth,0),s+=a*(i.length-1)):s=Ii({axisHeight:n,groupAmount:e.length,barGroupPadding:r}),e.map((o,l)=>{const u=t.get(o)??[];let h=[],c=-s/2;return i.forEach((f,p)=>{let d=0;const g=c;f.datumIndexList.forEach(m=>{const y=u[m];h.push({...y,sourceIndex:[m,l],barX:d,barY:g+f.barWidth/2,groupY:y.y,barWidth:f.barWidth,barR:f.barR==!0?f.barWidth/2:typeof f.barR=="number"?f.barR:0,width:y.x}),d+=y.x}),c+=f.barWidth+a}),h})},xl=(t,e)=>{let n=[];return t.forEach((i,r)=>{i.forEach((a,s)=>{n.push({id:a.id,data:a,barX0:a.barX,barX1:a.barX+a.width,barY0:a.groupY+a.barY-a.barWidth/2,barY1:a.groupY+a.barY+a.barWidth/2,position:e.labelPositionMethod(a,a.sourceIndex),fontSize:e.labelFontSizeMethod(a,a.sourceIndex),color:e.labelColorMethod(a,a.sourceIndex),style:e.labelStyleMethod(a,a.sourceIndex),text:e.labelTextMethod(a,a.sourceIndex)})})}),n},Bt=({datum:t,YDataMap:e,ItemDataMap:n,event:i})=>({groupData:e.get(t.yLabel),itemData:n.get(t.itemLabel),datum:t,yLabel:t.yLabel,yIndex:t.yIndex,itemLabel:t.itemLabel,itemIndex:t.itemIndex,clientX:i.clientX,clientY:i.clientY,offsetX:i.offsetX,offsetY:i.offsetY}),Ii=({axisHeight:t,groupAmount:e,barGroupPadding:n=0})=>{const i=t/e-n;return i>1?i:1},En=({axisHeight:t,groupAmount:e,barAmountOfGroup:n,barPadding:i=0,barGroupPadding:r=0})=>{const s=Ii({axisHeight:t,groupAmount:e,barGroupPadding:r})/n-i;return s>1?s:1},vl=(t,e=400)=>e/t;class bl{constructor(e,n){this.params=Ri,this.dataset={data:[],itemLabels:[],yLabels:[],axisHeight:0,zeroX:0},this.graphicData=[],this.groupLayout=[],this.graphicGroupSelection=void 0,this.graphicBarSelection=void 0,this.itemLabels=[],this.ItemDataMap=new Map,this.YDataMap=new Map,this.axisHeight=0,this.delayDuration=0,this.clickCallback=function(){},this.mouseoverCallback=function(){},this.mousemoveCallback=function(){},this.mouseoutCallback=function(){},this.selection=e,this.graphicBoxSelection=this.selection.append("g"),this.labelBoxSelection=this.selection.append("g"),this.defsSelection=this.selection.append("defs"),this.utilGraphicBarLabel=new ul(this.labelBoxSelection,{})}setParams(e){this.params={...this.params,...e},this.itemLabels=[],this.utilGraphicBarLabel.setParams({barDirection:"right",positionPadding:this.params.labelPadding})}setDataset(e){this.dataset=e,this.itemLabels=this.dataset.itemLabels,this.ItemDataMap=pl(this.dataset.data,this.dataset.itemLabels),this.YDataMap=gl(this.dataset.data,this.dataset.yLabels),this.delayDuration=vl(this.dataset.yLabels.length)}render(){this.itemLabels.length&&(this.colorScale=rl(this.itemLabels,this.params.colors),this.axisHeight=this.dataset.axisHeight,this.groupLayout=ml({groupLayout:this.params.groupLayout,yLabels:this.dataset.yLabels,itemLabels:this.dataset.itemLabels,axisHeight:this.axisHeight,barPadding:this.params.barPadding,barGroupPadding:this.params.barGroupPadding}),this.graphicData=yl({YDataMap:this.YDataMap,yLabels:this.dataset.yLabels,axisHeight:this.axisHeight,groupLayout:this.groupLayout,barPadding:this.params.barPadding,barGroupPadding:this.params.barGroupPadding}),this.renderGraphic({selection:this.graphicBoxSelection,graphicData:this.graphicData,yLabels:this.dataset.yLabels,colorScale:this.colorScale,params:this.params}),this.graphicBarSelection.on("click",(e,n)=>{const i=Bt({datum:e,YDataMap:this.YDataMap,ItemDataMap:this.ItemDataMap,event:w});this.clickCallback(i)}).on("mouseover",(e,n,i)=>{const r=Bt({datum:e,YDataMap:this.YDataMap,ItemDataMap:this.ItemDataMap,event:w});this.params.highlightTarget!=null&&this.params.highlightTarget!="none"&&(this.params.highlightTarget==="group"?this.highlight(this.graphicBarSelection,r.yLabel,void 0,void 0):this.params.highlightTarget==="item"?this.highlight(this.graphicBarSelection,void 0,r.itemLabel,void 0):this.params.highlightTarget==="datum"&&this.highlight(this.graphicBarSelection,void 0,void 0,r.datum&&r.datum.id)),this.mouseoverCallback(r)}).on("mousemove",(e,n)=>{const i=Bt({datum:e,YDataMap:this.YDataMap,ItemDataMap:this.ItemDataMap,event:w});this.mousemoveCallback(i)}).on("mouseout",(e,n)=>{this.params.highlightTarget!=null&&this.params.highlightTarget!="none"&&this.removeHighlight(this.graphicBarSelection);const i=Bt({datum:e,YDataMap:this.YDataMap,ItemDataMap:this.ItemDataMap,event:w});this.initHighlight(),this.mouseoutCallback(i)}),this.utilGraphicBarLabel.setData(xl(this.graphicData,this.params)),this.utilGraphicBarLabel.render())}on(e,n){return e==="click"?this.clickCallback=n:e==="mouseover"?this.mouseoverCallback=n:e==="mousemove"?this.mousemoveCallback=n:e==="mouseout"&&(this.mouseoutCallback=n),this}remove(){this.selection.remove()}renderGraphic({selection:e,graphicData:n,yLabels:i,colorScale:r,params:a}){const s=e.selectAll("g.bpchart__bar-g").data(n,(l,u)=>i[u]),o=s.enter().append("g").classed("bpchart__bar-g",!0).attr("cursor","pointer");s.exit().remove(),this.graphicGroupSelection=s.merge(o),o.attr("transform",(l,u)=>`translate(0, ${l[0]?l[0].groupY:0})`),s.transition().duration(200).attr("transform",(l,u)=>`translate(0, ${l[0]?l[0].groupY:0})`),this.graphicGroupSelection.each((l,u,h)=>{const c=O(h[u]).selectAll("g").data(l,d=>d.id),f=c.enter().append("g").classed("bpchart__bar",!0);f.append("rect").attr("rx",d=>d.barR).attr("transform",d=>`translate(0, ${-d.barWidth/2})`).attr("x",this.dataset.zeroX).attr("y",d=>d.barY).attr("width",0).attr("height",d=>d.barWidth),c.merge(f).select("rect").attr("fill",d=>r(d.itemLabel)).transition().duration(this.params.enterDuration).ease(js).delay((d,g)=>d.yIndex*this.delayDuration).attr("transform",d=>`translate(0, ${-d.barWidth/2})`).attr("x",d=>d.barX).attr("y",d=>d.barY).attr("width",d=>d.width).attr("height",d=>d.barWidth).on("end",()=>this.initHighlight()),c.exit().remove()}),this.graphicBarSelection=this.graphicGroupSelection.selectAll("g.bpchart__bar")}initHighlight(){this.graphicBarSelection&&(this.params.highlightDatumId||this.params.highlightItemId||this.params.highlightGroupId)&&this.highlight(this.graphicBarSelection,this.params.highlightGroupId,this.params.highlightItemId,this.params.highlightDatumId)}highlight(e,n,i,r){if(!e)return;let a=[];if(r&&a.push(r),i){const s=this.dataset.data.flat().filter(o=>o.itemLabel===i).map(o=>o.id);a=a.concat(s)}if(n){const s=this.dataset.data.flat().filter(o=>o.yLabel===n).map(o=>o.id);a=a.concat(s)}e.each((s,o,l)=>{a.includes(s.id)?O(l[o]).transition().duration(200).style("opacity",1):O(l[o]).transition().duration(200).style("opacity",.3)})}removeHighlight(e){this.params.highlightDatumId||this.params.highlightItemId||this.params.highlightGroupId?this.highlight(e,this.params.highlightGroupId,this.params.highlightItemId,this.params.highlightDatumId):e.transition().duration(200).style("opacity",1)}}const wl={barWidth:0,barGroupPadding:1,barR:!1,colors:j,highlightTarget:"item",highlightGroupId:"",highlightItemId:"",highlightDatumId:"",enterDuration:800},dt={axisRow:Ci,tooltipAside:{templateHtml:t=>t.groupData&&t.groupData[0]?`
          <div>
            <div>${t.groupData[0].yLabel}</div>
            <div>${t.groupData.map(e=>e.value).join(",")}</div>          
          </div>
        `:""},colors:j,padding:ae,highlightTarget:"datum",highlightDatumId:"",highlightItemId:"",showAuxLine:!1,domainMinValue:0,domainMaxValue:void 0,domainMinRange:void 0,domainMaxRange:.95};({...dt});({...dt});({...dt});const _l={...dt,graphicRowBarLayout:Ri};({...dt});const Nn=(t,e)=>({...t,padding:e}),kl=({dataset:t,activedItemId:e,yDataMap:n,ItemDataMap:i,padding:r,yRangeScale:a,event:s})=>{if(!s||!a)return{dataset:t,groupData:[],itemData:[],datum:void 0,yLabel:"",yIndex:-1,itemLabel:"",itemIndex:-1,rangeIndex:-1,clientX:-1,clientY:-1,offsetX:-1,offsetY:-1};const o=Number(s.offsetY)-r.top,l=Number(a(o)??0),u=t.yLabels[l],h=n.get(u)??[];let c=[],f;return e&&(c=i.get(e)??[],f=h.find(p=>p.itemLabel===e)),{dataset:t,groupData:h,itemData:c,datum:f,yLabel:u,yIndex:l,itemLabel:f?f.itemLabel:"",itemIndex:f?f.itemIndex:-1,rangeIndex:l,clientX:w.clientX,clientY:w.clientY,offsetX:w.offsetX,offsetY:w.offsetY}};class Al{constructor(e,n){this.width=Li,this.height=Si,this.dataset={data:[],yLabels:[]},this.params=dt,this.graphicSelection=void 0,this.axisWidth=0,this.axisHeight=0,this.clickCallback=function(){},this.mouseoverCallback=function(){},this.mousemoveCallback=function(){},this.mouseoutCallback=function(){},this.yDataMap=new Map,this.ItemDataMap=new Map,this.renderData=[],this.axisParams=this.params.axisRow,this.xAxisSelection=void 0,this.yAxisSelection=void 0,this.xLabelSelection=void 0,this.yLabelSelection=void 0,this.auxLineSelection=void 0,this.minValue=0,this.maxValue=0,this.makeActivedCallbackData=(i,r)=>kl({dataset:this.dataset,activedItemId:i,yDataMap:this.yDataMap,ItemDataMap:this.ItemDataMap,padding:this.params.padding,yRangeScale:this.yRangeScale,event:r}),this.selection=e,this.axisSelection=e.append("g"),this.axisRow=new hl(this.axisSelection,{}),this.rangeSelection=this.selection.append("rect").attr("opacity",0),this.setRangeEvent(this.rangeSelection),this.graphicSelection=e.append("g"),this.coverSelection=this.selection.append("g").classed("bpchart__cover",!0),this.utilAuxLine=new sl(this.coverSelection),this.setCoverEvent(this.selection)}setParams(e){this.params={...this.params,...e,axisRow:{...this.params.axisRow,...e.axisRow}},this.params.tooltipAside&&!this.tooltip&&(this.tooltip=new al(this.selection,{templateHtml:this.params.tooltipAside.templateHtml,type:this.params.tooltipAside.type??"white",yLine:this.params.tooltipAside.yLine??!1})),this.axisParams=Nn(this.params.axisRow,this.params.padding),this.axisWidth=se(this.width,this.params.padding),this.axisHeight=oe(this.height,this.params.padding),this.axisRow.setParams(this.axisParams),this.graphicSelection.attr("transform",`translate(${this.params.padding.left}, ${this.params.padding.top})`),this.coverSelection.attr("transform",`translate(${this.params.padding.left}, ${this.params.padding.top})`),this.initGraphic(this.params)}select(){return this.selection}remove(){this.selection.remove()}resize({width:e=this.width,height:n=this.height}){this.width=e,this.height=n,this.axisParams=Nn(this.params.axisRow,this.params.padding),this.axisWidth=se(this.width,this.params.padding),this.axisHeight=oe(this.height,this.params.padding),this.axisRow.setParams(this.axisParams),this.axisRow.resize({width:e,height:n}),this.rangeSelection.attr("x",this.params.padding.left).attr("y",this.params.padding.top).attr("width",this.axisWidth).attr("height",this.axisHeight)}setDataset(e){this.dataset=e;const[n,i]=this.getMinAndMaxValue(this.dataset.data);this.minValue=n,this.maxValue=i}render(){this.yScale=el({axisLabels:this.dataset.yLabels,axisWidth:this.axisHeight,reverse:!0}),this.xScale=nl({maxValue:this.maxValue,minValue:this.minValue,axisWidth:this.axisWidth,domainMinValue:this.params.domainMinValue,domainMaxValue:this.params.domainMaxValue,domainMinRange:this.params.domainMinRange,domainMaxRange:this.params.domainMaxRange}),this.yRangeScale=il({axisLabels:this.dataset.yLabels,axisWidth:this.axisHeight,reverse:!0}),this.renderData=this.makeGraphicRenderData({dataset:this.dataset,xScale:this.xScale,yScale:this.yScale}),this.yDataMap=this.makeYDataMap({renderData:this.renderData,yLabels:this.dataset.yLabels}),this.ItemDataMap=this.makeItemDataMap({renderData:this.renderData,itemLabels:this.dataset.itemLabels??[]}),this.setGraphicData({renderData:this.renderData,itemLabels:this.dataset.itemLabels??[],yLabels:this.dataset.yLabels,xScale:this.xScale,yScale:this.yScale}),this.axisRow.setDataset({xScale:this.xScale,yScale:this.yScale,maxValue:this.maxValue}),this.axisRow.render(),this.renderGraphic()}on(e,n){return e==="click"?this.clickCallback=n:e==="mouseover"?this.mouseoverCallback=n:e==="mousemove"?this.mousemoveCallback=n:e==="mouseout"&&(this.mouseoutCallback=n),this}setRangeEvent(e){e.on("click",(n,i)=>{const r=this.makeActivedCallbackData("",w);this.clickCallback(r)}).on("mouseover",(n,i)=>{const r=this.makeActivedCallbackData("",w);this.mouseoverCallback(r)}).on("mousemove",n=>{const i=this.makeActivedCallbackData("",w);this.mousemoveCallback(i)}).on("mouseout",n=>{if(w.offsetX>0&&w.offsetX<this.width&&w.offsetY>0&&w.offsetY<this.height)return;const i=this.makeActivedCallbackData("",w);this.mouseoutCallback(i)})}showTooltip(e,n){n&&e&&this.yScale?this.tooltip.setDatum({data:e,x:w.clientX,y:e.clientY-e.offsetY+this.params.padding.top+this.yScale(e.yLabel)}):this.tooltip.remove()}setCoverEvent(e){e.on("mouseover",(n,i)=>{const r=this.makeActivedCallbackData("",w);this.coverHighlight(r),this.showTooltip(r,w)}).on("mousemove",n=>{const i=this.makeActivedCallbackData("",w);this.coverHighlight(i),this.showTooltip(i,w)}).on("mouseout",n=>{w.offsetX>0&&w.offsetX<this.width&&w.offsetY>0&&w.offsetY<this.height||(this.coverHighlight(void 0),this.tooltip.remove())})}coverHighlight(e){this.params.showAuxLine&&this.renderAuxLine({coverSelection:this.coverSelection,yLabels:this.dataset.yLabels,activeRangeIndex:e?e.rangeIndex:-1,yScale:this.yScale,padding:this.params.padding,axisWidth:this.axisWidth}),this.renderGraphicCoverHighlight({eventData:e,xScale:this.xScale,yScale:this.yScale,padding:this.params.padding})}renderAuxLine({coverSelection:e,yLabels:n,activeRangeIndex:i,yScale:r,padding:a,axisWidth:s}){if(!r)return;const o=n.map((l,u)=>{const h=r(l)||0;return{x1:0,x2:s,y1:h,y2:h,active:i==u}});this.utilAuxLine.setData(o),this.utilAuxLine.render()}}const Pn="__DEFAULT__";class Ml extends Al{constructor(e,n){super(e,n),this.params=_l,this.bar=new bl(this.graphicSelection,{})}initGraphic(e){this.params={...this.params,...e,graphicRowBarLayout:{...this.params.graphicRowBarLayout,...e.graphicRowBarLayout}},this.bar.setParams({...this.params.graphicRowBarLayout,colors:this.params.colors,highlightTarget:this.params.highlightTarget,highlightDatumId:this.params.highlightDatumId,highlightItemId:this.params.highlightItemId,highlightGroupId:this.params.highlightGroupId}),this.bar.on("click",n=>{const i=this.makeActivedCallbackData(n.itemLabel??"",w);this.clickCallback(i)}).on("mouseover",n=>{const i=this.makeActivedCallbackData(n.itemLabel??"",w);this.showTooltip(i,w),this.mouseoverCallback(i)}).on("mousemove",n=>{const i=this.makeActivedCallbackData(n.itemLabel??"",w);this.showTooltip(i,w),this.mousemoveCallback(i)}).on("mouseout",n=>{const i=this.makeActivedCallbackData("",w);this.showTooltip(void 0,w),this.mouseoutCallback(i)})}makeGraphicRenderData({dataset:e,xScale:n,yScale:i}){return e.data.map((r,a)=>{const s=e.itemLabels&&e.itemLabels[a]?e.itemLabels[a]:Pn;return r.map((o,l)=>{const u=e.yLabels[l],h=i(u)||0;return{...o,id:`${s}_${u}`,itemIndex:a,itemLabel:s,yIndex:l,yLabel:u,x:n(o.value)||0,y:h}})})}getMinAndMaxValue(e){if(!e.length)return[0,0];const n=(a,s,o)=>{let l=[];for(let u=0;u<a[0].length;u++){l[u]=0;for(let h=s;h<=o;h++)l[u]+=a[h][u].value}return l};let i=0,r=[];return this.params.graphicRowBarLayout.groupLayout.length?this.params.graphicRowBarLayout.groupLayout.forEach(a=>{const s=i+a.stackAmount-1;r=r.concat(n(e,i,s)),i=s+1}):r=n(e,0,e[0].length-1),r.reduce((a,s)=>[s<a[0]?s:a[0],s>a[1]?s:a[1]],[1/0,0])}makeYDataMap({renderData:e,yLabels:n}){let i=new Map;return e.length&&e.forEach((r,a)=>{r.forEach((s,o)=>{const l=i.get(n[o])??[];l.push(s),i.set(n[o],l)})}),i}makeItemDataMap({renderData:e,itemLabels:n}){let i=new Map;return e.length&&n.forEach((r,a)=>{i.set(r,e[a])}),i}setGraphicData({renderData:e,itemLabels:n,yLabels:i,xScale:r,yScale:a}){this.bar.setDataset({data:e,yLabels:i,itemLabels:n??[Pn],axisHeight:this.axisHeight,zeroX:0})}renderGraphic(){this.bar.render()}renderGraphicCoverHighlight({eventData:e,xScale:n,yScale:i,padding:r}){}}const Ll={__name:"ChartRowBarLayout",setup(t){const e={data:[[{value:70769},{value:14103},{value:41075},{value:55309}],[{value:685830},{value:102725},{value:339702},{value:610896}],[{value:875854},{value:144274},{value:786471},{value:1097621}],[{value:1632453},{value:261102},{value:1167248},{value:1763826}],[{value:21381},{value:3423},{value:12341},{value:17006}],[{value:1653834},{value:264525},{value:1179589},{value:1780832}]],yLabels:["台北市","新竹市","台南市","高雄市"],itemLabels:["宋楚瑜、余湘","韓國瑜、張善政","蔡英文、賴清德","有效票數","無效票數","投票數"]},n={colors:["#FF6310","#000095","#1B9431","#8F4586","#5A5AAD","#709EE2"],padding:{top:50,right:70,bottom:50,left:100},axisRow:{yLabel:"",xLabel:""},graphicRowBarLayout:{groupLayout:[{stackAmount:3,barWidth:24},{stackAmount:2,barwidth:6,barR:10},{stackAmount:1,barwidth:12,barR:10}],barPadding:5,barGroupPadding:30,labelTextMethod:(i,r)=>String(i.value),labelPositionMethod:(i,r)=>r[0]===5?"right":"center",labelStyleMethod:(i,r)=>r[0]===5?"font-weight:800;font-size:18px;fill:#709EE2":"",labelFontSizeMethod:(i,r)=>10,labelColorMethod:(i,r)=>"#ffffff",labelPadding:5}};return(i,r)=>(W(),q("div",null,[X(qo,{module:Yi(Ml),dataset:e,params:n},null,8,["module"])]))}},Sl={class:"page"},Dl=Yn('<div class="landing"><div class="map-box"><img class="tw-map" src="'+Xi+'" alt="台灣地圖"></div><div class="content"><img class="logo" src="'+Hi+'" alt="決戰2020總統大選"><div class="nowrap"><h1 class="region">全國</h1><h1>投票概況</h1></div><div class="des">將滑鼠移至縣市查看各選區投票概況</div><div class="data-number"><h2>投票數：<span>14464571</span></h2><h2>投票率：<span>74.9%</span></h2></div><button class="button">查看開票結果</button></div></div>',1),Cl={class:"chart"},Rl={class:"filter"},Il={class:"chart-block"},Tl=nt("div",{class:"chart-name"},"圖表名稱",-1),El={class:"toolbar"},Nl=Yn('<div class="legend-group"><div class="legend-bar"><div class="color"></div><span>選舉人數</span></div><div class="legend-line"><div class="color"></div><span>選舉人數</span></div></div>',1),Yl={__name:"Index",setup(t){const e=Z(""),n=[{value:"Option1",label:"Option1"},{value:"Option2",label:"Option2"},{value:"Option3",label:"Option3"},{value:"Option4",label:"Option4"},{value:"Option5",label:"Option5"}];return(i,r)=>{const a=tn("el-option"),s=tn("el-select");return W(),q("div",Sl,[Dl,nt("div",Cl,[nt("div",Rl,[X(s,{modelValue:e.value,"onUpdate:modelValue":r[0]||(r[0]=o=>e.value=o),clearable:"",placeholder:"Select"},{default:Et(()=>[(W(),q(Nt,null,Pt(n,o=>X(a,{key:o.value,label:o.label,value:o.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"]),X(s,{modelValue:e.value,"onUpdate:modelValue":r[1]||(r[1]=o=>e.value=o),clearable:"",placeholder:"Select"},{default:Et(()=>[(W(),q(Nt,null,Pt(n,o=>X(a,{key:o.value,label:o.label,value:o.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"]),X(s,{modelValue:e.value,"onUpdate:modelValue":r[2]||(r[2]=o=>e.value=o),clearable:"",placeholder:"Select"},{default:Et(()=>[(W(),q(Nt,null,Pt(n,o=>X(a,{key:o.value,label:o.label,value:o.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),nt("div",Il,[Tl,nt("div",El,[X(s,{modelValue:e.value,"onUpdate:modelValue":r[3]||(r[3]=o=>e.value=o),clearable:"",placeholder:"Select"},{default:Et(()=>[(W(),q(Nt,null,Pt(n,o=>X(a,{key:o.value,label:o.label,value:o.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),nt("div",null,[X(Ll)]),Nl])])])}}};export{Yl as default};
