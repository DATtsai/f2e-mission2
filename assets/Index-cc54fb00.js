import{r as Ee,w as te,d as gm,u as mm,c as rh,o as bm,a as De,b as Se,n as ym,e as st,f as on,g as je,h as Zt,i as vm,j as Tn}from"./index-b9a3e32f.js";var xm="5.16.0";function Ue(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function Hl(t){return t.length===1&&(t=_m(t)),{left:function(e,n,i,a){for(i==null&&(i=0),a==null&&(a=e.length);i<a;){var r=i+a>>>1;t(e[r],n)<0?i=r+1:a=r}return i},right:function(e,n,i,a){for(i==null&&(i=0),a==null&&(a=e.length);i<a;){var r=i+a>>>1;t(e[r],n)>0?a=r:i=r+1}return i}}}function _m(t){return function(e,n){return Ue(t(e),n)}}var Lf=Hl(Ue),ze=Lf.right,wm=Lf.left;function Mm(t,e){e==null&&(e=Cf);for(var n=0,i=t.length-1,a=t[0],r=new Array(i<0?0:i);n<i;)r[n]=e(a,a=t[++n]);return r}function Cf(t,e){return[t,e]}function km(t,e,n){var i=t.length,a=e.length,r=new Array(i*a),s,o,l,c;for(n==null&&(n=Cf),s=l=0;s<i;++s)for(c=t[s],o=0;o<a;++o,++l)r[l]=n(c,e[o]);return r}function Dm(t,e){return e<t?-1:e>t?1:e>=t?0:NaN}function He(t){return t===null?NaN:+t}function Tf(t,e){var n=t.length,i=0,a=-1,r=0,s,o,l=0;if(e==null)for(;++a<n;)isNaN(s=He(t[a]))||(o=s-r,r+=o/++i,l+=o*(s-r));else for(;++a<n;)isNaN(s=He(e(t[a],a,t)))||(o=s-r,r+=o/++i,l+=o*(s-r));if(i>1)return l/(i-1)}function If(t,e){var n=Tf(t,e);return n&&Math.sqrt(n)}function Xl(t,e){var n=t.length,i=-1,a,r,s;if(e==null){for(;++i<n;)if((a=t[i])!=null&&a>=a)for(r=s=a;++i<n;)(a=t[i])!=null&&(r>a&&(r=a),s<a&&(s=a))}else for(;++i<n;)if((a=e(t[i],i,t))!=null&&a>=a)for(r=s=a;++i<n;)(a=e(t[i],i,t))!=null&&(r>a&&(r=a),s<a&&(s=a));return[r,s]}var Rf=Array.prototype,Sm=Rf.slice,Am=Rf.map;function ka(t){return function(){return t}}function Lm(t){return t}function Bt(t,e,n){t=+t,e=+e,n=(a=arguments.length)<2?(e=t,t=0,1):a<3?1:+n;for(var i=-1,a=Math.max(0,Math.ceil((e-t)/n))|0,r=new Array(a);++i<a;)r[i]=t+i*n;return r}var Xo=Math.sqrt(50),Go=Math.sqrt(10),Bo=Math.sqrt(2);function Gl(t,e,n){var i,a=-1,r,s,o;if(e=+e,t=+t,n=+n,t===e&&n>0)return[t];if((i=e<t)&&(r=t,t=e,e=r),(o=Hi(t,e,n))===0||!isFinite(o))return[];if(o>0)for(t=Math.ceil(t/o),e=Math.floor(e/o),s=new Array(r=Math.ceil(e-t+1));++a<r;)s[a]=(t+a)*o;else for(t=Math.floor(t*o),e=Math.ceil(e*o),s=new Array(r=Math.ceil(t-e+1));++a<r;)s[a]=(t-a)/o;return i&&s.reverse(),s}function Hi(t,e,n){var i=(e-t)/Math.max(0,n),a=Math.floor(Math.log(i)/Math.LN10),r=i/Math.pow(10,a);return a>=0?(r>=Xo?10:r>=Go?5:r>=Bo?2:1)*Math.pow(10,a):-Math.pow(10,-a)/(r>=Xo?10:r>=Go?5:r>=Bo?2:1)}function ln(t,e,n){var i=Math.abs(e-t)/Math.max(0,n),a=Math.pow(10,Math.floor(Math.log(i)/Math.LN10)),r=i/a;return r>=Xo?a*=10:r>=Go?a*=5:r>=Bo&&(a*=2),e<t?-a:a}function Bl(t){return Math.ceil(Math.log(t.length)/Math.LN2)+1}function Cm(){var t=Lm,e=Xl,n=Bl;function i(a){var r,s=a.length,o,l=new Array(s);for(r=0;r<s;++r)l[r]=t(a[r],r,a);var c=e(l),h=c[0],f=c[1],u=n(l,h,f);Array.isArray(u)||(u=ln(h,f,u),u=Bt(Math.ceil(h/u)*u,f,u));for(var p=u.length;u[0]<=h;)u.shift(),--p;for(;u[p-1]>f;)u.pop(),--p;var d=new Array(p+1),g;for(r=0;r<=p;++r)g=d[r]=[],g.x0=r>0?u[r-1]:h,g.x1=r<p?u[r]:f;for(r=0;r<s;++r)o=l[r],h<=o&&o<=f&&d[ze(u,o,0,p)].push(a[r]);return d}return i.value=function(a){return arguments.length?(t=typeof a=="function"?a:ka(a),i):t},i.domain=function(a){return arguments.length?(e=typeof a=="function"?a:ka([a[0],a[1]]),i):e},i.thresholds=function(a){return arguments.length?(n=typeof a=="function"?a:Array.isArray(a)?ka(Sm.call(a)):ka(a),i):n},i}function Fi(t,e,n){if(n==null&&(n=He),!!(i=t.length)){if((e=+e)<=0||i<2)return+n(t[0],0,t);if(e>=1)return+n(t[i-1],i-1,t);var i,a=(i-1)*e,r=Math.floor(a),s=+n(t[r],r,t),o=+n(t[r+1],r+1,t);return s+(o-s)*(a-r)}}function Tm(t,e,n){return t=Am.call(t,He).sort(Ue),Math.ceil((n-e)/(2*(Fi(t,.75)-Fi(t,.25))*Math.pow(t.length,-1/3)))}function Im(t,e,n){return Math.ceil((n-e)/(3.5*If(t)*Math.pow(t.length,-1/3)))}function Pf(t,e){var n=t.length,i=-1,a,r;if(e==null){for(;++i<n;)if((a=t[i])!=null&&a>=a)for(r=a;++i<n;)(a=t[i])!=null&&a>r&&(r=a)}else for(;++i<n;)if((a=e(t[i],i,t))!=null&&a>=a)for(r=a;++i<n;)(a=e(t[i],i,t))!=null&&a>r&&(r=a);return r}function Rm(t,e){var n=t.length,i=n,a=-1,r,s=0;if(e==null)for(;++a<n;)isNaN(r=He(t[a]))?--i:s+=r;else for(;++a<n;)isNaN(r=He(e(t[a],a,t)))?--i:s+=r;if(i)return s/i}function Pm(t,e){var n=t.length,i=-1,a,r=[];if(e==null)for(;++i<n;)isNaN(a=He(t[i]))||r.push(a);else for(;++i<n;)isNaN(a=He(e(t[i],i,t)))||r.push(a);return Fi(r.sort(Ue),.5)}function Wl(t){for(var e=t.length,n,i=-1,a=0,r,s;++i<e;)a+=t[i].length;for(r=new Array(a);--e>=0;)for(s=t[e],n=s.length;--n>=0;)r[--a]=s[n];return r}function Ef(t,e){var n=t.length,i=-1,a,r;if(e==null){for(;++i<n;)if((a=t[i])!=null&&a>=a)for(r=a;++i<n;)(a=t[i])!=null&&r>a&&(r=a)}else for(;++i<n;)if((a=e(t[i],i,t))!=null&&a>=a)for(r=a;++i<n;)(a=e(t[i],i,t))!=null&&r>a&&(r=a);return r}function Em(t,e){for(var n=e.length,i=new Array(n);n--;)i[n]=t[e[n]];return i}function $m(t,e){if(n=t.length){var n,i=0,a=0,r,s=t[a];for(e==null&&(e=Ue);++i<n;)(e(r=t[i],s)<0||e(s,s)!==0)&&(s=r,a=i);if(e(s,s)===0)return a}}function Ym(t,e,n){for(var i=(n??t.length)-(e=e==null?0:+e),a,r;i;)r=Math.random()*i--|0,a=t[i+e],t[i+e]=t[r+e],t[r+e]=a;return t}function Nm(t,e){var n=t.length,i=-1,a,r=0;if(e==null)for(;++i<n;)(a=+t[i])&&(r+=a);else for(;++i<n;)(a=+e(t[i],i,t))&&(r+=a);return r}function $f(t){if(!(r=t.length))return[];for(var e=-1,n=Ef(t,zm),i=new Array(n);++e<n;)for(var a=-1,r,s=i[e]=new Array(r);++a<r;)s[a]=t[a][e];return i}function zm(t){return t.length}function Hm(){return $f(arguments)}var qs=Array.prototype.slice;function Xm(t){return t}var nr=1,ir=2,Wo=3,Mi=4,sh=1e-6;function Gm(t){return"translate("+(t+.5)+",0)"}function Bm(t){return"translate(0,"+(t+.5)+")"}function Wm(t){return function(e){return+t(e)}}function Om(t){var e=Math.max(0,t.bandwidth()-1)/2;return t.round()&&(e=Math.round(e)),function(n){return+t(n)+e}}function Fm(){return!this.__axis}function ds(t,e){var n=[],i=null,a=null,r=6,s=6,o=3,l=t===nr||t===Mi?-1:1,c=t===Mi||t===ir?"x":"y",h=t===nr||t===Wo?Gm:Bm;function f(u){var p=i??(e.ticks?e.ticks.apply(e,n):e.domain()),d=a??(e.tickFormat?e.tickFormat.apply(e,n):Xm),g=Math.max(r,0)+o,m=e.range(),b=+m[0]+.5,v=+m[m.length-1]+.5,y=(e.bandwidth?Om:Wm)(e.copy()),x=u.selection?u.selection():u,M=x.selectAll(".domain").data([null]),D=x.selectAll(".tick").data(p,e).order(),k=D.exit(),I=D.enter().append("g").attr("class","tick"),C=D.select("line"),T=D.select("text");M=M.merge(M.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),D=D.merge(I),C=C.merge(I.append("line").attr("stroke","currentColor").attr(c+"2",l*r)),T=T.merge(I.append("text").attr("fill","currentColor").attr(c,l*g).attr("dy",t===nr?"0em":t===Wo?"0.71em":"0.32em")),u!==x&&(M=M.transition(u),D=D.transition(u),C=C.transition(u),T=T.transition(u),k=k.transition(u).attr("opacity",sh).attr("transform",function(L){return isFinite(L=y(L))?h(L):this.getAttribute("transform")}),I.attr("opacity",sh).attr("transform",function(L){var _=this.parentNode.__axis;return h(_&&isFinite(_=_(L))?_:y(L))})),k.remove(),M.attr("d",t===Mi||t==ir?s?"M"+l*s+","+b+"H0.5V"+v+"H"+l*s:"M0.5,"+b+"V"+v:s?"M"+b+","+l*s+"V0.5H"+v+"V"+l*s:"M"+b+",0.5H"+v),D.attr("opacity",1).attr("transform",function(L){return h(y(L))}),C.attr(c+"2",l*r),T.attr(c,l*g).text(d),x.filter(Fm).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===ir?"start":t===Mi?"end":"middle"),x.each(function(){this.__axis=y})}return f.scale=function(u){return arguments.length?(e=u,f):e},f.ticks=function(){return n=qs.call(arguments),f},f.tickArguments=function(u){return arguments.length?(n=u==null?[]:qs.call(u),f):n.slice()},f.tickValues=function(u){return arguments.length?(i=u==null?null:qs.call(u),f):i&&i.slice()},f.tickFormat=function(u){return arguments.length?(a=u,f):a},f.tickSize=function(u){return arguments.length?(r=s=+u,f):r},f.tickSizeInner=function(u){return arguments.length?(r=+u,f):r},f.tickSizeOuter=function(u){return arguments.length?(s=+u,f):s},f.tickPadding=function(u){return arguments.length?(o=+u,f):o},f}function Um(t){return ds(nr,t)}function Yf(t){return ds(ir,t)}function ps(t){return ds(Wo,t)}function gs(t){return ds(Mi,t)}var Vm={value:function(){}};function wn(){for(var t=0,e=arguments.length,n={},i;t<e;++t){if(!(i=arguments[t]+"")||i in n||/[\s.]/.test(i))throw new Error("illegal type: "+i);n[i]=[]}return new ar(n)}function ar(t){this._=t}function qm(t,e){return t.trim().split(/^|\s+/).map(function(n){var i="",a=n.indexOf(".");if(a>=0&&(i=n.slice(a+1),n=n.slice(0,a)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:i}})}ar.prototype=wn.prototype={constructor:ar,on:function(t,e){var n=this._,i=qm(t+"",n),a,r=-1,s=i.length;if(arguments.length<2){for(;++r<s;)if((a=(t=i[r]).type)&&(a=Zm(n[a],t.name)))return a;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++r<s;)if(a=(t=i[r]).type)n[a]=oh(n[a],t.name,e);else if(e==null)for(a in n)n[a]=oh(n[a],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new ar(t)},call:function(t,e){if((a=arguments.length-2)>0)for(var n=new Array(a),i=0,a,r;i<a;++i)n[i]=arguments[i+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(r=this._[t],i=0,a=r.length;i<a;++i)r[i].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var i=this._[t],a=0,r=i.length;a<r;++a)i[a].value.apply(e,n)}};function Zm(t,e){for(var n=0,i=t.length,a;n<i;++n)if((a=t[n]).name===e)return a.value}function oh(t,e,n){for(var i=0,a=t.length;i<a;++i)if(t[i].name===e){t[i]=Vm,t=t.slice(0,i).concat(t.slice(i+1));break}return n!=null&&t.push({name:e,value:n}),t}var Oo="http://www.w3.org/1999/xhtml";const Fo={svg:"http://www.w3.org/2000/svg",xhtml:Oo,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function fa(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),Fo.hasOwnProperty(e)?{space:Fo[e],local:t}:t}function Km(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===Oo&&e.documentElement.namespaceURI===Oo?e.createElement(t):e.createElementNS(n,t)}}function Qm(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function ms(t){var e=fa(t);return(e.local?Qm:Km)(e)}function Jm(){}function bs(t){return t==null?Jm:function(){return this.querySelector(t)}}function jm(t){typeof t!="function"&&(t=bs(t));for(var e=this._groups,n=e.length,i=new Array(n),a=0;a<n;++a)for(var r=e[a],s=r.length,o=i[a]=new Array(s),l,c,h=0;h<s;++h)(l=r[h])&&(c=t.call(l,l.__data__,h,r))&&("__data__"in l&&(c.__data__=l.__data__),o[h]=c);return new It(i,this._parents)}function t1(){return[]}function Ol(t){return t==null?t1:function(){return this.querySelectorAll(t)}}function e1(t){typeof t!="function"&&(t=Ol(t));for(var e=this._groups,n=e.length,i=[],a=[],r=0;r<n;++r)for(var s=e[r],o=s.length,l,c=0;c<o;++c)(l=s[c])&&(i.push(t.call(l,l.__data__,c,s)),a.push(l));return new It(i,a)}function Fl(t){return function(){return this.matches(t)}}function n1(t){typeof t!="function"&&(t=Fl(t));for(var e=this._groups,n=e.length,i=new Array(n),a=0;a<n;++a)for(var r=e[a],s=r.length,o=i[a]=[],l,c=0;c<s;++c)(l=r[c])&&t.call(l,l.__data__,c,r)&&o.push(l);return new It(i,this._parents)}function Nf(t){return new Array(t.length)}function i1(){return new It(this._enter||this._groups.map(Nf),this._parents)}function gr(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}gr.prototype={constructor:gr,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function a1(t){return function(){return t}}var lh="$";function r1(t,e,n,i,a,r){for(var s=0,o,l=e.length,c=r.length;s<c;++s)(o=e[s])?(o.__data__=r[s],i[s]=o):n[s]=new gr(t,r[s]);for(;s<l;++s)(o=e[s])&&(a[s]=o)}function s1(t,e,n,i,a,r,s){var o,l,c={},h=e.length,f=r.length,u=new Array(h),p;for(o=0;o<h;++o)(l=e[o])&&(u[o]=p=lh+s.call(l,l.__data__,o,e),p in c?a[o]=l:c[p]=l);for(o=0;o<f;++o)p=lh+s.call(t,r[o],o,r),(l=c[p])?(i[o]=l,l.__data__=r[o],c[p]=null):n[o]=new gr(t,r[o]);for(o=0;o<h;++o)(l=e[o])&&c[u[o]]===l&&(a[o]=l)}function o1(t,e){if(!t)return p=new Array(this.size()),c=-1,this.each(function(D){p[++c]=D}),p;var n=e?s1:r1,i=this._parents,a=this._groups;typeof t!="function"&&(t=a1(t));for(var r=a.length,s=new Array(r),o=new Array(r),l=new Array(r),c=0;c<r;++c){var h=i[c],f=a[c],u=f.length,p=t.call(h,h&&h.__data__,c,i),d=p.length,g=o[c]=new Array(d),m=s[c]=new Array(d),b=l[c]=new Array(u);n(h,f,g,m,b,p,e);for(var v=0,y=0,x,M;v<d;++v)if(x=g[v]){for(v>=y&&(y=v+1);!(M=m[y])&&++y<d;);x._next=M||null}}return s=new It(s,i),s._enter=o,s._exit=l,s}function l1(){return new It(this._exit||this._groups.map(Nf),this._parents)}function c1(t,e,n){var i=this.enter(),a=this,r=this.exit();return i=typeof t=="function"?t(i):i.append(t+""),e!=null&&(a=e(a)),n==null?r.remove():n(r),i&&a?i.merge(a).order():a}function h1(t){for(var e=this._groups,n=t._groups,i=e.length,a=n.length,r=Math.min(i,a),s=new Array(i),o=0;o<r;++o)for(var l=e[o],c=n[o],h=l.length,f=s[o]=new Array(h),u,p=0;p<h;++p)(u=l[p]||c[p])&&(f[p]=u);for(;o<i;++o)s[o]=e[o];return new It(s,this._parents)}function u1(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var i=t[e],a=i.length-1,r=i[a],s;--a>=0;)(s=i[a])&&(r&&s.compareDocumentPosition(r)^4&&r.parentNode.insertBefore(s,r),r=s);return this}function f1(t){t||(t=d1);function e(f,u){return f&&u?t(f.__data__,u.__data__):!f-!u}for(var n=this._groups,i=n.length,a=new Array(i),r=0;r<i;++r){for(var s=n[r],o=s.length,l=a[r]=new Array(o),c,h=0;h<o;++h)(c=s[h])&&(l[h]=c);l.sort(e)}return new It(a,this._parents).order()}function d1(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function p1(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function g1(){var t=new Array(this.size()),e=-1;return this.each(function(){t[++e]=this}),t}function m1(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i=t[e],a=0,r=i.length;a<r;++a){var s=i[a];if(s)return s}return null}function b1(){var t=0;return this.each(function(){++t}),t}function y1(){return!this.node()}function v1(t){for(var e=this._groups,n=0,i=e.length;n<i;++n)for(var a=e[n],r=0,s=a.length,o;r<s;++r)(o=a[r])&&t.call(o,o.__data__,r,a);return this}function x1(t){return function(){this.removeAttribute(t)}}function _1(t){return function(){this.removeAttributeNS(t.space,t.local)}}function w1(t,e){return function(){this.setAttribute(t,e)}}function M1(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function k1(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function D1(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function S1(t,e){var n=fa(t);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((e==null?n.local?_1:x1:typeof e=="function"?n.local?D1:k1:n.local?M1:w1)(n,e))}function Ul(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function A1(t){return function(){this.style.removeProperty(t)}}function L1(t,e,n){return function(){this.style.setProperty(t,e,n)}}function C1(t,e,n){return function(){var i=e.apply(this,arguments);i==null?this.style.removeProperty(t):this.style.setProperty(t,i,n)}}function T1(t,e,n){return arguments.length>1?this.each((e==null?A1:typeof e=="function"?C1:L1)(t,e,n??"")):cn(this.node(),t)}function cn(t,e){return t.style.getPropertyValue(e)||Ul(t).getComputedStyle(t,null).getPropertyValue(e)}function I1(t){return function(){delete this[t]}}function R1(t,e){return function(){this[t]=e}}function P1(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function E1(t,e){return arguments.length>1?this.each((e==null?I1:typeof e=="function"?P1:R1)(t,e)):this.node()[t]}function zf(t){return t.trim().split(/^|\s+/)}function Vl(t){return t.classList||new Hf(t)}function Hf(t){this._node=t,this._names=zf(t.getAttribute("class")||"")}Hf.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function Xf(t,e){for(var n=Vl(t),i=-1,a=e.length;++i<a;)n.add(e[i])}function Gf(t,e){for(var n=Vl(t),i=-1,a=e.length;++i<a;)n.remove(e[i])}function $1(t){return function(){Xf(this,t)}}function Y1(t){return function(){Gf(this,t)}}function N1(t,e){return function(){(e.apply(this,arguments)?Xf:Gf)(this,t)}}function z1(t,e){var n=zf(t+"");if(arguments.length<2){for(var i=Vl(this.node()),a=-1,r=n.length;++a<r;)if(!i.contains(n[a]))return!1;return!0}return this.each((typeof e=="function"?N1:e?$1:Y1)(n,e))}function H1(){this.textContent=""}function X1(t){return function(){this.textContent=t}}function G1(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function B1(t){return arguments.length?this.each(t==null?H1:(typeof t=="function"?G1:X1)(t)):this.node().textContent}function W1(){this.innerHTML=""}function O1(t){return function(){this.innerHTML=t}}function F1(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function U1(t){return arguments.length?this.each(t==null?W1:(typeof t=="function"?F1:O1)(t)):this.node().innerHTML}function V1(){this.nextSibling&&this.parentNode.appendChild(this)}function q1(){return this.each(V1)}function Z1(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function K1(){return this.each(Z1)}function Q1(t){var e=typeof t=="function"?t:ms(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function J1(){return null}function j1(t,e){var n=typeof t=="function"?t:ms(t),i=e==null?J1:typeof e=="function"?e:bs(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)})}function tb(){var t=this.parentNode;t&&t.removeChild(this)}function eb(){return this.each(tb)}function nb(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function ib(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function ab(t){return this.select(t?ib:nb)}function rb(t){return arguments.length?this.property("__data__",t):this.node().__data__}var Bf={},w=null;if(typeof document<"u"){var sb=document.documentElement;"onmouseenter"in sb||(Bf={mouseenter:"mouseover",mouseleave:"mouseout"})}function ob(t,e,n){return t=Wf(t,e,n),function(i){var a=i.relatedTarget;(!a||a!==this&&!(a.compareDocumentPosition(this)&8))&&t.call(this,i)}}function Wf(t,e,n){return function(i){var a=w;w=i;try{t.call(this,this.__data__,e,n)}finally{w=a}}}function lb(t){return t.trim().split(/^|\s+/).map(function(e){var n="",i=e.indexOf(".");return i>=0&&(n=e.slice(i+1),e=e.slice(0,i)),{type:e,name:n}})}function cb(t){return function(){var e=this.__on;if(e){for(var n=0,i=-1,a=e.length,r;n<a;++n)r=e[n],(!t.type||r.type===t.type)&&r.name===t.name?this.removeEventListener(r.type,r.listener,r.capture):e[++i]=r;++i?e.length=i:delete this.__on}}}function hb(t,e,n){var i=Bf.hasOwnProperty(t.type)?ob:Wf;return function(a,r,s){var o=this.__on,l,c=i(e,r,s);if(o){for(var h=0,f=o.length;h<f;++h)if((l=o[h]).type===t.type&&l.name===t.name){this.removeEventListener(l.type,l.listener,l.capture),this.addEventListener(l.type,l.listener=c,l.capture=n),l.value=e;return}}this.addEventListener(t.type,c,n),l={type:t.type,name:t.name,value:e,listener:c,capture:n},o?o.push(l):this.__on=[l]}}function ub(t,e,n){var i=lb(t+""),a,r=i.length,s;if(arguments.length<2){var o=this.node().__on;if(o){for(var l=0,c=o.length,h;l<c;++l)for(a=0,h=o[l];a<r;++a)if((s=i[a]).type===h.type&&s.name===h.name)return h.value}return}for(o=e?hb:cb,n==null&&(n=!1),a=0;a<r;++a)this.each(o(i[a],e,n));return this}function Ui(t,e,n,i){var a=w;t.sourceEvent=w,w=t;try{return e.apply(n,i)}finally{w=a}}function Of(t,e,n){var i=Ul(t),a=i.CustomEvent;typeof a=="function"?a=new a(e,n):(a=i.document.createEvent("Event"),n?(a.initEvent(e,n.bubbles,n.cancelable),a.detail=n.detail):a.initEvent(e,!1,!1)),t.dispatchEvent(a)}function fb(t,e){return function(){return Of(this,t,e)}}function db(t,e){return function(){return Of(this,t,e.apply(this,arguments))}}function pb(t,e){return this.each((typeof e=="function"?db:fb)(t,e))}var ql=[null];function It(t,e){this._groups=t,this._parents=e}function Mn(){return new It([[document.documentElement]],ql)}It.prototype=Mn.prototype={constructor:It,select:jm,selectAll:e1,filter:n1,data:o1,enter:i1,exit:l1,join:c1,merge:h1,order:u1,sort:f1,call:p1,nodes:g1,node:m1,size:b1,empty:y1,each:v1,attr:S1,style:T1,property:E1,classed:z1,text:B1,html:U1,raise:q1,lower:K1,append:Q1,insert:j1,remove:eb,clone:ab,datum:rb,on:ub,dispatch:pb};function W(t){return typeof t=="string"?new It([[document.querySelector(t)]],[document.documentElement]):new It([[t]],ql)}function gb(t){return W(ms(t).call(document.documentElement))}var mb=0;function Ff(){return new Uo}function Uo(){this._="@"+(++mb).toString(36)}Uo.prototype=Ff.prototype={constructor:Uo,get:function(t){for(var e=this._;!(e in t);)if(!(t=t.parentNode))return;return t[e]},set:function(t,e){return t[this._]=e},remove:function(t){return this._ in t&&delete t[this._]},toString:function(){return this._}};function Zl(){for(var t=w,e;e=t.sourceEvent;)t=e;return t}function ys(t,e){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var i=n.createSVGPoint();return i.x=e.clientX,i.y=e.clientY,i=i.matrixTransform(t.getScreenCTM().inverse()),[i.x,i.y]}var a=t.getBoundingClientRect();return[e.clientX-a.left-t.clientLeft,e.clientY-a.top-t.clientTop]}function an(t){var e=Zl();return e.changedTouches&&(e=e.changedTouches[0]),ys(t,e)}function bb(t){return typeof t=="string"?new It([document.querySelectorAll(t)],[document.documentElement]):new It([t??[]],ql)}function Vi(t,e,n){arguments.length<3&&(n=e,e=Zl().changedTouches);for(var i=0,a=e?e.length:0,r;i<a;++i)if((r=e[i]).identifier===n)return ys(t,r);return null}function yb(t,e){e==null&&(e=Zl().touches);for(var n=0,i=e?e.length:0,a=new Array(i);n<i;++n)a[n]=ys(t,e[n]);return a}function Zs(){w.stopImmediatePropagation()}function Gn(){w.preventDefault(),w.stopImmediatePropagation()}function vs(t){var e=t.document.documentElement,n=W(t).on("dragstart.drag",Gn,!0);"onselectstart"in e?n.on("selectstart.drag",Gn,!0):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function xs(t,e){var n=t.document.documentElement,i=W(t).on("dragstart.drag",null);e&&(i.on("click.drag",Gn,!0),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in n?i.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function Da(t){return function(){return t}}function Vo(t,e,n,i,a,r,s,o,l,c){this.target=t,this.type=e,this.subject=n,this.identifier=i,this.active=a,this.x=r,this.y=s,this.dx=o,this.dy=l,this._=c}Vo.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function vb(){return!w.ctrlKey&&!w.button}function xb(){return this.parentNode}function _b(t){return t??{x:w.x,y:w.y}}function wb(){return navigator.maxTouchPoints||"ontouchstart"in this}function Uf(){var t=vb,e=xb,n=_b,i=wb,a={},r=wn("start","drag","end"),s=0,o,l,c,h,f=0;function u(x){x.on("mousedown.drag",p).filter(i).on("touchstart.drag",m).on("touchmove.drag",b).on("touchend.drag touchcancel.drag",v).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function p(){if(!(h||!t.apply(this,arguments))){var x=y("mouse",e.apply(this,arguments),an,this,arguments);x&&(W(w.view).on("mousemove.drag",d,!0).on("mouseup.drag",g,!0),vs(w.view),Zs(),c=!1,o=w.clientX,l=w.clientY,x("start"))}}function d(){if(Gn(),!c){var x=w.clientX-o,M=w.clientY-l;c=x*x+M*M>f}a.mouse("drag")}function g(){W(w.view).on("mousemove.drag mouseup.drag",null),xs(w.view,c),Gn(),a.mouse("end")}function m(){if(t.apply(this,arguments)){var x=w.changedTouches,M=e.apply(this,arguments),D=x.length,k,I;for(k=0;k<D;++k)(I=y(x[k].identifier,M,Vi,this,arguments))&&(Zs(),I("start"))}}function b(){var x=w.changedTouches,M=x.length,D,k;for(D=0;D<M;++D)(k=a[x[D].identifier])&&(Gn(),k("drag"))}function v(){var x=w.changedTouches,M=x.length,D,k;for(h&&clearTimeout(h),h=setTimeout(function(){h=null},500),D=0;D<M;++D)(k=a[x[D].identifier])&&(Zs(),k("end"))}function y(x,M,D,k,I){var C=D(M,x),T,L,_,A=r.copy();if(Ui(new Vo(u,"beforestart",T,x,s,C[0],C[1],0,0,A),function(){return(w.subject=T=n.apply(k,I))==null?!1:(L=T.x-C[0]||0,_=T.y-C[1]||0,!0)}))return function P(S){var R=C,z;switch(S){case"start":a[x]=P,z=s++;break;case"end":delete a[x],--s;case"drag":C=D(M,x),z=s;break}Ui(new Vo(u,S,T,x,z,C[0]+L,C[1]+_,C[0]-R[0],C[1]-R[1],A),A.apply,A,[S,k,I])}}return u.filter=function(x){return arguments.length?(t=typeof x=="function"?x:Da(!!x),u):t},u.container=function(x){return arguments.length?(e=typeof x=="function"?x:Da(x),u):e},u.subject=function(x){return arguments.length?(n=typeof x=="function"?x:Da(x),u):n},u.touchable=function(x){return arguments.length?(i=typeof x=="function"?x:Da(!!x),u):i},u.on=function(){var x=r.on.apply(r,arguments);return x===r?u:x},u.clickDistance=function(x){return arguments.length?(f=(x=+x)*x,u):Math.sqrt(f)},u}function ai(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function da(t,e){var n=Object.create(t.prototype);for(var i in e)n[i]=e[i];return n}function Ve(){}var hn=.7,Vn=1/hn,Bn="\\s*([+-]?\\d+)\\s*",qi="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",me="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Mb=/^#([0-9a-f]{3,8})$/,kb=new RegExp("^rgb\\("+[Bn,Bn,Bn]+"\\)$"),Db=new RegExp("^rgb\\("+[me,me,me]+"\\)$"),Sb=new RegExp("^rgba\\("+[Bn,Bn,Bn,qi]+"\\)$"),Ab=new RegExp("^rgba\\("+[me,me,me,qi]+"\\)$"),Lb=new RegExp("^hsl\\("+[qi,me,me]+"\\)$"),Cb=new RegExp("^hsla\\("+[qi,me,me,qi]+"\\)$"),ch={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};ai(Ve,Xe,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:hh,formatHex:hh,formatHsl:Tb,formatRgb:uh,toString:uh});function hh(){return this.rgb().formatHex()}function Tb(){return Vf(this).formatHsl()}function uh(){return this.rgb().formatRgb()}function Xe(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=Mb.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?fh(e):n===3?new vt(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?Sa(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?Sa(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=kb.exec(t))?new vt(e[1],e[2],e[3],1):(e=Db.exec(t))?new vt(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Sb.exec(t))?Sa(e[1],e[2],e[3],e[4]):(e=Ab.exec(t))?Sa(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Lb.exec(t))?gh(e[1],e[2]/100,e[3]/100,1):(e=Cb.exec(t))?gh(e[1],e[2]/100,e[3]/100,e[4]):ch.hasOwnProperty(t)?fh(ch[t]):t==="transparent"?new vt(NaN,NaN,NaN,0):null}function fh(t){return new vt(t>>16&255,t>>8&255,t&255,1)}function Sa(t,e,n,i){return i<=0&&(t=e=n=NaN),new vt(t,e,n,i)}function Kl(t){return t instanceof Ve||(t=Xe(t)),t?(t=t.rgb(),new vt(t.r,t.g,t.b,t.opacity)):new vt}function qn(t,e,n,i){return arguments.length===1?Kl(t):new vt(t,e,n,i??1)}function vt(t,e,n,i){this.r=+t,this.g=+e,this.b=+n,this.opacity=+i}ai(vt,qn,da(Ve,{brighter:function(t){return t=t==null?Vn:Math.pow(Vn,t),new vt(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=t==null?hn:Math.pow(hn,t),new vt(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:dh,formatHex:dh,formatRgb:ph,toString:ph}));function dh(){return"#"+Ks(this.r)+Ks(this.g)+Ks(this.b)}function ph(){var t=this.opacity;return t=isNaN(t)?1:Math.max(0,Math.min(1,t)),(t===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(t===1?")":", "+t+")")}function Ks(t){return t=Math.max(0,Math.min(255,Math.round(t)||0)),(t<16?"0":"")+t.toString(16)}function gh(t,e,n,i){return i<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new fe(t,e,n,i)}function Vf(t){if(t instanceof fe)return new fe(t.h,t.s,t.l,t.opacity);if(t instanceof Ve||(t=Xe(t)),!t)return new fe;if(t instanceof fe)return t;t=t.rgb();var e=t.r/255,n=t.g/255,i=t.b/255,a=Math.min(e,n,i),r=Math.max(e,n,i),s=NaN,o=r-a,l=(r+a)/2;return o?(e===r?s=(n-i)/o+(n<i)*6:n===r?s=(i-e)/o+2:s=(e-n)/o+4,o/=l<.5?r+a:2-r-a,s*=60):o=l>0&&l<1?0:s,new fe(s,o,l,t.opacity)}function mr(t,e,n,i){return arguments.length===1?Vf(t):new fe(t,e,n,i??1)}function fe(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}ai(fe,mr,da(Ve,{brighter:function(t){return t=t==null?Vn:Math.pow(Vn,t),new fe(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=t==null?hn:Math.pow(hn,t),new fe(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*e,a=2*n-i;return new vt(Qs(t>=240?t-240:t+120,a,i),Qs(t,a,i),Qs(t<120?t+240:t-120,a,i),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return t=isNaN(t)?1:Math.max(0,Math.min(1,t)),(t===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(t===1?")":", "+t+")")}}));function Qs(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}var qf=Math.PI/180,Zf=180/Math.PI,br=18,Kf=.96422,Qf=1,Jf=.82521,jf=4/29,Wn=6/29,td=3*Wn*Wn,Ib=Wn*Wn*Wn;function ed(t){if(t instanceof ae)return new ae(t.l,t.a,t.b,t.opacity);if(t instanceof ge)return id(t);t instanceof vt||(t=Kl(t));var e=eo(t.r),n=eo(t.g),i=eo(t.b),a=Js((.2225045*e+.7168786*n+.0606169*i)/Qf),r,s;return e===n&&n===i?r=s=a:(r=Js((.4360747*e+.3850649*n+.1430804*i)/Kf),s=Js((.0139322*e+.0971045*n+.7141733*i)/Jf)),new ae(116*a-16,500*(r-a),200*(a-s),t.opacity)}function Rb(t,e){return new ae(t,0,0,e??1)}function yr(t,e,n,i){return arguments.length===1?ed(t):new ae(t,e,n,i??1)}function ae(t,e,n,i){this.l=+t,this.a=+e,this.b=+n,this.opacity=+i}ai(ae,yr,da(Ve,{brighter:function(t){return new ae(this.l+br*(t??1),this.a,this.b,this.opacity)},darker:function(t){return new ae(this.l-br*(t??1),this.a,this.b,this.opacity)},rgb:function(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,n=isNaN(this.b)?t:t-this.b/200;return e=Kf*js(e),t=Qf*js(t),n=Jf*js(n),new vt(to(3.1338561*e-1.6168667*t-.4906146*n),to(-.9787684*e+1.9161415*t+.033454*n),to(.0719453*e-.2289914*t+1.4052427*n),this.opacity)}}));function Js(t){return t>Ib?Math.pow(t,1/3):t/td+jf}function js(t){return t>Wn?t*t*t:td*(t-jf)}function to(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function eo(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function nd(t){if(t instanceof ge)return new ge(t.h,t.c,t.l,t.opacity);if(t instanceof ae||(t=ed(t)),t.a===0&&t.b===0)return new ge(NaN,0<t.l&&t.l<100?0:NaN,t.l,t.opacity);var e=Math.atan2(t.b,t.a)*Zf;return new ge(e<0?e+360:e,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function Pb(t,e,n,i){return arguments.length===1?nd(t):new ge(n,e,t,i??1)}function vr(t,e,n,i){return arguments.length===1?nd(t):new ge(t,e,n,i??1)}function ge(t,e,n,i){this.h=+t,this.c=+e,this.l=+n,this.opacity=+i}function id(t){if(isNaN(t.h))return new ae(t.l,0,0,t.opacity);var e=t.h*qf;return new ae(t.l,Math.cos(e)*t.c,Math.sin(e)*t.c,t.opacity)}ai(ge,vr,da(Ve,{brighter:function(t){return new ge(this.h,this.c,this.l+br*(t??1),this.opacity)},darker:function(t){return new ge(this.h,this.c,this.l-br*(t??1),this.opacity)},rgb:function(){return id(this).rgb()}}));var ad=-.14861,Ql=1.78277,Jl=-.29227,_s=-.90649,Zi=1.97294,mh=Zi*_s,bh=Zi*Ql,yh=Ql*Jl-_s*ad;function Eb(t){if(t instanceof rn)return new rn(t.h,t.s,t.l,t.opacity);t instanceof vt||(t=Kl(t));var e=t.r/255,n=t.g/255,i=t.b/255,a=(yh*i+mh*e-bh*n)/(yh+mh-bh),r=i-a,s=(Zi*(n-a)-Jl*r)/_s,o=Math.sqrt(s*s+r*r)/(Zi*a*(1-a)),l=o?Math.atan2(s,r)*Zf-120:NaN;return new rn(l<0?l+360:l,o,a,t.opacity)}function re(t,e,n,i){return arguments.length===1?Eb(t):new rn(t,e,n,i??1)}function rn(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}ai(rn,re,da(Ve,{brighter:function(t){return t=t==null?Vn:Math.pow(Vn,t),new rn(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=t==null?hn:Math.pow(hn,t),new rn(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=isNaN(this.h)?0:(this.h+120)*qf,e=+this.l,n=isNaN(this.s)?0:this.s*e*(1-e),i=Math.cos(t),a=Math.sin(t);return new vt(255*(e+n*(ad*i+Ql*a)),255*(e+n*(Jl*i+_s*a)),255*(e+n*(Zi*i)),this.opacity)}}));function rd(t,e,n,i,a){var r=t*t,s=r*t;return((1-3*t+3*r-s)*e+(4-6*r+3*s)*n+(1+3*t+3*r-3*s)*i+s*a)/6}function sd(t){var e=t.length-1;return function(n){var i=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),a=t[i],r=t[i+1],s=i>0?t[i-1]:2*a-r,o=i<e-1?t[i+2]:2*r-a;return rd((n-i/e)*e,s,a,r,o)}}function od(t){var e=t.length;return function(n){var i=Math.floor(((n%=1)<0?++n:n)*e),a=t[(i+e-1)%e],r=t[i%e],s=t[(i+1)%e],o=t[(i+2)%e];return rd((n-i/e)*e,a,r,s,o)}}function ws(t){return function(){return t}}function ld(t,e){return function(n){return t+n*e}}function $b(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(i){return Math.pow(t+i*e,n)}}function Ms(t,e){var n=e-t;return n?ld(t,n>180||n<-180?n-360*Math.round(n/360):n):ws(isNaN(t)?e:t)}function Yb(t){return(t=+t)==1?mt:function(e,n){return n-e?$b(e,n,t):ws(isNaN(e)?n:e)}}function mt(t,e){var n=e-t;return n?ld(t,n):ws(isNaN(t)?e:t)}const Ki=function t(e){var n=Yb(e);function i(a,r){var s=n((a=qn(a)).r,(r=qn(r)).r),o=n(a.g,r.g),l=n(a.b,r.b),c=mt(a.opacity,r.opacity);return function(h){return a.r=s(h),a.g=o(h),a.b=l(h),a.opacity=c(h),a+""}}return i.gamma=t,i}(1);function cd(t){return function(e){var n=e.length,i=new Array(n),a=new Array(n),r=new Array(n),s,o;for(s=0;s<n;++s)o=qn(e[s]),i[s]=o.r||0,a[s]=o.g||0,r[s]=o.b||0;return i=t(i),a=t(a),r=t(r),o.opacity=1,function(l){return o.r=i(l),o.g=a(l),o.b=r(l),o+""}}}var hd=cd(sd),Nb=cd(od);function jl(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,i=e.slice(),a;return function(r){for(a=0;a<n;++a)i[a]=t[a]*(1-r)+e[a]*r;return i}}function ud(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function zb(t,e){return(ud(e)?jl:fd)(t,e)}function fd(t,e){var n=e?e.length:0,i=t?Math.min(n,t.length):0,a=new Array(i),r=new Array(n),s;for(s=0;s<i;++s)a[s]=pa(t[s],e[s]);for(;s<n;++s)r[s]=e[s];return function(o){for(s=0;s<i;++s)r[s]=a[s](o);return r}}function dd(t,e){var n=new Date;return t=+t,e=+e,function(i){return n.setTime(t*(1-i)+e*i),n}}function Kt(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function pd(t,e){var n={},i={},a;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(a in e)a in t?n[a]=pa(t[a],e[a]):i[a]=e[a];return function(r){for(a in n)i[a]=n[a](r);return i}}var qo=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,no=new RegExp(qo.source,"g");function Hb(t){return function(){return t}}function Xb(t){return function(e){return t(e)+""}}function tc(t,e){var n=qo.lastIndex=no.lastIndex=0,i,a,r,s=-1,o=[],l=[];for(t=t+"",e=e+"";(i=qo.exec(t))&&(a=no.exec(e));)(r=a.index)>n&&(r=e.slice(n,r),o[s]?o[s]+=r:o[++s]=r),(i=i[0])===(a=a[0])?o[s]?o[s]+=a:o[++s]=a:(o[++s]=null,l.push({i:s,x:Kt(i,a)})),n=no.lastIndex;return n<e.length&&(r=e.slice(n),o[s]?o[s]+=r:o[++s]=r),o.length<2?l[0]?Xb(l[0].x):Hb(e):(e=l.length,function(c){for(var h=0,f;h<e;++h)o[(f=l[h]).i]=f.x(c);return o.join("")})}function pa(t,e){var n=typeof e,i;return e==null||n==="boolean"?ws(e):(n==="number"?Kt:n==="string"?(i=Xe(e))?(e=i,Ki):tc:e instanceof Xe?Ki:e instanceof Date?dd:ud(e)?jl:Array.isArray(e)?fd:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?pd:Kt)(t,e)}function Gb(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}}function Bb(t,e){var n=Ms(+t,+e);return function(i){var a=n(i);return a-360*Math.floor(a/360)}}function gd(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}var vh=180/Math.PI,Zo={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function md(t,e,n,i,a,r){var s,o,l;return(s=Math.sqrt(t*t+e*e))&&(t/=s,e/=s),(l=t*n+e*i)&&(n-=t*l,i-=e*l),(o=Math.sqrt(n*n+i*i))&&(n/=o,i/=o,l/=o),t*i<e*n&&(t=-t,e=-e,l=-l,s=-s),{translateX:a,translateY:r,rotate:Math.atan2(e,t)*vh,skewX:Math.atan(l)*vh,scaleX:s,scaleY:o}}var ui,io,xh,Aa;function Wb(t){return t==="none"?Zo:(ui||(ui=document.createElement("DIV"),io=document.documentElement,xh=document.defaultView),ui.style.transform=t,t=xh.getComputedStyle(io.appendChild(ui),null).getPropertyValue("transform"),io.removeChild(ui),t=t.slice(7,-1).split(","),md(+t[0],+t[1],+t[2],+t[3],+t[4],+t[5]))}function Ob(t){return t==null||(Aa||(Aa=document.createElementNS("http://www.w3.org/2000/svg","g")),Aa.setAttribute("transform",t),!(t=Aa.transform.baseVal.consolidate()))?Zo:(t=t.matrix,md(t.a,t.b,t.c,t.d,t.e,t.f))}function bd(t,e,n,i){function a(c){return c.length?c.pop()+" ":""}function r(c,h,f,u,p,d){if(c!==f||h!==u){var g=p.push("translate(",null,e,null,n);d.push({i:g-4,x:Kt(c,f)},{i:g-2,x:Kt(h,u)})}else(f||u)&&p.push("translate("+f+e+u+n)}function s(c,h,f,u){c!==h?(c-h>180?h+=360:h-c>180&&(c+=360),u.push({i:f.push(a(f)+"rotate(",null,i)-2,x:Kt(c,h)})):h&&f.push(a(f)+"rotate("+h+i)}function o(c,h,f,u){c!==h?u.push({i:f.push(a(f)+"skewX(",null,i)-2,x:Kt(c,h)}):h&&f.push(a(f)+"skewX("+h+i)}function l(c,h,f,u,p,d){if(c!==f||h!==u){var g=p.push(a(p)+"scale(",null,",",null,")");d.push({i:g-4,x:Kt(c,f)},{i:g-2,x:Kt(h,u)})}else(f!==1||u!==1)&&p.push(a(p)+"scale("+f+","+u+")")}return function(c,h){var f=[],u=[];return c=t(c),h=t(h),r(c.translateX,c.translateY,h.translateX,h.translateY,f,u),s(c.rotate,h.rotate,f,u),o(c.skewX,h.skewX,f,u),l(c.scaleX,c.scaleY,h.scaleX,h.scaleY,f,u),c=h=null,function(p){for(var d=-1,g=u.length,m;++d<g;)f[(m=u[d]).i]=m.x(p);return f.join("")}}}var yd=bd(Wb,"px, ","px)","deg)"),vd=bd(Ob,", ",")",")"),fi=Math.SQRT2,ao=2,_h=4,Fb=1e-12;function wh(t){return((t=Math.exp(t))+1/t)/2}function Ub(t){return((t=Math.exp(t))-1/t)/2}function Vb(t){return((t=Math.exp(2*t))-1)/(t+1)}function xd(t,e){var n=t[0],i=t[1],a=t[2],r=e[0],s=e[1],o=e[2],l=r-n,c=s-i,h=l*l+c*c,f,u;if(h<Fb)u=Math.log(o/a)/fi,f=function(v){return[n+v*l,i+v*c,a*Math.exp(fi*v*u)]};else{var p=Math.sqrt(h),d=(o*o-a*a+_h*h)/(2*a*ao*p),g=(o*o-a*a-_h*h)/(2*o*ao*p),m=Math.log(Math.sqrt(d*d+1)-d),b=Math.log(Math.sqrt(g*g+1)-g);u=(b-m)/fi,f=function(v){var y=v*u,x=wh(m),M=a/(ao*p)*(x*Vb(fi*y+m)-Ub(m));return[n+M*l,i+M*c,a*x/wh(fi*y+m)]}}return f.duration=u*1e3,f}function _d(t){return function(e,n){var i=t((e=mr(e)).h,(n=mr(n)).h),a=mt(e.s,n.s),r=mt(e.l,n.l),s=mt(e.opacity,n.opacity);return function(o){return e.h=i(o),e.s=a(o),e.l=r(o),e.opacity=s(o),e+""}}}const qb=_d(Ms);var Zb=_d(mt);function Kb(t,e){var n=mt((t=yr(t)).l,(e=yr(e)).l),i=mt(t.a,e.a),a=mt(t.b,e.b),r=mt(t.opacity,e.opacity);return function(s){return t.l=n(s),t.a=i(s),t.b=a(s),t.opacity=r(s),t+""}}function wd(t){return function(e,n){var i=t((e=vr(e)).h,(n=vr(n)).h),a=mt(e.c,n.c),r=mt(e.l,n.l),s=mt(e.opacity,n.opacity);return function(o){return e.h=i(o),e.c=a(o),e.l=r(o),e.opacity=s(o),e+""}}}const Qb=wd(Ms);var Jb=wd(mt);function Md(t){return function e(n){n=+n;function i(a,r){var s=t((a=re(a)).h,(r=re(r)).h),o=mt(a.s,r.s),l=mt(a.l,r.l),c=mt(a.opacity,r.opacity);return function(h){return a.h=s(h),a.s=o(h),a.l=l(Math.pow(h,n)),a.opacity=c(h),a+""}}return i.gamma=e,i}(1)}const jb=Md(Ms);var ks=Md(mt);function ty(t,e){for(var n=0,i=e.length-1,a=e[0],r=new Array(i<0?0:i);n<i;)r[n]=t(a,a=e[++n]);return function(s){var o=Math.max(0,Math.min(i-1,Math.floor(s*=i)));return r[o](s-o)}}function ey(t,e){for(var n=new Array(e),i=0;i<e;++i)n[i]=t(i/(e-1));return n}var Zn=0,ki=0,di=0,kd=1e3,xr,Di,_r=0,un=0,Ds=0,Qi=typeof performance=="object"&&performance.now?performance:Date,Dd=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function ri(){return un||(Dd(ny),un=Qi.now()+Ds)}function ny(){un=0}function Ji(){this._call=this._time=this._next=null}Ji.prototype=Ss.prototype={constructor:Ji,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?ri():+n)+(e==null?0:+e),!this._next&&Di!==this&&(Di?Di._next=this:xr=this,Di=this),this._call=t,this._time=n,Ko()},stop:function(){this._call&&(this._call=null,this._time=1/0,Ko())}};function Ss(t,e,n){var i=new Ji;return i.restart(t,e,n),i}function Sd(){ri(),++Zn;for(var t=xr,e;t;)(e=un-t._time)>=0&&t._call.call(null,e),t=t._next;--Zn}function Mh(){un=(_r=Qi.now())+Ds,Zn=ki=0;try{Sd()}finally{Zn=0,ay(),un=0}}function iy(){var t=Qi.now(),e=t-_r;e>kd&&(Ds-=e,_r=t)}function ay(){for(var t,e=xr,n,i=1/0;e;)e._call?(i>e._time&&(i=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:xr=n);Di=t,Ko(i)}function Ko(t){if(!Zn){ki&&(ki=clearTimeout(ki));var e=t-un;e>24?(t<1/0&&(ki=setTimeout(Mh,t-Qi.now()-Ds)),di&&(di=clearInterval(di))):(di||(_r=Qi.now(),di=setInterval(iy,kd)),Zn=1,Dd(Mh))}}function Qo(t,e,n){var i=new Ji;return e=e==null?0:+e,i.restart(function(a){i.stop(),t(a+e)},e,n),i}function ry(t,e,n){var i=new Ji,a=e;return e==null?(i.restart(t,e,n),i):(e=+e,n=n==null?ri():+n,i.restart(function r(s){s+=a,i.restart(r,a+=e,n),t(s)},e,n),i)}var sy=wn("start","end","cancel","interrupt"),oy=[],Ad=0,Jo=1,jo=2,rr=3,kh=4,tl=5,sr=6;function As(t,e,n,i,a,r){var s=t.__transition;if(!s)t.__transition={};else if(n in s)return;ly(t,n,{name:e,index:i,group:a,on:sy,tween:oy,time:r.time,delay:r.delay,duration:r.duration,ease:r.ease,timer:null,state:Ad})}function ec(t,e){var n=ce(t,e);if(n.state>Ad)throw new Error("too late; already scheduled");return n}function Ce(t,e){var n=ce(t,e);if(n.state>rr)throw new Error("too late; already running");return n}function ce(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function ly(t,e,n){var i=t.__transition,a;i[e]=n,n.timer=Ss(r,0,n.time);function r(c){n.state=Jo,n.timer.restart(s,n.delay,n.time),n.delay<=c&&s(c-n.delay)}function s(c){var h,f,u,p;if(n.state!==Jo)return l();for(h in i)if(p=i[h],p.name===n.name){if(p.state===rr)return Qo(s);p.state===kh?(p.state=sr,p.timer.stop(),p.on.call("interrupt",t,t.__data__,p.index,p.group),delete i[h]):+h<e&&(p.state=sr,p.timer.stop(),p.on.call("cancel",t,t.__data__,p.index,p.group),delete i[h])}if(Qo(function(){n.state===rr&&(n.state=kh,n.timer.restart(o,n.delay,n.time),o(c))}),n.state=jo,n.on.call("start",t,t.__data__,n.index,n.group),n.state===jo){for(n.state=rr,a=new Array(u=n.tween.length),h=0,f=-1;h<u;++h)(p=n.tween[h].value.call(t,t.__data__,n.index,n.group))&&(a[++f]=p);a.length=f+1}}function o(c){for(var h=c<n.duration?n.ease.call(null,c/n.duration):(n.timer.restart(l),n.state=tl,1),f=-1,u=a.length;++f<u;)a[f].call(t,h);n.state===tl&&(n.on.call("end",t,t.__data__,n.index,n.group),l())}function l(){n.state=sr,n.timer.stop(),delete i[e];for(var c in i)return;delete t.__transition}}function sn(t,e){var n=t.__transition,i,a,r=!0,s;if(n){e=e==null?null:e+"";for(s in n){if((i=n[s]).name!==e){r=!1;continue}a=i.state>jo&&i.state<tl,i.state=sr,i.timer.stop(),i.on.call(a?"interrupt":"cancel",t,t.__data__,i.index,i.group),delete n[s]}r&&delete t.__transition}}function cy(t){return this.each(function(){sn(this,t)})}function hy(t,e){var n,i;return function(){var a=Ce(this,t),r=a.tween;if(r!==n){i=n=r;for(var s=0,o=i.length;s<o;++s)if(i[s].name===e){i=i.slice(),i.splice(s,1);break}}a.tween=i}}function uy(t,e,n){var i,a;if(typeof n!="function")throw new Error;return function(){var r=Ce(this,t),s=r.tween;if(s!==i){a=(i=s).slice();for(var o={name:e,value:n},l=0,c=a.length;l<c;++l)if(a[l].name===e){a[l]=o;break}l===c&&a.push(o)}r.tween=a}}function fy(t,e){var n=this._id;if(t+="",arguments.length<2){for(var i=ce(this.node(),n).tween,a=0,r=i.length,s;a<r;++a)if((s=i[a]).name===t)return s.value;return null}return this.each((e==null?hy:uy)(n,t,e))}function nc(t,e,n){var i=t._id;return t.each(function(){var a=Ce(this,i);(a.value||(a.value={}))[e]=n.apply(this,arguments)}),function(a){return ce(a,i).value[e]}}function Ld(t,e){var n;return(typeof e=="number"?Kt:e instanceof Xe?Ki:(n=Xe(e))?(e=n,Ki):tc)(t,e)}function dy(t){return function(){this.removeAttribute(t)}}function py(t){return function(){this.removeAttributeNS(t.space,t.local)}}function gy(t,e,n){var i,a=n+"",r;return function(){var s=this.getAttribute(t);return s===a?null:s===i?r:r=e(i=s,n)}}function my(t,e,n){var i,a=n+"",r;return function(){var s=this.getAttributeNS(t.space,t.local);return s===a?null:s===i?r:r=e(i=s,n)}}function by(t,e,n){var i,a,r;return function(){var s,o=n(this),l;return o==null?void this.removeAttribute(t):(s=this.getAttribute(t),l=o+"",s===l?null:s===i&&l===a?r:(a=l,r=e(i=s,o)))}}function yy(t,e,n){var i,a,r;return function(){var s,o=n(this),l;return o==null?void this.removeAttributeNS(t.space,t.local):(s=this.getAttributeNS(t.space,t.local),l=o+"",s===l?null:s===i&&l===a?r:(a=l,r=e(i=s,o)))}}function vy(t,e){var n=fa(t),i=n==="transform"?vd:Ld;return this.attrTween(t,typeof e=="function"?(n.local?yy:by)(n,i,nc(this,"attr."+t,e)):e==null?(n.local?py:dy)(n):(n.local?my:gy)(n,i,e))}function xy(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function _y(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function wy(t,e){var n,i;function a(){var r=e.apply(this,arguments);return r!==i&&(n=(i=r)&&_y(t,r)),n}return a._value=e,a}function My(t,e){var n,i;function a(){var r=e.apply(this,arguments);return r!==i&&(n=(i=r)&&xy(t,r)),n}return a._value=e,a}function ky(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var i=fa(t);return this.tween(n,(i.local?wy:My)(i,e))}function Dy(t,e){return function(){ec(this,t).delay=+e.apply(this,arguments)}}function Sy(t,e){return e=+e,function(){ec(this,t).delay=e}}function Ay(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?Dy:Sy)(e,t)):ce(this.node(),e).delay}function Ly(t,e){return function(){Ce(this,t).duration=+e.apply(this,arguments)}}function Cy(t,e){return e=+e,function(){Ce(this,t).duration=e}}function Ty(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?Ly:Cy)(e,t)):ce(this.node(),e).duration}function Iy(t,e){if(typeof e!="function")throw new Error;return function(){Ce(this,t).ease=e}}function Ry(t){var e=this._id;return arguments.length?this.each(Iy(e,t)):ce(this.node(),e).ease}function Py(t){typeof t!="function"&&(t=Fl(t));for(var e=this._groups,n=e.length,i=new Array(n),a=0;a<n;++a)for(var r=e[a],s=r.length,o=i[a]=[],l,c=0;c<s;++c)(l=r[c])&&t.call(l,l.__data__,c,r)&&o.push(l);return new be(i,this._parents,this._name,this._id)}function Ey(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,i=e.length,a=n.length,r=Math.min(i,a),s=new Array(i),o=0;o<r;++o)for(var l=e[o],c=n[o],h=l.length,f=s[o]=new Array(h),u,p=0;p<h;++p)(u=l[p]||c[p])&&(f[p]=u);for(;o<i;++o)s[o]=e[o];return new be(s,this._parents,this._name,this._id)}function $y(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function Yy(t,e,n){var i,a,r=$y(e)?ec:Ce;return function(){var s=r(this,t),o=s.on;o!==i&&(a=(i=o).copy()).on(e,n),s.on=a}}function Ny(t,e){var n=this._id;return arguments.length<2?ce(this.node(),n).on.on(t):this.each(Yy(n,t,e))}function zy(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function Hy(){return this.on("end.remove",zy(this._id))}function Xy(t){var e=this._name,n=this._id;typeof t!="function"&&(t=bs(t));for(var i=this._groups,a=i.length,r=new Array(a),s=0;s<a;++s)for(var o=i[s],l=o.length,c=r[s]=new Array(l),h,f,u=0;u<l;++u)(h=o[u])&&(f=t.call(h,h.__data__,u,o))&&("__data__"in h&&(f.__data__=h.__data__),c[u]=f,As(c[u],e,n,u,c,ce(h,n)));return new be(r,this._parents,e,n)}function Gy(t){var e=this._name,n=this._id;typeof t!="function"&&(t=Ol(t));for(var i=this._groups,a=i.length,r=[],s=[],o=0;o<a;++o)for(var l=i[o],c=l.length,h,f=0;f<c;++f)if(h=l[f]){for(var u=t.call(h,h.__data__,f,l),p,d=ce(h,n),g=0,m=u.length;g<m;++g)(p=u[g])&&As(p,e,n,g,u,d);r.push(u),s.push(h)}return new be(r,s,e,n)}var By=Mn.prototype.constructor;function Wy(){return new By(this._groups,this._parents)}function Oy(t,e){var n,i,a;return function(){var r=cn(this,t),s=(this.style.removeProperty(t),cn(this,t));return r===s?null:r===n&&s===i?a:a=e(n=r,i=s)}}function Cd(t){return function(){this.style.removeProperty(t)}}function Fy(t,e,n){var i,a=n+"",r;return function(){var s=cn(this,t);return s===a?null:s===i?r:r=e(i=s,n)}}function Uy(t,e,n){var i,a,r;return function(){var s=cn(this,t),o=n(this),l=o+"";return o==null&&(l=o=(this.style.removeProperty(t),cn(this,t))),s===l?null:s===i&&l===a?r:(a=l,r=e(i=s,o))}}function Vy(t,e){var n,i,a,r="style."+e,s="end."+r,o;return function(){var l=Ce(this,t),c=l.on,h=l.value[r]==null?o||(o=Cd(e)):void 0;(c!==n||a!==h)&&(i=(n=c).copy()).on(s,a=h),l.on=i}}function qy(t,e,n){var i=(t+="")=="transform"?yd:Ld;return e==null?this.styleTween(t,Oy(t,i)).on("end.style."+t,Cd(t)):typeof e=="function"?this.styleTween(t,Uy(t,i,nc(this,"style."+t,e))).each(Vy(this._id,t)):this.styleTween(t,Fy(t,i,e),n).on("end.style."+t,null)}function Zy(t,e,n){return function(i){this.style.setProperty(t,e.call(this,i),n)}}function Ky(t,e,n){var i,a;function r(){var s=e.apply(this,arguments);return s!==a&&(i=(a=s)&&Zy(t,s,n)),i}return r._value=e,r}function Qy(t,e,n){var i="style."+(t+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(e==null)return this.tween(i,null);if(typeof e!="function")throw new Error;return this.tween(i,Ky(t,e,n??""))}function Jy(t){return function(){this.textContent=t}}function jy(t){return function(){var e=t(this);this.textContent=e??""}}function tv(t){return this.tween("text",typeof t=="function"?jy(nc(this,"text",t)):Jy(t==null?"":t+""))}function ev(t){return function(e){this.textContent=t.call(this,e)}}function nv(t){var e,n;function i(){var a=t.apply(this,arguments);return a!==n&&(e=(n=a)&&ev(a)),e}return i._value=t,i}function iv(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,nv(t))}function av(){for(var t=this._name,e=this._id,n=Id(),i=this._groups,a=i.length,r=0;r<a;++r)for(var s=i[r],o=s.length,l,c=0;c<o;++c)if(l=s[c]){var h=ce(l,e);As(l,t,n,c,s,{time:h.time+h.delay+h.duration,delay:0,duration:h.duration,ease:h.ease})}return new be(i,this._parents,t,n)}function rv(){var t,e,n=this,i=n._id,a=n.size();return new Promise(function(r,s){var o={value:s},l={value:function(){--a===0&&r()}};n.each(function(){var c=Ce(this,i),h=c.on;h!==t&&(e=(t=h).copy(),e._.cancel.push(o),e._.interrupt.push(o),e._.end.push(l)),c.on=e})})}var sv=0;function be(t,e,n,i){this._groups=t,this._parents=e,this._name=n,this._id=i}function Td(t){return Mn().transition(t)}function Id(){return++sv}var In=Mn.prototype;be.prototype=Td.prototype={constructor:be,select:Xy,selectAll:Gy,filter:Py,merge:Ey,selection:Wy,transition:av,call:In.call,nodes:In.nodes,node:In.node,size:In.size,empty:In.empty,each:In.each,on:Ny,attr:vy,attrTween:ky,style:qy,styleTween:Qy,text:tv,textTween:iv,remove:Hy,tween:fy,delay:Ay,duration:Ty,ease:Ry,end:rv};function ov(t){return+t}function lv(t){return t*t}function cv(t){return t*(2-t)}function Dh(t){return((t*=2)<=1?t*t:--t*(2-t)+1)/2}function hv(t){return t*t*t}function uv(t){return--t*t*t+1}function el(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var ic=3,fv=function t(e){e=+e;function n(i){return Math.pow(i,e)}return n.exponent=t,n}(ic),dv=function t(e){e=+e;function n(i){return 1-Math.pow(1-i,e)}return n.exponent=t,n}(ic),Sh=function t(e){e=+e;function n(i){return((i*=2)<=1?Math.pow(i,e):2-Math.pow(2-i,e))/2}return n.exponent=t,n}(ic),Rd=Math.PI,Pd=Rd/2;function pv(t){return+t==1?1:1-Math.cos(t*Pd)}function gv(t){return Math.sin(t*Pd)}function Ah(t){return(1-Math.cos(Rd*t))/2}function Ge(t){return(Math.pow(2,-10*t)-.0009765625)*1.0009775171065494}function mv(t){return Ge(1-+t)}function bv(t){return 1-Ge(t)}function Lh(t){return((t*=2)<=1?Ge(1-t):2-Ge(t-1))/2}function yv(t){return 1-Math.sqrt(1-t*t)}function vv(t){return Math.sqrt(1- --t*t)}function Ch(t){return((t*=2)<=1?1-Math.sqrt(1-t*t):Math.sqrt(1-(t-=2)*t)+1)/2}var nl=4/11,xv=6/11,_v=8/11,wv=3/4,Mv=9/11,kv=10/11,Dv=15/16,Sv=21/22,Av=63/64,La=1/nl/nl;function Lv(t){return 1-ji(1-t)}function ji(t){return(t=+t)<nl?La*t*t:t<_v?La*(t-=xv)*t+wv:t<kv?La*(t-=Mv)*t+Dv:La*(t-=Sv)*t+Av}function Cv(t){return((t*=2)<=1?1-ji(1-t):ji(t-1)+1)/2}var ac=1.70158,Tv=function t(e){e=+e;function n(i){return(i=+i)*i*(e*(i-1)+i)}return n.overshoot=t,n}(ac),Iv=function t(e){e=+e;function n(i){return--i*i*((i+1)*e+i)+1}return n.overshoot=t,n}(ac),Th=function t(e){e=+e;function n(i){return((i*=2)<1?i*i*((e+1)*i-e):(i-=2)*i*((e+1)*i+e)+2)/2}return n.overshoot=t,n}(ac),Kn=2*Math.PI,rc=1,sc=.3,Rv=function t(e,n){var i=Math.asin(1/(e=Math.max(1,e)))*(n/=Kn);function a(r){return e*Ge(- --r)*Math.sin((i-r)/n)}return a.amplitude=function(r){return t(r,n*Kn)},a.period=function(r){return t(e,r)},a}(rc,sc),fn=function t(e,n){var i=Math.asin(1/(e=Math.max(1,e)))*(n/=Kn);function a(r){return 1-e*Ge(r=+r)*Math.sin((r+i)/n)}return a.amplitude=function(r){return t(r,n*Kn)},a.period=function(r){return t(e,r)},a}(rc,sc),Pv=function t(e,n){var i=Math.asin(1/(e=Math.max(1,e)))*(n/=Kn);function a(r){return((r=r*2-1)<0?e*Ge(-r)*Math.sin((i-r)/n):2-e*Ge(r)*Math.sin((i+r)/n))/2}return a.amplitude=function(r){return t(r,n*Kn)},a.period=function(r){return t(e,r)},a}(rc,sc),il={time:null,delay:0,duration:250,ease:el};function Ev(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))return il.time=ri(),il;return n}function $v(t){var e,n;t instanceof be?(e=t._id,t=t._name):(e=Id(),(n=il).time=ri(),t=t==null?null:t+"");for(var i=this._groups,a=i.length,r=0;r<a;++r)for(var s=i[r],o=s.length,l,c=0;c<o;++c)(l=s[c])&&As(l,t,e,c,s,n||Ev(l,e));return new be(i,this._parents,t,e)}Mn.prototype.interrupt=cy;Mn.prototype.transition=$v;var Yv=[null];function Nv(t,e){var n=t.__transition,i,a;if(n){e=e==null?null:e+"";for(a in n)if((i=n[a]).state>Jo&&i.name===e)return new be([[t]],Yv,e,+a)}return null}function ro(t){return function(){return t}}function zv(t,e,n){this.target=t,this.type=e,this.selection=n}function Ih(){w.stopImmediatePropagation()}function so(){w.preventDefault(),w.stopImmediatePropagation()}var Rh={name:"drag"},oo={name:"space"},Rn={name:"handle"},Pn={name:"center"};function Ph(t){return[+t[0],+t[1]]}function al(t){return[Ph(t[0]),Ph(t[1])]}function Hv(t){return function(e){return Vi(e,w.touches,t)}}var or={name:"x",handles:["w","e"].map(ta),input:function(t,e){return t==null?null:[[+t[0],e[0][1]],[+t[1],e[1][1]]]},output:function(t){return t&&[t[0][0],t[1][0]]}},lr={name:"y",handles:["n","s"].map(ta),input:function(t,e){return t==null?null:[[e[0][0],+t[0]],[e[1][0],+t[1]]]},output:function(t){return t&&[t[0][1],t[1][1]]}},Xv={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(ta),input:function(t){return t==null?null:al(t)},output:function(t){return t}},_e={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Eh={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},$h={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},Gv={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},Bv={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function ta(t){return{type:t}}function Wv(){return!w.ctrlKey&&!w.button}function Ov(){var t=this.ownerSVGElement||this;return t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]}function Fv(){return navigator.maxTouchPoints||"ontouchstart"in this}function lo(t){for(;!t.__brush;)if(!(t=t.parentNode))return;return t.__brush}function Uv(t){return t[0][0]===t[1][0]||t[0][1]===t[1][1]}function Vv(t){var e=t.__brush;return e?e.dim.output(e.selection):null}function qv(){return oc(or)}function Zv(){return oc(lr)}function Kv(){return oc(Xv)}function oc(t){var e=Ov,n=Wv,i=Fv,a=!0,r=wn("start","brush","end"),s=6,o;function l(m){var b=m.property("__brush",g).selectAll(".overlay").data([ta("overlay")]);b.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",_e.overlay).merge(b).each(function(){var y=lo(this).extent;W(this).attr("x",y[0][0]).attr("y",y[0][1]).attr("width",y[1][0]-y[0][0]).attr("height",y[1][1]-y[0][1])}),m.selectAll(".selection").data([ta("selection")]).enter().append("rect").attr("class","selection").attr("cursor",_e.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var v=m.selectAll(".handle").data(t.handles,function(y){return y.type});v.exit().remove(),v.enter().append("rect").attr("class",function(y){return"handle handle--"+y.type}).attr("cursor",function(y){return _e[y.type]}),m.each(c).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",u).filter(i).on("touchstart.brush",u).on("touchmove.brush",p).on("touchend.brush touchcancel.brush",d).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}l.move=function(m,b){m.selection?m.on("start.brush",function(){h(this,arguments).beforestart().start()}).on("interrupt.brush end.brush",function(){h(this,arguments).end()}).tween("brush",function(){var v=this,y=v.__brush,x=h(v,arguments),M=y.selection,D=t.input(typeof b=="function"?b.apply(this,arguments):b,y.extent),k=pa(M,D);function I(C){y.selection=C===1&&D===null?null:k(C),c.call(v),x.brush()}return M!==null&&D!==null?I:I(1)}):m.each(function(){var v=this,y=arguments,x=v.__brush,M=t.input(typeof b=="function"?b.apply(v,y):b,x.extent),D=h(v,y).beforestart();sn(v),x.selection=M===null?null:M,c.call(v),D.start().brush().end()})},l.clear=function(m){l.move(m,null)};function c(){var m=W(this),b=lo(this).selection;b?(m.selectAll(".selection").style("display",null).attr("x",b[0][0]).attr("y",b[0][1]).attr("width",b[1][0]-b[0][0]).attr("height",b[1][1]-b[0][1]),m.selectAll(".handle").style("display",null).attr("x",function(v){return v.type[v.type.length-1]==="e"?b[1][0]-s/2:b[0][0]-s/2}).attr("y",function(v){return v.type[0]==="s"?b[1][1]-s/2:b[0][1]-s/2}).attr("width",function(v){return v.type==="n"||v.type==="s"?b[1][0]-b[0][0]+s:s}).attr("height",function(v){return v.type==="e"||v.type==="w"?b[1][1]-b[0][1]+s:s})):m.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function h(m,b,v){var y=m.__brush.emitter;return y&&(!v||!y.clean)?y:new f(m,b,v)}function f(m,b,v){this.that=m,this.args=b,this.state=m.__brush,this.active=0,this.clean=v}f.prototype={beforestart:function(){return++this.active===1&&(this.state.emitter=this,this.starting=!0),this},start:function(){return this.starting?(this.starting=!1,this.emit("start")):this.emit("brush"),this},brush:function(){return this.emit("brush"),this},end:function(){return--this.active===0&&(delete this.state.emitter,this.emit("end")),this},emit:function(m){Ui(new zv(l,m,t.output(this.state.selection)),r.apply,r,[m,this.that,this.args])}};function u(){if(o&&!w.touches||!n.apply(this,arguments))return;var m=this,b=w.target.__data__.type,v=(a&&w.metaKey?b="overlay":b)==="selection"?Rh:a&&w.altKey?Pn:Rn,y=t===lr?null:Gv[b],x=t===or?null:Bv[b],M=lo(m),D=M.extent,k=M.selection,I=D[0][0],C,T,L=D[0][1],_,A,P=D[1][0],S,R,z=D[1][1],Y,H,O=0,F=0,rt,et=y&&x&&a&&w.shiftKey,J,ft,Ft=w.touches?Hv(w.changedTouches[0].identifier):an,Jt=Ft(m),jt=Jt,$=h(m,arguments,!0).beforestart();b==="overlay"?(k&&(rt=!0),M.selection=k=[[C=t===lr?I:Jt[0],_=t===or?L:Jt[1]],[S=t===lr?P:C,Y=t===or?z:_]]):(C=k[0][0],_=k[0][1],S=k[1][0],Y=k[1][1]),T=C,A=_,R=S,H=Y;var U=W(m).attr("pointer-events","none"),Z=U.selectAll(".overlay").attr("cursor",_e[b]);if(w.touches)$.moved=yt,$.ended=_t;else{var E=W(w.view).on("mousemove.brush",yt,!0).on("mouseup.brush",_t,!0);a&&E.on("keydown.brush",Dt,!0).on("keyup.brush",xe,!0),vs(w.view)}Ih(),sn(m),c.call(m),$.start();function yt(){var St=Ft(m);et&&!J&&!ft&&(Math.abs(St[0]-jt[0])>Math.abs(St[1]-jt[1])?ft=!0:J=!0),jt=St,rt=!0,so(),j()}function j(){var St;switch(O=jt[0]-Jt[0],F=jt[1]-Jt[1],v){case oo:case Rh:{y&&(O=Math.max(I-C,Math.min(P-S,O)),T=C+O,R=S+O),x&&(F=Math.max(L-_,Math.min(z-Y,F)),A=_+F,H=Y+F);break}case Rn:{y<0?(O=Math.max(I-C,Math.min(P-C,O)),T=C+O,R=S):y>0&&(O=Math.max(I-S,Math.min(P-S,O)),T=C,R=S+O),x<0?(F=Math.max(L-_,Math.min(z-_,F)),A=_+F,H=Y):x>0&&(F=Math.max(L-Y,Math.min(z-Y,F)),A=_,H=Y+F);break}case Pn:{y&&(T=Math.max(I,Math.min(P,C-O*y)),R=Math.max(I,Math.min(P,S+O*y))),x&&(A=Math.max(L,Math.min(z,_-F*x)),H=Math.max(L,Math.min(z,Y+F*x)));break}}R<T&&(y*=-1,St=C,C=S,S=St,St=T,T=R,R=St,b in Eh&&Z.attr("cursor",_e[b=Eh[b]])),H<A&&(x*=-1,St=_,_=Y,Y=St,St=A,A=H,H=St,b in $h&&Z.attr("cursor",_e[b=$h[b]])),M.selection&&(k=M.selection),J&&(T=k[0][0],R=k[1][0]),ft&&(A=k[0][1],H=k[1][1]),(k[0][0]!==T||k[0][1]!==A||k[1][0]!==R||k[1][1]!==H)&&(M.selection=[[T,A],[R,H]],c.call(m),$.brush())}function _t(){if(Ih(),w.touches){if(w.touches.length)return;o&&clearTimeout(o),o=setTimeout(function(){o=null},500)}else xs(w.view,rt),E.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);U.attr("pointer-events","all"),Z.attr("cursor",_e.overlay),M.selection&&(k=M.selection),Uv(k)&&(M.selection=null,c.call(m)),$.end()}function Dt(){switch(w.keyCode){case 16:{et=y&&x;break}case 18:{v===Rn&&(y&&(S=R-O*y,C=T+O*y),x&&(Y=H-F*x,_=A+F*x),v=Pn,j());break}case 32:{(v===Rn||v===Pn)&&(y<0?S=R-O:y>0&&(C=T-O),x<0?Y=H-F:x>0&&(_=A-F),v=oo,Z.attr("cursor",_e.selection),j());break}default:return}so()}function xe(){switch(w.keyCode){case 16:{et&&(J=ft=et=!1,j());break}case 18:{v===Pn&&(y<0?S=R:y>0&&(C=T),x<0?Y=H:x>0&&(_=A),v=Rn,j());break}case 32:{v===oo&&(w.altKey?(y&&(S=R-O*y,C=T+O*y),x&&(Y=H-F*x,_=A+F*x),v=Pn):(y<0?S=R:y>0&&(C=T),x<0?Y=H:x>0&&(_=A),v=Rn),Z.attr("cursor",_e[b]),j());break}default:return}so()}}function p(){h(this,arguments).moved()}function d(){h(this,arguments).ended()}function g(){var m=this.__brush||{selection:null};return m.extent=al(e.apply(this,arguments)),m.dim=t,m}return l.extent=function(m){return arguments.length?(e=typeof m=="function"?m:ro(al(m)),l):e},l.filter=function(m){return arguments.length?(n=typeof m=="function"?m:ro(!!m),l):n},l.touchable=function(m){return arguments.length?(i=typeof m=="function"?m:ro(!!m),l):i},l.handleSize=function(m){return arguments.length?(s=+m,l):s},l.keyModifiers=function(m){return arguments.length?(a=!!m,l):a},l.on=function(){var m=r.on.apply(r,arguments);return m===r?l:m},l}var Yh=Math.cos,Nh=Math.sin,Ed=Math.PI,Ca=Ed/2,zh=Ed*2,Hh=Math.max;function Qv(t){return function(e,n){return t(e.source.value+e.target.value,n.source.value+n.target.value)}}function Jv(){var t=0,e=null,n=null,i=null;function a(r){var s=r.length,o=[],l=Bt(s),c=[],h=[],f=h.groups=new Array(s),u=new Array(s*s),p,d,g,m,b,v;for(p=0,b=-1;++b<s;){for(d=0,v=-1;++v<s;)d+=r[b][v];o.push(d),c.push(Bt(s)),p+=d}for(e&&l.sort(function(T,L){return e(o[T],o[L])}),n&&c.forEach(function(T,L){T.sort(function(_,A){return n(r[L][_],r[L][A])})}),p=Hh(0,zh-t*s)/p,m=p?t:zh/s,d=0,b=-1;++b<s;){for(g=d,v=-1;++v<s;){var y=l[b],x=c[y][v],M=r[y][x],D=d,k=d+=M*p;u[x*s+y]={index:y,subindex:x,startAngle:D,endAngle:k,value:M}}f[y]={index:y,startAngle:g,endAngle:d,value:o[y]},d+=m}for(b=-1;++b<s;)for(v=b-1;++v<s;){var I=u[v*s+b],C=u[b*s+v];(I.value||C.value)&&h.push(I.value<C.value?{source:C,target:I}:{source:I,target:C})}return i?h.sort(i):h}return a.padAngle=function(r){return arguments.length?(t=Hh(0,r),a):t},a.sortGroups=function(r){return arguments.length?(e=r,a):e},a.sortSubgroups=function(r){return arguments.length?(n=r,a):n},a.sortChords=function(r){return arguments.length?(r==null?i=null:(i=Qv(r))._=r,a):i&&i._},a}var jv=Array.prototype.slice;function co(t){return function(){return t}}var rl=Math.PI,sl=2*rl,tn=1e-6,tx=sl-tn;function ol(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function qe(){return new ol}ol.prototype=qe.prototype={constructor:ol,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,n,i){this._+="Q"+ +t+","+ +e+","+(this._x1=+n)+","+(this._y1=+i)},bezierCurveTo:function(t,e,n,i,a,r){this._+="C"+ +t+","+ +e+","+ +n+","+ +i+","+(this._x1=+a)+","+(this._y1=+r)},arcTo:function(t,e,n,i,a){t=+t,e=+e,n=+n,i=+i,a=+a;var r=this._x1,s=this._y1,o=n-t,l=i-e,c=r-t,h=s-e,f=c*c+h*h;if(a<0)throw new Error("negative radius: "+a);if(this._x1===null)this._+="M"+(this._x1=t)+","+(this._y1=e);else if(f>tn)if(!(Math.abs(h*o-l*c)>tn)||!a)this._+="L"+(this._x1=t)+","+(this._y1=e);else{var u=n-r,p=i-s,d=o*o+l*l,g=u*u+p*p,m=Math.sqrt(d),b=Math.sqrt(f),v=a*Math.tan((rl-Math.acos((d+f-g)/(2*m*b)))/2),y=v/b,x=v/m;Math.abs(y-1)>tn&&(this._+="L"+(t+y*c)+","+(e+y*h)),this._+="A"+a+","+a+",0,0,"+ +(h*u>c*p)+","+(this._x1=t+x*o)+","+(this._y1=e+x*l)}},arc:function(t,e,n,i,a,r){t=+t,e=+e,n=+n,r=!!r;var s=n*Math.cos(i),o=n*Math.sin(i),l=t+s,c=e+o,h=1^r,f=r?i-a:a-i;if(n<0)throw new Error("negative radius: "+n);this._x1===null?this._+="M"+l+","+c:(Math.abs(this._x1-l)>tn||Math.abs(this._y1-c)>tn)&&(this._+="L"+l+","+c),n&&(f<0&&(f=f%sl+sl),f>tx?this._+="A"+n+","+n+",0,1,"+h+","+(t-s)+","+(e-o)+"A"+n+","+n+",0,1,"+h+","+(this._x1=l)+","+(this._y1=c):f>tn&&(this._+="A"+n+","+n+",0,"+ +(f>=rl)+","+h+","+(this._x1=t+n*Math.cos(a))+","+(this._y1=e+n*Math.sin(a))))},rect:function(t,e,n,i){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +n+"v"+ +i+"h"+-n+"Z"},toString:function(){return this._}};function ex(t){return t.source}function nx(t){return t.target}function ix(t){return t.radius}function ax(t){return t.startAngle}function rx(t){return t.endAngle}function sx(){var t=ex,e=nx,n=ix,i=ax,a=rx,r=null;function s(){var o,l=jv.call(arguments),c=t.apply(this,l),h=e.apply(this,l),f=+n.apply(this,(l[0]=c,l)),u=i.apply(this,l)-Ca,p=a.apply(this,l)-Ca,d=f*Yh(u),g=f*Nh(u),m=+n.apply(this,(l[0]=h,l)),b=i.apply(this,l)-Ca,v=a.apply(this,l)-Ca;if(r||(r=o=qe()),r.moveTo(d,g),r.arc(0,0,f,u,p),(u!==b||p!==v)&&(r.quadraticCurveTo(0,0,m*Yh(b),m*Nh(b)),r.arc(0,0,m,b,v)),r.quadraticCurveTo(0,0,d,g),r.closePath(),o)return r=null,o+""||null}return s.radius=function(o){return arguments.length?(n=typeof o=="function"?o:co(+o),s):n},s.startAngle=function(o){return arguments.length?(i=typeof o=="function"?o:co(+o),s):i},s.endAngle=function(o){return arguments.length?(a=typeof o=="function"?o:co(+o),s):a},s.source=function(o){return arguments.length?(t=o,s):t},s.target=function(o){return arguments.length?(e=o,s):e},s.context=function(o){return arguments.length?(r=o??null,s):r},s}var qt="$";function wr(){}wr.prototype=Ae.prototype={constructor:wr,has:function(t){return qt+t in this},get:function(t){return this[qt+t]},set:function(t,e){return this[qt+t]=e,this},remove:function(t){var e=qt+t;return e in this&&delete this[e]},clear:function(){for(var t in this)t[0]===qt&&delete this[t]},keys:function(){var t=[];for(var e in this)e[0]===qt&&t.push(e.slice(1));return t},values:function(){var t=[];for(var e in this)e[0]===qt&&t.push(this[e]);return t},entries:function(){var t=[];for(var e in this)e[0]===qt&&t.push({key:e.slice(1),value:this[e]});return t},size:function(){var t=0;for(var e in this)e[0]===qt&&++t;return t},empty:function(){for(var t in this)if(t[0]===qt)return!1;return!0},each:function(t){for(var e in this)e[0]===qt&&t(this[e],e.slice(1),this)}};function Ae(t,e){var n=new wr;if(t instanceof wr)t.each(function(o,l){n.set(l,o)});else if(Array.isArray(t)){var i=-1,a=t.length,r;if(e==null)for(;++i<a;)n.set(i,t[i]);else for(;++i<a;)n.set(e(r=t[i],i,t),r)}else if(t)for(var s in t)n.set(s,t[s]);return n}function ox(){var t=[],e=[],n,i,a;function r(o,l,c,h){if(l>=t.length)return n!=null&&o.sort(n),i!=null?i(o):o;for(var f=-1,u=o.length,p=t[l++],d,g,m=Ae(),b,v=c();++f<u;)(b=m.get(d=p(g=o[f])+""))?b.push(g):m.set(d,[g]);return m.each(function(y,x){h(v,x,r(y,l,c,h))}),v}function s(o,l){if(++l>t.length)return o;var c,h=e[l-1];return i!=null&&l>=t.length?c=o.entries():(c=[],o.each(function(f,u){c.push({key:u,values:s(f,l)})})),h!=null?c.sort(function(f,u){return h(f.key,u.key)}):c}return a={object:function(o){return r(o,0,lx,cx)},map:function(o){return r(o,0,Xh,Gh)},entries:function(o){return s(r(o,0,Xh,Gh),0)},key:function(o){return t.push(o),a},sortKeys:function(o){return e[t.length-1]=o,a},sortValues:function(o){return n=o,a},rollup:function(o){return i=o,a}}}function lx(){return{}}function cx(t,e,n){t[e]=n}function Xh(){return Ae()}function Gh(t,e,n){t.set(e,n)}function Mr(){}var Qe=Ae.prototype;Mr.prototype=$d.prototype={constructor:Mr,has:Qe.has,add:function(t){return t+="",this[qt+t]=t,this},remove:Qe.remove,clear:Qe.clear,values:Qe.keys,size:Qe.size,empty:Qe.empty,each:Qe.each};function $d(t,e){var n=new Mr;if(t instanceof Mr)t.each(function(r){n.add(r)});else if(t){var i=-1,a=t.length;if(e==null)for(;++i<a;)n.add(t[i]);else for(;++i<a;)n.add(e(t[i],i,t))}return n}function hx(t){var e=[];for(var n in t)e.push(n);return e}function ux(t){var e=[];for(var n in t)e.push(t[n]);return e}function fx(t){var e=[];for(var n in t)e.push({key:n,value:t[n]});return e}var dx=Array.prototype,Yd=dx.slice;function px(t,e){return t-e}function gx(t){for(var e=0,n=t.length,i=t[n-1][1]*t[0][0]-t[n-1][0]*t[0][1];++e<n;)i+=t[e-1][1]*t[e][0]-t[e-1][0]*t[e][1];return i}function Ie(t){return function(){return t}}function mx(t,e){for(var n=-1,i=e.length,a;++n<i;)if(a=bx(t,e[n]))return a;return 0}function bx(t,e){for(var n=e[0],i=e[1],a=-1,r=0,s=t.length,o=s-1;r<s;o=r++){var l=t[r],c=l[0],h=l[1],f=t[o],u=f[0],p=f[1];if(yx(l,f,e))return 0;h>i!=p>i&&n<(u-c)*(i-h)/(p-h)+c&&(a=-a)}return a}function yx(t,e,n){var i;return vx(t,e,n)&&xx(t[i=+(t[0]===e[0])],n[i],e[i])}function vx(t,e,n){return(e[0]-t[0])*(n[1]-t[1])===(n[0]-t[0])*(e[1]-t[1])}function xx(t,e,n){return t<=e&&e<=n||n<=e&&e<=t}function _x(){}var we=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function Nd(){var t=1,e=1,n=Bl,i=l;function a(c){var h=n(c);if(Array.isArray(h))h=h.slice().sort(px);else{var f=Xl(c),u=f[0],p=f[1];h=ln(u,p,h),h=Bt(Math.floor(u/h)*h,Math.floor(p/h)*h,h)}return h.map(function(d){return r(c,d)})}function r(c,h){var f=[],u=[];return s(c,h,function(p){i(p,c,h),gx(p)>0?f.push([p]):u.push(p)}),u.forEach(function(p){for(var d=0,g=f.length,m;d<g;++d)if(mx((m=f[d])[0],p)!==-1){m.push(p);return}}),{type:"MultiPolygon",value:h,coordinates:f}}function s(c,h,f){var u=new Array,p=new Array,d,g,m,b,v,y;for(d=g=-1,b=c[0]>=h,we[b<<1].forEach(x);++d<t-1;)m=b,b=c[d+1]>=h,we[m|b<<1].forEach(x);for(we[b<<0].forEach(x);++g<e-1;){for(d=-1,b=c[g*t+t]>=h,v=c[g*t]>=h,we[b<<1|v<<2].forEach(x);++d<t-1;)m=b,b=c[g*t+t+d+1]>=h,y=v,v=c[g*t+d+1]>=h,we[m|b<<1|v<<2|y<<3].forEach(x);we[b|v<<3].forEach(x)}for(d=-1,v=c[g*t]>=h,we[v<<2].forEach(x);++d<t-1;)y=v,v=c[g*t+d+1]>=h,we[v<<2|y<<3].forEach(x);we[v<<3].forEach(x);function x(M){var D=[M[0][0]+d,M[0][1]+g],k=[M[1][0]+d,M[1][1]+g],I=o(D),C=o(k),T,L;(T=p[I])?(L=u[C])?(delete p[T.end],delete u[L.start],T===L?(T.ring.push(k),f(T.ring)):u[T.start]=p[L.end]={start:T.start,end:L.end,ring:T.ring.concat(L.ring)}):(delete p[T.end],T.ring.push(k),p[T.end=C]=T):(T=u[C])?(L=p[I])?(delete u[T.start],delete p[L.end],T===L?(T.ring.push(k),f(T.ring)):u[L.start]=p[T.end]={start:L.start,end:T.end,ring:L.ring.concat(T.ring)}):(delete u[T.start],T.ring.unshift(D),u[T.start=I]=T):u[I]=p[C]={start:I,end:C,ring:[D,k]}}}function o(c){return c[0]*2+c[1]*(t+1)*4}function l(c,h,f){c.forEach(function(u){var p=u[0],d=u[1],g=p|0,m=d|0,b,v=h[m*t+g];p>0&&p<t&&g===p&&(b=h[m*t+g-1],u[0]=p+(f-b)/(v-b)-.5),d>0&&d<e&&m===d&&(b=h[(m-1)*t+g],u[1]=d+(f-b)/(v-b)-.5)})}return a.contour=r,a.size=function(c){if(!arguments.length)return[t,e];var h=Math.ceil(c[0]),f=Math.ceil(c[1]);if(!(h>0)||!(f>0))throw new Error("invalid size");return t=h,e=f,a},a.thresholds=function(c){return arguments.length?(n=typeof c=="function"?c:Array.isArray(c)?Ie(Yd.call(c)):Ie(c),a):n},a.smooth=function(c){return arguments.length?(i=c?l:_x,a):i===l},a}function ho(t,e,n){for(var i=t.width,a=t.height,r=(n<<1)+1,s=0;s<a;++s)for(var o=0,l=0;o<i+n;++o)o<i&&(l+=t.data[o+s*i]),o>=n&&(o>=r&&(l-=t.data[o-r+s*i]),e.data[o-n+s*i]=l/Math.min(o+1,i-1+r-o,r))}function uo(t,e,n){for(var i=t.width,a=t.height,r=(n<<1)+1,s=0;s<i;++s)for(var o=0,l=0;o<a+n;++o)o<a&&(l+=t.data[s+o*i]),o>=n&&(o>=r&&(l-=t.data[s+(o-r)*i]),e.data[s+(o-n)*i]=l/Math.min(o+1,a-1+r-o,r))}function wx(t){return t[0]}function Mx(t){return t[1]}function kx(){return 1}function Dx(){var t=wx,e=Mx,n=kx,i=960,a=500,r=20,s=2,o=r*3,l=i+o*2>>s,c=a+o*2>>s,h=Ie(20);function f(b){var v=new Float32Array(l*c),y=new Float32Array(l*c);b.forEach(function(D,k,I){var C=+t(D,k,I)+o>>s,T=+e(D,k,I)+o>>s,L=+n(D,k,I);C>=0&&C<l&&T>=0&&T<c&&(v[C+T*l]+=L)}),ho({width:l,height:c,data:v},{width:l,height:c,data:y},r>>s),uo({width:l,height:c,data:y},{width:l,height:c,data:v},r>>s),ho({width:l,height:c,data:v},{width:l,height:c,data:y},r>>s),uo({width:l,height:c,data:y},{width:l,height:c,data:v},r>>s),ho({width:l,height:c,data:v},{width:l,height:c,data:y},r>>s),uo({width:l,height:c,data:y},{width:l,height:c,data:v},r>>s);var x=h(v);if(!Array.isArray(x)){var M=Pf(v);x=ln(0,M,x),x=Bt(0,Math.floor(M/x)*x,x),x.shift()}return Nd().thresholds(x).size([l,c])(v).map(u)}function u(b){return b.value*=Math.pow(2,-2*s),b.coordinates.forEach(p),b}function p(b){b.forEach(d)}function d(b){b.forEach(g)}function g(b){b[0]=b[0]*Math.pow(2,s)-o,b[1]=b[1]*Math.pow(2,s)-o}function m(){return o=r*3,l=i+o*2>>s,c=a+o*2>>s,f}return f.x=function(b){return arguments.length?(t=typeof b=="function"?b:Ie(+b),f):t},f.y=function(b){return arguments.length?(e=typeof b=="function"?b:Ie(+b),f):e},f.weight=function(b){return arguments.length?(n=typeof b=="function"?b:Ie(+b),f):n},f.size=function(b){if(!arguments.length)return[i,a];var v=Math.ceil(b[0]),y=Math.ceil(b[1]);if(!(v>=0)&&!(v>=0))throw new Error("invalid size");return i=v,a=y,m()},f.cellSize=function(b){if(!arguments.length)return 1<<s;if(!((b=+b)>=1))throw new Error("invalid cell size");return s=Math.floor(Math.log(b)/Math.LN2),m()},f.thresholds=function(b){return arguments.length?(h=typeof b=="function"?b:Array.isArray(b)?Ie(Yd.call(b)):Ie(b),f):h},f.bandwidth=function(b){if(!arguments.length)return Math.sqrt(r*(r+1));if(!((b=+b)>=0))throw new Error("invalid bandwidth");return r=Math.round((Math.sqrt(4*b*b+1)-1)/2),m()},f}var Bh={},fo={},po=34,pi=10,go=13;function zd(t){return new Function("d","return {"+t.map(function(e,n){return JSON.stringify(e)+": d["+n+'] || ""'}).join(",")+"}")}function Sx(t,e){var n=zd(t);return function(i,a){return e(n(i),a,t)}}function Wh(t){var e=Object.create(null),n=[];return t.forEach(function(i){for(var a in i)a in e||n.push(e[a]=a)}),n}function Yt(t,e){var n=t+"",i=n.length;return i<e?new Array(e-i+1).join(0)+n:n}function Ax(t){return t<0?"-"+Yt(-t,6):t>9999?"+"+Yt(t,6):Yt(t,4)}function Lx(t){var e=t.getUTCHours(),n=t.getUTCMinutes(),i=t.getUTCSeconds(),a=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":Ax(t.getUTCFullYear())+"-"+Yt(t.getUTCMonth()+1,2)+"-"+Yt(t.getUTCDate(),2)+(a?"T"+Yt(e,2)+":"+Yt(n,2)+":"+Yt(i,2)+"."+Yt(a,3)+"Z":i?"T"+Yt(e,2)+":"+Yt(n,2)+":"+Yt(i,2)+"Z":n||e?"T"+Yt(e,2)+":"+Yt(n,2)+"Z":"")}function Ls(t){var e=new RegExp('["'+t+`
\r]`),n=t.charCodeAt(0);function i(f,u){var p,d,g=a(f,function(m,b){if(p)return p(m,b-1);d=m,p=u?Sx(m,u):zd(m)});return g.columns=d||[],g}function a(f,u){var p=[],d=f.length,g=0,m=0,b,v=d<=0,y=!1;f.charCodeAt(d-1)===pi&&--d,f.charCodeAt(d-1)===go&&--d;function x(){if(v)return fo;if(y)return y=!1,Bh;var D,k=g,I;if(f.charCodeAt(k)===po){for(;g++<d&&f.charCodeAt(g)!==po||f.charCodeAt(++g)===po;);return(D=g)>=d?v=!0:(I=f.charCodeAt(g++))===pi?y=!0:I===go&&(y=!0,f.charCodeAt(g)===pi&&++g),f.slice(k+1,D-1).replace(/""/g,'"')}for(;g<d;){if((I=f.charCodeAt(D=g++))===pi)y=!0;else if(I===go)y=!0,f.charCodeAt(g)===pi&&++g;else if(I!==n)continue;return f.slice(k,D)}return v=!0,f.slice(k,d)}for(;(b=x())!==fo;){for(var M=[];b!==Bh&&b!==fo;)M.push(b),b=x();u&&(M=u(M,m++))==null||p.push(M)}return p}function r(f,u){return f.map(function(p){return u.map(function(d){return h(p[d])}).join(t)})}function s(f,u){return u==null&&(u=Wh(f)),[u.map(h).join(t)].concat(r(f,u)).join(`
`)}function o(f,u){return u==null&&(u=Wh(f)),r(f,u).join(`
`)}function l(f){return f.map(c).join(`
`)}function c(f){return f.map(h).join(t)}function h(f){return f==null?"":f instanceof Date?Lx(f):e.test(f+="")?'"'+f.replace(/"/g,'""')+'"':f}return{parse:i,parseRows:a,format:s,formatBody:o,formatRows:l,formatRow:c,formatValue:h}}var kn=Ls(","),Hd=kn.parse,Cx=kn.parseRows,Tx=kn.format,Ix=kn.formatBody,Rx=kn.formatRows,Px=kn.formatRow,Ex=kn.formatValue,Dn=Ls("	"),Xd=Dn.parse,$x=Dn.parseRows,Yx=Dn.format,Nx=Dn.formatBody,zx=Dn.formatRows,Hx=Dn.formatRow,Xx=Dn.formatValue;function Gx(t){for(var e in t){var n=t[e].trim(),i,a;if(!n)n=null;else if(n==="true")n=!0;else if(n==="false")n=!1;else if(n==="NaN")n=NaN;else if(!isNaN(i=+n))n=i;else if(a=n.match(/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/))Bx&&a[4]&&!a[7]&&(n=n.replace(/-/g,"/").replace(/T/," ")),n=new Date(n);else continue;t[e]=n}return t}var Bx=new Date("2019-01-01T00:00").getHours()||new Date("2019-07-01T00:00").getHours();function Wx(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.blob()}function Ox(t,e){return fetch(t,e).then(Wx)}function Fx(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.arrayBuffer()}function Ux(t,e){return fetch(t,e).then(Fx)}function Vx(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.text()}function Cs(t,e){return fetch(t,e).then(Vx)}function Gd(t){return function(e,n,i){return arguments.length===2&&typeof n=="function"&&(i=n,n=void 0),Cs(e,n).then(function(a){return t(a,i)})}}function qx(t,e,n,i){arguments.length===3&&typeof n=="function"&&(i=n,n=void 0);var a=Ls(t);return Cs(e,n).then(function(r){return a.parse(r,i)})}var Zx=Gd(Hd),Kx=Gd(Xd);function Qx(t,e){return new Promise(function(n,i){var a=new Image;for(var r in e)a[r]=e[r];a.onerror=i,a.onload=function(){n(a)},a.src=t})}function Jx(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);if(!(t.status===204||t.status===205))return t.json()}function jx(t,e){return fetch(t,e).then(Jx)}function lc(t){return function(e,n){return Cs(e,n).then(function(i){return new DOMParser().parseFromString(i,t)})}}const t2=lc("application/xml");var e2=lc("text/html"),n2=lc("image/svg+xml");function i2(t,e){var n;t==null&&(t=0),e==null&&(e=0);function i(){var a,r=n.length,s,o=0,l=0;for(a=0;a<r;++a)s=n[a],o+=s.x,l+=s.y;for(o=o/r-t,l=l/r-e,a=0;a<r;++a)s=n[a],s.x-=o,s.y-=l}return i.initialize=function(a){n=a},i.x=function(a){return arguments.length?(t=+a,i):t},i.y=function(a){return arguments.length?(e=+a,i):e},i}function pt(t){return function(){return t}}function $e(){return(Math.random()-.5)*1e-6}function a2(t){var e=+this._x.call(null,t),n=+this._y.call(null,t);return Bd(this.cover(e,n),e,n,t)}function Bd(t,e,n,i){if(isNaN(e)||isNaN(n))return t;var a,r=t._root,s={data:i},o=t._x0,l=t._y0,c=t._x1,h=t._y1,f,u,p,d,g,m,b,v;if(!r)return t._root=s,t;for(;r.length;)if((g=e>=(f=(o+c)/2))?o=f:c=f,(m=n>=(u=(l+h)/2))?l=u:h=u,a=r,!(r=r[b=m<<1|g]))return a[b]=s,t;if(p=+t._x.call(null,r.data),d=+t._y.call(null,r.data),e===p&&n===d)return s.next=r,a?a[b]=s:t._root=s,t;do a=a?a[b]=new Array(4):t._root=new Array(4),(g=e>=(f=(o+c)/2))?o=f:c=f,(m=n>=(u=(l+h)/2))?l=u:h=u;while((b=m<<1|g)===(v=(d>=u)<<1|p>=f));return a[v]=r,a[b]=s,t}function r2(t){var e,n,i=t.length,a,r,s=new Array(i),o=new Array(i),l=1/0,c=1/0,h=-1/0,f=-1/0;for(n=0;n<i;++n)isNaN(a=+this._x.call(null,e=t[n]))||isNaN(r=+this._y.call(null,e))||(s[n]=a,o[n]=r,a<l&&(l=a),a>h&&(h=a),r<c&&(c=r),r>f&&(f=r));if(l>h||c>f)return this;for(this.cover(l,c).cover(h,f),n=0;n<i;++n)Bd(this,s[n],o[n],t[n]);return this}function s2(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,i=this._y0,a=this._x1,r=this._y1;if(isNaN(n))a=(n=Math.floor(t))+1,r=(i=Math.floor(e))+1;else{for(var s=a-n,o=this._root,l,c;n>t||t>=a||i>e||e>=r;)switch(c=(e<i)<<1|t<n,l=new Array(4),l[c]=o,o=l,s*=2,c){case 0:a=n+s,r=i+s;break;case 1:n=a-s,r=i+s;break;case 2:a=n+s,i=r-s;break;case 3:n=a-s,i=r-s;break}this._root&&this._root.length&&(this._root=o)}return this._x0=n,this._y0=i,this._x1=a,this._y1=r,this}function o2(){var t=[];return this.visit(function(e){if(!e.length)do t.push(e.data);while(e=e.next)}),t}function l2(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function Tt(t,e,n,i,a){this.node=t,this.x0=e,this.y0=n,this.x1=i,this.y1=a}function c2(t,e,n){var i,a=this._x0,r=this._y0,s,o,l,c,h=this._x1,f=this._y1,u=[],p=this._root,d,g;for(p&&u.push(new Tt(p,a,r,h,f)),n==null?n=1/0:(a=t-n,r=e-n,h=t+n,f=e+n,n*=n);d=u.pop();)if(!(!(p=d.node)||(s=d.x0)>h||(o=d.y0)>f||(l=d.x1)<a||(c=d.y1)<r))if(p.length){var m=(s+l)/2,b=(o+c)/2;u.push(new Tt(p[3],m,b,l,c),new Tt(p[2],s,b,m,c),new Tt(p[1],m,o,l,b),new Tt(p[0],s,o,m,b)),(g=(e>=b)<<1|t>=m)&&(d=u[u.length-1],u[u.length-1]=u[u.length-1-g],u[u.length-1-g]=d)}else{var v=t-+this._x.call(null,p.data),y=e-+this._y.call(null,p.data),x=v*v+y*y;if(x<n){var M=Math.sqrt(n=x);a=t-M,r=e-M,h=t+M,f=e+M,i=p.data}}return i}function h2(t){if(isNaN(h=+this._x.call(null,t))||isNaN(f=+this._y.call(null,t)))return this;var e,n=this._root,i,a,r,s=this._x0,o=this._y0,l=this._x1,c=this._y1,h,f,u,p,d,g,m,b;if(!n)return this;if(n.length)for(;;){if((d=h>=(u=(s+l)/2))?s=u:l=u,(g=f>=(p=(o+c)/2))?o=p:c=p,e=n,!(n=n[m=g<<1|d]))return this;if(!n.length)break;(e[m+1&3]||e[m+2&3]||e[m+3&3])&&(i=e,b=m)}for(;n.data!==t;)if(a=n,!(n=n.next))return this;return(r=n.next)&&delete n.next,a?(r?a.next=r:delete a.next,this):e?(r?e[m]=r:delete e[m],(n=e[0]||e[1]||e[2]||e[3])&&n===(e[3]||e[2]||e[1]||e[0])&&!n.length&&(i?i[b]=n:this._root=n),this):(this._root=r,this)}function u2(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this}function f2(){return this._root}function d2(){var t=0;return this.visit(function(e){if(!e.length)do++t;while(e=e.next)}),t}function p2(t){var e=[],n,i=this._root,a,r,s,o,l;for(i&&e.push(new Tt(i,this._x0,this._y0,this._x1,this._y1));n=e.pop();)if(!t(i=n.node,r=n.x0,s=n.y0,o=n.x1,l=n.y1)&&i.length){var c=(r+o)/2,h=(s+l)/2;(a=i[3])&&e.push(new Tt(a,c,h,o,l)),(a=i[2])&&e.push(new Tt(a,r,h,c,l)),(a=i[1])&&e.push(new Tt(a,c,s,o,h)),(a=i[0])&&e.push(new Tt(a,r,s,c,h))}return this}function g2(t){var e=[],n=[],i;for(this._root&&e.push(new Tt(this._root,this._x0,this._y0,this._x1,this._y1));i=e.pop();){var a=i.node;if(a.length){var r,s=i.x0,o=i.y0,l=i.x1,c=i.y1,h=(s+l)/2,f=(o+c)/2;(r=a[0])&&e.push(new Tt(r,s,o,h,f)),(r=a[1])&&e.push(new Tt(r,h,o,l,f)),(r=a[2])&&e.push(new Tt(r,s,f,h,c)),(r=a[3])&&e.push(new Tt(r,h,f,l,c))}n.push(i)}for(;i=n.pop();)t(i.node,i.x0,i.y0,i.x1,i.y1);return this}function m2(t){return t[0]}function b2(t){return arguments.length?(this._x=t,this):this._x}function y2(t){return t[1]}function v2(t){return arguments.length?(this._y=t,this):this._y}function Ts(t,e,n){var i=new cc(e??m2,n??y2,NaN,NaN,NaN,NaN);return t==null?i:i.addAll(t)}function cc(t,e,n,i,a,r){this._x=t,this._y=e,this._x0=n,this._y0=i,this._x1=a,this._y1=r,this._root=void 0}function Oh(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}var $t=Ts.prototype=cc.prototype;$t.copy=function(){var t=new cc(this._x,this._y,this._x0,this._y0,this._x1,this._y1),e=this._root,n,i;if(!e)return t;if(!e.length)return t._root=Oh(e),t;for(n=[{source:e,target:t._root=new Array(4)}];e=n.pop();)for(var a=0;a<4;++a)(i=e.source[a])&&(i.length?n.push({source:i,target:e.target[a]=new Array(4)}):e.target[a]=Oh(i));return t};$t.add=a2;$t.addAll=r2;$t.cover=s2;$t.data=o2;$t.extent=l2;$t.find=c2;$t.remove=h2;$t.removeAll=u2;$t.root=f2;$t.size=d2;$t.visit=p2;$t.visitAfter=g2;$t.x=b2;$t.y=v2;function x2(t){return t.x+t.vx}function _2(t){return t.y+t.vy}function Wd(t){var e,n,i=1,a=1;typeof t!="function"&&(t=pt(t==null?1:+t));function r(){for(var l,c=e.length,h,f,u,p,d,g,m=0;m<a;++m)for(h=Ts(e,x2,_2).visitAfter(s),l=0;l<c;++l)f=e[l],d=n[f.index],g=d*d,u=f.x+f.vx,p=f.y+f.vy,h.visit(b);function b(v,y,x,M,D){var k=v.data,I=v.r,C=d+I;if(k){if(k.index>f.index){var T=u-k.x-k.vx,L=p-k.y-k.vy,_=T*T+L*L;_<C*C&&(T===0&&(T=$e(),_+=T*T),L===0&&(L=$e(),_+=L*L),_=(C-(_=Math.sqrt(_)))/_*i,f.vx+=(T*=_)*(C=(I*=I)/(g+I)),f.vy+=(L*=_)*C,k.vx-=T*(C=1-C),k.vy-=L*C)}return}return y>u+C||M<u-C||x>p+C||D<p-C}}function s(l){if(l.data)return l.r=n[l.data.index];for(var c=l.r=0;c<4;++c)l[c]&&l[c].r>l.r&&(l.r=l[c].r)}function o(){if(e){var l,c=e.length,h;for(n=new Array(c),l=0;l<c;++l)h=e[l],n[h.index]=+t(h,l,e)}}return r.initialize=function(l){e=l,o()},r.iterations=function(l){return arguments.length?(a=+l,r):a},r.strength=function(l){return arguments.length?(i=+l,r):i},r.radius=function(l){return arguments.length?(t=typeof l=="function"?l:pt(+l),o(),r):t},r}function w2(t){return t.index}function Fh(t,e){var n=t.get(e);if(!n)throw new Error("missing: "+e);return n}function M2(t){var e=w2,n=h,i,a=pt(30),r,s,o,l,c=1;t==null&&(t=[]);function h(g){return 1/Math.min(o[g.source.index],o[g.target.index])}function f(g){for(var m=0,b=t.length;m<c;++m)for(var v=0,y,x,M,D,k,I,C;v<b;++v)y=t[v],x=y.source,M=y.target,D=M.x+M.vx-x.x-x.vx||$e(),k=M.y+M.vy-x.y-x.vy||$e(),I=Math.sqrt(D*D+k*k),I=(I-r[v])/I*g*i[v],D*=I,k*=I,M.vx-=D*(C=l[v]),M.vy-=k*C,x.vx+=D*(C=1-C),x.vy+=k*C}function u(){if(s){var g,m=s.length,b=t.length,v=Ae(s,e),y;for(g=0,o=new Array(m);g<b;++g)y=t[g],y.index=g,typeof y.source!="object"&&(y.source=Fh(v,y.source)),typeof y.target!="object"&&(y.target=Fh(v,y.target)),o[y.source.index]=(o[y.source.index]||0)+1,o[y.target.index]=(o[y.target.index]||0)+1;for(g=0,l=new Array(b);g<b;++g)y=t[g],l[g]=o[y.source.index]/(o[y.source.index]+o[y.target.index]);i=new Array(b),p(),r=new Array(b),d()}}function p(){if(s)for(var g=0,m=t.length;g<m;++g)i[g]=+n(t[g],g,t)}function d(){if(s)for(var g=0,m=t.length;g<m;++g)r[g]=+a(t[g],g,t)}return f.initialize=function(g){s=g,u()},f.links=function(g){return arguments.length?(t=g,u(),f):t},f.id=function(g){return arguments.length?(e=g,f):e},f.iterations=function(g){return arguments.length?(c=+g,f):c},f.strength=function(g){return arguments.length?(n=typeof g=="function"?g:pt(+g),p(),f):n},f.distance=function(g){return arguments.length?(a=typeof g=="function"?g:pt(+g),d(),f):a},f}function k2(t){return t.x}function D2(t){return t.y}var S2=10,A2=Math.PI*(3-Math.sqrt(5));function Od(t){var e,n=1,i=.001,a=1-Math.pow(i,1/300),r=0,s=.6,o=Ae(),l=Ss(h),c=wn("tick","end");t==null&&(t=[]);function h(){f(),c.call("tick",e),n<i&&(l.stop(),c.call("end",e))}function f(d){var g,m=t.length,b;d===void 0&&(d=1);for(var v=0;v<d;++v)for(n+=(r-n)*a,o.each(function(y){y(n)}),g=0;g<m;++g)b=t[g],b.fx==null?b.x+=b.vx*=s:(b.x=b.fx,b.vx=0),b.fy==null?b.y+=b.vy*=s:(b.y=b.fy,b.vy=0);return e}function u(){for(var d=0,g=t.length,m;d<g;++d){if(m=t[d],m.index=d,m.fx!=null&&(m.x=m.fx),m.fy!=null&&(m.y=m.fy),isNaN(m.x)||isNaN(m.y)){var b=S2*Math.sqrt(d),v=d*A2;m.x=b*Math.cos(v),m.y=b*Math.sin(v)}(isNaN(m.vx)||isNaN(m.vy))&&(m.vx=m.vy=0)}}function p(d){return d.initialize&&d.initialize(t),d}return u(),e={tick:f,restart:function(){return l.restart(h),e},stop:function(){return l.stop(),e},nodes:function(d){return arguments.length?(t=d,u(),o.each(p),e):t},alpha:function(d){return arguments.length?(n=+d,e):n},alphaMin:function(d){return arguments.length?(i=+d,e):i},alphaDecay:function(d){return arguments.length?(a=+d,e):+a},alphaTarget:function(d){return arguments.length?(r=+d,e):r},velocityDecay:function(d){return arguments.length?(s=1-d,e):1-s},force:function(d,g){return arguments.length>1?(g==null?o.remove(d):o.set(d,p(g)),e):o.get(d)},find:function(d,g,m){var b=0,v=t.length,y,x,M,D,k;for(m==null?m=1/0:m*=m,b=0;b<v;++b)D=t[b],y=d-D.x,x=g-D.y,M=y*y+x*x,M<m&&(k=D,m=M);return k},on:function(d,g){return arguments.length>1?(c.on(d,g),e):c.on(d)}}}function Fd(){var t,e,n,i=pt(-30),a,r=1,s=1/0,o=.81;function l(u){var p,d=t.length,g=Ts(t,k2,D2).visitAfter(h);for(n=u,p=0;p<d;++p)e=t[p],g.visit(f)}function c(){if(t){var u,p=t.length,d;for(a=new Array(p),u=0;u<p;++u)d=t[u],a[d.index]=+i(d,u,t)}}function h(u){var p=0,d,g,m=0,b,v,y;if(u.length){for(b=v=y=0;y<4;++y)(d=u[y])&&(g=Math.abs(d.value))&&(p+=d.value,m+=g,b+=g*d.x,v+=g*d.y);u.x=b/m,u.y=v/m}else{d=u,d.x=d.data.x,d.y=d.data.y;do p+=a[d.data.index];while(d=d.next)}u.value=p}function f(u,p,d,g){if(!u.value)return!0;var m=u.x-e.x,b=u.y-e.y,v=g-p,y=m*m+b*b;if(v*v/o<y)return y<s&&(m===0&&(m=$e(),y+=m*m),b===0&&(b=$e(),y+=b*b),y<r&&(y=Math.sqrt(r*y)),e.vx+=m*u.value*n/y,e.vy+=b*u.value*n/y),!0;if(u.length||y>=s)return;(u.data!==e||u.next)&&(m===0&&(m=$e(),y+=m*m),b===0&&(b=$e(),y+=b*b),y<r&&(y=Math.sqrt(r*y)));do u.data!==e&&(v=a[u.data.index]*n/y,e.vx+=m*v,e.vy+=b*v);while(u=u.next)}return l.initialize=function(u){t=u,c()},l.strength=function(u){return arguments.length?(i=typeof u=="function"?u:pt(+u),c(),l):i},l.distanceMin=function(u){return arguments.length?(r=u*u,l):Math.sqrt(r)},l.distanceMax=function(u){return arguments.length?(s=u*u,l):Math.sqrt(s)},l.theta=function(u){return arguments.length?(o=u*u,l):Math.sqrt(o)},l}function L2(t,e,n){var i,a=pt(.1),r,s;typeof t!="function"&&(t=pt(+t)),e==null&&(e=0),n==null&&(n=0);function o(c){for(var h=0,f=i.length;h<f;++h){var u=i[h],p=u.x-e||1e-6,d=u.y-n||1e-6,g=Math.sqrt(p*p+d*d),m=(s[h]-g)*r[h]*c/g;u.vx+=p*m,u.vy+=d*m}}function l(){if(i){var c,h=i.length;for(r=new Array(h),s=new Array(h),c=0;c<h;++c)s[c]=+t(i[c],c,i),r[c]=isNaN(s[c])?0:+a(i[c],c,i)}}return o.initialize=function(c){i=c,l()},o.strength=function(c){return arguments.length?(a=typeof c=="function"?c:pt(+c),l(),o):a},o.radius=function(c){return arguments.length?(t=typeof c=="function"?c:pt(+c),l(),o):t},o.x=function(c){return arguments.length?(e=+c,o):e},o.y=function(c){return arguments.length?(n=+c,o):n},o}function cr(t){var e=pt(.1),n,i,a;typeof t!="function"&&(t=pt(t==null?0:+t));function r(o){for(var l=0,c=n.length,h;l<c;++l)h=n[l],h.vx+=(a[l]-h.x)*i[l]*o}function s(){if(n){var o,l=n.length;for(i=new Array(l),a=new Array(l),o=0;o<l;++o)i[o]=isNaN(a[o]=+t(n[o],o,n))?0:+e(n[o],o,n)}}return r.initialize=function(o){n=o,s()},r.strength=function(o){return arguments.length?(e=typeof o=="function"?o:pt(+o),s(),r):e},r.x=function(o){return arguments.length?(t=typeof o=="function"?o:pt(+o),s(),r):t},r}function hr(t){var e=pt(.1),n,i,a;typeof t!="function"&&(t=pt(t==null?0:+t));function r(o){for(var l=0,c=n.length,h;l<c;++l)h=n[l],h.vy+=(a[l]-h.y)*i[l]*o}function s(){if(n){var o,l=n.length;for(i=new Array(l),a=new Array(l),o=0;o<l;++o)i[o]=isNaN(a[o]=+t(n[o],o,n))?0:+e(n[o],o,n)}}return r.initialize=function(o){n=o,s()},r.strength=function(o){return arguments.length?(e=typeof o=="function"?o:pt(+o),s(),r):e},r.y=function(o){return arguments.length?(t=typeof o=="function"?o:pt(+o),s(),r):t},r}function C2(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function kr(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,i=t.slice(0,n);return[i.length>1?i[0]+i.slice(2):i,+t.slice(n+1)]}function Qn(t){return t=kr(Math.abs(t)),t?t[1]:NaN}function T2(t,e){return function(n,i){for(var a=n.length,r=[],s=0,o=t[0],l=0;a>0&&o>0&&(l+o+1>i&&(o=Math.max(1,i-l)),r.push(n.substring(a-=o,a+o)),!((l+=o+1)>i));)o=t[s=(s+1)%t.length];return r.reverse().join(e)}}function I2(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var R2=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function ea(t){if(!(e=R2.exec(t)))throw new Error("invalid format: "+t);var e;return new Is({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}ea.prototype=Is.prototype;function Is(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}Is.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function P2(t){t:for(var e=t.length,n=1,i=-1,a;n<e;++n)switch(t[n]){case".":i=a=n;break;case"0":i===0&&(i=n),a=n;break;default:if(!+t[n])break t;i>0&&(i=0);break}return i>0?t.slice(0,i)+t.slice(a+1):t}var Ud;function E2(t,e){var n=kr(t,e);if(!n)return t+"";var i=n[0],a=n[1],r=a-(Ud=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,s=i.length;return r===s?i:r>s?i+new Array(r-s+1).join("0"):r>0?i.slice(0,r)+"."+i.slice(r):"0."+new Array(1-r).join("0")+kr(t,Math.max(0,e+r-1))[0]}function Uh(t,e){var n=kr(t,e);if(!n)return t+"";var i=n[0],a=n[1];return a<0?"0."+new Array(-a).join("0")+i:i.length>a+1?i.slice(0,a+1)+"."+i.slice(a+1):i+new Array(a-i.length+2).join("0")}const Vh={"%":function(t,e){return(t*100).toFixed(e)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:C2,e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},g:function(t,e){return t.toPrecision(e)},o:function(t){return Math.round(t).toString(8)},p:function(t,e){return Uh(t*100,e)},r:Uh,s:E2,X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}};function qh(t){return t}var Zh=Array.prototype.map,Kh=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function Vd(t){var e=t.grouping===void 0||t.thousands===void 0?qh:T2(Zh.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",i=t.currency===void 0?"":t.currency[1]+"",a=t.decimal===void 0?".":t.decimal+"",r=t.numerals===void 0?qh:I2(Zh.call(t.numerals,String)),s=t.percent===void 0?"%":t.percent+"",o=t.minus===void 0?"-":t.minus+"",l=t.nan===void 0?"NaN":t.nan+"";function c(f){f=ea(f);var u=f.fill,p=f.align,d=f.sign,g=f.symbol,m=f.zero,b=f.width,v=f.comma,y=f.precision,x=f.trim,M=f.type;M==="n"?(v=!0,M="g"):Vh[M]||(y===void 0&&(y=12),x=!0,M="g"),(m||u==="0"&&p==="=")&&(m=!0,u="0",p="=");var D=g==="$"?n:g==="#"&&/[boxX]/.test(M)?"0"+M.toLowerCase():"",k=g==="$"?i:/[%p]/.test(M)?s:"",I=Vh[M],C=/[defgprs%]/.test(M);y=y===void 0?6:/[gprs]/.test(M)?Math.max(1,Math.min(21,y)):Math.max(0,Math.min(20,y));function T(L){var _=D,A=k,P,S,R;if(M==="c")A=I(L)+A,L="";else{L=+L;var z=L<0||1/L<0;if(L=isNaN(L)?l:I(Math.abs(L),y),x&&(L=P2(L)),z&&+L==0&&d!=="+"&&(z=!1),_=(z?d==="("?d:o:d==="-"||d==="("?"":d)+_,A=(M==="s"?Kh[8+Ud/3]:"")+A+(z&&d==="("?")":""),C){for(P=-1,S=L.length;++P<S;)if(R=L.charCodeAt(P),48>R||R>57){A=(R===46?a+L.slice(P+1):L.slice(P))+A,L=L.slice(0,P);break}}}v&&!m&&(L=e(L,1/0));var Y=_.length+L.length+A.length,H=Y<b?new Array(b-Y+1).join(u):"";switch(v&&m&&(L=e(H+L,H.length?b-A.length:1/0),H=""),p){case"<":L=_+L+A+H;break;case"=":L=_+H+L+A;break;case"^":L=H.slice(0,Y=H.length>>1)+_+L+A+H.slice(Y);break;default:L=H+_+L+A;break}return r(L)}return T.toString=function(){return f+""},T}function h(f,u){var p=c((f=ea(f),f.type="f",f)),d=Math.max(-8,Math.min(8,Math.floor(Qn(u)/3)))*3,g=Math.pow(10,-d),m=Kh[8+d/3];return function(b){return p(g*b)+m}}return{format:c,formatPrefix:h}}var Ta,ga,hc;qd({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"});function qd(t){return Ta=Vd(t),ga=Ta.format,hc=Ta.formatPrefix,Ta}function Zd(t){return Math.max(0,-Qn(Math.abs(t)))}function Kd(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Qn(e)/3)))*3-Qn(Math.abs(t)))}function Qd(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Qn(e)-Qn(t))+1}function Ze(){return new Dr}function Dr(){this.reset()}Dr.prototype={constructor:Dr,reset:function(){this.s=this.t=0},add:function(t){Qh(Ia,t,this.t),Qh(this,Ia.s,this.s),this.s?this.t+=Ia.t:this.s=Ia.t},valueOf:function(){return this.s}};var Ia=new Dr;function Qh(t,e,n){var i=t.s=e+n,a=i-e,r=i-a;t.t=e-r+(n-a)}var G=1e-6,Sr=1e-12,q=Math.PI,ht=q/2,Ar=q/4,Rt=q*2,it=180/q,B=q/180,Q=Math.abs,si=Math.atan,Pt=Math.atan2,X=Math.cos,Ra=Math.ceil,Jd=Math.exp,Lr=Math.log,mo=Math.pow,N=Math.sin,Qt=Math.sign||function(t){return t>0?1:t<0?-1:0},dt=Math.sqrt,uc=Math.tan;function jd(t){return t>1?0:t<-1?q:Math.acos(t)}function Et(t){return t>1?ht:t<-1?-ht:Math.asin(t)}function Jh(t){return(t=N(t/2))*t}function lt(){}function Cr(t,e){t&&tu.hasOwnProperty(t.type)&&tu[t.type](t,e)}var jh={Feature:function(t,e){Cr(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,i=-1,a=n.length;++i<a;)Cr(n[i].geometry,e)}},tu={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,i=-1,a=n.length;++i<a;)t=n[i],e.point(t[0],t[1],t[2])},LineString:function(t,e){ll(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,i=-1,a=n.length;++i<a;)ll(n[i],e,0)},Polygon:function(t,e){eu(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,i=-1,a=n.length;++i<a;)eu(n[i],e)},GeometryCollection:function(t,e){for(var n=t.geometries,i=-1,a=n.length;++i<a;)Cr(n[i],e)}};function ll(t,e,n){var i=-1,a=t.length-n,r;for(e.lineStart();++i<a;)r=t[i],e.point(r[0],r[1],r[2]);e.lineEnd()}function eu(t,e){var n=-1,i=t.length;for(e.polygonStart();++n<i;)ll(t[n],e,1);e.polygonEnd()}function ee(t,e){t&&jh.hasOwnProperty(t.type)?jh[t.type](t,e):Cr(t,e)}var Tr=Ze(),Ir=Ze(),t0,e0,cl,hl,ul,ye={point:lt,lineStart:lt,lineEnd:lt,polygonStart:function(){Tr.reset(),ye.lineStart=$2,ye.lineEnd=Y2},polygonEnd:function(){var t=+Tr;Ir.add(t<0?Rt+t:t),this.lineStart=this.lineEnd=this.point=lt},sphere:function(){Ir.add(Rt)}};function $2(){ye.point=N2}function Y2(){n0(t0,e0)}function N2(t,e){ye.point=n0,t0=t,e0=e,t*=B,e*=B,cl=t,hl=X(e=e/2+Ar),ul=N(e)}function n0(t,e){t*=B,e*=B,e=e/2+Ar;var n=t-cl,i=n>=0?1:-1,a=i*n,r=X(e),s=N(e),o=ul*s,l=hl*r+o*X(a),c=o*i*N(a);Tr.add(Pt(c,l)),cl=t,hl=r,ul=s}function z2(t){return Ir.reset(),ee(t,ye),Ir*2}function Rr(t){return[Pt(t[1],t[0]),Et(t[2])]}function dn(t){var e=t[0],n=t[1],i=X(n);return[i*X(e),i*N(e),N(n)]}function Pa(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Jn(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function bo(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function Ea(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function Pr(t){var e=dt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}var ot,Nt,ct,Xt,en,i0,a0,On,Xi=Ze(),Re,Le,Me={point:fl,lineStart:nu,lineEnd:iu,polygonStart:function(){Me.point=s0,Me.lineStart=H2,Me.lineEnd=X2,Xi.reset(),ye.polygonStart()},polygonEnd:function(){ye.polygonEnd(),Me.point=fl,Me.lineStart=nu,Me.lineEnd=iu,Tr<0?(ot=-(ct=180),Nt=-(Xt=90)):Xi>G?Xt=90:Xi<-G&&(Nt=-90),Le[0]=ot,Le[1]=ct},sphere:function(){ot=-(ct=180),Nt=-(Xt=90)}};function fl(t,e){Re.push(Le=[ot=t,ct=t]),e<Nt&&(Nt=e),e>Xt&&(Xt=e)}function r0(t,e){var n=dn([t*B,e*B]);if(On){var i=Jn(On,n),a=[i[1],-i[0],0],r=Jn(a,i);Pr(r),r=Rr(r);var s=t-en,o=s>0?1:-1,l=r[0]*it*o,c,h=Q(s)>180;h^(o*en<l&&l<o*t)?(c=r[1]*it,c>Xt&&(Xt=c)):(l=(l+360)%360-180,h^(o*en<l&&l<o*t)?(c=-r[1]*it,c<Nt&&(Nt=c)):(e<Nt&&(Nt=e),e>Xt&&(Xt=e))),h?t<en?Ht(ot,t)>Ht(ot,ct)&&(ct=t):Ht(t,ct)>Ht(ot,ct)&&(ot=t):ct>=ot?(t<ot&&(ot=t),t>ct&&(ct=t)):t>en?Ht(ot,t)>Ht(ot,ct)&&(ct=t):Ht(t,ct)>Ht(ot,ct)&&(ot=t)}else Re.push(Le=[ot=t,ct=t]);e<Nt&&(Nt=e),e>Xt&&(Xt=e),On=n,en=t}function nu(){Me.point=r0}function iu(){Le[0]=ot,Le[1]=ct,Me.point=fl,On=null}function s0(t,e){if(On){var n=t-en;Xi.add(Q(n)>180?n+(n>0?360:-360):n)}else i0=t,a0=e;ye.point(t,e),r0(t,e)}function H2(){ye.lineStart()}function X2(){s0(i0,a0),ye.lineEnd(),Q(Xi)>G&&(ot=-(ct=180)),Le[0]=ot,Le[1]=ct,On=null}function Ht(t,e){return(e-=t)<0?e+360:e}function G2(t,e){return t[0]-e[0]}function au(t,e){return t[0]<=t[1]?t[0]<=e&&e<=t[1]:e<t[0]||t[1]<e}function B2(t){var e,n,i,a,r,s,o;if(Xt=ct=-(ot=Nt=1/0),Re=[],ee(t,Me),n=Re.length){for(Re.sort(G2),e=1,i=Re[0],r=[i];e<n;++e)a=Re[e],au(i,a[0])||au(i,a[1])?(Ht(i[0],a[1])>Ht(i[0],i[1])&&(i[1]=a[1]),Ht(a[0],i[1])>Ht(i[0],i[1])&&(i[0]=a[0])):r.push(i=a);for(s=-1/0,n=r.length-1,e=0,i=r[n];e<=n;i=a,++e)a=r[e],(o=Ht(i[1],a[0]))>s&&(s=o,ot=a[0],ct=i[1])}return Re=Le=null,ot===1/0||Nt===1/0?[[NaN,NaN],[NaN,NaN]]:[[ot,Nt],[ct,Xt]]}var Si,Er,$r,Yr,Nr,zr,Hr,Xr,dl,pl,gl,o0,l0,At,Lt,Ct,ie={sphere:lt,point:fc,lineStart:ru,lineEnd:su,polygonStart:function(){ie.lineStart=F2,ie.lineEnd=U2},polygonEnd:function(){ie.lineStart=ru,ie.lineEnd=su}};function fc(t,e){t*=B,e*=B;var n=X(e);ma(n*X(t),n*N(t),N(e))}function ma(t,e,n){++Si,$r+=(t-$r)/Si,Yr+=(e-Yr)/Si,Nr+=(n-Nr)/Si}function ru(){ie.point=W2}function W2(t,e){t*=B,e*=B;var n=X(e);At=n*X(t),Lt=n*N(t),Ct=N(e),ie.point=O2,ma(At,Lt,Ct)}function O2(t,e){t*=B,e*=B;var n=X(e),i=n*X(t),a=n*N(t),r=N(e),s=Pt(dt((s=Lt*r-Ct*a)*s+(s=Ct*i-At*r)*s+(s=At*a-Lt*i)*s),At*i+Lt*a+Ct*r);Er+=s,zr+=s*(At+(At=i)),Hr+=s*(Lt+(Lt=a)),Xr+=s*(Ct+(Ct=r)),ma(At,Lt,Ct)}function su(){ie.point=fc}function F2(){ie.point=V2}function U2(){c0(o0,l0),ie.point=fc}function V2(t,e){o0=t,l0=e,t*=B,e*=B,ie.point=c0;var n=X(e);At=n*X(t),Lt=n*N(t),Ct=N(e),ma(At,Lt,Ct)}function c0(t,e){t*=B,e*=B;var n=X(e),i=n*X(t),a=n*N(t),r=N(e),s=Lt*r-Ct*a,o=Ct*i-At*r,l=At*a-Lt*i,c=dt(s*s+o*o+l*l),h=Et(c),f=c&&-h/c;dl+=f*s,pl+=f*o,gl+=f*l,Er+=h,zr+=h*(At+(At=i)),Hr+=h*(Lt+(Lt=a)),Xr+=h*(Ct+(Ct=r)),ma(At,Lt,Ct)}function q2(t){Si=Er=$r=Yr=Nr=zr=Hr=Xr=dl=pl=gl=0,ee(t,ie);var e=dl,n=pl,i=gl,a=e*e+n*n+i*i;return a<Sr&&(e=zr,n=Hr,i=Xr,Er<G&&(e=$r,n=Yr,i=Nr),a=e*e+n*n+i*i,a<Sr)?[NaN,NaN]:[Pt(n,e)*it,Et(i/dt(a))*it]}function En(t){return function(){return t}}function ml(t,e){function n(i,a){return i=t(i,a),e(i[0],i[1])}return t.invert&&e.invert&&(n.invert=function(i,a){return i=e.invert(i,a),i&&t.invert(i[0],i[1])}),n}function bl(t,e){return[Q(t)>q?t+Math.round(-t/Rt)*Rt:t,e]}bl.invert=bl;function dc(t,e,n){return(t%=Rt)?e||n?ml(lu(t),cu(e,n)):lu(t):e||n?cu(e,n):bl}function ou(t){return function(e,n){return e+=t,[e>q?e-Rt:e<-q?e+Rt:e,n]}}function lu(t){var e=ou(t);return e.invert=ou(-t),e}function cu(t,e){var n=X(t),i=N(t),a=X(e),r=N(e);function s(o,l){var c=X(l),h=X(o)*c,f=N(o)*c,u=N(l),p=u*n+h*i;return[Pt(f*a-p*r,h*n-u*i),Et(p*a+f*r)]}return s.invert=function(o,l){var c=X(l),h=X(o)*c,f=N(o)*c,u=N(l),p=u*a-f*r;return[Pt(f*a+u*r,h*n+p*i),Et(p*n-h*i)]},s}function h0(t){t=dc(t[0]*B,t[1]*B,t.length>2?t[2]*B:0);function e(n){return n=t(n[0]*B,n[1]*B),n[0]*=it,n[1]*=it,n}return e.invert=function(n){return n=t.invert(n[0]*B,n[1]*B),n[0]*=it,n[1]*=it,n},e}function u0(t,e,n,i,a,r){if(n){var s=X(e),o=N(e),l=i*n;a==null?(a=e+i*Rt,r=e-l/2):(a=hu(s,a),r=hu(s,r),(i>0?a<r:a>r)&&(a+=i*Rt));for(var c,h=a;i>0?h>r:h<r;h-=l)c=Rr([s,-o*X(h),-o*N(h)]),t.point(c[0],c[1])}}function hu(t,e){e=dn(e),e[0]-=t,Pr(e);var n=jd(-e[1]);return((-e[2]<0?-n:n)+Rt-G)%Rt}function Z2(){var t=En([0,0]),e=En(90),n=En(6),i,a,r={point:s};function s(l,c){i.push(l=a(l,c)),l[0]*=it,l[1]*=it}function o(){var l=t.apply(this,arguments),c=e.apply(this,arguments)*B,h=n.apply(this,arguments)*B;return i=[],a=dc(-l[0]*B,-l[1]*B,0).invert,u0(r,c,h,1),l={type:"Polygon",coordinates:[i]},i=a=null,l}return o.center=function(l){return arguments.length?(t=typeof l=="function"?l:En([+l[0],+l[1]]),o):t},o.radius=function(l){return arguments.length?(e=typeof l=="function"?l:En(+l),o):e},o.precision=function(l){return arguments.length?(n=typeof l=="function"?l:En(+l),o):n},o}function f0(){var t=[],e;return{point:function(n,i,a){e.push([n,i,a])},lineStart:function(){t.push(e=[])},lineEnd:lt,rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))},result:function(){var n=t;return t=[],e=null,n}}}function ur(t,e){return Q(t[0]-e[0])<G&&Q(t[1]-e[1])<G}function $a(t,e,n,i){this.x=t,this.z=e,this.o=n,this.e=i,this.v=!1,this.n=this.p=null}function d0(t,e,n,i,a){var r=[],s=[],o,l;if(t.forEach(function(d){if(!((g=d.length-1)<=0)){var g,m=d[0],b=d[g],v;if(ur(m,b)){if(!m[2]&&!b[2]){for(a.lineStart(),o=0;o<g;++o)a.point((m=d[o])[0],m[1]);a.lineEnd();return}b[0]+=2*G}r.push(v=new $a(m,d,null,!0)),s.push(v.o=new $a(m,null,v,!1)),r.push(v=new $a(b,d,null,!1)),s.push(v.o=new $a(b,null,v,!0))}}),!!r.length){for(s.sort(e),uu(r),uu(s),o=0,l=s.length;o<l;++o)s[o].e=n=!n;for(var c=r[0],h,f;;){for(var u=c,p=!0;u.v;)if((u=u.n)===c)return;h=u.z,a.lineStart();do{if(u.v=u.o.v=!0,u.e){if(p)for(o=0,l=h.length;o<l;++o)a.point((f=h[o])[0],f[1]);else i(u.x,u.n.x,1,a);u=u.n}else{if(p)for(h=u.p.z,o=h.length-1;o>=0;--o)a.point((f=h[o])[0],f[1]);else i(u.x,u.p.x,-1,a);u=u.p}u=u.o,h=u.z,p=!p}while(!u.v);a.lineEnd()}}}function uu(t){if(e=t.length){for(var e,n=0,i=t[0],a;++n<e;)i.n=a=t[n],a.p=i,i=a;i.n=a=t[0],a.p=i}}var yo=Ze();function vo(t){return Q(t[0])<=q?t[0]:Qt(t[0])*((Q(t[0])+q)%Rt-q)}function p0(t,e){var n=vo(e),i=e[1],a=N(i),r=[N(n),-X(n),0],s=0,o=0;yo.reset(),a===1?i=ht+G:a===-1&&(i=-ht-G);for(var l=0,c=t.length;l<c;++l)if(f=(h=t[l]).length)for(var h,f,u=h[f-1],p=vo(u),d=u[1]/2+Ar,g=N(d),m=X(d),b=0;b<f;++b,p=y,g=M,m=D,u=v){var v=h[b],y=vo(v),x=v[1]/2+Ar,M=N(x),D=X(x),k=y-p,I=k>=0?1:-1,C=I*k,T=C>q,L=g*M;if(yo.add(Pt(L*I*N(C),m*D+L*X(C))),s+=T?k+I*Rt:k,T^p>=n^y>=n){var _=Jn(dn(u),dn(v));Pr(_);var A=Jn(r,_);Pr(A);var P=(T^k>=0?-1:1)*Et(A[2]);(i>P||i===P&&(_[0]||_[1]))&&(o+=T^k>=0?1:-1)}}return(s<-G||s<G&&yo<-G)^o&1}function g0(t,e,n,i){return function(a){var r=e(a),s=f0(),o=e(s),l=!1,c,h,f,u={point:p,lineStart:g,lineEnd:m,polygonStart:function(){u.point=b,u.lineStart=v,u.lineEnd=y,h=[],c=[]},polygonEnd:function(){u.point=p,u.lineStart=g,u.lineEnd=m,h=Wl(h);var x=p0(c,i);h.length?(l||(a.polygonStart(),l=!0),d0(h,Q2,x,n,a)):x&&(l||(a.polygonStart(),l=!0),a.lineStart(),n(null,null,1,a),a.lineEnd()),l&&(a.polygonEnd(),l=!1),h=c=null},sphere:function(){a.polygonStart(),a.lineStart(),n(null,null,1,a),a.lineEnd(),a.polygonEnd()}};function p(x,M){t(x,M)&&a.point(x,M)}function d(x,M){r.point(x,M)}function g(){u.point=d,r.lineStart()}function m(){u.point=p,r.lineEnd()}function b(x,M){f.push([x,M]),o.point(x,M)}function v(){o.lineStart(),f=[]}function y(){b(f[0][0],f[0][1]),o.lineEnd();var x=o.clean(),M=s.result(),D,k=M.length,I,C,T;if(f.pop(),c.push(f),f=null,!!k){if(x&1){if(C=M[0],(I=C.length-1)>0){for(l||(a.polygonStart(),l=!0),a.lineStart(),D=0;D<I;++D)a.point((T=C[D])[0],T[1]);a.lineEnd()}return}k>1&&x&2&&M.push(M.pop().concat(M.shift())),h.push(M.filter(K2))}}return u}}function K2(t){return t.length>1}function Q2(t,e){return((t=t.x)[0]<0?t[1]-ht-G:ht-t[1])-((e=e.x)[0]<0?e[1]-ht-G:ht-e[1])}const yl=g0(function(){return!0},J2,t_,[-q,-ht]);function J2(t){var e=NaN,n=NaN,i=NaN,a;return{lineStart:function(){t.lineStart(),a=1},point:function(r,s){var o=r>0?q:-q,l=Q(r-e);Q(l-q)<G?(t.point(e,n=(n+s)/2>0?ht:-ht),t.point(i,n),t.lineEnd(),t.lineStart(),t.point(o,n),t.point(r,n),a=0):i!==o&&l>=q&&(Q(e-i)<G&&(e-=i*G),Q(r-o)<G&&(r-=o*G),n=j2(e,n,r,s),t.point(i,n),t.lineEnd(),t.lineStart(),t.point(o,n),a=0),t.point(e=r,n=s),i=o},lineEnd:function(){t.lineEnd(),e=n=NaN},clean:function(){return 2-a}}}function j2(t,e,n,i){var a,r,s=N(t-n);return Q(s)>G?si((N(e)*(r=X(i))*N(n)-N(i)*(a=X(e))*N(t))/(a*r*s)):(e+i)/2}function t_(t,e,n,i){var a;if(t==null)a=n*ht,i.point(-q,a),i.point(0,a),i.point(q,a),i.point(q,0),i.point(q,-a),i.point(0,-a),i.point(-q,-a),i.point(-q,0),i.point(-q,a);else if(Q(t[0]-e[0])>G){var r=t[0]<e[0]?q:-q;a=n*r/2,i.point(-r,a),i.point(0,a),i.point(r,a)}else i.point(e[0],e[1])}function m0(t){var e=X(t),n=6*B,i=e>0,a=Q(e)>G;function r(h,f,u,p){u0(p,t,n,u,h,f)}function s(h,f){return X(h)*X(f)>e}function o(h){var f,u,p,d,g;return{lineStart:function(){d=p=!1,g=1},point:function(m,b){var v=[m,b],y,x=s(m,b),M=i?x?0:c(m,b):x?c(m+(m<0?q:-q),b):0;if(!f&&(d=p=x)&&h.lineStart(),x!==p&&(y=l(f,v),(!y||ur(f,y)||ur(v,y))&&(v[2]=1)),x!==p)g=0,x?(h.lineStart(),y=l(v,f),h.point(y[0],y[1])):(y=l(f,v),h.point(y[0],y[1],2),h.lineEnd()),f=y;else if(a&&f&&i^x){var D;!(M&u)&&(D=l(v,f,!0))&&(g=0,i?(h.lineStart(),h.point(D[0][0],D[0][1]),h.point(D[1][0],D[1][1]),h.lineEnd()):(h.point(D[1][0],D[1][1]),h.lineEnd(),h.lineStart(),h.point(D[0][0],D[0][1],3)))}x&&(!f||!ur(f,v))&&h.point(v[0],v[1]),f=v,p=x,u=M},lineEnd:function(){p&&h.lineEnd(),f=null},clean:function(){return g|(d&&p)<<1}}}function l(h,f,u){var p=dn(h),d=dn(f),g=[1,0,0],m=Jn(p,d),b=Pa(m,m),v=m[0],y=b-v*v;if(!y)return!u&&h;var x=e*b/y,M=-e*v/y,D=Jn(g,m),k=Ea(g,x),I=Ea(m,M);bo(k,I);var C=D,T=Pa(k,C),L=Pa(C,C),_=T*T-L*(Pa(k,k)-1);if(!(_<0)){var A=dt(_),P=Ea(C,(-T-A)/L);if(bo(P,k),P=Rr(P),!u)return P;var S=h[0],R=f[0],z=h[1],Y=f[1],H;R<S&&(H=S,S=R,R=H);var O=R-S,F=Q(O-q)<G,rt=F||O<G;if(!F&&Y<z&&(H=z,z=Y,Y=H),rt?F?z+Y>0^P[1]<(Q(P[0]-S)<G?z:Y):z<=P[1]&&P[1]<=Y:O>q^(S<=P[0]&&P[0]<=R)){var et=Ea(C,(-T+A)/L);return bo(et,k),[P,Rr(et)]}}}function c(h,f){var u=i?t:q-t,p=0;return h<-u?p|=1:h>u&&(p|=2),f<-u?p|=4:f>u&&(p|=8),p}return g0(s,o,r,i?[0,-t]:[-q,t-q])}function e_(t,e,n,i,a,r){var s=t[0],o=t[1],l=e[0],c=e[1],h=0,f=1,u=l-s,p=c-o,d;if(d=n-s,!(!u&&d>0)){if(d/=u,u<0){if(d<h)return;d<f&&(f=d)}else if(u>0){if(d>f)return;d>h&&(h=d)}if(d=a-s,!(!u&&d<0)){if(d/=u,u<0){if(d>f)return;d>h&&(h=d)}else if(u>0){if(d<h)return;d<f&&(f=d)}if(d=i-o,!(!p&&d>0)){if(d/=p,p<0){if(d<h)return;d<f&&(f=d)}else if(p>0){if(d>f)return;d>h&&(h=d)}if(d=r-o,!(!p&&d<0)){if(d/=p,p<0){if(d>f)return;d>h&&(h=d)}else if(p>0){if(d<h)return;d<f&&(f=d)}return h>0&&(t[0]=s+h*u,t[1]=o+h*p),f<1&&(e[0]=s+f*u,e[1]=o+f*p),!0}}}}}var Ai=1e9,Ya=-Ai;function Rs(t,e,n,i){function a(c,h){return t<=c&&c<=n&&e<=h&&h<=i}function r(c,h,f,u){var p=0,d=0;if(c==null||(p=s(c,f))!==(d=s(h,f))||l(c,h)<0^f>0)do u.point(p===0||p===3?t:n,p>1?i:e);while((p=(p+f+4)%4)!==d);else u.point(h[0],h[1])}function s(c,h){return Q(c[0]-t)<G?h>0?0:3:Q(c[0]-n)<G?h>0?2:1:Q(c[1]-e)<G?h>0?1:0:h>0?3:2}function o(c,h){return l(c.x,h.x)}function l(c,h){var f=s(c,1),u=s(h,1);return f!==u?f-u:f===0?h[1]-c[1]:f===1?c[0]-h[0]:f===2?c[1]-h[1]:h[0]-c[0]}return function(c){var h=c,f=f0(),u,p,d,g,m,b,v,y,x,M,D,k={point:I,lineStart:_,lineEnd:A,polygonStart:T,polygonEnd:L};function I(S,R){a(S,R)&&h.point(S,R)}function C(){for(var S=0,R=0,z=p.length;R<z;++R)for(var Y=p[R],H=1,O=Y.length,F=Y[0],rt,et,J=F[0],ft=F[1];H<O;++H)rt=J,et=ft,F=Y[H],J=F[0],ft=F[1],et<=i?ft>i&&(J-rt)*(i-et)>(ft-et)*(t-rt)&&++S:ft<=i&&(J-rt)*(i-et)<(ft-et)*(t-rt)&&--S;return S}function T(){h=f,u=[],p=[],D=!0}function L(){var S=C(),R=D&&S,z=(u=Wl(u)).length;(R||z)&&(c.polygonStart(),R&&(c.lineStart(),r(null,null,1,c),c.lineEnd()),z&&d0(u,o,S,r,c),c.polygonEnd()),h=c,u=p=d=null}function _(){k.point=P,p&&p.push(d=[]),M=!0,x=!1,v=y=NaN}function A(){u&&(P(g,m),b&&x&&f.rejoin(),u.push(f.result())),k.point=I,x&&h.lineEnd()}function P(S,R){var z=a(S,R);if(p&&d.push([S,R]),M)g=S,m=R,b=z,M=!1,z&&(h.lineStart(),h.point(S,R));else if(z&&x)h.point(S,R);else{var Y=[v=Math.max(Ya,Math.min(Ai,v)),y=Math.max(Ya,Math.min(Ai,y))],H=[S=Math.max(Ya,Math.min(Ai,S)),R=Math.max(Ya,Math.min(Ai,R))];e_(Y,H,t,e,n,i)?(x||(h.lineStart(),h.point(Y[0],Y[1])),h.point(H[0],H[1]),z||h.lineEnd(),D=!1):z&&(h.lineStart(),h.point(S,R),D=!1)}v=S,y=R,x=z}return k}}function n_(){var t=0,e=0,n=960,i=500,a,r,s;return s={stream:function(o){return a&&r===o?a:a=Rs(t,e,n,i)(r=o)},extent:function(o){return arguments.length?(t=+o[0][0],e=+o[0][1],n=+o[1][0],i=+o[1][1],a=r=null,s):[[t,e],[n,i]]}}}var vl=Ze(),xl,fr,dr,jn={sphere:lt,point:lt,lineStart:i_,lineEnd:lt,polygonStart:lt,polygonEnd:lt};function i_(){jn.point=r_,jn.lineEnd=a_}function a_(){jn.point=jn.lineEnd=lt}function r_(t,e){t*=B,e*=B,xl=t,fr=N(e),dr=X(e),jn.point=s_}function s_(t,e){t*=B,e*=B;var n=N(e),i=X(e),a=Q(t-xl),r=X(a),s=N(a),o=i*s,l=dr*n-fr*i*r,c=fr*n+dr*i*r;vl.add(Pt(dt(o*o+l*l),c)),xl=t,fr=n,dr=i}function b0(t){return vl.reset(),ee(t,jn),+vl}var _l=[null,null],o_={type:"LineString",coordinates:_l};function Gr(t,e){return _l[0]=t,_l[1]=e,b0(o_)}var fu={Feature:function(t,e){return Br(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,i=-1,a=n.length;++i<a;)if(Br(n[i].geometry,e))return!0;return!1}},du={Sphere:function(){return!0},Point:function(t,e){return pu(t.coordinates,e)},MultiPoint:function(t,e){for(var n=t.coordinates,i=-1,a=n.length;++i<a;)if(pu(n[i],e))return!0;return!1},LineString:function(t,e){return gu(t.coordinates,e)},MultiLineString:function(t,e){for(var n=t.coordinates,i=-1,a=n.length;++i<a;)if(gu(n[i],e))return!0;return!1},Polygon:function(t,e){return mu(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,i=-1,a=n.length;++i<a;)if(mu(n[i],e))return!0;return!1},GeometryCollection:function(t,e){for(var n=t.geometries,i=-1,a=n.length;++i<a;)if(Br(n[i],e))return!0;return!1}};function Br(t,e){return t&&du.hasOwnProperty(t.type)?du[t.type](t,e):!1}function pu(t,e){return Gr(t,e)===0}function gu(t,e){for(var n,i,a,r=0,s=t.length;r<s;r++){if(i=Gr(t[r],e),i===0||r>0&&(a=Gr(t[r],t[r-1]),a>0&&n<=a&&i<=a&&(n+i-a)*(1-Math.pow((n-i)/a,2))<Sr*a))return!0;n=i}return!1}function mu(t,e){return!!p0(t.map(l_),y0(e))}function l_(t){return t=t.map(y0),t.pop(),t}function y0(t){return[t[0]*B,t[1]*B]}function c_(t,e){return(t&&fu.hasOwnProperty(t.type)?fu[t.type]:Br)(t,e)}function bu(t,e,n){var i=Bt(t,e-G,n).concat(e);return function(a){return i.map(function(r){return[a,r]})}}function yu(t,e,n){var i=Bt(t,e-G,n).concat(e);return function(a){return i.map(function(r){return[r,a]})}}function v0(){var t,e,n,i,a,r,s,o,l=10,c=l,h=90,f=360,u,p,d,g,m=2.5;function b(){return{type:"MultiLineString",coordinates:v()}}function v(){return Bt(Ra(i/h)*h,n,h).map(d).concat(Bt(Ra(o/f)*f,s,f).map(g)).concat(Bt(Ra(e/l)*l,t,l).filter(function(y){return Q(y%h)>G}).map(u)).concat(Bt(Ra(r/c)*c,a,c).filter(function(y){return Q(y%f)>G}).map(p))}return b.lines=function(){return v().map(function(y){return{type:"LineString",coordinates:y}})},b.outline=function(){return{type:"Polygon",coordinates:[d(i).concat(g(s).slice(1),d(n).reverse().slice(1),g(o).reverse().slice(1))]}},b.extent=function(y){return arguments.length?b.extentMajor(y).extentMinor(y):b.extentMinor()},b.extentMajor=function(y){return arguments.length?(i=+y[0][0],n=+y[1][0],o=+y[0][1],s=+y[1][1],i>n&&(y=i,i=n,n=y),o>s&&(y=o,o=s,s=y),b.precision(m)):[[i,o],[n,s]]},b.extentMinor=function(y){return arguments.length?(e=+y[0][0],t=+y[1][0],r=+y[0][1],a=+y[1][1],e>t&&(y=e,e=t,t=y),r>a&&(y=r,r=a,a=y),b.precision(m)):[[e,r],[t,a]]},b.step=function(y){return arguments.length?b.stepMajor(y).stepMinor(y):b.stepMinor()},b.stepMajor=function(y){return arguments.length?(h=+y[0],f=+y[1],b):[h,f]},b.stepMinor=function(y){return arguments.length?(l=+y[0],c=+y[1],b):[l,c]},b.precision=function(y){return arguments.length?(m=+y,u=bu(r,a,90),p=yu(e,t,m),d=bu(o,s,90),g=yu(i,n,m),b):m},b.extentMajor([[-180,-90+G],[180,90-G]]).extentMinor([[-180,-80-G],[180,80+G]])}function h_(){return v0()()}function u_(t,e){var n=t[0]*B,i=t[1]*B,a=e[0]*B,r=e[1]*B,s=X(i),o=N(i),l=X(r),c=N(r),h=s*X(n),f=s*N(n),u=l*X(a),p=l*N(a),d=2*Et(dt(Jh(r-i)+s*l*Jh(a-n))),g=N(d),m=d?function(b){var v=N(b*=d)/g,y=N(d-b)/g,x=y*h+v*u,M=y*f+v*p,D=y*o+v*c;return[Pt(M,x)*it,Pt(D,dt(x*x+M*M))*it]}:function(){return[n*it,i*it]};return m.distance=d,m}function na(t){return t}var xo=Ze(),wl=Ze(),x0,_0,Ml,kl,Pe={point:lt,lineStart:lt,lineEnd:lt,polygonStart:function(){Pe.lineStart=f_,Pe.lineEnd=p_},polygonEnd:function(){Pe.lineStart=Pe.lineEnd=Pe.point=lt,xo.add(Q(wl)),wl.reset()},result:function(){var t=xo/2;return xo.reset(),t}};function f_(){Pe.point=d_}function d_(t,e){Pe.point=w0,x0=Ml=t,_0=kl=e}function w0(t,e){wl.add(kl*t-Ml*e),Ml=t,kl=e}function p_(){w0(x0,_0)}const vu=Pe;var ti=1/0,Wr=ti,ia=-ti,Or=ia,g_={point:m_,lineStart:lt,lineEnd:lt,polygonStart:lt,polygonEnd:lt,result:function(){var t=[[ti,Wr],[ia,Or]];return ia=Or=-(Wr=ti=1/0),t}};function m_(t,e){t<ti&&(ti=t),t>ia&&(ia=t),e<Wr&&(Wr=e),e>Or&&(Or=e)}const Fr=g_;var Dl=0,Sl=0,Li=0,Ur=0,Vr=0,zn=0,Al=0,Ll=0,Ci=0,M0,k0,de,pe,ne={point:pn,lineStart:xu,lineEnd:_u,polygonStart:function(){ne.lineStart=v_,ne.lineEnd=x_},polygonEnd:function(){ne.point=pn,ne.lineStart=xu,ne.lineEnd=_u},result:function(){var t=Ci?[Al/Ci,Ll/Ci]:zn?[Ur/zn,Vr/zn]:Li?[Dl/Li,Sl/Li]:[NaN,NaN];return Dl=Sl=Li=Ur=Vr=zn=Al=Ll=Ci=0,t}};function pn(t,e){Dl+=t,Sl+=e,++Li}function xu(){ne.point=b_}function b_(t,e){ne.point=y_,pn(de=t,pe=e)}function y_(t,e){var n=t-de,i=e-pe,a=dt(n*n+i*i);Ur+=a*(de+t)/2,Vr+=a*(pe+e)/2,zn+=a,pn(de=t,pe=e)}function _u(){ne.point=pn}function v_(){ne.point=__}function x_(){D0(M0,k0)}function __(t,e){ne.point=D0,pn(M0=de=t,k0=pe=e)}function D0(t,e){var n=t-de,i=e-pe,a=dt(n*n+i*i);Ur+=a*(de+t)/2,Vr+=a*(pe+e)/2,zn+=a,a=pe*t-de*e,Al+=a*(de+t),Ll+=a*(pe+e),Ci+=a*3,pn(de=t,pe=e)}const wu=ne;function S0(t){this._context=t}S0.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(t,e){switch(this._point){case 0:{this._context.moveTo(t,e),this._point=1;break}case 1:{this._context.lineTo(t,e);break}default:{this._context.moveTo(t+this._radius,e),this._context.arc(t,e,this._radius,0,Rt);break}}},result:lt};var Cl=Ze(),_o,A0,L0,Ti,Ii,qr={point:lt,lineStart:function(){qr.point=w_},lineEnd:function(){_o&&C0(A0,L0),qr.point=lt},polygonStart:function(){_o=!0},polygonEnd:function(){_o=null},result:function(){var t=+Cl;return Cl.reset(),t}};function w_(t,e){qr.point=C0,A0=Ti=t,L0=Ii=e}function C0(t,e){Ti-=t,Ii-=e,Cl.add(dt(Ti*Ti+Ii*Ii)),Ti=t,Ii=e}const Mu=qr;function T0(){this._string=[]}T0.prototype={_radius:4.5,_circle:ku(4.5),pointRadius:function(t){return(t=+t)!==this._radius&&(this._radius=t,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._string.push("Z"),this._point=NaN},point:function(t,e){switch(this._point){case 0:{this._string.push("M",t,",",e),this._point=1;break}case 1:{this._string.push("L",t,",",e);break}default:{this._circle==null&&(this._circle=ku(this._radius)),this._string.push("M",t,",",e,this._circle);break}}},result:function(){if(this._string.length){var t=this._string.join("");return this._string=[],t}else return null}};function ku(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}function M_(t,e){var n=4.5,i,a;function r(s){return s&&(typeof n=="function"&&a.pointRadius(+n.apply(this,arguments)),ee(s,i(a))),a.result()}return r.area=function(s){return ee(s,i(vu)),vu.result()},r.measure=function(s){return ee(s,i(Mu)),Mu.result()},r.bounds=function(s){return ee(s,i(Fr)),Fr.result()},r.centroid=function(s){return ee(s,i(wu)),wu.result()},r.projection=function(s){return arguments.length?(i=s==null?(t=null,na):(t=s).stream,r):t},r.context=function(s){return arguments.length?(a=s==null?(e=null,new T0):new S0(e=s),typeof n!="function"&&a.pointRadius(n),r):e},r.pointRadius=function(s){return arguments.length?(n=typeof s=="function"?s:(a.pointRadius(+s),+s),r):n},r.projection(t).context(e)}function k_(t){return{stream:ba(t)}}function ba(t){return function(e){var n=new Tl;for(var i in t)n[i]=t[i];return n.stream=e,n}}function Tl(){}Tl.prototype={constructor:Tl,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function pc(t,e,n){var i=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),i!=null&&t.clipExtent(null),ee(n,t.stream(Fr)),e(Fr.result()),i!=null&&t.clipExtent(i),t}function Ps(t,e,n){return pc(t,function(i){var a=e[1][0]-e[0][0],r=e[1][1]-e[0][1],s=Math.min(a/(i[1][0]-i[0][0]),r/(i[1][1]-i[0][1])),o=+e[0][0]+(a-s*(i[1][0]+i[0][0]))/2,l=+e[0][1]+(r-s*(i[1][1]+i[0][1]))/2;t.scale(150*s).translate([o,l])},n)}function gc(t,e,n){return Ps(t,[[0,0],e],n)}function mc(t,e,n){return pc(t,function(i){var a=+e,r=a/(i[1][0]-i[0][0]),s=(a-r*(i[1][0]+i[0][0]))/2,o=-r*i[0][1];t.scale(150*r).translate([s,o])},n)}function bc(t,e,n){return pc(t,function(i){var a=+e,r=a/(i[1][1]-i[0][1]),s=-r*i[0][0],o=(a-r*(i[1][1]+i[0][1]))/2;t.scale(150*r).translate([s,o])},n)}var Du=16,D_=X(30*B);function Su(t,e){return+e?A_(t,e):S_(t)}function S_(t){return ba({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}function A_(t,e){function n(i,a,r,s,o,l,c,h,f,u,p,d,g,m){var b=c-i,v=h-a,y=b*b+v*v;if(y>4*e&&g--){var x=s+u,M=o+p,D=l+d,k=dt(x*x+M*M+D*D),I=Et(D/=k),C=Q(Q(D)-1)<G||Q(r-f)<G?(r+f)/2:Pt(M,x),T=t(C,I),L=T[0],_=T[1],A=L-i,P=_-a,S=v*A-b*P;(S*S/y>e||Q((b*A+v*P)/y-.5)>.3||s*u+o*p+l*d<D_)&&(n(i,a,r,s,o,l,L,_,C,x/=k,M/=k,D,g,m),m.point(L,_),n(L,_,C,x,M,D,c,h,f,u,p,d,g,m))}}return function(i){var a,r,s,o,l,c,h,f,u,p,d,g,m={point:b,lineStart:v,lineEnd:x,polygonStart:function(){i.polygonStart(),m.lineStart=M},polygonEnd:function(){i.polygonEnd(),m.lineStart=v}};function b(I,C){I=t(I,C),i.point(I[0],I[1])}function v(){f=NaN,m.point=y,i.lineStart()}function y(I,C){var T=dn([I,C]),L=t(I,C);n(f,u,h,p,d,g,f=L[0],u=L[1],h=I,p=T[0],d=T[1],g=T[2],Du,i),i.point(f,u)}function x(){m.point=b,i.lineEnd()}function M(){v(),m.point=D,m.lineEnd=k}function D(I,C){y(a=I,C),r=f,s=u,o=p,l=d,c=g,m.point=y}function k(){n(f,u,h,p,d,g,r,s,a,o,l,c,Du,i),m.lineEnd=x,x()}return m}}var L_=ba({point:function(t,e){this.stream.point(t*B,e*B)}});function C_(t){return ba({point:function(e,n){var i=t(e,n);return this.stream.point(i[0],i[1])}})}function T_(t,e,n,i,a){function r(s,o){return s*=i,o*=a,[e+t*s,n-t*o]}return r.invert=function(s,o){return[(s-e)/t*i,(n-o)/t*a]},r}function Au(t,e,n,i,a,r){var s=X(r),o=N(r),l=s*t,c=o*t,h=s/t,f=o/t,u=(o*n-s*e)/t,p=(o*e+s*n)/t;function d(g,m){return g*=i,m*=a,[l*g-c*m+e,n-c*g-l*m]}return d.invert=function(g,m){return[i*(h*g-f*m+u),a*(p-f*g-h*m)]},d}function ve(t){return yc(function(){return t})()}function yc(t){var e,n=150,i=480,a=250,r=0,s=0,o=0,l=0,c=0,h,f=0,u=1,p=1,d=null,g=yl,m=null,b,v,y,x=na,M=.5,D,k,I,C,T;function L(S){return I(S[0]*B,S[1]*B)}function _(S){return S=I.invert(S[0],S[1]),S&&[S[0]*it,S[1]*it]}L.stream=function(S){return C&&T===S?C:C=L_(C_(h)(g(D(x(T=S)))))},L.preclip=function(S){return arguments.length?(g=S,d=void 0,P()):g},L.postclip=function(S){return arguments.length?(x=S,m=b=v=y=null,P()):x},L.clipAngle=function(S){return arguments.length?(g=+S?m0(d=S*B):(d=null,yl),P()):d*it},L.clipExtent=function(S){return arguments.length?(x=S==null?(m=b=v=y=null,na):Rs(m=+S[0][0],b=+S[0][1],v=+S[1][0],y=+S[1][1]),P()):m==null?null:[[m,b],[v,y]]},L.scale=function(S){return arguments.length?(n=+S,A()):n},L.translate=function(S){return arguments.length?(i=+S[0],a=+S[1],A()):[i,a]},L.center=function(S){return arguments.length?(r=S[0]%360*B,s=S[1]%360*B,A()):[r*it,s*it]},L.rotate=function(S){return arguments.length?(o=S[0]%360*B,l=S[1]%360*B,c=S.length>2?S[2]%360*B:0,A()):[o*it,l*it,c*it]},L.angle=function(S){return arguments.length?(f=S%360*B,A()):f*it},L.reflectX=function(S){return arguments.length?(u=S?-1:1,A()):u<0},L.reflectY=function(S){return arguments.length?(p=S?-1:1,A()):p<0},L.precision=function(S){return arguments.length?(D=Su(k,M=S*S),P()):dt(M)},L.fitExtent=function(S,R){return Ps(L,S,R)},L.fitSize=function(S,R){return gc(L,S,R)},L.fitWidth=function(S,R){return mc(L,S,R)},L.fitHeight=function(S,R){return bc(L,S,R)};function A(){var S=Au(n,0,0,u,p,f).apply(null,e(r,s)),R=(f?Au:T_)(n,i-S[0],a-S[1],u,p,f);return h=dc(o,l,c),k=ml(e,R),I=ml(h,k),D=Su(k,M),P()}function P(){return C=T=null,L}return function(){return e=t.apply(this,arguments),L.invert=e.invert&&_,A()}}function vc(t){var e=0,n=q/3,i=yc(t),a=i(e,n);return a.parallels=function(r){return arguments.length?i(e=r[0]*B,n=r[1]*B):[e*it,n*it]},a}function I_(t){var e=X(t);function n(i,a){return[i*e,N(a)/e]}return n.invert=function(i,a){return[i/e,Et(a*e)]},n}function I0(t,e){var n=N(t),i=(n+N(e))/2;if(Q(i)<G)return I_(t);var a=1+n*(2*i-n),r=dt(a)/i;function s(o,l){var c=dt(a-2*i*N(l))/i;return[c*N(o*=i),r-c*X(o)]}return s.invert=function(o,l){var c=r-l,h=Pt(o,Q(c))*Qt(c);return c*i<0&&(h-=q*Qt(o)*Qt(c)),[h/i,Et((a-(o*o+c*c)*i*i)/(2*i))]},s}function Zr(){return vc(I0).scale(155.424).center([0,33.6442])}function R0(){return Zr().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function R_(t){var e=t.length;return{point:function(n,i){for(var a=-1;++a<e;)t[a].point(n,i)},sphere:function(){for(var n=-1;++n<e;)t[n].sphere()},lineStart:function(){for(var n=-1;++n<e;)t[n].lineStart()},lineEnd:function(){for(var n=-1;++n<e;)t[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<e;)t[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<e;)t[n].polygonEnd()}}}function P_(){var t,e,n=R0(),i,a=Zr().rotate([154,0]).center([-2,58.5]).parallels([55,65]),r,s=Zr().rotate([157,0]).center([-3,19.9]).parallels([8,18]),o,l,c={point:function(u,p){l=[u,p]}};function h(u){var p=u[0],d=u[1];return l=null,i.point(p,d),l||(r.point(p,d),l)||(o.point(p,d),l)}h.invert=function(u){var p=n.scale(),d=n.translate(),g=(u[0]-d[0])/p,m=(u[1]-d[1])/p;return(m>=.12&&m<.234&&g>=-.425&&g<-.214?a:m>=.166&&m<.234&&g>=-.214&&g<-.115?s:n).invert(u)},h.stream=function(u){return t&&e===u?t:t=R_([n.stream(e=u),a.stream(u),s.stream(u)])},h.precision=function(u){return arguments.length?(n.precision(u),a.precision(u),s.precision(u),f()):n.precision()},h.scale=function(u){return arguments.length?(n.scale(u),a.scale(u*.35),s.scale(u),h.translate(n.translate())):n.scale()},h.translate=function(u){if(!arguments.length)return n.translate();var p=n.scale(),d=+u[0],g=+u[1];return i=n.translate(u).clipExtent([[d-.455*p,g-.238*p],[d+.455*p,g+.238*p]]).stream(c),r=a.translate([d-.307*p,g+.201*p]).clipExtent([[d-.425*p+G,g+.12*p+G],[d-.214*p-G,g+.234*p-G]]).stream(c),o=s.translate([d-.205*p,g+.212*p]).clipExtent([[d-.214*p+G,g+.166*p+G],[d-.115*p-G,g+.234*p-G]]).stream(c),f()},h.fitExtent=function(u,p){return Ps(h,u,p)},h.fitSize=function(u,p){return gc(h,u,p)},h.fitWidth=function(u,p){return mc(h,u,p)},h.fitHeight=function(u,p){return bc(h,u,p)};function f(){return t=e=null,h}return h.scale(1070)}function P0(t){return function(e,n){var i=X(e),a=X(n),r=t(i*a);return[r*a*N(e),r*N(n)]}}function ya(t){return function(e,n){var i=dt(e*e+n*n),a=t(i),r=N(a),s=X(a);return[Pt(e*r,i*s),Et(i&&n*r/i)]}}var xc=P0(function(t){return dt(2/(1+t))});xc.invert=ya(function(t){return 2*Et(t/2)});function E_(){return ve(xc).scale(124.75).clipAngle(180-.001)}var _c=P0(function(t){return(t=jd(t))&&t/N(t)});_c.invert=ya(function(t){return t});function $_(){return ve(_c).scale(79.4188).clipAngle(180-.001)}function va(t,e){return[t,Lr(uc((ht+e)/2))]}va.invert=function(t,e){return[t,2*si(Jd(e))-ht]};function Y_(){return E0(va).scale(961/Rt)}function E0(t){var e=ve(t),n=e.center,i=e.scale,a=e.translate,r=e.clipExtent,s=null,o,l,c;e.scale=function(f){return arguments.length?(i(f),h()):i()},e.translate=function(f){return arguments.length?(a(f),h()):a()},e.center=function(f){return arguments.length?(n(f),h()):n()},e.clipExtent=function(f){return arguments.length?(f==null?s=o=l=c=null:(s=+f[0][0],o=+f[0][1],l=+f[1][0],c=+f[1][1]),h()):s==null?null:[[s,o],[l,c]]};function h(){var f=q*i(),u=e(h0(e.rotate()).invert([0,0]));return r(s==null?[[u[0]-f,u[1]-f],[u[0]+f,u[1]+f]]:t===va?[[Math.max(u[0]-f,s),o],[Math.min(u[0]+f,l),c]]:[[s,Math.max(u[1]-f,o)],[l,Math.min(u[1]+f,c)]])}return h()}function Na(t){return uc((ht+t)/2)}function $0(t,e){var n=X(t),i=t===e?N(t):Lr(n/X(e))/Lr(Na(e)/Na(t)),a=n*mo(Na(t),i)/i;if(!i)return va;function r(s,o){a>0?o<-ht+G&&(o=-ht+G):o>ht-G&&(o=ht-G);var l=a/mo(Na(o),i);return[l*N(i*s),a-l*X(i*s)]}return r.invert=function(s,o){var l=a-o,c=Qt(i)*dt(s*s+l*l),h=Pt(s,Q(l))*Qt(l);return l*i<0&&(h-=q*Qt(s)*Qt(l)),[h/i,2*si(mo(a/c,1/i))-ht]},r}function N_(){return vc($0).scale(109.5).parallels([30,30])}function aa(t,e){return[t,e]}aa.invert=aa;function z_(){return ve(aa).scale(152.63)}function Y0(t,e){var n=X(t),i=t===e?N(t):(n-X(e))/(e-t),a=n/i+t;if(Q(i)<G)return aa;function r(s,o){var l=a-o,c=i*s;return[l*N(c),a-l*X(c)]}return r.invert=function(s,o){var l=a-o,c=Pt(s,Q(l))*Qt(l);return l*i<0&&(c-=q*Qt(s)*Qt(l)),[c/i,a-Qt(i)*dt(s*s+l*l)]},r}function H_(){return vc(Y0).scale(131.154).center([0,13.9389])}var Gi=1.340264,Bi=-.081106,Wi=893e-6,Oi=.003796,Kr=dt(3)/2,X_=12;function wc(t,e){var n=Et(Kr*N(e)),i=n*n,a=i*i*i;return[t*X(n)/(Kr*(Gi+3*Bi*i+a*(7*Wi+9*Oi*i))),n*(Gi+Bi*i+a*(Wi+Oi*i))]}wc.invert=function(t,e){for(var n=e,i=n*n,a=i*i*i,r=0,s,o,l;r<X_&&(o=n*(Gi+Bi*i+a*(Wi+Oi*i))-e,l=Gi+3*Bi*i+a*(7*Wi+9*Oi*i),n-=s=o/l,i=n*n,a=i*i*i,!(Q(s)<Sr));++r);return[Kr*t*(Gi+3*Bi*i+a*(7*Wi+9*Oi*i))/X(n),Et(N(n)/Kr)]};function G_(){return ve(wc).scale(177.158)}function Mc(t,e){var n=X(e),i=X(t)*n;return[n*N(t)/i,N(e)/i]}Mc.invert=ya(si);function B_(){return ve(Mc).scale(144.049).clipAngle(60)}function W_(){var t=1,e=0,n=0,i=1,a=1,r=0,s,o,l=null,c,h,f,u=1,p=1,d=ba({point:function(x,M){var D=y([x,M]);this.stream.point(D[0],D[1])}}),g=na,m,b;function v(){return u=t*i,p=t*a,m=b=null,y}function y(x){var M=x[0]*u,D=x[1]*p;if(r){var k=D*s-M*o;M=M*s+D*o,D=k}return[M+e,D+n]}return y.invert=function(x){var M=x[0]-e,D=x[1]-n;if(r){var k=D*s+M*o;M=M*s-D*o,D=k}return[M/u,D/p]},y.stream=function(x){return m&&b===x?m:m=d(g(b=x))},y.postclip=function(x){return arguments.length?(g=x,l=c=h=f=null,v()):g},y.clipExtent=function(x){return arguments.length?(g=x==null?(l=c=h=f=null,na):Rs(l=+x[0][0],c=+x[0][1],h=+x[1][0],f=+x[1][1]),v()):l==null?null:[[l,c],[h,f]]},y.scale=function(x){return arguments.length?(t=+x,v()):t},y.translate=function(x){return arguments.length?(e=+x[0],n=+x[1],v()):[e,n]},y.angle=function(x){return arguments.length?(r=x%360*B,o=N(r),s=X(r),v()):r*it},y.reflectX=function(x){return arguments.length?(i=x?-1:1,v()):i<0},y.reflectY=function(x){return arguments.length?(a=x?-1:1,v()):a<0},y.fitExtent=function(x,M){return Ps(y,x,M)},y.fitSize=function(x,M){return gc(y,x,M)},y.fitWidth=function(x,M){return mc(y,x,M)},y.fitHeight=function(x,M){return bc(y,x,M)},y}function kc(t,e){var n=e*e,i=n*n;return[t*(.8707-.131979*n+i*(-.013791+i*(.003971*n-.001529*i))),e*(1.007226+n*(.015085+i*(-.044475+.028874*n-.005916*i)))]}kc.invert=function(t,e){var n=e,i=25,a;do{var r=n*n,s=r*r;n-=a=(n*(1.007226+r*(.015085+s*(-.044475+.028874*r-.005916*s)))-e)/(1.007226+r*(.015085*3+s*(-.044475*7+.028874*9*r-.005916*11*s)))}while(Q(a)>G&&--i>0);return[t/(.8707+(r=n*n)*(-.131979+r*(-.013791+r*r*r*(.003971-.001529*r)))),n]};function O_(){return ve(kc).scale(175.295)}function Dc(t,e){return[X(e)*N(t),N(e)]}Dc.invert=ya(Et);function F_(){return ve(Dc).scale(249.5).clipAngle(90+G)}function Sc(t,e){var n=X(e),i=1+X(t)*n;return[n*N(t)/i,N(e)/i]}Sc.invert=ya(function(t){return 2*si(t)});function U_(){return ve(Sc).scale(250).clipAngle(142)}function Ac(t,e){return[Lr(uc((ht+e)/2)),-t]}Ac.invert=function(t,e){return[-e,2*si(Jd(t))-ht]};function V_(){var t=E0(Ac),e=t.center,n=t.rotate;return t.center=function(i){return arguments.length?e([-i[1],i[0]]):(i=e(),[i[1],-i[0]])},t.rotate=function(i){return arguments.length?n([i[0],i[1],i.length>2?i[2]+90:90]):(i=n(),[i[0],i[1],i[2]-90])},n([0,0,90]).scale(159.155)}function q_(t,e){return t.parent===e.parent?1:2}function Z_(t){return t.reduce(K_,0)/t.length}function K_(t,e){return t+e.x}function Q_(t){return 1+t.reduce(J_,0)}function J_(t,e){return Math.max(t,e.y)}function j_(t){for(var e;e=t.children;)t=e[0];return t}function tw(t){for(var e;e=t.children;)t=e[e.length-1];return t}function ew(){var t=q_,e=1,n=1,i=!1;function a(r){var s,o=0;r.eachAfter(function(u){var p=u.children;p?(u.x=Z_(p),u.y=Q_(p)):(u.x=s?o+=t(u,s):0,u.y=0,s=u)});var l=j_(r),c=tw(r),h=l.x-t(l,c)/2,f=c.x+t(c,l)/2;return r.eachAfter(i?function(u){u.x=(u.x-r.x)*e,u.y=(r.y-u.y)*n}:function(u){u.x=(u.x-h)/(f-h)*e,u.y=(1-(r.y?u.y/r.y:1))*n})}return a.separation=function(r){return arguments.length?(t=r,a):t},a.size=function(r){return arguments.length?(i=!1,e=+r[0],n=+r[1],a):i?null:[e,n]},a.nodeSize=function(r){return arguments.length?(i=!0,e=+r[0],n=+r[1],a):i?[e,n]:null},a}function nw(t){var e=0,n=t.children,i=n&&n.length;if(!i)e=1;else for(;--i>=0;)e+=n[i].value;t.value=e}function iw(){return this.eachAfter(nw)}function aw(t){var e=this,n,i=[e],a,r,s;do for(n=i.reverse(),i=[];e=n.pop();)if(t(e),a=e.children,a)for(r=0,s=a.length;r<s;++r)i.push(a[r]);while(i.length);return this}function rw(t){for(var e=this,n=[e],i,a;e=n.pop();)if(t(e),i=e.children,i)for(a=i.length-1;a>=0;--a)n.push(i[a]);return this}function sw(t){for(var e=this,n=[e],i=[],a,r,s;e=n.pop();)if(i.push(e),a=e.children,a)for(r=0,s=a.length;r<s;++r)n.push(a[r]);for(;e=i.pop();)t(e);return this}function ow(t){return this.eachAfter(function(e){for(var n=+t(e.data)||0,i=e.children,a=i&&i.length;--a>=0;)n+=i[a].value;e.value=n})}function lw(t){return this.eachBefore(function(e){e.children&&e.children.sort(t)})}function cw(t){for(var e=this,n=hw(e,t),i=[e];e!==n;)e=e.parent,i.push(e);for(var a=i.length;t!==n;)i.splice(a,0,t),t=t.parent;return i}function hw(t,e){if(t===e)return t;var n=t.ancestors(),i=e.ancestors(),a=null;for(t=n.pop(),e=i.pop();t===e;)a=t,t=n.pop(),e=i.pop();return a}function uw(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e}function fw(){var t=[];return this.each(function(e){t.push(e)}),t}function dw(){var t=[];return this.eachBefore(function(e){e.children||t.push(e)}),t}function pw(){var t=this,e=[];return t.each(function(n){n!==t&&e.push({source:n.parent,target:n})}),e}function Lc(t,e){var n=new ei(t),i=+t.value&&(n.value=t.value),a,r=[n],s,o,l,c;for(e==null&&(e=mw);a=r.pop();)if(i&&(a.value=+a.data.value),(o=e(a.data))&&(c=o.length))for(a.children=new Array(c),l=c-1;l>=0;--l)r.push(s=a.children[l]=new ei(o[l])),s.parent=a,s.depth=a.depth+1;return n.eachBefore(N0)}function gw(){return Lc(this).eachBefore(bw)}function mw(t){return t.children}function bw(t){t.data=t.data.data}function N0(t){var e=0;do t.height=e;while((t=t.parent)&&t.height<++e)}function ei(t){this.data=t,this.depth=this.height=0,this.parent=null}ei.prototype=Lc.prototype={constructor:ei,count:iw,each:aw,eachAfter:sw,eachBefore:rw,sum:ow,sort:lw,path:cw,ancestors:uw,descendants:fw,leaves:dw,links:pw,copy:gw};var yw=Array.prototype.slice;function vw(t){for(var e=t.length,n,i;e;)i=Math.random()*e--|0,n=t[e],t[e]=t[i],t[i]=n;return t}function z0(t){for(var e=0,n=(t=vw(yw.call(t))).length,i=[],a,r;e<n;)a=t[e],r&&H0(r,a)?++e:(r=_w(i=xw(i,a)),e=0);return r}function xw(t,e){var n,i;if(wo(e,t))return[e];for(n=0;n<t.length;++n)if(za(e,t[n])&&wo(Ri(t[n],e),t))return[t[n],e];for(n=0;n<t.length-1;++n)for(i=n+1;i<t.length;++i)if(za(Ri(t[n],t[i]),e)&&za(Ri(t[n],e),t[i])&&za(Ri(t[i],e),t[n])&&wo(X0(t[n],t[i],e),t))return[t[n],t[i],e];throw new Error}function za(t,e){var n=t.r-e.r,i=e.x-t.x,a=e.y-t.y;return n<0||n*n<i*i+a*a}function H0(t,e){var n=t.r-e.r+1e-6,i=e.x-t.x,a=e.y-t.y;return n>0&&n*n>i*i+a*a}function wo(t,e){for(var n=0;n<e.length;++n)if(!H0(t,e[n]))return!1;return!0}function _w(t){switch(t.length){case 1:return ww(t[0]);case 2:return Ri(t[0],t[1]);case 3:return X0(t[0],t[1],t[2])}}function ww(t){return{x:t.x,y:t.y,r:t.r}}function Ri(t,e){var n=t.x,i=t.y,a=t.r,r=e.x,s=e.y,o=e.r,l=r-n,c=s-i,h=o-a,f=Math.sqrt(l*l+c*c);return{x:(n+r+l/f*h)/2,y:(i+s+c/f*h)/2,r:(f+a+o)/2}}function X0(t,e,n){var i=t.x,a=t.y,r=t.r,s=e.x,o=e.y,l=e.r,c=n.x,h=n.y,f=n.r,u=i-s,p=i-c,d=a-o,g=a-h,m=l-r,b=f-r,v=i*i+a*a-r*r,y=v-s*s-o*o+l*l,x=v-c*c-h*h+f*f,M=p*d-u*g,D=(d*x-g*y)/(M*2)-i,k=(g*m-d*b)/M,I=(p*y-u*x)/(M*2)-a,C=(u*b-p*m)/M,T=k*k+C*C-1,L=2*(r+D*k+I*C),_=D*D+I*I-r*r,A=-(T?(L+Math.sqrt(L*L-4*T*_))/(2*T):_/L);return{x:i+D+k*A,y:a+I+C*A,r:A}}function Lu(t,e,n){var i=t.x-e.x,a,r,s=t.y-e.y,o,l,c=i*i+s*s;c?(r=e.r+n.r,r*=r,l=t.r+n.r,l*=l,r>l?(a=(c+l-r)/(2*c),o=Math.sqrt(Math.max(0,l/c-a*a)),n.x=t.x-a*i-o*s,n.y=t.y-a*s+o*i):(a=(c+r-l)/(2*c),o=Math.sqrt(Math.max(0,r/c-a*a)),n.x=e.x+a*i-o*s,n.y=e.y+a*s+o*i)):(n.x=e.x+n.r,n.y=e.y)}function Cu(t,e){var n=t.r+e.r-1e-6,i=e.x-t.x,a=e.y-t.y;return n>0&&n*n>i*i+a*a}function Tu(t){var e=t._,n=t.next._,i=e.r+n.r,a=(e.x*n.r+n.x*e.r)/i,r=(e.y*n.r+n.y*e.r)/i;return a*a+r*r}function Ha(t){this._=t,this.next=null,this.previous=null}function G0(t){if(!(a=t.length))return 0;var e,n,i,a,r,s,o,l,c,h,f;if(e=t[0],e.x=0,e.y=0,!(a>1))return e.r;if(n=t[1],e.x=-n.r,n.x=e.r,n.y=0,!(a>2))return e.r+n.r;Lu(n,e,i=t[2]),e=new Ha(e),n=new Ha(n),i=new Ha(i),e.next=i.previous=n,n.next=e.previous=i,i.next=n.previous=e;t:for(o=3;o<a;++o){Lu(e._,n._,i=t[o]),i=new Ha(i),l=n.next,c=e.previous,h=n._.r,f=e._.r;do if(h<=f){if(Cu(l._,i._)){n=l,e.next=n,n.previous=e,--o;continue t}h+=l._.r,l=l.next}else{if(Cu(c._,i._)){e=c,e.next=n,n.previous=e,--o;continue t}f+=c._.r,c=c.previous}while(l!==c.next);for(i.previous=e,i.next=n,e.next=n.previous=n=i,r=Tu(e);(i=i.next)!==n;)(s=Tu(i))<r&&(e=i,r=s);n=e.next}for(e=[n._],i=n;(i=i.next)!==n;)e.push(i._);for(i=z0(e),o=0;o<a;++o)e=t[o],e.x-=i.x,e.y-=i.y;return i.r}function Mw(t){return G0(t),t}function kw(t){return t==null?null:Qr(t)}function Qr(t){if(typeof t!="function")throw new Error;return t}function nn(){return 0}function Nn(t){return function(){return t}}function Dw(t){return Math.sqrt(t.value)}function Sw(){var t=null,e=1,n=1,i=nn;function a(r){return r.x=e/2,r.y=n/2,t?r.eachBefore(Iu(t)).eachAfter(Mo(i,.5)).eachBefore(Ru(1)):r.eachBefore(Iu(Dw)).eachAfter(Mo(nn,1)).eachAfter(Mo(i,r.r/Math.min(e,n))).eachBefore(Ru(Math.min(e,n)/(2*r.r))),r}return a.radius=function(r){return arguments.length?(t=kw(r),a):t},a.size=function(r){return arguments.length?(e=+r[0],n=+r[1],a):[e,n]},a.padding=function(r){return arguments.length?(i=typeof r=="function"?r:Nn(+r),a):i},a}function Iu(t){return function(e){e.children||(e.r=Math.max(0,+t(e)||0))}}function Mo(t,e){return function(n){if(i=n.children){var i,a,r=i.length,s=t(n)*e||0,o;if(s)for(a=0;a<r;++a)i[a].r+=s;if(o=G0(i),s)for(a=0;a<r;++a)i[a].r-=s;n.r=o+s}}}function Ru(t){return function(e){var n=e.parent;e.r*=t,n&&(e.x=n.x+t*e.x,e.y=n.y+t*e.y)}}function B0(t){t.x0=Math.round(t.x0),t.y0=Math.round(t.y0),t.x1=Math.round(t.x1),t.y1=Math.round(t.y1)}function xa(t,e,n,i,a){for(var r=t.children,s,o=-1,l=r.length,c=t.value&&(i-e)/t.value;++o<l;)s=r[o],s.y0=n,s.y1=a,s.x0=e,s.x1=e+=s.value*c}function Aw(){var t=1,e=1,n=0,i=!1;function a(s){var o=s.height+1;return s.x0=s.y0=n,s.x1=t,s.y1=e/o,s.eachBefore(r(e,o)),i&&s.eachBefore(B0),s}function r(s,o){return function(l){l.children&&xa(l,l.x0,s*(l.depth+1)/o,l.x1,s*(l.depth+2)/o);var c=l.x0,h=l.y0,f=l.x1-n,u=l.y1-n;f<c&&(c=f=(c+f)/2),u<h&&(h=u=(h+u)/2),l.x0=c,l.y0=h,l.x1=f,l.y1=u}}return a.round=function(s){return arguments.length?(i=!!s,a):i},a.size=function(s){return arguments.length?(t=+s[0],e=+s[1],a):[t,e]},a.padding=function(s){return arguments.length?(n=+s,a):n},a}var Pu="$",Lw={depth:-1},Eu={};function Cw(t){return t.id}function Tw(t){return t.parentId}function Iw(){var t=Cw,e=Tw;function n(i){var a,r,s=i.length,o,l,c,h=new Array(s),f,u,p={};for(r=0;r<s;++r)a=i[r],c=h[r]=new ei(a),(f=t(a,r,i))!=null&&(f+="")&&(u=Pu+(c.id=f),p[u]=u in p?Eu:c);for(r=0;r<s;++r)if(c=h[r],f=e(i[r],r,i),f==null||!(f+="")){if(o)throw new Error("multiple roots");o=c}else{if(l=p[Pu+f],!l)throw new Error("missing: "+f);if(l===Eu)throw new Error("ambiguous: "+f);l.children?l.children.push(c):l.children=[c],c.parent=l}if(!o)throw new Error("no root");if(o.parent=Lw,o.eachBefore(function(d){d.depth=d.parent.depth+1,--s}).eachBefore(N0),o.parent=null,s>0)throw new Error("cycle");return o}return n.id=function(i){return arguments.length?(t=Qr(i),n):t},n.parentId=function(i){return arguments.length?(e=Qr(i),n):e},n}function Rw(t,e){return t.parent===e.parent?1:2}function ko(t){var e=t.children;return e?e[0]:t.t}function Do(t){var e=t.children;return e?e[e.length-1]:t.t}function Pw(t,e,n){var i=n/(e.i-t.i);e.c-=i,e.s+=n,t.c+=i,e.z+=n,e.m+=n}function Ew(t){for(var e=0,n=0,i=t.children,a=i.length,r;--a>=0;)r=i[a],r.z+=e,r.m+=e,e+=r.s+(n+=r.c)}function $w(t,e,n){return t.a.parent===e.parent?t.a:n}function pr(t,e){this._=t,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=e}pr.prototype=Object.create(ei.prototype);function Yw(t){for(var e=new pr(t,0),n,i=[e],a,r,s,o;n=i.pop();)if(r=n._.children)for(n.children=new Array(o=r.length),s=o-1;s>=0;--s)i.push(a=n.children[s]=new pr(r[s],s)),a.parent=n;return(e.parent=new pr(null,0)).children=[e],e}function Nw(){var t=Rw,e=1,n=1,i=null;function a(c){var h=Yw(c);if(h.eachAfter(r),h.parent.m=-h.z,h.eachBefore(s),i)c.eachBefore(l);else{var f=c,u=c,p=c;c.eachBefore(function(v){v.x<f.x&&(f=v),v.x>u.x&&(u=v),v.depth>p.depth&&(p=v)});var d=f===u?1:t(f,u)/2,g=d-f.x,m=e/(u.x+d+g),b=n/(p.depth||1);c.eachBefore(function(v){v.x=(v.x+g)*m,v.y=v.depth*b})}return c}function r(c){var h=c.children,f=c.parent.children,u=c.i?f[c.i-1]:null;if(h){Ew(c);var p=(h[0].z+h[h.length-1].z)/2;u?(c.z=u.z+t(c._,u._),c.m=c.z-p):c.z=p}else u&&(c.z=u.z+t(c._,u._));c.parent.A=o(c,u,c.parent.A||f[0])}function s(c){c._.x=c.z+c.parent.m,c.m+=c.parent.m}function o(c,h,f){if(h){for(var u=c,p=c,d=h,g=u.parent.children[0],m=u.m,b=p.m,v=d.m,y=g.m,x;d=Do(d),u=ko(u),d&&u;)g=ko(g),p=Do(p),p.a=c,x=d.z+v-u.z-m+t(d._,u._),x>0&&(Pw($w(d,c,f),c,x),m+=x,b+=x),v+=d.m,m+=u.m,y+=g.m,b+=p.m;d&&!Do(p)&&(p.t=d,p.m+=v-b),u&&!ko(g)&&(g.t=u,g.m+=m-y,f=c)}return f}function l(c){c.x*=e,c.y=c.depth*n}return a.separation=function(c){return arguments.length?(t=c,a):t},a.size=function(c){return arguments.length?(i=!1,e=+c[0],n=+c[1],a):i?null:[e,n]},a.nodeSize=function(c){return arguments.length?(i=!0,e=+c[0],n=+c[1],a):i?[e,n]:null},a}function Es(t,e,n,i,a){for(var r=t.children,s,o=-1,l=r.length,c=t.value&&(a-n)/t.value;++o<l;)s=r[o],s.x0=e,s.x1=i,s.y0=n,s.y1=n+=s.value*c}var W0=(1+Math.sqrt(5))/2;function O0(t,e,n,i,a,r){for(var s=[],o=e.children,l,c,h=0,f=0,u=o.length,p,d,g=e.value,m,b,v,y,x,M,D;h<u;){p=a-n,d=r-i;do m=o[f++].value;while(!m&&f<u);for(b=v=m,M=Math.max(d/p,p/d)/(g*t),D=m*m*M,x=Math.max(v/D,D/b);f<u;++f){if(m+=c=o[f].value,c<b&&(b=c),c>v&&(v=c),D=m*m*M,y=Math.max(v/D,D/b),y>x){m-=c;break}x=y}s.push(l={value:m,dice:p<d,children:o.slice(h,f)}),l.dice?xa(l,n,i,a,g?i+=d*m/g:r):Es(l,n,i,g?n+=p*m/g:a,r),g-=m,h=f}return s}const F0=function t(e){function n(i,a,r,s,o){O0(e,i,a,r,s,o)}return n.ratio=function(i){return t((i=+i)>1?i:1)},n}(W0);function zw(){var t=F0,e=!1,n=1,i=1,a=[0],r=nn,s=nn,o=nn,l=nn,c=nn;function h(u){return u.x0=u.y0=0,u.x1=n,u.y1=i,u.eachBefore(f),a=[0],e&&u.eachBefore(B0),u}function f(u){var p=a[u.depth],d=u.x0+p,g=u.y0+p,m=u.x1-p,b=u.y1-p;m<d&&(d=m=(d+m)/2),b<g&&(g=b=(g+b)/2),u.x0=d,u.y0=g,u.x1=m,u.y1=b,u.children&&(p=a[u.depth+1]=r(u)/2,d+=c(u)-p,g+=s(u)-p,m-=o(u)-p,b-=l(u)-p,m<d&&(d=m=(d+m)/2),b<g&&(g=b=(g+b)/2),t(u,d,g,m,b))}return h.round=function(u){return arguments.length?(e=!!u,h):e},h.size=function(u){return arguments.length?(n=+u[0],i=+u[1],h):[n,i]},h.tile=function(u){return arguments.length?(t=Qr(u),h):t},h.padding=function(u){return arguments.length?h.paddingInner(u).paddingOuter(u):h.paddingInner()},h.paddingInner=function(u){return arguments.length?(r=typeof u=="function"?u:Nn(+u),h):r},h.paddingOuter=function(u){return arguments.length?h.paddingTop(u).paddingRight(u).paddingBottom(u).paddingLeft(u):h.paddingTop()},h.paddingTop=function(u){return arguments.length?(s=typeof u=="function"?u:Nn(+u),h):s},h.paddingRight=function(u){return arguments.length?(o=typeof u=="function"?u:Nn(+u),h):o},h.paddingBottom=function(u){return arguments.length?(l=typeof u=="function"?u:Nn(+u),h):l},h.paddingLeft=function(u){return arguments.length?(c=typeof u=="function"?u:Nn(+u),h):c},h}function Hw(t,e,n,i,a){var r=t.children,s,o=r.length,l,c=new Array(o+1);for(c[0]=l=s=0;s<o;++s)c[s+1]=l+=r[s].value;h(0,o,t.value,e,n,i,a);function h(f,u,p,d,g,m,b){if(f>=u-1){var v=r[f];v.x0=d,v.y0=g,v.x1=m,v.y1=b;return}for(var y=c[f],x=p/2+y,M=f+1,D=u-1;M<D;){var k=M+D>>>1;c[k]<x?M=k+1:D=k}x-c[M-1]<c[M]-x&&f+1<M&&--M;var I=c[M]-y,C=p-I;if(m-d>b-g){var T=(d*C+m*I)/p;h(f,M,I,d,g,T,b),h(M,u,C,T,g,m,b)}else{var L=(g*C+b*I)/p;h(f,M,I,d,g,m,L),h(M,u,C,d,L,m,b)}}}function Xw(t,e,n,i,a){(t.depth&1?Es:xa)(t,e,n,i,a)}const Gw=function t(e){function n(i,a,r,s,o){if((l=i._squarify)&&l.ratio===e)for(var l,c,h,f,u=-1,p,d=l.length,g=i.value;++u<d;){for(c=l[u],h=c.children,f=c.value=0,p=h.length;f<p;++f)c.value+=h[f].value;c.dice?xa(c,a,r,s,r+=(o-r)*c.value/g):Es(c,a,r,a+=(s-a)*c.value/g,o),g-=c.value}else i._squarify=l=O0(e,i,a,r,s,o),l.ratio=e}return n.ratio=function(i){return t((i=+i)>1?i:1)},n}(W0);function Bw(t){for(var e=-1,n=t.length,i,a=t[n-1],r=0;++e<n;)i=a,a=t[e],r+=i[1]*a[0]-i[0]*a[1];return r/2}function Ww(t){for(var e=-1,n=t.length,i=0,a=0,r,s=t[n-1],o,l=0;++e<n;)r=s,s=t[e],l+=o=r[0]*s[1]-s[0]*r[1],i+=(r[0]+s[0])*o,a+=(r[1]+s[1])*o;return l*=3,[i/l,a/l]}function Ow(t,e,n){return(e[0]-t[0])*(n[1]-t[1])-(e[1]-t[1])*(n[0]-t[0])}function Fw(t,e){return t[0]-e[0]||t[1]-e[1]}function $u(t){for(var e=t.length,n=[0,1],i=2,a=2;a<e;++a){for(;i>1&&Ow(t[n[i-2]],t[n[i-1]],t[a])<=0;)--i;n[i++]=a}return n.slice(0,i)}function Uw(t){if((n=t.length)<3)return null;var e,n,i=new Array(n),a=new Array(n);for(e=0;e<n;++e)i[e]=[+t[e][0],+t[e][1],e];for(i.sort(Fw),e=0;e<n;++e)a[e]=[i[e][0],-i[e][1]];var r=$u(i),s=$u(a),o=s[0]===r[0],l=s[s.length-1]===r[r.length-1],c=[];for(e=r.length-1;e>=0;--e)c.push(t[i[r[e]][2]]);for(e=+o;e<s.length-l;++e)c.push(t[i[s[e]][2]]);return c}function Vw(t,e){for(var n=t.length,i=t[n-1],a=e[0],r=e[1],s=i[0],o=i[1],l,c,h=!1,f=0;f<n;++f)i=t[f],l=i[0],c=i[1],c>r!=o>r&&a<(s-l)*(r-c)/(o-c)+l&&(h=!h),s=l,o=c;return h}function qw(t){for(var e=-1,n=t.length,i=t[n-1],a,r,s=i[0],o=i[1],l=0;++e<n;)a=s,r=o,i=t[e],s=i[0],o=i[1],a-=s,r-=o,l+=Math.sqrt(a*a+r*r);return l}function oi(){return Math.random()}const Zw=function t(e){function n(i,a){return i=i==null?0:+i,a=a==null?1:+a,arguments.length===1?(a=i,i=0):a-=i,function(){return e()*a+i}}return n.source=t,n}(oi),U0=function t(e){function n(i,a){var r,s;return i=i==null?0:+i,a=a==null?1:+a,function(){var o;if(r!=null)o=r,r=null;else do r=e()*2-1,o=e()*2-1,s=r*r+o*o;while(!s||s>1);return i+a*o*Math.sqrt(-2*Math.log(s)/s)}}return n.source=t,n}(oi),Kw=function t(e){function n(){var i=U0.source(e).apply(this,arguments);return function(){return Math.exp(i())}}return n.source=t,n}(oi),V0=function t(e){function n(i){return function(){for(var a=0,r=0;r<i;++r)a+=e();return a}}return n.source=t,n}(oi),Qw=function t(e){function n(i){var a=V0.source(e)(i);return function(){return a()/i}}return n.source=t,n}(oi),Jw=function t(e){function n(i){return function(){return-Math.log(1-e())/i}}return n.source=t,n}(oi);function he(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function Te(t,e){switch(arguments.length){case 0:break;case 1:this.interpolator(t);break;default:this.interpolator(e).domain(t);break}return this}var q0=Array.prototype,Jr=q0.map,gn=q0.slice,Il={name:"implicit"};function _a(){var t=Ae(),e=[],n=[],i=Il;function a(r){var s=r+"",o=t.get(s);if(!o){if(i!==Il)return i;t.set(s,o=e.push(r))}return n[(o-1)%n.length]}return a.domain=function(r){if(!arguments.length)return e.slice();e=[],t=Ae();for(var s=-1,o=r.length,l,c;++s<o;)t.has(c=(l=r[s])+"")||t.set(c,e.push(l));return a},a.range=function(r){return arguments.length?(n=gn.call(r),a):n.slice()},a.unknown=function(r){return arguments.length?(i=r,a):i},a.copy=function(){return _a(e,n).unknown(i)},he.apply(a,arguments),a}function Cc(){var t=_a().unknown(void 0),e=t.domain,n=t.range,i=[0,1],a,r,s=!1,o=0,l=0,c=.5;delete t.unknown;function h(){var f=e().length,u=i[1]<i[0],p=i[u-0],d=i[1-u];a=(d-p)/Math.max(1,f-o+l*2),s&&(a=Math.floor(a)),p+=(d-p-a*(f-o))*c,r=a*(1-o),s&&(p=Math.round(p),r=Math.round(r));var g=Bt(f).map(function(m){return p+a*m});return n(u?g.reverse():g)}return t.domain=function(f){return arguments.length?(e(f),h()):e()},t.range=function(f){return arguments.length?(i=[+f[0],+f[1]],h()):i.slice()},t.rangeRound=function(f){return i=[+f[0],+f[1]],s=!0,h()},t.bandwidth=function(){return r},t.step=function(){return a},t.round=function(f){return arguments.length?(s=!!f,h()):s},t.padding=function(f){return arguments.length?(o=Math.min(1,l=+f),h()):o},t.paddingInner=function(f){return arguments.length?(o=Math.min(1,f),h()):o},t.paddingOuter=function(f){return arguments.length?(l=+f,h()):l},t.align=function(f){return arguments.length?(c=Math.max(0,Math.min(1,f)),h()):c},t.copy=function(){return Cc(e(),i).round(s).paddingInner(o).paddingOuter(l).align(c)},he.apply(h(),arguments)}function Z0(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return Z0(e())},t}function li(){return Z0(Cc.apply(null,arguments).paddingInner(1))}function jw(t){return function(){return t}}function Rl(t){return+t}var Yu=[0,1];function xt(t){return t}function Pl(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:jw(isNaN(e)?NaN:.5)}function Nu(t){var e=t[0],n=t[t.length-1],i;return e>n&&(i=e,e=n,n=i),function(a){return Math.max(e,Math.min(n,a))}}function t5(t,e,n){var i=t[0],a=t[1],r=e[0],s=e[1];return a<i?(i=Pl(a,i),r=n(s,r)):(i=Pl(i,a),r=n(r,s)),function(o){return r(i(o))}}function e5(t,e,n){var i=Math.min(t.length,e.length)-1,a=new Array(i),r=new Array(i),s=-1;for(t[i]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++s<i;)a[s]=Pl(t[s],t[s+1]),r[s]=n(e[s],e[s+1]);return function(o){var l=ze(t,o,1,i)-1;return r[l](a[l](o))}}function wa(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function $s(){var t=Yu,e=Yu,n=pa,i,a,r,s=xt,o,l,c;function h(){return o=Math.min(t.length,e.length)>2?e5:t5,l=c=null,f}function f(u){return isNaN(u=+u)?r:(l||(l=o(t.map(i),e,n)))(i(s(u)))}return f.invert=function(u){return s(a((c||(c=o(e,t.map(i),Kt)))(u)))},f.domain=function(u){return arguments.length?(t=Jr.call(u,Rl),s===xt||(s=Nu(t)),h()):t.slice()},f.range=function(u){return arguments.length?(e=gn.call(u),h()):e.slice()},f.rangeRound=function(u){return e=gn.call(u),n=gd,h()},f.clamp=function(u){return arguments.length?(s=u?Nu(t):xt,f):s!==xt},f.interpolate=function(u){return arguments.length?(n=u,h()):n},f.unknown=function(u){return arguments.length?(r=u,f):r},function(u,p){return i=u,a=p,h()}}function K0(t,e){return $s()(t,e)}function Q0(t,e,n,i){var a=ln(t,e,n),r;switch(i=ea(i??",f"),i.type){case"s":{var s=Math.max(Math.abs(t),Math.abs(e));return i.precision==null&&!isNaN(r=Kd(a,s))&&(i.precision=r),hc(i,s)}case"":case"e":case"g":case"p":case"r":{i.precision==null&&!isNaN(r=Qd(a,Math.max(Math.abs(t),Math.abs(e))))&&(i.precision=r-(i.type==="e"));break}case"f":case"%":{i.precision==null&&!isNaN(r=Zd(a))&&(i.precision=r-(i.type==="%")*2);break}}return ga(i)}function Sn(t){var e=t.domain;return t.ticks=function(n){var i=e();return Gl(i[0],i[i.length-1],n??10)},t.tickFormat=function(n,i){var a=e();return Q0(a[0],a[a.length-1],n??10,i)},t.nice=function(n){n==null&&(n=10);var i=e(),a=0,r=i.length-1,s=i[a],o=i[r],l;return o<s&&(l=s,s=o,o=l,l=a,a=r,r=l),l=Hi(s,o,n),l>0?(s=Math.floor(s/l)*l,o=Math.ceil(o/l)*l,l=Hi(s,o,n)):l<0&&(s=Math.ceil(s*l)/l,o=Math.floor(o*l)/l,l=Hi(s,o,n)),l>0?(i[a]=Math.floor(s/l)*l,i[r]=Math.ceil(o/l)*l,e(i)):l<0&&(i[a]=Math.ceil(s*l)/l,i[r]=Math.floor(o*l)/l,e(i)),t},t}function Be(){var t=K0(xt,xt);return t.copy=function(){return wa(t,Be())},he.apply(t,arguments),Sn(t)}function J0(t){var e;function n(i){return isNaN(i=+i)?e:i}return n.invert=n,n.domain=n.range=function(i){return arguments.length?(t=Jr.call(i,Rl),n):t.slice()},n.unknown=function(i){return arguments.length?(e=i,n):e},n.copy=function(){return J0(t).unknown(e)},t=arguments.length?Jr.call(t,Rl):[0,1],Sn(n)}function j0(t,e){t=t.slice();var n=0,i=t.length-1,a=t[n],r=t[i],s;return r<a&&(s=n,n=i,i=s,s=a,a=r,r=s),t[n]=e.floor(a),t[i]=e.ceil(r),t}function zu(t){return Math.log(t)}function Hu(t){return Math.exp(t)}function n5(t){return-Math.log(-t)}function i5(t){return-Math.exp(-t)}function a5(t){return isFinite(t)?+("1e"+t):t<0?0:t}function r5(t){return t===10?a5:t===Math.E?Math.exp:function(e){return Math.pow(t,e)}}function s5(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),function(e){return Math.log(e)/t})}function Xu(t){return function(e){return-t(-e)}}function Tc(t){var e=t(zu,Hu),n=e.domain,i=10,a,r;function s(){return a=s5(i),r=r5(i),n()[0]<0?(a=Xu(a),r=Xu(r),t(n5,i5)):t(zu,Hu),e}return e.base=function(o){return arguments.length?(i=+o,s()):i},e.domain=function(o){return arguments.length?(n(o),s()):n()},e.ticks=function(o){var l=n(),c=l[0],h=l[l.length-1],f;(f=h<c)&&(u=c,c=h,h=u);var u=a(c),p=a(h),d,g,m,b=o==null?10:+o,v=[];if(!(i%1)&&p-u<b){if(u=Math.round(u)-1,p=Math.round(p)+1,c>0){for(;u<p;++u)for(g=1,d=r(u);g<i;++g)if(m=d*g,!(m<c)){if(m>h)break;v.push(m)}}else for(;u<p;++u)for(g=i-1,d=r(u);g>=1;--g)if(m=d*g,!(m<c)){if(m>h)break;v.push(m)}}else v=Gl(u,p,Math.min(p-u,b)).map(r);return f?v.reverse():v},e.tickFormat=function(o,l){if(l==null&&(l=i===10?".0e":","),typeof l!="function"&&(l=ga(l)),o===1/0)return l;o==null&&(o=10);var c=Math.max(1,i*o/e.ticks().length);return function(h){var f=h/r(Math.round(a(h)));return f*i<i-.5&&(f*=i),f<=c?l(h):""}},e.nice=function(){return n(j0(n(),{floor:function(o){return r(Math.floor(a(o)))},ceil:function(o){return r(Math.ceil(a(o)))}}))},e}function tp(){var t=Tc($s()).domain([1,10]);return t.copy=function(){return wa(t,tp()).base(t.base())},he.apply(t,arguments),t}function Gu(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function Bu(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function Ic(t){var e=1,n=t(Gu(e),Bu(e));return n.constant=function(i){return arguments.length?t(Gu(e=+i),Bu(e)):e},Sn(n)}function ep(){var t=Ic($s());return t.copy=function(){return wa(t,ep()).constant(t.constant())},he.apply(t,arguments)}function Wu(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function o5(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function l5(t){return t<0?-t*t:t*t}function Rc(t){var e=t(xt,xt),n=1;function i(){return n===1?t(xt,xt):n===.5?t(o5,l5):t(Wu(n),Wu(1/n))}return e.exponent=function(a){return arguments.length?(n=+a,i()):n},Sn(e)}function Ys(){var t=Rc($s());return t.copy=function(){return wa(t,Ys()).exponent(t.exponent())},he.apply(t,arguments),t}function c5(){return Ys.apply(null,arguments).exponent(.5)}function np(){var t=[],e=[],n=[],i;function a(){var s=0,o=Math.max(1,e.length);for(n=new Array(o-1);++s<o;)n[s-1]=Fi(t,s/o);return r}function r(s){return isNaN(s=+s)?i:e[ze(n,s)]}return r.invertExtent=function(s){var o=e.indexOf(s);return o<0?[NaN,NaN]:[o>0?n[o-1]:t[0],o<n.length?n[o]:t[t.length-1]]},r.domain=function(s){if(!arguments.length)return t.slice();t=[];for(var o=0,l=s.length,c;o<l;++o)c=s[o],c!=null&&!isNaN(c=+c)&&t.push(c);return t.sort(Ue),a()},r.range=function(s){return arguments.length?(e=gn.call(s),a()):e.slice()},r.unknown=function(s){return arguments.length?(i=s,r):i},r.quantiles=function(){return n.slice()},r.copy=function(){return np().domain(t).range(e).unknown(i)},he.apply(r,arguments)}function Pc(){var t=0,e=1,n=1,i=[.5],a=[0,1],r;function s(l){return l<=l?a[ze(i,l,0,n)]:r}function o(){var l=-1;for(i=new Array(n);++l<n;)i[l]=((l+1)*e-(l-n)*t)/(n+1);return s}return s.domain=function(l){return arguments.length?(t=+l[0],e=+l[1],o()):[t,e]},s.range=function(l){return arguments.length?(n=(a=gn.call(l)).length-1,o()):a.slice()},s.invertExtent=function(l){var c=a.indexOf(l);return c<0?[NaN,NaN]:c<1?[t,i[0]]:c>=n?[i[n-1],e]:[i[c-1],i[c]]},s.unknown=function(l){return arguments.length&&(r=l),s},s.thresholds=function(){return i.slice()},s.copy=function(){return Pc().domain([t,e]).range(a).unknown(r)},he.apply(Sn(s),arguments)}function ip(){var t=[.5],e=[0,1],n,i=1;function a(r){return r<=r?e[ze(t,r,0,i)]:n}return a.domain=function(r){return arguments.length?(t=gn.call(r),i=Math.min(t.length,e.length-1),a):t.slice()},a.range=function(r){return arguments.length?(e=gn.call(r),i=Math.min(t.length,e.length-1),a):e.slice()},a.invertExtent=function(r){var s=e.indexOf(r);return[t[s-1],t[s]]},a.unknown=function(r){return arguments.length?(n=r,a):n},a.copy=function(){return ip().domain(t).range(e).unknown(n)},he.apply(a,arguments)}var So=new Date,Ao=new Date;function gt(t,e,n,i){function a(r){return t(r=arguments.length===0?new Date:new Date(+r)),r}return a.floor=function(r){return t(r=new Date(+r)),r},a.ceil=function(r){return t(r=new Date(r-1)),e(r,1),t(r),r},a.round=function(r){var s=a(r),o=a.ceil(r);return r-s<o-r?s:o},a.offset=function(r,s){return e(r=new Date(+r),s==null?1:Math.floor(s)),r},a.range=function(r,s,o){var l=[],c;if(r=a.ceil(r),o=o==null?1:Math.floor(o),!(r<s)||!(o>0))return l;do l.push(c=new Date(+r)),e(r,o),t(r);while(c<r&&r<s);return l},a.filter=function(r){return gt(function(s){if(s>=s)for(;t(s),!r(s);)s.setTime(s-1)},function(s,o){if(s>=s)if(o<0)for(;++o<=0;)for(;e(s,-1),!r(s););else for(;--o>=0;)for(;e(s,1),!r(s););})},n&&(a.count=function(r,s){return So.setTime(+r),Ao.setTime(+s),t(So),t(Ao),Math.floor(n(So,Ao))},a.every=function(r){return r=Math.floor(r),!isFinite(r)||!(r>0)?null:r>1?a.filter(i?function(s){return i(s)%r===0}:function(s){return a.count(0,s)%r===0}):a}),a}var jr=gt(function(){},function(t,e){t.setTime(+t+e)},function(t,e){return e-t});jr.every=function(t){return t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?gt(function(e){e.setTime(Math.floor(e/t)*t)},function(e,n){e.setTime(+e+n*t)},function(e,n){return(n-e)/t}):jr};const ts=jr;var Ou=jr.range,es=1e3,mn=6e4,ns=36e5,ap=864e5,rp=6048e5,sp=gt(function(t){t.setTime(t-t.getMilliseconds())},function(t,e){t.setTime(+t+e*es)},function(t,e){return(e-t)/es},function(t){return t.getUTCSeconds()});const is=sp;var Fu=sp.range,op=gt(function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*es)},function(t,e){t.setTime(+t+e*mn)},function(t,e){return(e-t)/mn},function(t){return t.getMinutes()});const lp=op;var h5=op.range,cp=gt(function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*es-t.getMinutes()*mn)},function(t,e){t.setTime(+t+e*ns)},function(t,e){return(e-t)/ns},function(t){return t.getHours()});const hp=cp;var u5=cp.range,up=gt(function(t){t.setHours(0,0,0,0)},function(t,e){t.setDate(t.getDate()+e)},function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*mn)/ap},function(t){return t.getDate()-1});const Ns=up;var f5=up.range;function An(t){return gt(function(e){e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},function(e,n){e.setDate(e.getDate()+n*7)},function(e,n){return(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*mn)/rp})}var ra=An(0),sa=An(1),fp=An(2),dp=An(3),bn=An(4),pp=An(5),gp=An(6),Uu=ra.range,d5=sa.range,p5=fp.range,g5=dp.range,m5=bn.range,b5=pp.range,y5=gp.range,mp=gt(function(t){t.setDate(1),t.setHours(0,0,0,0)},function(t,e){t.setMonth(t.getMonth()+e)},function(t,e){return e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12},function(t){return t.getMonth()});const bp=mp;var v5=mp.range,Ec=gt(function(t){t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t,e){return e.getFullYear()-t.getFullYear()},function(t){return t.getFullYear()});Ec.every=function(t){return!isFinite(t=Math.floor(t))||!(t>0)?null:gt(function(e){e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,n){e.setFullYear(e.getFullYear()+n*t)})};const yn=Ec;var x5=Ec.range,yp=gt(function(t){t.setUTCSeconds(0,0)},function(t,e){t.setTime(+t+e*mn)},function(t,e){return(e-t)/mn},function(t){return t.getUTCMinutes()});const vp=yp;var _5=yp.range,xp=gt(function(t){t.setUTCMinutes(0,0,0)},function(t,e){t.setTime(+t+e*ns)},function(t,e){return(e-t)/ns},function(t){return t.getUTCHours()});const _p=xp;var w5=xp.range,wp=gt(function(t){t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCDate(t.getUTCDate()+e)},function(t,e){return(e-t)/ap},function(t){return t.getUTCDate()-1});const zs=wp;var M5=wp.range;function Ln(t){return gt(function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},function(e,n){e.setUTCDate(e.getUTCDate()+n*7)},function(e,n){return(n-e)/rp})}var oa=Ln(0),la=Ln(1),Mp=Ln(2),kp=Ln(3),vn=Ln(4),Dp=Ln(5),Sp=Ln(6),Vu=oa.range,k5=la.range,D5=Mp.range,S5=kp.range,A5=vn.range,L5=Dp.range,C5=Sp.range,Ap=gt(function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCMonth(t.getUTCMonth()+e)},function(t,e){return e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12},function(t){return t.getUTCMonth()});const Lp=Ap;var T5=Ap.range,$c=gt(function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e)},function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()},function(t){return t.getUTCFullYear()});$c.every=function(t){return!isFinite(t=Math.floor(t))||!(t>0)?null:gt(function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,n){e.setUTCFullYear(e.getUTCFullYear()+n*t)})};const xn=$c;var I5=$c.range;function Lo(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function Co(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function gi(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function Cp(t){var e=t.dateTime,n=t.date,i=t.time,a=t.periods,r=t.days,s=t.shortDays,o=t.months,l=t.shortMonths,c=mi(a),h=bi(a),f=mi(r),u=bi(r),p=mi(s),d=bi(s),g=mi(o),m=bi(o),b=mi(l),v=bi(l),y={a:z,A:Y,b:H,B:O,c:null,d:ju,e:ju,f:t3,g:h3,G:f3,H:Q5,I:J5,j:j5,L:Tp,m:e3,M:n3,p:F,q:rt,Q:nf,s:af,S:i3,u:a3,U:r3,V:s3,w:o3,W:l3,x:null,X:null,y:c3,Y:u3,Z:d3,"%":ef},x={a:et,A:J,b:ft,B:Ft,c:null,d:tf,e:tf,f:b3,g:A3,G:C3,H:p3,I:g3,j:m3,L:Rp,m:y3,M:v3,p:Jt,q:jt,Q:nf,s:af,S:x3,u:_3,U:w3,V:M3,w:k3,W:D3,x:null,X:null,y:S3,Y:L3,Z:T3,"%":ef},M={a:T,A:L,b:_,B:A,c:P,d:Qu,e:Qu,f:V5,g:Ku,G:Zu,H:Ju,I:Ju,j:W5,L:U5,m:B5,M:O5,p:C,q:G5,Q:Z5,s:K5,S:F5,u:Y5,U:N5,V:z5,w:$5,W:H5,x:S,X:R,y:Ku,Y:Zu,Z:X5,"%":q5};y.x=D(n,y),y.X=D(i,y),y.c=D(e,y),x.x=D(n,x),x.X=D(i,x),x.c=D(e,x);function D($,U){return function(Z){var E=[],yt=-1,j=0,_t=$.length,Dt,xe,St;for(Z instanceof Date||(Z=new Date(+Z));++yt<_t;)$.charCodeAt(yt)===37&&(E.push($.slice(j,yt)),(xe=qu[Dt=$.charAt(++yt)])!=null?Dt=$.charAt(++yt):xe=Dt==="e"?" ":"0",(St=U[Dt])&&(Dt=St(Z,xe)),E.push(Dt),j=yt+1);return E.push($.slice(j,yt)),E.join("")}}function k($,U){return function(Z){var E=gi(1900,void 0,1),yt=I(E,$,Z+="",0),j,_t;if(yt!=Z.length)return null;if("Q"in E)return new Date(E.Q);if("s"in E)return new Date(E.s*1e3+("L"in E?E.L:0));if(U&&!("Z"in E)&&(E.Z=0),"p"in E&&(E.H=E.H%12+E.p*12),E.m===void 0&&(E.m="q"in E?E.q:0),"V"in E){if(E.V<1||E.V>53)return null;"w"in E||(E.w=1),"Z"in E?(j=Co(gi(E.y,0,1)),_t=j.getUTCDay(),j=_t>4||_t===0?la.ceil(j):la(j),j=zs.offset(j,(E.V-1)*7),E.y=j.getUTCFullYear(),E.m=j.getUTCMonth(),E.d=j.getUTCDate()+(E.w+6)%7):(j=Lo(gi(E.y,0,1)),_t=j.getDay(),j=_t>4||_t===0?sa.ceil(j):sa(j),j=Ns.offset(j,(E.V-1)*7),E.y=j.getFullYear(),E.m=j.getMonth(),E.d=j.getDate()+(E.w+6)%7)}else("W"in E||"U"in E)&&("w"in E||(E.w="u"in E?E.u%7:"W"in E?1:0),_t="Z"in E?Co(gi(E.y,0,1)).getUTCDay():Lo(gi(E.y,0,1)).getDay(),E.m=0,E.d="W"in E?(E.w+6)%7+E.W*7-(_t+5)%7:E.w+E.U*7-(_t+6)%7);return"Z"in E?(E.H+=E.Z/100|0,E.M+=E.Z%100,Co(E)):Lo(E)}}function I($,U,Z,E){for(var yt=0,j=U.length,_t=Z.length,Dt,xe;yt<j;){if(E>=_t)return-1;if(Dt=U.charCodeAt(yt++),Dt===37){if(Dt=U.charAt(yt++),xe=M[Dt in qu?U.charAt(yt++):Dt],!xe||(E=xe($,Z,E))<0)return-1}else if(Dt!=Z.charCodeAt(E++))return-1}return E}function C($,U,Z){var E=c.exec(U.slice(Z));return E?($.p=h[E[0].toLowerCase()],Z+E[0].length):-1}function T($,U,Z){var E=p.exec(U.slice(Z));return E?($.w=d[E[0].toLowerCase()],Z+E[0].length):-1}function L($,U,Z){var E=f.exec(U.slice(Z));return E?($.w=u[E[0].toLowerCase()],Z+E[0].length):-1}function _($,U,Z){var E=b.exec(U.slice(Z));return E?($.m=v[E[0].toLowerCase()],Z+E[0].length):-1}function A($,U,Z){var E=g.exec(U.slice(Z));return E?($.m=m[E[0].toLowerCase()],Z+E[0].length):-1}function P($,U,Z){return I($,e,U,Z)}function S($,U,Z){return I($,n,U,Z)}function R($,U,Z){return I($,i,U,Z)}function z($){return s[$.getDay()]}function Y($){return r[$.getDay()]}function H($){return l[$.getMonth()]}function O($){return o[$.getMonth()]}function F($){return a[+($.getHours()>=12)]}function rt($){return 1+~~($.getMonth()/3)}function et($){return s[$.getUTCDay()]}function J($){return r[$.getUTCDay()]}function ft($){return l[$.getUTCMonth()]}function Ft($){return o[$.getUTCMonth()]}function Jt($){return a[+($.getUTCHours()>=12)]}function jt($){return 1+~~($.getUTCMonth()/3)}return{format:function($){var U=D($+="",y);return U.toString=function(){return $},U},parse:function($){var U=k($+="",!1);return U.toString=function(){return $},U},utcFormat:function($){var U=D($+="",x);return U.toString=function(){return $},U},utcParse:function($){var U=k($+="",!0);return U.toString=function(){return $},U}}}var qu={"-":"",_:" ",0:"0"},bt=/^\s*\d+/,R5=/^%/,P5=/[\\^$*+?|[\]().{}]/g;function tt(t,e,n){var i=t<0?"-":"",a=(i?-t:t)+"",r=a.length;return i+(r<n?new Array(n-r+1).join(e)+a:a)}function E5(t){return t.replace(P5,"\\$&")}function mi(t){return new RegExp("^(?:"+t.map(E5).join("|")+")","i")}function bi(t){for(var e={},n=-1,i=t.length;++n<i;)e[t[n].toLowerCase()]=n;return e}function $5(t,e,n){var i=bt.exec(e.slice(n,n+1));return i?(t.w=+i[0],n+i[0].length):-1}function Y5(t,e,n){var i=bt.exec(e.slice(n,n+1));return i?(t.u=+i[0],n+i[0].length):-1}function N5(t,e,n){var i=bt.exec(e.slice(n,n+2));return i?(t.U=+i[0],n+i[0].length):-1}function z5(t,e,n){var i=bt.exec(e.slice(n,n+2));return i?(t.V=+i[0],n+i[0].length):-1}function H5(t,e,n){var i=bt.exec(e.slice(n,n+2));return i?(t.W=+i[0],n+i[0].length):-1}function Zu(t,e,n){var i=bt.exec(e.slice(n,n+4));return i?(t.y=+i[0],n+i[0].length):-1}function Ku(t,e,n){var i=bt.exec(e.slice(n,n+2));return i?(t.y=+i[0]+(+i[0]>68?1900:2e3),n+i[0].length):-1}function X5(t,e,n){var i=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return i?(t.Z=i[1]?0:-(i[2]+(i[3]||"00")),n+i[0].length):-1}function G5(t,e,n){var i=bt.exec(e.slice(n,n+1));return i?(t.q=i[0]*3-3,n+i[0].length):-1}function B5(t,e,n){var i=bt.exec(e.slice(n,n+2));return i?(t.m=i[0]-1,n+i[0].length):-1}function Qu(t,e,n){var i=bt.exec(e.slice(n,n+2));return i?(t.d=+i[0],n+i[0].length):-1}function W5(t,e,n){var i=bt.exec(e.slice(n,n+3));return i?(t.m=0,t.d=+i[0],n+i[0].length):-1}function Ju(t,e,n){var i=bt.exec(e.slice(n,n+2));return i?(t.H=+i[0],n+i[0].length):-1}function O5(t,e,n){var i=bt.exec(e.slice(n,n+2));return i?(t.M=+i[0],n+i[0].length):-1}function F5(t,e,n){var i=bt.exec(e.slice(n,n+2));return i?(t.S=+i[0],n+i[0].length):-1}function U5(t,e,n){var i=bt.exec(e.slice(n,n+3));return i?(t.L=+i[0],n+i[0].length):-1}function V5(t,e,n){var i=bt.exec(e.slice(n,n+6));return i?(t.L=Math.floor(i[0]/1e3),n+i[0].length):-1}function q5(t,e,n){var i=R5.exec(e.slice(n,n+1));return i?n+i[0].length:-1}function Z5(t,e,n){var i=bt.exec(e.slice(n));return i?(t.Q=+i[0],n+i[0].length):-1}function K5(t,e,n){var i=bt.exec(e.slice(n));return i?(t.s=+i[0],n+i[0].length):-1}function ju(t,e){return tt(t.getDate(),e,2)}function Q5(t,e){return tt(t.getHours(),e,2)}function J5(t,e){return tt(t.getHours()%12||12,e,2)}function j5(t,e){return tt(1+Ns.count(yn(t),t),e,3)}function Tp(t,e){return tt(t.getMilliseconds(),e,3)}function t3(t,e){return Tp(t,e)+"000"}function e3(t,e){return tt(t.getMonth()+1,e,2)}function n3(t,e){return tt(t.getMinutes(),e,2)}function i3(t,e){return tt(t.getSeconds(),e,2)}function a3(t){var e=t.getDay();return e===0?7:e}function r3(t,e){return tt(ra.count(yn(t)-1,t),e,2)}function Ip(t){var e=t.getDay();return e>=4||e===0?bn(t):bn.ceil(t)}function s3(t,e){return t=Ip(t),tt(bn.count(yn(t),t)+(yn(t).getDay()===4),e,2)}function o3(t){return t.getDay()}function l3(t,e){return tt(sa.count(yn(t)-1,t),e,2)}function c3(t,e){return tt(t.getFullYear()%100,e,2)}function h3(t,e){return t=Ip(t),tt(t.getFullYear()%100,e,2)}function u3(t,e){return tt(t.getFullYear()%1e4,e,4)}function f3(t,e){var n=t.getDay();return t=n>=4||n===0?bn(t):bn.ceil(t),tt(t.getFullYear()%1e4,e,4)}function d3(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+tt(e/60|0,"0",2)+tt(e%60,"0",2)}function tf(t,e){return tt(t.getUTCDate(),e,2)}function p3(t,e){return tt(t.getUTCHours(),e,2)}function g3(t,e){return tt(t.getUTCHours()%12||12,e,2)}function m3(t,e){return tt(1+zs.count(xn(t),t),e,3)}function Rp(t,e){return tt(t.getUTCMilliseconds(),e,3)}function b3(t,e){return Rp(t,e)+"000"}function y3(t,e){return tt(t.getUTCMonth()+1,e,2)}function v3(t,e){return tt(t.getUTCMinutes(),e,2)}function x3(t,e){return tt(t.getUTCSeconds(),e,2)}function _3(t){var e=t.getUTCDay();return e===0?7:e}function w3(t,e){return tt(oa.count(xn(t)-1,t),e,2)}function Pp(t){var e=t.getUTCDay();return e>=4||e===0?vn(t):vn.ceil(t)}function M3(t,e){return t=Pp(t),tt(vn.count(xn(t),t)+(xn(t).getUTCDay()===4),e,2)}function k3(t){return t.getUTCDay()}function D3(t,e){return tt(la.count(xn(t)-1,t),e,2)}function S3(t,e){return tt(t.getUTCFullYear()%100,e,2)}function A3(t,e){return t=Pp(t),tt(t.getUTCFullYear()%100,e,2)}function L3(t,e){return tt(t.getUTCFullYear()%1e4,e,4)}function C3(t,e){var n=t.getUTCDay();return t=n>=4||n===0?vn(t):vn.ceil(t),tt(t.getUTCFullYear()%1e4,e,4)}function T3(){return"+0000"}function ef(){return"%"}function nf(t){return+t}function af(t){return Math.floor(+t/1e3)}var $n,Yc,Ep,Hs,Nc;$p({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function $p(t){return $n=Cp(t),Yc=$n.format,Ep=$n.parse,Hs=$n.utcFormat,Nc=$n.utcParse,$n}var Yp="%Y-%m-%dT%H:%M:%S.%LZ";function I3(t){return t.toISOString()}var R3=Date.prototype.toISOString?I3:Hs(Yp);const P3=R3;function E3(t){var e=new Date(t);return isNaN(e)?null:e}var $3=+new Date("2000-01-01T00:00:00.000Z")?E3:Nc(Yp);const Y3=$3;var Pi=1e3,Ei=Pi*60,$i=Ei*60,ca=$i*24,N3=ca*7,rf=ca*30,To=ca*365;function z3(t){return new Date(t)}function H3(t){return t instanceof Date?+t:+new Date(+t)}function zc(t,e,n,i,a,r,s,o,l){var c=K0(xt,xt),h=c.invert,f=c.domain,u=l(".%L"),p=l(":%S"),d=l("%I:%M"),g=l("%I %p"),m=l("%a %d"),b=l("%b %d"),v=l("%B"),y=l("%Y"),x=[[s,1,Pi],[s,5,5*Pi],[s,15,15*Pi],[s,30,30*Pi],[r,1,Ei],[r,5,5*Ei],[r,15,15*Ei],[r,30,30*Ei],[a,1,$i],[a,3,3*$i],[a,6,6*$i],[a,12,12*$i],[i,1,ca],[i,2,2*ca],[n,1,N3],[e,1,rf],[e,3,3*rf],[t,1,To]];function M(k){return(s(k)<k?u:r(k)<k?p:a(k)<k?d:i(k)<k?g:e(k)<k?n(k)<k?m:b:t(k)<k?v:y)(k)}function D(k,I,C,T){if(k==null&&(k=10),typeof k=="number"){var L=Math.abs(C-I)/k,_=Hl(function(A){return A[2]}).right(x,L);_===x.length?(T=ln(I/To,C/To,k),k=t):_?(_=x[L/x[_-1][2]<x[_][2]/L?_-1:_],T=_[1],k=_[0]):(T=Math.max(ln(I,C,k),1),k=o)}return T==null?k:k.every(T)}return c.invert=function(k){return new Date(h(k))},c.domain=function(k){return arguments.length?f(Jr.call(k,H3)):f().map(z3)},c.ticks=function(k,I){var C=f(),T=C[0],L=C[C.length-1],_=L<T,A;return _&&(A=T,T=L,L=A),A=D(k,T,L,I),A=A?A.range(T,L+1):[],_?A.reverse():A},c.tickFormat=function(k,I){return I==null?M:l(I)},c.nice=function(k,I){var C=f();return(k=D(k,C[0],C[C.length-1],I))?f(j0(C,k)):c},c.copy=function(){return wa(c,zc(t,e,n,i,a,r,s,o,l))},c}function X3(){return he.apply(zc(yn,bp,ra,Ns,hp,lp,is,ts,Yc).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function G3(){return he.apply(zc(xn,Lp,oa,zs,_p,vp,is,ts,Hs).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Xs(){var t=0,e=1,n,i,a,r,s=xt,o=!1,l;function c(h){return isNaN(h=+h)?l:s(a===0?.5:(h=(r(h)-n)*a,o?Math.max(0,Math.min(1,h)):h))}return c.domain=function(h){return arguments.length?(n=r(t=+h[0]),i=r(e=+h[1]),a=n===i?0:1/(i-n),c):[t,e]},c.clamp=function(h){return arguments.length?(o=!!h,c):o},c.interpolator=function(h){return arguments.length?(s=h,c):s},c.unknown=function(h){return arguments.length?(l=h,c):l},function(h){return r=h,n=h(t),i=h(e),a=n===i?0:1/(i-n),c}}function Ke(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function Np(){var t=Sn(Xs()(xt));return t.copy=function(){return Ke(t,Np())},Te.apply(t,arguments)}function zp(){var t=Tc(Xs()).domain([1,10]);return t.copy=function(){return Ke(t,zp()).base(t.base())},Te.apply(t,arguments)}function Hp(){var t=Ic(Xs());return t.copy=function(){return Ke(t,Hp()).constant(t.constant())},Te.apply(t,arguments)}function Hc(){var t=Rc(Xs());return t.copy=function(){return Ke(t,Hc()).exponent(t.exponent())},Te.apply(t,arguments)}function B3(){return Hc.apply(null,arguments).exponent(.5)}function Xp(){var t=[],e=xt;function n(i){if(!isNaN(i=+i))return e((ze(t,i)-1)/(t.length-1))}return n.domain=function(i){if(!arguments.length)return t.slice();t=[];for(var a=0,r=i.length,s;a<r;++a)s=i[a],s!=null&&!isNaN(s=+s)&&t.push(s);return t.sort(Ue),n},n.interpolator=function(i){return arguments.length?(e=i,n):e},n.copy=function(){return Xp(e).domain(t)},Te.apply(n,arguments)}function Gs(){var t=0,e=.5,n=1,i,a,r,s,o,l=xt,c,h=!1,f;function u(p){return isNaN(p=+p)?f:(p=.5+((p=+c(p))-a)*(p<a?s:o),l(h?Math.max(0,Math.min(1,p)):p))}return u.domain=function(p){return arguments.length?(i=c(t=+p[0]),a=c(e=+p[1]),r=c(n=+p[2]),s=i===a?0:.5/(a-i),o=a===r?0:.5/(r-a),u):[t,e,n]},u.clamp=function(p){return arguments.length?(h=!!p,u):h},u.interpolator=function(p){return arguments.length?(l=p,u):l},u.unknown=function(p){return arguments.length?(f=p,u):f},function(p){return c=p,i=p(t),a=p(e),r=p(n),s=i===a?0:.5/(a-i),o=a===r?0:.5/(r-a),u}}function Gp(){var t=Sn(Gs()(xt));return t.copy=function(){return Ke(t,Gp())},Te.apply(t,arguments)}function Bp(){var t=Tc(Gs()).domain([.1,1,10]);return t.copy=function(){return Ke(t,Bp()).base(t.base())},Te.apply(t,arguments)}function Wp(){var t=Ic(Gs());return t.copy=function(){return Ke(t,Wp()).constant(t.constant())},Te.apply(t,arguments)}function Xc(){var t=Rc(Gs());return t.copy=function(){return Ke(t,Xc()).exponent(t.exponent())},Te.apply(t,arguments)}function W3(){return Xc.apply(null,arguments).exponent(.5)}function V(t){for(var e=t.length/6|0,n=new Array(e),i=0;i<e;)n[i]="#"+t.slice(i*6,++i*6);return n}const O3=V("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),F3=V("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),U3=V("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),V3=V("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),q3=V("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),Z3=V("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),K3=V("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),Q3=V("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),J3=V("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),j3=V("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab");function at(t){return hd(t[t.length-1])}var Op=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(V);const t8=at(Op);var Fp=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(V);const e8=at(Fp);var Up=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(V);const n8=at(Up);var Vp=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(V);const i8=at(Vp);var qp=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(V);const a8=at(qp);var Zp=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(V);const r8=at(Zp);var Kp=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(V);const s8=at(Kp);var Qp=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(V);const o8=at(Qp);var Jp=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(V);const l8=at(Jp);var jp=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(V);const c8=at(jp);var tg=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(V);const h8=at(tg);var eg=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(V);const u8=at(eg);var ng=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(V);const f8=at(ng);var ig=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(V);const d8=at(ig);var ag=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(V);const p8=at(ag);var rg=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(V);const g8=at(rg);var sg=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(V);const m8=at(sg);var og=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(V);const b8=at(og);var lg=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(V);const y8=at(lg);var cg=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(V);const v8=at(cg);var hg=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(V);const x8=at(hg);var ug=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(V);const _8=at(ug);var fg=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(V);const w8=at(fg);var dg=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(V);const M8=at(dg);var pg=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(V);const k8=at(pg);var gg=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(V);const D8=at(gg);var mg=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(V);const S8=at(mg);function A8(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-t*(35.34-t*(2381.73-t*(6402.7-t*(7024.72-t*2710.57)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+t*(170.73+t*(52.82-t*(131.46-t*(176.58-t*67.37)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+t*(442.36-t*(2482.43-t*(6167.24-t*(6614.94-t*2475.67)))))))+")"}const L8=ks(re(300,.5,0),re(-240,.5,1));var C8=ks(re(-100,.75,.35),re(80,1.5,.8)),T8=ks(re(260,.75,.35),re(80,1.5,.8)),Xa=re();function I8(t){(t<0||t>1)&&(t-=Math.floor(t));var e=Math.abs(t-.5);return Xa.h=360*t-100,Xa.s=1.5-1.5*e,Xa.l=.8-.9*e,Xa+""}var Ga=qn(),R8=Math.PI/3,P8=Math.PI*2/3;function E8(t){var e;return t=(.5-t)*Math.PI,Ga.r=255*(e=Math.sin(t))*e,Ga.g=255*(e=Math.sin(t+R8))*e,Ga.b=255*(e=Math.sin(t+P8))*e,Ga+""}function $8(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+t*(1172.33-t*(10793.56-t*(33300.12-t*(38394.49-t*14825.05)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+t*(557.33+t*(1225.33-t*(3574.96-t*(1073.77+t*707.56)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+t*(3211.1-t*(15327.97-t*(27814-t*(22569.18-t*6838.66)))))))+")"}function Bs(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}}const Y8=Bs(V("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725"));var N8=Bs(V("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),z8=Bs(V("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),H8=Bs(V("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));function K(t){return function(){return t}}var sf=Math.abs,wt=Math.atan2,Je=Math.cos,X8=Math.max,Io=Math.min,ue=Math.sin,Hn=Math.sqrt,Mt=1e-12,We=Math.PI,as=We/2,Ye=2*We;function G8(t){return t>1?0:t<-1?We:Math.acos(t)}function of(t){return t>=1?as:t<=-1?-as:Math.asin(t)}function B8(t){return t.innerRadius}function W8(t){return t.outerRadius}function O8(t){return t.startAngle}function F8(t){return t.endAngle}function U8(t){return t&&t.padAngle}function V8(t,e,n,i,a,r,s,o){var l=n-t,c=i-e,h=s-a,f=o-r,u=f*l-h*c;if(!(u*u<Mt))return u=(h*(e-r)-f*(t-a))/u,[t+u*l,e+u*c]}function Ba(t,e,n,i,a,r,s){var o=t-n,l=e-i,c=(s?r:-r)/Hn(o*o+l*l),h=c*l,f=-c*o,u=t+h,p=e+f,d=n+h,g=i+f,m=(u+d)/2,b=(p+g)/2,v=d-u,y=g-p,x=v*v+y*y,M=a-r,D=u*g-d*p,k=(y<0?-1:1)*Hn(X8(0,M*M*x-D*D)),I=(D*y-v*k)/x,C=(-D*v-y*k)/x,T=(D*y+v*k)/x,L=(-D*v+y*k)/x,_=I-m,A=C-b,P=T-m,S=L-b;return _*_+A*A>P*P+S*S&&(I=T,C=L),{cx:I,cy:C,x01:-h,y01:-f,x11:I*(a/M-1),y11:C*(a/M-1)}}function bg(){var t=B8,e=W8,n=K(0),i=null,a=O8,r=F8,s=U8,o=null;function l(){var c,h,f=+t.apply(this,arguments),u=+e.apply(this,arguments),p=a.apply(this,arguments)-as,d=r.apply(this,arguments)-as,g=sf(d-p),m=d>p;if(o||(o=c=qe()),u<f&&(h=u,u=f,f=h),!(u>Mt))o.moveTo(0,0);else if(g>Ye-Mt)o.moveTo(u*Je(p),u*ue(p)),o.arc(0,0,u,p,d,!m),f>Mt&&(o.moveTo(f*Je(d),f*ue(d)),o.arc(0,0,f,d,p,m));else{var b=p,v=d,y=p,x=d,M=g,D=g,k=s.apply(this,arguments)/2,I=k>Mt&&(i?+i.apply(this,arguments):Hn(f*f+u*u)),C=Io(sf(u-f)/2,+n.apply(this,arguments)),T=C,L=C,_,A;if(I>Mt){var P=of(I/f*ue(k)),S=of(I/u*ue(k));(M-=P*2)>Mt?(P*=m?1:-1,y+=P,x-=P):(M=0,y=x=(p+d)/2),(D-=S*2)>Mt?(S*=m?1:-1,b+=S,v-=S):(D=0,b=v=(p+d)/2)}var R=u*Je(b),z=u*ue(b),Y=f*Je(x),H=f*ue(x);if(C>Mt){var O=u*Je(v),F=u*ue(v),rt=f*Je(y),et=f*ue(y),J;if(g<We&&(J=V8(R,z,rt,et,O,F,Y,H))){var ft=R-J[0],Ft=z-J[1],Jt=O-J[0],jt=F-J[1],$=1/ue(G8((ft*Jt+Ft*jt)/(Hn(ft*ft+Ft*Ft)*Hn(Jt*Jt+jt*jt)))/2),U=Hn(J[0]*J[0]+J[1]*J[1]);T=Io(C,(f-U)/($-1)),L=Io(C,(u-U)/($+1))}}D>Mt?L>Mt?(_=Ba(rt,et,R,z,u,L,m),A=Ba(O,F,Y,H,u,L,m),o.moveTo(_.cx+_.x01,_.cy+_.y01),L<C?o.arc(_.cx,_.cy,L,wt(_.y01,_.x01),wt(A.y01,A.x01),!m):(o.arc(_.cx,_.cy,L,wt(_.y01,_.x01),wt(_.y11,_.x11),!m),o.arc(0,0,u,wt(_.cy+_.y11,_.cx+_.x11),wt(A.cy+A.y11,A.cx+A.x11),!m),o.arc(A.cx,A.cy,L,wt(A.y11,A.x11),wt(A.y01,A.x01),!m))):(o.moveTo(R,z),o.arc(0,0,u,b,v,!m)):o.moveTo(R,z),!(f>Mt)||!(M>Mt)?o.lineTo(Y,H):T>Mt?(_=Ba(Y,H,O,F,f,-T,m),A=Ba(R,z,rt,et,f,-T,m),o.lineTo(_.cx+_.x01,_.cy+_.y01),T<C?o.arc(_.cx,_.cy,T,wt(_.y01,_.x01),wt(A.y01,A.x01),!m):(o.arc(_.cx,_.cy,T,wt(_.y01,_.x01),wt(_.y11,_.x11),!m),o.arc(0,0,f,wt(_.cy+_.y11,_.cx+_.x11),wt(A.cy+A.y11,A.cx+A.x11),m),o.arc(A.cx,A.cy,T,wt(A.y11,A.x11),wt(A.y01,A.x01),!m))):o.arc(0,0,f,x,y,m)}if(o.closePath(),c)return o=null,c+""||null}return l.centroid=function(){var c=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,h=(+a.apply(this,arguments)+ +r.apply(this,arguments))/2-We/2;return[Je(h)*c,ue(h)*c]},l.innerRadius=function(c){return arguments.length?(t=typeof c=="function"?c:K(+c),l):t},l.outerRadius=function(c){return arguments.length?(e=typeof c=="function"?c:K(+c),l):e},l.cornerRadius=function(c){return arguments.length?(n=typeof c=="function"?c:K(+c),l):n},l.padRadius=function(c){return arguments.length?(i=c==null?null:typeof c=="function"?c:K(+c),l):i},l.startAngle=function(c){return arguments.length?(a=typeof c=="function"?c:K(+c),l):a},l.endAngle=function(c){return arguments.length?(r=typeof c=="function"?c:K(+c),l):r},l.padAngle=function(c){return arguments.length?(s=typeof c=="function"?c:K(+c),l):s},l.context=function(c){return arguments.length?(o=c??null,l):o},l}function yg(t){this._context=t}yg.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function Ws(t){return new yg(t)}function Gc(t){return t[0]}function Bc(t){return t[1]}function ha(){var t=Gc,e=Bc,n=K(!0),i=null,a=Ws,r=null;function s(o){var l,c=o.length,h,f=!1,u;for(i==null&&(r=a(u=qe())),l=0;l<=c;++l)!(l<c&&n(h=o[l],l,o))===f&&((f=!f)?r.lineStart():r.lineEnd()),f&&r.point(+t(h,l,o),+e(h,l,o));if(u)return r=null,u+""||null}return s.x=function(o){return arguments.length?(t=typeof o=="function"?o:K(+o),s):t},s.y=function(o){return arguments.length?(e=typeof o=="function"?o:K(+o),s):e},s.defined=function(o){return arguments.length?(n=typeof o=="function"?o:K(!!o),s):n},s.curve=function(o){return arguments.length?(a=o,i!=null&&(r=a(i)),s):a},s.context=function(o){return arguments.length?(o==null?i=r=null:r=a(i=o),s):i},s}function Wc(){var t=Gc,e=null,n=K(0),i=Bc,a=K(!0),r=null,s=Ws,o=null;function l(h){var f,u,p,d=h.length,g,m=!1,b,v=new Array(d),y=new Array(d);for(r==null&&(o=s(b=qe())),f=0;f<=d;++f){if(!(f<d&&a(g=h[f],f,h))===m)if(m=!m)u=f,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),p=f-1;p>=u;--p)o.point(v[p],y[p]);o.lineEnd(),o.areaEnd()}m&&(v[f]=+t(g,f,h),y[f]=+n(g,f,h),o.point(e?+e(g,f,h):v[f],i?+i(g,f,h):y[f]))}if(b)return o=null,b+""||null}function c(){return ha().defined(a).curve(s).context(r)}return l.x=function(h){return arguments.length?(t=typeof h=="function"?h:K(+h),e=null,l):t},l.x0=function(h){return arguments.length?(t=typeof h=="function"?h:K(+h),l):t},l.x1=function(h){return arguments.length?(e=h==null?null:typeof h=="function"?h:K(+h),l):e},l.y=function(h){return arguments.length?(n=typeof h=="function"?h:K(+h),i=null,l):n},l.y0=function(h){return arguments.length?(n=typeof h=="function"?h:K(+h),l):n},l.y1=function(h){return arguments.length?(i=h==null?null:typeof h=="function"?h:K(+h),l):i},l.lineX0=l.lineY0=function(){return c().x(t).y(n)},l.lineY1=function(){return c().x(t).y(i)},l.lineX1=function(){return c().x(e).y(n)},l.defined=function(h){return arguments.length?(a=typeof h=="function"?h:K(!!h),l):a},l.curve=function(h){return arguments.length?(s=h,r!=null&&(o=s(r)),l):s},l.context=function(h){return arguments.length?(h==null?r=o=null:o=s(r=h),l):r},l}function q8(t,e){return e<t?-1:e>t?1:e>=t?0:NaN}function Z8(t){return t}function vg(){var t=Z8,e=q8,n=null,i=K(0),a=K(Ye),r=K(0);function s(o){var l,c=o.length,h,f,u=0,p=new Array(c),d=new Array(c),g=+i.apply(this,arguments),m=Math.min(Ye,Math.max(-Ye,a.apply(this,arguments)-g)),b,v=Math.min(Math.abs(m)/c,r.apply(this,arguments)),y=v*(m<0?-1:1),x;for(l=0;l<c;++l)(x=d[p[l]=l]=+t(o[l],l,o))>0&&(u+=x);for(e!=null?p.sort(function(M,D){return e(d[M],d[D])}):n!=null&&p.sort(function(M,D){return n(o[M],o[D])}),l=0,f=u?(m-c*y)/u:0;l<c;++l,g=b)h=p[l],x=d[h],b=g+(x>0?x*f:0)+y,d[h]={data:o[h],index:l,value:x,startAngle:g,endAngle:b,padAngle:v};return d}return s.value=function(o){return arguments.length?(t=typeof o=="function"?o:K(+o),s):t},s.sortValues=function(o){return arguments.length?(e=o,n=null,s):e},s.sort=function(o){return arguments.length?(n=o,e=null,s):n},s.startAngle=function(o){return arguments.length?(i=typeof o=="function"?o:K(+o),s):i},s.endAngle=function(o){return arguments.length?(a=typeof o=="function"?o:K(+o),s):a},s.padAngle=function(o){return arguments.length?(r=typeof o=="function"?o:K(+o),s):r},s}var xg=Oc(Ws);function _g(t){this._curve=t}_g.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(t,e){this._curve.point(e*Math.sin(t),e*-Math.cos(t))}};function Oc(t){function e(n){return new _g(t(n))}return e._curve=t,e}function Yi(t){var e=t.curve;return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t.curve=function(n){return arguments.length?e(Oc(n)):e()._curve},t}function lf(){return Yi(ha().curve(xg))}function cf(){var t=Wc().curve(xg),e=t.curve,n=t.lineX0,i=t.lineX1,a=t.lineY0,r=t.lineY1;return t.angle=t.x,delete t.x,t.startAngle=t.x0,delete t.x0,t.endAngle=t.x1,delete t.x1,t.radius=t.y,delete t.y,t.innerRadius=t.y0,delete t.y0,t.outerRadius=t.y1,delete t.y1,t.lineStartAngle=function(){return Yi(n())},delete t.lineX0,t.lineEndAngle=function(){return Yi(i())},delete t.lineX1,t.lineInnerRadius=function(){return Yi(a())},delete t.lineY0,t.lineOuterRadius=function(){return Yi(r())},delete t.lineY1,t.curve=function(s){return arguments.length?e(Oc(s)):e()._curve},t}function Ni(t,e){return[(e=+e)*Math.cos(t-=Math.PI/2),e*Math.sin(t)]}var El=Array.prototype.slice;function K8(t){return t.source}function Q8(t){return t.target}function Fc(t){var e=K8,n=Q8,i=Gc,a=Bc,r=null;function s(){var o,l=El.call(arguments),c=e.apply(this,l),h=n.apply(this,l);if(r||(r=o=qe()),t(r,+i.apply(this,(l[0]=c,l)),+a.apply(this,l),+i.apply(this,(l[0]=h,l)),+a.apply(this,l)),o)return r=null,o+""||null}return s.source=function(o){return arguments.length?(e=o,s):e},s.target=function(o){return arguments.length?(n=o,s):n},s.x=function(o){return arguments.length?(i=typeof o=="function"?o:K(+o),s):i},s.y=function(o){return arguments.length?(a=typeof o=="function"?o:K(+o),s):a},s.context=function(o){return arguments.length?(r=o??null,s):r},s}function J8(t,e,n,i,a){t.moveTo(e,n),t.bezierCurveTo(e=(e+i)/2,n,e,a,i,a)}function j8(t,e,n,i,a){t.moveTo(e,n),t.bezierCurveTo(e,n=(n+a)/2,i,n,i,a)}function t6(t,e,n,i,a){var r=Ni(e,n),s=Ni(e,n=(n+a)/2),o=Ni(i,n),l=Ni(i,a);t.moveTo(r[0],r[1]),t.bezierCurveTo(s[0],s[1],o[0],o[1],l[0],l[1])}function e6(){return Fc(J8)}function n6(){return Fc(j8)}function i6(){var t=Fc(t6);return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t}const Uc={draw:function(t,e){var n=Math.sqrt(e/We);t.moveTo(n,0),t.arc(0,0,n,0,Ye)}},wg={draw:function(t,e){var n=Math.sqrt(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}};var Mg=Math.sqrt(1/3),a6=Mg*2;const kg={draw:function(t,e){var n=Math.sqrt(e/a6),i=n*Mg;t.moveTo(0,-n),t.lineTo(i,0),t.lineTo(0,n),t.lineTo(-i,0),t.closePath()}};var r6=.8908130915292852,Dg=Math.sin(We/10)/Math.sin(7*We/10),s6=Math.sin(Ye/10)*Dg,o6=-Math.cos(Ye/10)*Dg;const Sg={draw:function(t,e){var n=Math.sqrt(e*r6),i=s6*n,a=o6*n;t.moveTo(0,-n),t.lineTo(i,a);for(var r=1;r<5;++r){var s=Ye*r/5,o=Math.cos(s),l=Math.sin(s);t.lineTo(l*n,-o*n),t.lineTo(o*i-l*a,l*i+o*a)}t.closePath()}},Ag={draw:function(t,e){var n=Math.sqrt(e),i=-n/2;t.rect(i,i,n,n)}};var Ro=Math.sqrt(3);const Lg={draw:function(t,e){var n=-Math.sqrt(e/(Ro*3));t.moveTo(0,n*2),t.lineTo(-Ro*n,-n),t.lineTo(Ro*n,-n),t.closePath()}};var Ut=-.5,Vt=Math.sqrt(3)/2,$l=1/Math.sqrt(12),l6=($l/2+1)*3;const Cg={draw:function(t,e){var n=Math.sqrt(e/l6),i=n/2,a=n*$l,r=i,s=n*$l+n,o=-r,l=s;t.moveTo(i,a),t.lineTo(r,s),t.lineTo(o,l),t.lineTo(Ut*i-Vt*a,Vt*i+Ut*a),t.lineTo(Ut*r-Vt*s,Vt*r+Ut*s),t.lineTo(Ut*o-Vt*l,Vt*o+Ut*l),t.lineTo(Ut*i+Vt*a,Ut*a-Vt*i),t.lineTo(Ut*r+Vt*s,Ut*s-Vt*r),t.lineTo(Ut*o+Vt*l,Ut*l-Vt*o),t.closePath()}};var c6=[Uc,wg,kg,Ag,Sg,Lg,Cg];function h6(){var t=K(Uc),e=K(64),n=null;function i(){var a;if(n||(n=a=qe()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),a)return n=null,a+""||null}return i.type=function(a){return arguments.length?(t=typeof a=="function"?a:K(a),i):t},i.size=function(a){return arguments.length?(e=typeof a=="function"?a:K(+a),i):e},i.context=function(a){return arguments.length?(n=a??null,i):n},i}function Oe(){}function rs(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function Os(t){this._context=t}Os.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:rs(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:rs(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function u6(t){return new Os(t)}function Tg(t){this._context=t}Tg.prototype={areaStart:Oe,areaEnd:Oe,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:rs(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function f6(t){return new Tg(t)}function Ig(t){this._context=t}Ig.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,i=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,i):this._context.moveTo(n,i);break;case 3:this._point=4;default:rs(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function d6(t){return new Ig(t)}function Rg(t,e){this._basis=new Os(t),this._beta=e}Rg.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,e=this._y,n=t.length-1;if(n>0)for(var i=t[0],a=e[0],r=t[n]-i,s=e[n]-a,o=-1,l;++o<=n;)l=o/n,this._basis.point(this._beta*t[o]+(1-this._beta)*(i+l*r),this._beta*e[o]+(1-this._beta)*(a+l*s));this._x=this._y=null,this._basis.lineEnd()},point:function(t,e){this._x.push(+t),this._y.push(+e)}};const p6=function t(e){function n(i){return e===1?new Os(i):new Rg(i,e)}return n.beta=function(i){return t(+i)},n}(.85);function ss(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function Vc(t,e){this._context=t,this._k=(1-e)/6}Vc.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:ss(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:ss(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const g6=function t(e){function n(i){return new Vc(i,e)}return n.tension=function(i){return t(+i)},n}(0);function qc(t,e){this._context=t,this._k=(1-e)/6}qc.prototype={areaStart:Oe,areaEnd:Oe,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:ss(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const m6=function t(e){function n(i){return new qc(i,e)}return n.tension=function(i){return t(+i)},n}(0);function Zc(t,e){this._context=t,this._k=(1-e)/6}Zc.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:ss(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const b6=function t(e){function n(i){return new Zc(i,e)}return n.tension=function(i){return t(+i)},n}(0);function Kc(t,e,n){var i=t._x1,a=t._y1,r=t._x2,s=t._y2;if(t._l01_a>Mt){var o=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,l=3*t._l01_a*(t._l01_a+t._l12_a);i=(i*o-t._x0*t._l12_2a+t._x2*t._l01_2a)/l,a=(a*o-t._y0*t._l12_2a+t._y2*t._l01_2a)/l}if(t._l23_a>Mt){var c=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,h=3*t._l23_a*(t._l23_a+t._l12_a);r=(r*c+t._x1*t._l23_2a-e*t._l12_2a)/h,s=(s*c+t._y1*t._l23_2a-n*t._l12_2a)/h}t._context.bezierCurveTo(i,a,r,s,t._x2,t._y2)}function Pg(t,e){this._context=t,this._alpha=e}Pg.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,i=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:Kc(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const y6=function t(e){function n(i){return e?new Pg(i,e):new Vc(i,0)}return n.alpha=function(i){return t(+i)},n}(.5);function Eg(t,e){this._context=t,this._alpha=e}Eg.prototype={areaStart:Oe,areaEnd:Oe,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,i=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:Kc(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const v6=function t(e){function n(i){return e?new Eg(i,e):new qc(i,0)}return n.alpha=function(i){return t(+i)},n}(.5);function $g(t,e){this._context=t,this._alpha=e}$g.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,i=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Kc(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const x6=function t(e){function n(i){return e?new $g(i,e):new Zc(i,0)}return n.alpha=function(i){return t(+i)},n}(.5);function Yg(t){this._context=t}Yg.prototype={areaStart:Oe,areaEnd:Oe,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function _6(t){return new Yg(t)}function hf(t){return t<0?-1:1}function uf(t,e,n){var i=t._x1-t._x0,a=e-t._x1,r=(t._y1-t._y0)/(i||a<0&&-0),s=(n-t._y1)/(a||i<0&&-0),o=(r*a+s*i)/(i+a);return(hf(r)+hf(s))*Math.min(Math.abs(r),Math.abs(s),.5*Math.abs(o))||0}function ff(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function Po(t,e,n){var i=t._x0,a=t._y0,r=t._x1,s=t._y1,o=(r-i)/3;t._context.bezierCurveTo(i+o,a+o*e,r-o,s-o*n,r,s)}function os(t){this._context=t}os.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Po(this,this._t0,ff(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,Po(this,ff(this,n=uf(this,t,e)),n);break;default:Po(this,this._t0,n=uf(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function Ng(t){this._context=new zg(t)}(Ng.prototype=Object.create(os.prototype)).point=function(t,e){os.prototype.point.call(this,e,t)};function zg(t){this._context=t}zg.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,i,a,r){this._context.bezierCurveTo(e,t,i,n,r,a)}};function w6(t){return new os(t)}function M6(t){return new Ng(t)}function Hg(t){this._context=t}Hg.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var i=df(t),a=df(e),r=0,s=1;s<n;++r,++s)this._context.bezierCurveTo(i[0][r],a[0][r],i[1][r],a[1][r],t[s],e[s]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function df(t){var e,n=t.length-1,i,a=new Array(n),r=new Array(n),s=new Array(n);for(a[0]=0,r[0]=2,s[0]=t[0]+2*t[1],e=1;e<n-1;++e)a[e]=1,r[e]=4,s[e]=4*t[e]+2*t[e+1];for(a[n-1]=2,r[n-1]=7,s[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)i=a[e]/r[e-1],r[e]-=i,s[e]-=i*s[e-1];for(a[n-1]=s[n-1]/r[n-1],e=n-2;e>=0;--e)a[e]=(s[e]-a[e+1])/r[e];for(r[n-1]=(t[n]+a[n-1])/2,e=0;e<n-1;++e)r[e]=2*t[e+1]-a[e+1];return[a,r]}function k6(t){return new Hg(t)}function Fs(t,e){this._context=t,this._t=e}Fs.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function D6(t){return new Fs(t,.5)}function S6(t){return new Fs(t,0)}function A6(t){return new Fs(t,1)}function ni(t,e){if((s=t.length)>1)for(var n=1,i,a,r=t[e[0]],s,o=r.length;n<s;++n)for(a=r,r=t[e[n]],i=0;i<o;++i)r[i][1]+=r[i][0]=isNaN(a[i][1])?a[i][0]:a[i][1]}function ii(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function L6(t,e){return t[e]}function C6(){var t=K([]),e=ii,n=ni,i=L6;function a(r){var s=t.apply(this,arguments),o,l=r.length,c=s.length,h=new Array(c),f;for(o=0;o<c;++o){for(var u=s[o],p=h[o]=new Array(l),d=0,g;d<l;++d)p[d]=g=[0,+i(r[d],u,d,r)],g.data=r[d];p.key=u}for(o=0,f=e(h);o<c;++o)h[f[o]].index=o;return n(h,f),h}return a.keys=function(r){return arguments.length?(t=typeof r=="function"?r:K(El.call(r)),a):t},a.value=function(r){return arguments.length?(i=typeof r=="function"?r:K(+r),a):i},a.order=function(r){return arguments.length?(e=r==null?ii:typeof r=="function"?r:K(El.call(r)),a):e},a.offset=function(r){return arguments.length?(n=r??ni,a):n},a}function T6(t,e){if((i=t.length)>0){for(var n,i,a=0,r=t[0].length,s;a<r;++a){for(s=n=0;n<i;++n)s+=t[n][a][1]||0;if(s)for(n=0;n<i;++n)t[n][a][1]/=s}ni(t,e)}}function I6(t,e){if((l=t.length)>0)for(var n,i=0,a,r,s,o,l,c=t[e[0]].length;i<c;++i)for(s=o=0,n=0;n<l;++n)(r=(a=t[e[n]][i])[1]-a[0])>0?(a[0]=s,a[1]=s+=r):r<0?(a[1]=o,a[0]=o+=r):(a[0]=0,a[1]=r)}function R6(t,e){if((a=t.length)>0){for(var n=0,i=t[e[0]],a,r=i.length;n<r;++n){for(var s=0,o=0;s<a;++s)o+=t[s][n][1]||0;i[n][1]+=i[n][0]=-o/2}ni(t,e)}}function P6(t,e){if(!(!((s=t.length)>0)||!((r=(a=t[e[0]]).length)>0))){for(var n=0,i=1,a,r,s;i<r;++i){for(var o=0,l=0,c=0;o<s;++o){for(var h=t[e[o]],f=h[i][1]||0,u=h[i-1][1]||0,p=(f-u)/2,d=0;d<o;++d){var g=t[e[d]],m=g[i][1]||0,b=g[i-1][1]||0;p+=m-b}l+=f,c+=p*f}a[i-1][1]+=a[i-1][0]=n,l&&(n-=c/l)}a[i-1][1]+=a[i-1][0]=n,ni(t,e)}}function Xg(t){var e=t.map(E6);return ii(t).sort(function(n,i){return e[n]-e[i]})}function E6(t){for(var e=-1,n=0,i=t.length,a,r=-1/0;++e<i;)(a=+t[e][1])>r&&(r=a,n=e);return n}function Gg(t){var e=t.map(Bg);return ii(t).sort(function(n,i){return e[n]-e[i]})}function Bg(t){for(var e=0,n=-1,i=t.length,a;++n<i;)(a=+t[n][1])&&(e+=a);return e}function $6(t){return Gg(t).reverse()}function Y6(t){var e=t.length,n,i,a=t.map(Bg),r=Xg(t),s=0,o=0,l=[],c=[];for(n=0;n<e;++n)i=r[n],s<o?(s+=a[i],l.push(i)):(o+=a[i],c.push(i));return c.reverse().concat(l)}function N6(t){return ii(t).reverse()}function pf(t){return function(){return t}}function z6(t){return t[0]}function H6(t){return t[1]}function ls(){this._=null}function Us(t){t.U=t.C=t.L=t.R=t.P=t.N=null}ls.prototype={constructor:ls,insert:function(t,e){var n,i,a;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;n=t}else this._?(t=gf(this._),e.P=null,e.N=t,t.P=t.L=e,n=t):(e.P=e.N=null,this._=e,n=null);for(e.L=e.R=null,e.U=n,e.C=!0,t=e;n&&n.C;)i=n.U,n===i.L?(a=i.R,a&&a.C?(n.C=a.C=!1,i.C=!0,t=i):(t===n.R&&(yi(this,n),t=n,n=t.U),n.C=!1,i.C=!0,vi(this,i))):(a=i.L,a&&a.C?(n.C=a.C=!1,i.C=!0,t=i):(t===n.L&&(vi(this,n),t=n,n=t.U),n.C=!1,i.C=!0,yi(this,i))),n=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e=t.U,n,i=t.L,a=t.R,r,s;if(i?a?r=gf(a):r=i:r=a,e?e.L===t?e.L=r:e.R=r:this._=r,i&&a?(s=r.C,r.C=t.C,r.L=i,i.U=r,r!==a?(e=r.U,r.U=t.U,t=r.R,e.L=t,r.R=a,a.U=r):(r.U=e,e=r,t=r.R)):(s=t.C,t=r),t&&(t.U=e),!s){if(t&&t.C){t.C=!1;return}do{if(t===this._)break;if(t===e.L){if(n=e.R,n.C&&(n.C=!1,e.C=!0,yi(this,e),n=e.R),n.L&&n.L.C||n.R&&n.R.C){(!n.R||!n.R.C)&&(n.L.C=!1,n.C=!0,vi(this,n),n=e.R),n.C=e.C,e.C=n.R.C=!1,yi(this,e),t=this._;break}}else if(n=e.L,n.C&&(n.C=!1,e.C=!0,vi(this,e),n=e.L),n.L&&n.L.C||n.R&&n.R.C){(!n.L||!n.L.C)&&(n.R.C=!1,n.C=!0,yi(this,n),n=e.L),n.C=e.C,e.C=n.L.C=!1,vi(this,e),t=this._;break}n.C=!0,t=e,e=e.U}while(!t.C);t&&(t.C=!1)}}};function yi(t,e){var n=e,i=e.R,a=n.U;a?a.L===n?a.L=i:a.R=i:t._=i,i.U=a,n.U=i,n.R=i.L,n.R&&(n.R.U=n),i.L=n}function vi(t,e){var n=e,i=e.L,a=n.U;a?a.L===n?a.L=i:a.R=i:t._=i,i.U=a,n.U=i,n.L=i.R,n.L&&(n.L.U=n),i.R=n}function gf(t){for(;t.L;)t=t.L;return t}function zi(t,e,n,i){var a=[null,null],r=kt.push(a)-1;return a.left=t,a.right=e,n&&cs(a,t,e,n),i&&cs(a,e,t,i),Gt[t.index].halfedges.push(r),Gt[e.index].halfedges.push(r),a}function xi(t,e,n){var i=[e,n];return i.left=t,i}function cs(t,e,n,i){!t[0]&&!t[1]?(t[0]=i,t.left=e,t.right=n):t.left===n?t[1]=i:t[0]=i}function X6(t,e,n,i,a){var r=t[0],s=t[1],o=r[0],l=r[1],c=s[0],h=s[1],f=0,u=1,p=c-o,d=h-l,g;if(g=e-o,!(!p&&g>0)){if(g/=p,p<0){if(g<f)return;g<u&&(u=g)}else if(p>0){if(g>u)return;g>f&&(f=g)}if(g=i-o,!(!p&&g<0)){if(g/=p,p<0){if(g>u)return;g>f&&(f=g)}else if(p>0){if(g<f)return;g<u&&(u=g)}if(g=n-l,!(!d&&g>0)){if(g/=d,d<0){if(g<f)return;g<u&&(u=g)}else if(d>0){if(g>u)return;g>f&&(f=g)}if(g=a-l,!(!d&&g<0)){if(g/=d,d<0){if(g>u)return;g>f&&(f=g)}else if(d>0){if(g<f)return;g<u&&(u=g)}return!(f>0)&&!(u<1)||(f>0&&(t[0]=[o+f*p,l+f*d]),u<1&&(t[1]=[o+u*p,l+u*d])),!0}}}}}function G6(t,e,n,i,a){var r=t[1];if(r)return!0;var s=t[0],o=t.left,l=t.right,c=o[0],h=o[1],f=l[0],u=l[1],p=(c+f)/2,d=(h+u)/2,g,m;if(u===h){if(p<e||p>=i)return;if(c>f){if(!s)s=[p,n];else if(s[1]>=a)return;r=[p,a]}else{if(!s)s=[p,a];else if(s[1]<n)return;r=[p,n]}}else if(g=(c-f)/(u-h),m=d-g*p,g<-1||g>1)if(c>f){if(!s)s=[(n-m)/g,n];else if(s[1]>=a)return;r=[(a-m)/g,a]}else{if(!s)s=[(a-m)/g,a];else if(s[1]<n)return;r=[(n-m)/g,n]}else if(h<u){if(!s)s=[e,g*e+m];else if(s[0]>=i)return;r=[i,g*i+m]}else{if(!s)s=[i,g*i+m];else if(s[0]<e)return;r=[e,g*e+m]}return t[0]=s,t[1]=r,!0}function B6(t,e,n,i){for(var a=kt.length,r;a--;)(!G6(r=kt[a],t,e,n,i)||!X6(r,t,e,n,i)||!(Math.abs(r[0][0]-r[1][0])>nt||Math.abs(r[0][1]-r[1][1])>nt))&&delete kt[a]}function W6(t){return Gt[t.index]={site:t,halfedges:[]}}function O6(t,e){var n=t.site,i=e.left,a=e.right;return n===a&&(a=i,i=n),a?Math.atan2(a[1]-i[1],a[0]-i[0]):(n===i?(i=e[1],a=e[0]):(i=e[0],a=e[1]),Math.atan2(i[0]-a[0],a[1]-i[1]))}function Wg(t,e){return e[+(e.left!==t.site)]}function F6(t,e){return e[+(e.left===t.site)]}function U6(){for(var t=0,e=Gt.length,n,i,a,r;t<e;++t)if((n=Gt[t])&&(r=(i=n.halfedges).length)){var s=new Array(r),o=new Array(r);for(a=0;a<r;++a)s[a]=a,o[a]=O6(n,kt[i[a]]);for(s.sort(function(l,c){return o[c]-o[l]}),a=0;a<r;++a)o[a]=i[s[a]];for(a=0;a<r;++a)i[a]=o[a]}}function V6(t,e,n,i){var a=Gt.length,r,s,o,l,c,h,f,u,p,d,g,m,b=!0;for(r=0;r<a;++r)if(s=Gt[r]){for(o=s.site,c=s.halfedges,l=c.length;l--;)kt[c[l]]||c.splice(l,1);for(l=0,h=c.length;l<h;)d=F6(s,kt[c[l]]),g=d[0],m=d[1],f=Wg(s,kt[c[++l%h]]),u=f[0],p=f[1],(Math.abs(g-u)>nt||Math.abs(m-p)>nt)&&(c.splice(l,0,kt.push(xi(o,d,Math.abs(g-t)<nt&&i-m>nt?[t,Math.abs(u-t)<nt?p:i]:Math.abs(m-i)<nt&&n-g>nt?[Math.abs(p-i)<nt?u:n,i]:Math.abs(g-n)<nt&&m-e>nt?[n,Math.abs(u-n)<nt?p:e]:Math.abs(m-e)<nt&&g-t>nt?[Math.abs(p-e)<nt?u:t,e]:null))-1),++h);h&&(b=!1)}if(b){var v,y,x,M=1/0;for(r=0,b=null;r<a;++r)(s=Gt[r])&&(o=s.site,v=o[0]-t,y=o[1]-e,x=v*v+y*y,x<M&&(M=x,b=s));if(b){var D=[t,e],k=[t,i],I=[n,i],C=[n,e];b.halfedges.push(kt.push(xi(o=b.site,D,k))-1,kt.push(xi(o,k,I))-1,kt.push(xi(o,I,C))-1,kt.push(xi(o,C,D))-1)}}for(r=0;r<a;++r)(s=Gt[r])&&(s.halfedges.length||delete Gt[r])}var Og=[],Qc;function q6(){Us(this),this.x=this.y=this.arc=this.site=this.cy=null}function Xn(t){var e=t.P,n=t.N;if(!(!e||!n)){var i=e.site,a=t.site,r=n.site;if(i!==r){var s=a[0],o=a[1],l=i[0]-s,c=i[1]-o,h=r[0]-s,f=r[1]-o,u=2*(l*f-c*h);if(!(u>=-j6)){var p=l*l+c*c,d=h*h+f*f,g=(f*p-c*d)/u,m=(l*d-h*p)/u,b=Og.pop()||new q6;b.arc=t,b.site=a,b.x=g+s,b.y=(b.cy=m+o)+Math.sqrt(g*g+m*m),t.circle=b;for(var v=null,y=ua._;y;)if(b.y<y.y||b.y===y.y&&b.x<=y.x)if(y.L)y=y.L;else{v=y.P;break}else if(y.R)y=y.R;else{v=y;break}ua.insert(v,b),v||(Qc=b)}}}}function Fn(t){var e=t.circle;e&&(e.P||(Qc=e.N),ua.remove(e),Og.push(e),Us(e),t.circle=null)}var Fg=[];function Z6(){Us(this),this.edge=this.site=this.circle=null}function mf(t){var e=Fg.pop()||new Z6;return e.site=t,e}function Eo(t){Fn(t),Un.remove(t),Fg.push(t),Us(t)}function K6(t){var e=t.circle,n=e.x,i=e.cy,a=[n,i],r=t.P,s=t.N,o=[t];Eo(t);for(var l=r;l.circle&&Math.abs(n-l.circle.x)<nt&&Math.abs(i-l.circle.cy)<nt;)r=l.P,o.unshift(l),Eo(l),l=r;o.unshift(l),Fn(l);for(var c=s;c.circle&&Math.abs(n-c.circle.x)<nt&&Math.abs(i-c.circle.cy)<nt;)s=c.N,o.push(c),Eo(c),c=s;o.push(c),Fn(c);var h=o.length,f;for(f=1;f<h;++f)c=o[f],l=o[f-1],cs(c.edge,l.site,c.site,a);l=o[0],c=o[h-1],c.edge=zi(l.site,c.site,null,a),Xn(l),Xn(c)}function Q6(t){for(var e=t[0],n=t[1],i,a,r,s,o=Un._;o;)if(r=Ug(o,n)-e,r>nt)o=o.L;else if(s=e-J6(o,n),s>nt){if(!o.R){i=o;break}o=o.R}else{r>-nt?(i=o.P,a=o):s>-nt?(i=o,a=o.N):i=a=o;break}W6(t);var l=mf(t);if(Un.insert(i,l),!(!i&&!a)){if(i===a){Fn(i),a=mf(i.site),Un.insert(l,a),l.edge=a.edge=zi(i.site,l.site),Xn(i),Xn(a);return}if(!a){l.edge=zi(i.site,l.site);return}Fn(i),Fn(a);var c=i.site,h=c[0],f=c[1],u=t[0]-h,p=t[1]-f,d=a.site,g=d[0]-h,m=d[1]-f,b=2*(u*m-p*g),v=u*u+p*p,y=g*g+m*m,x=[(m*v-p*y)/b+h,(u*y-g*v)/b+f];cs(a.edge,c,d,x),l.edge=zi(c,t,null,x),a.edge=zi(t,d,null,x),Xn(i),Xn(a)}}function Ug(t,e){var n=t.site,i=n[0],a=n[1],r=a-e;if(!r)return i;var s=t.P;if(!s)return-1/0;n=s.site;var o=n[0],l=n[1],c=l-e;if(!c)return o;var h=o-i,f=1/r-1/c,u=h/c;return f?(-u+Math.sqrt(u*u-2*f*(h*h/(-2*c)-l+c/2+a-r/2)))/f+i:(i+o)/2}function J6(t,e){var n=t.N;if(n)return Ug(n,e);var i=t.site;return i[1]===e?i[0]:1/0}var nt=1e-6,j6=1e-12,Un,Gt,ua,kt;function t4(t,e,n){return(t[0]-n[0])*(e[1]-t[1])-(t[0]-e[0])*(n[1]-t[1])}function e4(t,e){return e[1]-t[1]||e[0]-t[0]}function Yl(t,e){var n=t.sort(e4).pop(),i,a,r;for(kt=[],Gt=new Array(t.length),Un=new ls,ua=new ls;;)if(r=Qc,n&&(!r||n[1]<r.y||n[1]===r.y&&n[0]<r.x))(n[0]!==i||n[1]!==a)&&(Q6(n),i=n[0],a=n[1]),n=t.pop();else if(r)K6(r.arc);else break;if(U6(),e){var s=+e[0][0],o=+e[0][1],l=+e[1][0],c=+e[1][1];B6(s,o,l,c),V6(s,o,l,c)}this.edges=kt,this.cells=Gt,Un=ua=kt=Gt=null}Yl.prototype={constructor:Yl,polygons:function(){var t=this.edges;return this.cells.map(function(e){var n=e.halfedges.map(function(i){return Wg(e,t[i])});return n.data=e.site.data,n})},triangles:function(){var t=[],e=this.edges;return this.cells.forEach(function(n,i){if(o=(r=n.halfedges).length)for(var a=n.site,r,s=-1,o,l,c=e[r[o-1]],h=c.left===a?c.right:c.left;++s<o;)l=h,c=e[r[s]],h=c.left===a?c.right:c.left,l&&h&&i<l.index&&i<h.index&&t4(a,l,h)<0&&t.push([a.data,l.data,h.data])}),t},links:function(){return this.edges.filter(function(t){return t.right}).map(function(t){return{source:t.left.data,target:t.right.data}})},find:function(t,e,n){for(var i=this,a,r=i._found||0,s=i.cells.length,o;!(o=i.cells[r]);)if(++r>=s)return null;var l=t-o.site[0],c=e-o.site[1],h=l*l+c*c;do o=i.cells[a=r],r=null,o.halfedges.forEach(function(f){var u=i.edges[f],p=u.left;if(!((p===o.site||!p)&&!(p=u.right))){var d=t-p[0],g=e-p[1],m=d*d+g*g;m<h&&(h=m,r=p.index)}});while(r!==null);return i._found=a,n==null||h<=n*n?o.site:null}};function n4(){var t=z6,e=H6,n=null;function i(a){return new Yl(a.map(function(r,s){var o=[Math.round(t(r,s,a)/nt)*nt,Math.round(e(r,s,a)/nt)*nt];return o.index=s,o.data=r,o}),n)}return i.polygons=function(a){return i(a).polygons()},i.links=function(a){return i(a).links()},i.triangles=function(a){return i(a).triangles()},i.x=function(a){return arguments.length?(t=typeof a=="function"?a:pf(+a),i):t},i.y=function(a){return arguments.length?(e=typeof a=="function"?a:pf(+a),i):e},i.extent=function(a){return arguments.length?(n=a==null?null:[[+a[0][0],+a[0][1]],[+a[1][0],+a[1][1]]],i):n&&[[n[0][0],n[0][1]],[n[1][0],n[1][1]]]},i.size=function(a){return arguments.length?(n=a==null?null:[[0,0],[+a[0],+a[1]]],i):n&&[n[1][0]-n[0][0],n[1][1]-n[0][1]]},i}function Wa(t){return function(){return t}}function i4(t,e,n){this.target=t,this.type=e,this.transform=n}function ke(t,e,n){this.k=t,this.x=e,this.y=n}ke.prototype={constructor:ke,scale:function(t){return t===1?this:new ke(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new ke(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Vs=new ke(1,0,0);Vg.prototype=ke.prototype;function Vg(t){for(;!t.__zoom;)if(!(t=t.parentNode))return Vs;return t.__zoom}function $o(){w.stopImmediatePropagation()}function _i(){w.preventDefault(),w.stopImmediatePropagation()}function a4(){return!w.ctrlKey&&!w.button}function r4(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function bf(){return this.__zoom||Vs}function s4(){return-w.deltaY*(w.deltaMode===1?.05:w.deltaMode?1:.002)}function o4(){return navigator.maxTouchPoints||"ontouchstart"in this}function l4(t,e,n){var i=t.invertX(e[0][0])-n[0][0],a=t.invertX(e[1][0])-n[1][0],r=t.invertY(e[0][1])-n[0][1],s=t.invertY(e[1][1])-n[1][1];return t.translate(a>i?(i+a)/2:Math.min(0,i)||Math.max(0,a),s>r?(r+s)/2:Math.min(0,r)||Math.max(0,s))}function c4(){var t=a4,e=r4,n=l4,i=s4,a=o4,r=[0,1/0],s=[[-1/0,-1/0],[1/0,1/0]],o=250,l=xd,c=wn("start","zoom","end"),h,f,u=500,p=150,d=0;function g(_){_.property("__zoom",bf).on("wheel.zoom",D).on("mousedown.zoom",k).on("dblclick.zoom",I).filter(a).on("touchstart.zoom",C).on("touchmove.zoom",T).on("touchend.zoom touchcancel.zoom",L).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}g.transform=function(_,A,P){var S=_.selection?_.selection():_;S.property("__zoom",bf),_!==S?y(_,A,P):S.interrupt().each(function(){x(this,arguments).start().zoom(null,typeof A=="function"?A.apply(this,arguments):A).end()})},g.scaleBy=function(_,A,P){g.scaleTo(_,function(){var S=this.__zoom.k,R=typeof A=="function"?A.apply(this,arguments):A;return S*R},P)},g.scaleTo=function(_,A,P){g.transform(_,function(){var S=e.apply(this,arguments),R=this.__zoom,z=P==null?v(S):typeof P=="function"?P.apply(this,arguments):P,Y=R.invert(z),H=typeof A=="function"?A.apply(this,arguments):A;return n(b(m(R,H),z,Y),S,s)},P)},g.translateBy=function(_,A,P){g.transform(_,function(){return n(this.__zoom.translate(typeof A=="function"?A.apply(this,arguments):A,typeof P=="function"?P.apply(this,arguments):P),e.apply(this,arguments),s)})},g.translateTo=function(_,A,P,S){g.transform(_,function(){var R=e.apply(this,arguments),z=this.__zoom,Y=S==null?v(R):typeof S=="function"?S.apply(this,arguments):S;return n(Vs.translate(Y[0],Y[1]).scale(z.k).translate(typeof A=="function"?-A.apply(this,arguments):-A,typeof P=="function"?-P.apply(this,arguments):-P),R,s)},S)};function m(_,A){return A=Math.max(r[0],Math.min(r[1],A)),A===_.k?_:new ke(A,_.x,_.y)}function b(_,A,P){var S=A[0]-P[0]*_.k,R=A[1]-P[1]*_.k;return S===_.x&&R===_.y?_:new ke(_.k,S,R)}function v(_){return[(+_[0][0]+ +_[1][0])/2,(+_[0][1]+ +_[1][1])/2]}function y(_,A,P){_.on("start.zoom",function(){x(this,arguments).start()}).on("interrupt.zoom end.zoom",function(){x(this,arguments).end()}).tween("zoom",function(){var S=this,R=arguments,z=x(S,R),Y=e.apply(S,R),H=P==null?v(Y):typeof P=="function"?P.apply(S,R):P,O=Math.max(Y[1][0]-Y[0][0],Y[1][1]-Y[0][1]),F=S.__zoom,rt=typeof A=="function"?A.apply(S,R):A,et=l(F.invert(H).concat(O/F.k),rt.invert(H).concat(O/rt.k));return function(J){if(J===1)J=rt;else{var ft=et(J),Ft=O/ft[2];J=new ke(Ft,H[0]-ft[0]*Ft,H[1]-ft[1]*Ft)}z.zoom(null,J)}})}function x(_,A,P){return!P&&_.__zooming||new M(_,A)}function M(_,A){this.that=_,this.args=A,this.active=0,this.extent=e.apply(_,A),this.taps=0}M.prototype={start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(_,A){return this.mouse&&_!=="mouse"&&(this.mouse[1]=A.invert(this.mouse[0])),this.touch0&&_!=="touch"&&(this.touch0[1]=A.invert(this.touch0[0])),this.touch1&&_!=="touch"&&(this.touch1[1]=A.invert(this.touch1[0])),this.that.__zoom=A,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(_){Ui(new i4(g,_,this.that.__zoom),c.apply,c,[_,this.that,this.args])}};function D(){if(!t.apply(this,arguments))return;var _=x(this,arguments),A=this.__zoom,P=Math.max(r[0],Math.min(r[1],A.k*Math.pow(2,i.apply(this,arguments)))),S=an(this);if(_.wheel)(_.mouse[0][0]!==S[0]||_.mouse[0][1]!==S[1])&&(_.mouse[1]=A.invert(_.mouse[0]=S)),clearTimeout(_.wheel);else{if(A.k===P)return;_.mouse=[S,A.invert(S)],sn(this),_.start()}_i(),_.wheel=setTimeout(R,p),_.zoom("mouse",n(b(m(A,P),_.mouse[0],_.mouse[1]),_.extent,s));function R(){_.wheel=null,_.end()}}function k(){if(f||!t.apply(this,arguments))return;var _=x(this,arguments,!0),A=W(w.view).on("mousemove.zoom",z,!0).on("mouseup.zoom",Y,!0),P=an(this),S=w.clientX,R=w.clientY;vs(w.view),$o(),_.mouse=[P,this.__zoom.invert(P)],sn(this),_.start();function z(){if(_i(),!_.moved){var H=w.clientX-S,O=w.clientY-R;_.moved=H*H+O*O>d}_.zoom("mouse",n(b(_.that.__zoom,_.mouse[0]=an(_.that),_.mouse[1]),_.extent,s))}function Y(){A.on("mousemove.zoom mouseup.zoom",null),xs(w.view,_.moved),_i(),_.end()}}function I(){if(t.apply(this,arguments)){var _=this.__zoom,A=an(this),P=_.invert(A),S=_.k*(w.shiftKey?.5:2),R=n(b(m(_,S),A,P),e.apply(this,arguments),s);_i(),o>0?W(this).transition().duration(o).call(y,R,A):W(this).call(g.transform,R)}}function C(){if(t.apply(this,arguments)){var _=w.touches,A=_.length,P=x(this,arguments,w.changedTouches.length===A),S,R,z,Y;for($o(),R=0;R<A;++R)z=_[R],Y=Vi(this,_,z.identifier),Y=[Y,this.__zoom.invert(Y),z.identifier],P.touch0?!P.touch1&&P.touch0[2]!==Y[2]&&(P.touch1=Y,P.taps=0):(P.touch0=Y,S=!0,P.taps=1+!!h);h&&(h=clearTimeout(h)),S&&(P.taps<2&&(h=setTimeout(function(){h=null},u)),sn(this),P.start())}}function T(){if(this.__zooming){var _=x(this,arguments),A=w.changedTouches,P=A.length,S,R,z,Y;for(_i(),h&&(h=clearTimeout(h)),_.taps=0,S=0;S<P;++S)R=A[S],z=Vi(this,A,R.identifier),_.touch0&&_.touch0[2]===R.identifier?_.touch0[0]=z:_.touch1&&_.touch1[2]===R.identifier&&(_.touch1[0]=z);if(R=_.that.__zoom,_.touch1){var H=_.touch0[0],O=_.touch0[1],F=_.touch1[0],rt=_.touch1[1],et=(et=F[0]-H[0])*et+(et=F[1]-H[1])*et,J=(J=rt[0]-O[0])*J+(J=rt[1]-O[1])*J;R=m(R,Math.sqrt(et/J)),z=[(H[0]+F[0])/2,(H[1]+F[1])/2],Y=[(O[0]+rt[0])/2,(O[1]+rt[1])/2]}else if(_.touch0)z=_.touch0[0],Y=_.touch0[1];else return;_.zoom("touch",n(b(R,z,Y),_.extent,s))}}function L(){if(this.__zooming){var _=x(this,arguments),A=w.changedTouches,P=A.length,S,R;for($o(),f&&clearTimeout(f),f=setTimeout(function(){f=null},u),S=0;S<P;++S)R=A[S],_.touch0&&_.touch0[2]===R.identifier?delete _.touch0:_.touch1&&_.touch1[2]===R.identifier&&delete _.touch1;if(_.touch1&&!_.touch0&&(_.touch0=_.touch1,delete _.touch1),_.touch0)_.touch0[1]=this.__zoom.invert(_.touch0[0]);else if(_.end(),_.taps===2){var z=W(this).on("dblclick.zoom");z&&z.apply(this,arguments)}}}return g.wheelDelta=function(_){return arguments.length?(i=typeof _=="function"?_:Wa(+_),g):i},g.filter=function(_){return arguments.length?(t=typeof _=="function"?_:Wa(!!_),g):t},g.touchable=function(_){return arguments.length?(a=typeof _=="function"?_:Wa(!!_),g):a},g.extent=function(_){return arguments.length?(e=typeof _=="function"?_:Wa([[+_[0][0],+_[0][1]],[+_[1][0],+_[1][1]]]),g):e},g.scaleExtent=function(_){return arguments.length?(r[0]=+_[0],r[1]=+_[1],g):[r[0],r[1]]},g.translateExtent=function(_){return arguments.length?(s[0][0]=+_[0][0],s[1][0]=+_[1][0],s[0][1]=+_[0][1],s[1][1]=+_[1][1],g):[[s[0][0],s[0][1]],[s[1][0],s[1][1]]]},g.constrain=function(_){return arguments.length?(n=_,g):n},g.duration=function(_){return arguments.length?(o=+_,g):o},g.interpolate=function(_){return arguments.length?(l=_,g):l},g.on=function(){var _=c.on.apply(c,arguments);return _===c?g:_},g.clickDistance=function(_){return arguments.length?(d=(_=+_)*_,g):Math.sqrt(d)},g}const h4=Object.freeze(Object.defineProperty({__proto__:null,FormatSpecifier:Is,active:Nv,arc:bg,area:Wc,areaRadial:cf,ascending:Ue,autoType:Gx,axisBottom:ps,axisLeft:gs,axisRight:Yf,axisTop:Um,bisect:ze,bisectLeft:wm,bisectRight:ze,bisector:Hl,blob:Ox,brush:Kv,brushSelection:Vv,brushX:qv,brushY:Zv,buffer:Ux,chord:Jv,clientPoint:ys,cluster:ew,color:Xe,contourDensity:Dx,contours:Nd,create:gb,creator:ms,cross:km,csv:Zx,csvFormat:Tx,csvFormatBody:Ix,csvFormatRow:Px,csvFormatRows:Rx,csvFormatValue:Ex,csvParse:Hd,csvParseRows:Cx,cubehelix:re,curveBasis:u6,curveBasisClosed:f6,curveBasisOpen:d6,curveBundle:p6,curveCardinal:g6,curveCardinalClosed:m6,curveCardinalOpen:b6,curveCatmullRom:y6,curveCatmullRomClosed:v6,curveCatmullRomOpen:x6,curveLinear:Ws,curveLinearClosed:_6,curveMonotoneX:w6,curveMonotoneY:M6,curveNatural:k6,curveStep:D6,curveStepAfter:A6,curveStepBefore:S6,customEvent:Ui,descending:Dm,deviation:If,dispatch:wn,drag:Uf,dragDisable:vs,dragEnable:xs,dsv:qx,dsvFormat:Ls,easeBack:Th,easeBackIn:Tv,easeBackInOut:Th,easeBackOut:Iv,easeBounce:ji,easeBounceIn:Lv,easeBounceInOut:Cv,easeBounceOut:ji,easeCircle:Ch,easeCircleIn:yv,easeCircleInOut:Ch,easeCircleOut:vv,easeCubic:el,easeCubicIn:hv,easeCubicInOut:el,easeCubicOut:uv,easeElastic:fn,easeElasticIn:Rv,easeElasticInOut:Pv,easeElasticOut:fn,easeExp:Lh,easeExpIn:mv,easeExpInOut:Lh,easeExpOut:bv,easeLinear:ov,easePoly:Sh,easePolyIn:fv,easePolyInOut:Sh,easePolyOut:dv,easeQuad:Dh,easeQuadIn:lv,easeQuadInOut:Dh,easeQuadOut:cv,easeSin:Ah,easeSinIn:pv,easeSinInOut:Ah,easeSinOut:gv,entries:fx,get event(){return w},extent:Xl,forceCenter:i2,forceCollide:Wd,forceLink:M2,forceManyBody:Fd,forceRadial:L2,forceSimulation:Od,forceX:cr,forceY:hr,get format(){return ga},formatDefaultLocale:qd,formatLocale:Vd,get formatPrefix(){return hc},formatSpecifier:ea,geoAlbers:R0,geoAlbersUsa:P_,geoArea:z2,geoAzimuthalEqualArea:E_,geoAzimuthalEqualAreaRaw:xc,geoAzimuthalEquidistant:$_,geoAzimuthalEquidistantRaw:_c,geoBounds:B2,geoCentroid:q2,geoCircle:Z2,geoClipAntimeridian:yl,geoClipCircle:m0,geoClipExtent:n_,geoClipRectangle:Rs,geoConicConformal:N_,geoConicConformalRaw:$0,geoConicEqualArea:Zr,geoConicEqualAreaRaw:I0,geoConicEquidistant:H_,geoConicEquidistantRaw:Y0,geoContains:c_,geoDistance:Gr,geoEqualEarth:G_,geoEqualEarthRaw:wc,geoEquirectangular:z_,geoEquirectangularRaw:aa,geoGnomonic:B_,geoGnomonicRaw:Mc,geoGraticule:v0,geoGraticule10:h_,geoIdentity:W_,geoInterpolate:u_,geoLength:b0,geoMercator:Y_,geoMercatorRaw:va,geoNaturalEarth1:O_,geoNaturalEarth1Raw:kc,geoOrthographic:F_,geoOrthographicRaw:Dc,geoPath:M_,geoProjection:ve,geoProjectionMutator:yc,geoRotation:h0,geoStereographic:U_,geoStereographicRaw:Sc,geoStream:ee,geoTransform:k_,geoTransverseMercator:V_,geoTransverseMercatorRaw:Ac,gray:Rb,hcl:vr,hierarchy:Lc,histogram:Cm,hsl:mr,html:e2,image:Qx,interpolate:pa,interpolateArray:zb,interpolateBasis:sd,interpolateBasisClosed:od,interpolateBlues:_8,interpolateBrBG:t8,interpolateBuGn:c8,interpolateBuPu:h8,interpolateCividis:A8,interpolateCool:T8,interpolateCubehelix:jb,interpolateCubehelixDefault:L8,interpolateCubehelixLong:ks,interpolateDate:dd,interpolateDiscrete:Gb,interpolateGnBu:u8,interpolateGreens:w8,interpolateGreys:M8,interpolateHcl:Qb,interpolateHclLong:Jb,interpolateHsl:qb,interpolateHslLong:Zb,interpolateHue:Bb,interpolateInferno:z8,interpolateLab:Kb,interpolateMagma:N8,interpolateNumber:Kt,interpolateNumberArray:jl,interpolateObject:pd,interpolateOrRd:f8,interpolateOranges:S8,interpolatePRGn:e8,interpolatePiYG:n8,interpolatePlasma:H8,interpolatePuBu:p8,interpolatePuBuGn:d8,interpolatePuOr:i8,interpolatePuRd:g8,interpolatePurples:k8,interpolateRainbow:I8,interpolateRdBu:a8,interpolateRdGy:r8,interpolateRdPu:m8,interpolateRdYlBu:s8,interpolateRdYlGn:o8,interpolateReds:D8,interpolateRgb:Ki,interpolateRgbBasis:hd,interpolateRgbBasisClosed:Nb,interpolateRound:gd,interpolateSinebow:E8,interpolateSpectral:l8,interpolateString:tc,interpolateTransformCss:yd,interpolateTransformSvg:vd,interpolateTurbo:$8,interpolateViridis:Y8,interpolateWarm:C8,interpolateYlGn:y8,interpolateYlGnBu:b8,interpolateYlOrBr:v8,interpolateYlOrRd:x8,interpolateZoom:xd,interrupt:sn,interval:ry,isoFormat:P3,isoParse:Y3,json:jx,keys:hx,lab:yr,lch:Pb,line:ha,lineRadial:lf,linkHorizontal:e6,linkRadial:i6,linkVertical:n6,local:Ff,map:Ae,matcher:Fl,max:Pf,mean:Rm,median:Pm,merge:Wl,min:Ef,mouse:an,namespace:fa,namespaces:Fo,nest:ox,now:ri,pack:Sw,packEnclose:z0,packSiblings:Mw,pairs:Mm,partition:Aw,path:qe,permute:Em,pie:vg,piecewise:ty,pointRadial:Ni,polygonArea:Bw,polygonCentroid:Ww,polygonContains:Vw,polygonHull:Uw,polygonLength:qw,precisionFixed:Zd,precisionPrefix:Kd,precisionRound:Qd,quadtree:Ts,quantile:Fi,quantize:ey,radialArea:cf,radialLine:lf,randomBates:Qw,randomExponential:Jw,randomIrwinHall:V0,randomLogNormal:Kw,randomNormal:U0,randomUniform:Zw,range:Bt,rgb:qn,ribbon:sx,scaleBand:Cc,scaleDiverging:Gp,scaleDivergingLog:Bp,scaleDivergingPow:Xc,scaleDivergingSqrt:W3,scaleDivergingSymlog:Wp,scaleIdentity:J0,scaleImplicit:Il,scaleLinear:Be,scaleLog:tp,scaleOrdinal:_a,scalePoint:li,scalePow:Ys,scaleQuantile:np,scaleQuantize:Pc,scaleSequential:Np,scaleSequentialLog:zp,scaleSequentialPow:Hc,scaleSequentialQuantile:Xp,scaleSequentialSqrt:B3,scaleSequentialSymlog:Hp,scaleSqrt:c5,scaleSymlog:ep,scaleThreshold:ip,scaleTime:X3,scaleUtc:G3,scan:$m,schemeAccent:F3,schemeBlues:ug,schemeBrBG:Op,schemeBuGn:jp,schemeBuPu:tg,schemeCategory10:O3,schemeDark2:U3,schemeGnBu:eg,schemeGreens:fg,schemeGreys:dg,schemeOrRd:ng,schemeOranges:mg,schemePRGn:Fp,schemePaired:V3,schemePastel1:q3,schemePastel2:Z3,schemePiYG:Up,schemePuBu:ag,schemePuBuGn:ig,schemePuOr:Vp,schemePuRd:rg,schemePurples:pg,schemeRdBu:qp,schemeRdGy:Zp,schemeRdPu:sg,schemeRdYlBu:Kp,schemeRdYlGn:Qp,schemeReds:gg,schemeSet1:K3,schemeSet2:Q3,schemeSet3:J3,schemeSpectral:Jp,schemeTableau10:j3,schemeYlGn:lg,schemeYlGnBu:og,schemeYlOrBr:cg,schemeYlOrRd:hg,select:W,selectAll:bb,selection:Mn,selector:bs,selectorAll:Ol,set:$d,shuffle:Ym,stack:C6,stackOffsetDiverging:I6,stackOffsetExpand:T6,stackOffsetNone:ni,stackOffsetSilhouette:R6,stackOffsetWiggle:P6,stackOrderAppearance:Xg,stackOrderAscending:Gg,stackOrderDescending:$6,stackOrderInsideOut:Y6,stackOrderNone:ii,stackOrderReverse:N6,stratify:Iw,style:cn,sum:Nm,svg:n2,symbol:h6,symbolCircle:Uc,symbolCross:wg,symbolDiamond:kg,symbolSquare:Ag,symbolStar:Sg,symbolTriangle:Lg,symbolWye:Cg,symbols:c6,text:Cs,thresholdFreedmanDiaconis:Tm,thresholdScott:Im,thresholdSturges:Bl,tickFormat:Q0,tickIncrement:Hi,tickStep:ln,ticks:Gl,timeDay:Ns,timeDays:f5,get timeFormat(){return Yc},timeFormatDefaultLocale:$p,timeFormatLocale:Cp,timeFriday:pp,timeFridays:b5,timeHour:hp,timeHours:u5,timeInterval:gt,timeMillisecond:ts,timeMilliseconds:Ou,timeMinute:lp,timeMinutes:h5,timeMonday:sa,timeMondays:d5,timeMonth:bp,timeMonths:v5,get timeParse(){return Ep},timeSaturday:gp,timeSaturdays:y5,timeSecond:is,timeSeconds:Fu,timeSunday:ra,timeSundays:Uu,timeThursday:bn,timeThursdays:m5,timeTuesday:fp,timeTuesdays:p5,timeWednesday:dp,timeWednesdays:g5,timeWeek:ra,timeWeeks:Uu,timeYear:yn,timeYears:x5,timeout:Qo,timer:Ss,timerFlush:Sd,touch:Vi,touches:yb,transition:Td,transpose:$f,tree:Nw,treemap:zw,treemapBinary:Hw,treemapDice:xa,treemapResquarify:Gw,treemapSlice:Es,treemapSliceDice:Xw,treemapSquarify:F0,tsv:Kx,tsvFormat:Yx,tsvFormatBody:Nx,tsvFormatRow:Hx,tsvFormatRows:zx,tsvFormatValue:Xx,tsvParse:Xd,tsvParseRows:$x,utcDay:zs,utcDays:M5,get utcFormat(){return Hs},utcFriday:Dp,utcFridays:L5,utcHour:_p,utcHours:w5,utcMillisecond:ts,utcMilliseconds:Ou,utcMinute:vp,utcMinutes:_5,utcMonday:la,utcMondays:k5,utcMonth:Lp,utcMonths:T5,get utcParse(){return Nc},utcSaturday:Sp,utcSaturdays:C5,utcSecond:is,utcSeconds:Fu,utcSunday:oa,utcSundays:Vu,utcThursday:vn,utcThursdays:A5,utcTuesday:Mp,utcTuesdays:D5,utcWednesday:kp,utcWednesdays:S5,utcWeek:oa,utcWeeks:Vu,utcYear:xn,utcYears:I5,values:ux,variance:Tf,version:xm,voronoi:n4,window:Ul,xml:t2,zip:Hm,zoom:c4,zoomIdentity:Vs,zoomTransform:Vg},Symbol.toStringTag,{value:"Module"})),qg=(t,e=250)=>{let n;return(...i)=>{let a;return n&&clearTimeout(n),n=setTimeout(()=>{a=t(...i)},e),a}};function u4({D3Module:t,props:e,listenersKeys:n}){const i=Ee(void 0),a=Ee(),s=qg(()=>{i.value&&i.value.render&&i.value.render()}),o=d=>d&&i.value.setParams&&i.value.setParams(d),l=d=>d&&i.value.setData&&i.value.setData(d),c=d=>d&&i.value.setDataset&&i.value.setDataset(d),h=d=>d&&i.value.setDatum&&i.value.setDatum(d),f=d=>d&&i.value.filter&&i.value.filter(d),u=({width:d,height:g})=>{i.value.resize&&i.value.resize({width:d&&typeof d=="number"?d:i.value.width,height:g&&typeof g=="number"?g:i.value.height})},p=d=>{d&&i.value.zoom&&i.value.transform&&i.value.transformZoom&&i.value.initZoom&&(i.value.initZoom(i.value.zoom),i.value.transformZoom(d))};return te(()=>e.params,d=>{o(d||{})}),te(()=>e.data,d=>{l(d)}),te(()=>e.dataset,d=>{c(d)}),te(()=>e.datum,d=>{h(d)}),te(()=>e.filter,d=>{f(d)}),te(()=>[e.width,e.height],({width:d,height:g})=>{(e.width||e.height)&&u({width:d,height:g})}),te(()=>e.zoom,d=>{p(d)}),{d3Module:i,debounceRender:s,createModule(d){a.value=d,i.value=new t(W(d),e.params||{}),o(e.params||{}),l(e.data),c(e.dataset),h(e.datum),f(e.filter),u({width:e.width,height:e.height}),p(e.zoom)},eventHandler(d){let g=d;n.forEach(m=>{i.value.on!=null&&i.value.on(m,b=>{g&&(console.log(m,b),g(m,b))})})}}}function f4(t){const e=Ee({x:0,y:0,width:0,height:0,top:0,right:0,bottom:0,left:0}),n=qg(a=>{const r=a[0];e.value=r.contentRect});return new ResizeObserver((a,r)=>{n(a)}).observe(t),e}const Yo=800,yf=500,d4=(t,e)=>e?Object.keys(e):t?Object.keys(t).filter(n=>n.substring(0,2)==="on").map(n=>`${n.substring(2,3).toLowerCase()}${n.substring(3,n.length)}`):[],p4=gm({props:{module:{},params:{},data:{},datum:{},dataset:{},filter:{},width:{default:()=>0},height:{default:()=>0},forceFit:{default:()=>!0},zoom:{}},setup(t,{emit:e,listeners:n}){const i=mm(),a=d4(i,n),r=Ee(null),s=Ee(null),o=rh(()=>{let g=`${Yo}px`;return t.forceFit&&!t.width?g="100%":typeof t.width=="string"?g=t.width:typeof t.width=="number"&&t.width?g=`${t.width}px`:g=`${Yo}px`,g}),l=rh(()=>{let g=`${yf}px`;return typeof t.height=="string"?g=t.height:typeof t.height=="number"&&t.height&&(g=`${t.height}px`),g}),c=Ee(Yo),h=Ee(yf),{d3Module:f,createModule:u,eventHandler:p,debounceRender:d}=u4({D3Module:t.module,props:t,listenersKeys:a});return bm(()=>{u(s.value),p((g,m)=>{e(g,m)}),setTimeout(()=>{if(c.value=r.value.clientWidth,h.value=r.value.clientHeight,t.forceFit){const g=f4(r.value);te(g,()=>{c.value=g.value.width,h.value=g.value.height,f.value.resize&&f.value.resize({width:c.value,height:h.value}),d(),e("resize",{width:c.value,height:h.value})})}else d();te(t,()=>d()),te(()=>[t.width,t.height],()=>{e("resize",{width:t.width,height:t.height})})})}),{d3Module:f,container:r,svg:s,containerWidth:o,containerHeight:l,svgWidth:c,svgHeight:h}}}),Zg=(t,e)=>{const n=t.__vccOpts||t;for(const[i,a]of e)n[i]=a;return n},g4=["width","height"];function m4(t,e,n,i,a,r){return De(),Se("div",{ref:"container",style:ym([{position:"relative"},{width:t.containerWidth,height:t.containerHeight}])},[(De(),Se("svg",{ref:"svg","xmlns:xlink":"http://www.w3.org/1999/xlink",xmls:"http://www.w3.org/2000/svg",version:"1.1",style:{position:"absolute"},width:t.svgWidth,height:t.svgHeight},null,8,g4))],4)}const _n=Zg(p4,[["render",m4]]),ut=["#67B7DC","#6794DC","#6771DC","#8067DC","#A367DC","#C767DC","#DC67CE","#DC67AB","#DC6788","#DC6967","#DC8C67","#DCAF67"],se=800,oe=500,zt={top:50,right:70,bottom:50,left:70},Jc="#e1e1e1",Ne="#7b7b7b",jc={offsetX:20,offsetY:5,type:"white",templateHtml:()=>""},b4={...jc,templateHtml:()=>"",yLine:void 0,alignCenter:void 0};({...jc});class Kg{constructor(e,n){this.params=jc,this.datum={x:-1,y:-1,data:null},this.renderData={_sourceData:{x:-1,y:-1},x:-1,y:-1,contentHtml:""},this.setTooltipStyle=i=>{},this.render=()=>{this.renderTooltip([this.renderData])},this.selection=e,this.params={...this.params,...n},this.params.type==="black"?this.setTooltipStyle=i=>{i.style("pointer-events","none").style("white-space","nowrap").style("padding","10px 10px").style("background","#333333").style("border-radius","5px").style("opacity",.9).style("color","white").style("font-size","14px").style("text-align","left")}:this.params.type==="white"&&(this.setTooltipStyle=i=>{i.style("pointer-events","none").style("white-space","nowrap").style("padding","10px 15px").style("background-color","rgba(255,255,255,.8)").style("border","1px solid rgba(152,152,152,0.5)").style("border-radius","5px").style("color","black").style("font-size","12px").style("line-height","20px").style("text-align","left")})}setDatum(e){if(e!=null&&e.data&&(this.datum.data=e.data,this.renderData.contentHtml=this.params.templateHtml?this.params.templateHtml(e.data):""),!this.renderData.contentHtml)return;const n=(e==null?void 0:e.x)??w.clientX,i=(e==null?void 0:e.y)??w.clientY;this.datum.x=n,this.datum.y=i,this.renderData.x=n,this.renderData.y=i,this.render()}select(){return this.selection}}function y4(t){var i;const e=document.createElementNS("http://www.w3.org/1999/xhtml","div");e.innerHTML='<svg xmlns="http://www.w3.org/2000/svg">'+t+"</svg>";const n=document.createDocumentFragment();for(;n&&((i=e==null?void 0:e.firstChild)!=null&&i.firstChild);)n.appendChild(e.firstChild.firstChild);return n}function v4(t,e){const n=t.node();for(;n.hasChildNodes();)n.removeChild(n.firstChild);t.node().appendChild(y4(e))}function x4(t,{text:e,radius:n,lineHeight:i,isBreakAll:a=!1,limit:r=0}){if(t==null||e==null){console.error("selection or text is not defined");return}n==null&&(n=t.node().getBBox().width/2);function s(p){let d;return a?d=p.split(""):d=p.split(/\s+/g),d[d.length-1]||d.pop(),d[0]||d.shift(),d}function o(p,d){return p&&d&&p.length>d&&(p=p.substring(0,d)+"..."),p}function l(p){var g;const d=document.createElement("canvas").getContext("2d");return((g=d==null?void 0:d.measureText(p))==null?void 0:g.width)??0}function c(p){const d=l(p.trim());return Math.sqrt(d*i)}function h(p,d){let g={width:0,text:""},m=1/0;const b=[];let v=" ";a&&(v="");for(let y=0,x=p.length;y<x;++y){const M=(g.text?g.text+v:"")+p[y],D=l(M);(m+D)/2<d?(g.width=m=D,g.text=M):(m=l(p[y]),g={width:m,text:p[y]},b.push(g))}return b}function f(p){let d=0;for(let g=0,m=p.length;g<m;++g){const b=(Math.abs(g-m/2+.5)+.5)*i,v=p[g].width/2;d=Math.max(d,Math.sqrt(v**2+b**2))}return d}function u(p,d){r>0&&(d=o(d,r));const g=s(d),m=c(d),b=h(g,m),v=f(b);let y=p.select("text");y.size()||(y=p.append("text")),y.attr("transform",`translate(0,0) scale(${n/v})`);const x=y.selectAll("tspan").data(b);return x.enter().append("tspan").attr("x",0).merge(x).attr("y",(M,D)=>(D-b.length/2+.8)*i).text(M=>M.text),x.exit().remove(),p.node()}u(t,e)}function hs(t){try{return t.node().getBoundingClientRect()}catch(e){throw new Error(e)}}const us=(t,e)=>e instanceof Function?e(t):ga(e)(t);class Qg extends Kg{constructor(e,n){super(e,n),this.tooltipSelection=void 0,this.setParams(n??this.params)}setParams(e){this.params={...this.params,...e},((e==null?void 0:e.insideBoxMode)??!0)===!0?this.renderTooltip=this.renderInsideBox:this.renderTooltip=this.renderDefault}renderDefault(e){try{this.tooltipSelection.interrupt("fadeout")}catch{}const n=W("body").selectAll(".bpchat___tooltip").data(e),i=n.enter().append("div").classed("bpchat___tooltip",!0).call(this.setTooltipStyle);this.tooltipSelection=n.merge(i).style("position","fixed").style("z-index",1e4).style("left",a=>`${a.x+this.params.offsetX}px`).style("top",a=>`${a.y+this.params.offsetY}px`).html(a=>a.contentHtml).on("interrupt",(a,r,s)=>{W(s[r]).style("opacity",1)}),n.exit().transition("fadeout").style("opacity",0).remove().on("interrupt",(a,r,s)=>{W(s[r]).style("opacity",1)})}renderInsideBox(e){var h;try{this.tooltipSelection.interrupt("fadeout")}catch{}const n=hs(this.selection),i=(h=this.tooltipSelection)!=null&&h.node()?hs(this.tooltipSelection):{width:0,height:0},a=n.x,r=n.x+n.width-i.width,s=n.y,o=n.y+n.height-i.height,l=W("body").selectAll(".bpchat___tooltip").data(e),c=l.enter().append("div").classed("bpchat___tooltip",!0).call(this.setTooltipStyle);this.tooltipSelection=l.merge(c).style("position","fixed").style("z-index",1e4).style("left",f=>{const u=f.x+this.params.offsetX;return u<a?`${a}px`:u>r?`${r}px`:`${u}px`}).style("top",f=>{const u=f.y+this.params.offsetY;return u<s?`${s}px`:u>o?`${o}px`:`${u}px`}).html(f=>f.contentHtml),l.exit().transition("fadeout").style("opacity",0).remove().on("interrupt",(f,u,p)=>{W(p[u]).style("opacity",1)})}renderTooltip(e){}remove(){this.tooltipSelection&&this.tooltipSelection.transition("fadeout").style("opacity",0).remove().on("interrupt",(e,n,i)=>{W(i[n]).style("opacity",1)})}}const Jg={colors:ut,outerRadius:.95,innerRadius:0,outerMouseoverRadius:1,enterDuration:800,startAngle:0,endAngle:Math.PI*2,padAngle:.02,cornerRadius:0,highlightTarget:"item",highlightDatumId:"",highlightItemId:""},Wt=(t,e)=>t-e.left-e.right,Ot=(t,e)=>t-e.top-e.bottom,th=({axisLabels:t,axisWidth:e,padding:n=.5,reverse:i=!1})=>{let a=[0,e];return i&&(a=[e,0]),li().domain(t).range(a).padding(.5)},fs=({maxValue:t,minValue:e,axisWidth:n,domainMinValue:i=void 0,domainMaxValue:a=void 0,domainMinRange:r=void 0,domainMaxRange:s=void 0,reverse:o=!1})=>{let l=e,c=t;if(i!=null){const f=i;l=f<l?f:l}if(r!=null){const f=t-(t-e)/(1-r);l=f<l?f:l}if(a!=null){const f=a;c=f>c?f:c}if(s!=null){const f=t/s;c=f>c?f:c}l==0&&c==0&&(c=1);let h=[l,c];return o&&(h=[c,l]),Be().domain(h).range([0,n])},eh=({axisLabels:t,axisWidth:e,reverse:n=!1})=>{let a=[];return n?a=t.map((r,s)=>t.length-1-s):a=t.map((r,s)=>s),Pc().domain([-0,e+0]).range(a)},le=(t,e)=>_a().domain(t.map(n=>n)).range(t.map((n,i)=>e[i])),Nl=({axisWidth:t,innerRadius:e,outerRadius:n,padAngle:i,cornerRadius:a})=>{const r=Be().domain([0,1]).range([0,t/2]),s=r(n);return bg().innerRadius(r(e)).outerRadius(s).padAngle(i).padRadius(s).cornerRadius(a)},_4=({pathSelection:t,enter:e,exit:n,data:i,lastData:a,params:r})=>t&&!e.size()&&!n.size()?s=>{const o=i.map((l,c)=>{const h=a[c]??{startAngle:0,endAngle:0,value:0};return{...l,startAngle:l.startAngle*s+h.startAngle*(1-s),endAngle:l.endAngle*s+h.endAngle*(1-s),value:l.value*s+h.value*(1-s)}});return zl(o,r.startAngle,r.endAngle,1)}:s=>zl(i,r.startAngle,r.endAngle,s),w4=t=>{const e=new Map;return t.forEach(n=>{const i=e.get(n.data.itemLabel)??[];i.push(n),e.set(n.data.itemLabel,i)}),e},zl=(t,e,n,i)=>t.map((a,r)=>{const s=e+(a.startAngle-e)*i,o=s+(a.endAngle-a.startAngle)*i;return{...a,startAngle:s,endAngle:o}}),Oa=({dataset:t,datum:e,ItemDataMap:n,event:i})=>({dataset:t,groupData:e?[e]:[],itemData:e?n.get(e.data.itemLabel):[],datum:e||null,itemLabel:e?e.data.itemLabel:"",itemIndex:e?e.data.itemIndex:-1,clientX:i.clientX,clientY:i.clientY,offsetX:i.offsetX,offsetY:i.offsetY}),M4=t=>({dataset:t,groupData:[],itemData:[],datum:null,itemLabel:"",itemIndex:-1,clientX:-1,clientY:-1,offsetX:-1,offsetY:-1});let k4=class{constructor(e,n){this.params=Jg,this.dataset={data:[],itemLabels:[],axisWidth:0},this.width=se,this.height=oe,this.lastData=[],this.pieRenderData=[],this.pathSelection=void 0,this.ItemDataMap=new Map,this.mouseoverCallback=function(){},this.mousemoveCallback=function(){},this.mouseoutCallback=function(){},this.clickCallback=function(){},this.enterDurationCallback=function(){},this.setDonutEvent=i=>{i.on("mouseover",(a,r,s)=>{w.stopPropagation(),this.params.highlightTarget!=null&&this.params.highlightTarget!="none"&&(this.params.highlightTarget==="item"?this.highlight(i,a.data.itemLabel,void 0):this.params.highlightTarget==="datum"&&this.highlight(i,void 0,a.data.id));const o=Oa({dataset:this.dataset,datum:a,ItemDataMap:this.ItemDataMap,event:w});this.mouseoverCallback(o)}).on("mousemove",(a,r,s)=>{w.stopPropagation();const o=Oa({dataset:this.dataset,datum:a,ItemDataMap:this.ItemDataMap,event:w});this.mousemoveCallback(o)}).on("mouseout",(a,r,s)=>{w.stopPropagation(),this.initHighlight();const o=Oa({dataset:this.dataset,datum:a,ItemDataMap:this.ItemDataMap,event:w});this.mouseoutCallback(o)}).on("click",(a,r,s)=>{w.stopPropagation();const o=Oa({dataset:this.dataset,datum:a,ItemDataMap:this.ItemDataMap,event:w});this.clickCallback(o)})},this.selection=e,this.gSelection=e.append("g")}setParams(e){this.params={...this.params,...e},this.colorScale=le(this.dataset.itemLabels,this.params.colors)}select(){return this.selection}remove(){this.selection.remove()}setDataset(e){this.dataset=e,this.ItemDataMap=w4(e.data),this.colorScale=le(this.dataset.itemLabels,this.params.colors)}render(){this.arc=Nl({axisWidth:this.dataset.axisWidth,innerRadius:this.params.innerRadius,outerRadius:this.params.outerRadius,padAngle:this.params.padAngle,cornerRadius:this.params.cornerRadius}),this.arcMouseover=Nl({axisWidth:this.dataset.axisWidth,innerRadius:this.params.innerRadius,outerRadius:this.params.outerMouseoverRadius,padAngle:this.params.padAngle,cornerRadius:this.params.cornerRadius});let e=this.gSelection.selectAll("path").data(this.dataset.data,r=>r.data.id),n=e.enter(),i=e.exit();const a=_4({pathSelection:this.pathSelection,enter:n,exit:i,data:this.dataset.data,lastData:this.lastData,params:this.params});this.gSelection.transition().duration(this.params.enterDuration).tween("move",(r,s,o)=>l=>{this.pieRenderData=a(l),this.renderDonut(this.gSelection,this.pieRenderData,this.arc);const c=M4(this.dataset);this.enterDurationCallback(c,l)}).on("end",(r,s,o)=>{this.pieRenderData=zl(this.dataset.data,this.params.startAngle,this.params.endAngle,1),this.renderDonut(this.gSelection,this.pieRenderData,this.arc),this.params.highlightTarget&&this.params.highlightTarget!="none"&&this.pathSelection.style("cursor","pointer"),this.pathSelection&&this.setDonutEvent(this.pathSelection),this.initHighlight(),this.lastData=Object.assign([],this.dataset.data)})}on(e,n){return e==="click"?this.clickCallback=n:e==="mouseover"?this.mouseoverCallback=n:e==="mousemove"?this.mousemoveCallback=n:e==="mouseout"?this.mouseoutCallback=n:e==="enterDuration"&&(this.enterDurationCallback=n),this}initHighlight(){this.removeHighlight(),(this.params.highlightItemId||this.params.highlightDatumId)&&this.highlight(this.pathSelection,this.params.highlightItemId,this.params.highlightDatumId)}highlight(e,n,i){if(!e)return;let a=[];if(i&&a.push(i),n){const r=this.dataset.data.filter(s=>s.data.itemLabel===n).map(s=>s.id);a=a.concat(r)}e.each((r,s,o)=>{const l=W(o[s]);a.includes(r.data.id)?l.transition().ease(fn).duration(500).style("opacity",1).attr("d",c=>this.arcMouseover(c)):l.transition().style("opacity",.3).attr("d",c=>this.arc(c))})}removeHighlight(){this.pathSelection&&this.pathSelection.transition().style("opacity",1).attr("d",e=>this.arc(e))}renderDonut(e,n,i){let a=e.selectAll("path").data(n,o=>o.data.id),r=a.enter().append("path").classed("bpchart__pie-path",!0),s=a.exit();r.append("path"),this.pathSelection=a.merge(r),this.pathSelection.attr("fill",(o,l)=>this.colorScale(o.data.itemLabel)).attr("d",(o,l)=>i(o)),s.remove()}};const jg={solidColor:void 0,colors:ut,outerRadius:1,enterDuration:800,startAngle:0,endAngle:Math.PI*2,centroid:2.3,fontSize:12,text:t=>String(t.value),highlightTarget:"item",highlightDatumId:"",highlightItemId:""},D4=t=>{const e=new Map;return t.forEach(n=>{const i=e.get(n.data.itemLabel)??[];i.push(n),e.set(n.data.itemLabel,i)}),e},S4=(t,e,n)=>t.data.map((i,a)=>{const[r,s]=e.centroid(i);return{...i,arcIndex:a,arcLabel:t.arcLabels[a],x:r*n,y:s*n}}),Fa=({dataset:t,datum:e,ItemDataMap:n,event:i})=>({dataset:t,groupData:[e],itemData:n.get(e.data.itemLabel),datum:e,itemLabel:e.data.itemLabel,itemIndex:e.data.itemIndex,clientX:i.clientX,clientY:i.clientY,offsetX:i.offsetX,offsetY:i.offsetY});class A4{constructor(e,n){this.params=jg,this.dataset={data:[],itemLabels:[],arcLabels:[],axisWidth:0},this.width=se,this.height=oe,this.renderData=[],this.labelSelection=void 0,this.ItemDataMap=new Map,this.mouseoverCallback=function(){},this.mousemoveCallback=function(){},this.mouseoutCallback=function(){},this.clickCallback=function(){},this.setDonutEvent=i=>{i.on("mouseover",(a,r,s)=>{w.stopPropagation(),this.params.highlightTarget!=null&&this.params.highlightTarget!="none"&&(this.params.highlightTarget==="item"?this.highlight(i,a.data.itemLabel,void 0):this.params.highlightTarget==="datum"&&this.highlight(i,void 0,a.data.id));const o=Fa({dataset:this.dataset,datum:a,ItemDataMap:this.ItemDataMap,event:w});this.mouseoverCallback(o)}).on("mousemove",(a,r,s)=>{w.stopPropagation();const o=Fa({dataset:this.dataset,datum:a,ItemDataMap:this.ItemDataMap,event:w});this.mousemoveCallback(o)}).on("mouseout",(a,r,s)=>{w.stopPropagation(),this.initHighlight();const o=Fa({dataset:this.dataset,datum:a,ItemDataMap:this.ItemDataMap,event:w});this.mouseoutCallback(o)}).on("click",(a,r,s)=>{w.stopPropagation();const o=Fa({dataset:this.dataset,datum:a,ItemDataMap:this.ItemDataMap,event:w});this.clickCallback(o)})},this.selection=e,this.gSelection=e.append("g")}setParams(e){this.params={...this.params,...e},this.colorScale=le(this.dataset.itemLabels,this.params.colors)}select(){return this.selection}remove(){this.selection.remove()}setDataset(e){this.dataset=e,this.ItemDataMap=D4(e.data),this.colorScale=le(this.dataset.itemLabels,this.params.colors)}render(){this.arc=Nl({axisWidth:this.dataset.axisWidth,innerRadius:0,outerRadius:this.params.outerRadius,padAngle:0,cornerRadius:0});const e=S4(this.dataset,this.arc,this.params.centroid);this.renderLabel(this.gSelection,e,this.arc),this.labelSelection&&this.setDonutEvent(this.labelSelection)}on(e,n){return e==="click"?this.clickCallback=n:e==="mouseover"?this.mouseoverCallback=n:e==="mousemove"?this.mousemoveCallback=n:e==="mouseout"&&(this.mouseoutCallback=n),this}initHighlight(){this.removeHighlight(),(this.params.highlightItemId||this.params.highlightDatumId)&&this.highlight(this.labelSelection,this.params.highlightItemId,this.params.highlightDatumId)}highlight(e,n,i){if(!e)return;let a=[];if(i&&a.push(i),n){const r=this.dataset.data.filter(s=>s.data.itemLabel===n).map(s=>s.data.id);a=a.concat(r)}e.each((r,s,o)=>{const l=W(o[s]);a.includes(r.id)?l.transition().duration(200).style("opacity",1):l.transition().duration(200).style("opacity",.3)})}removeHighlight(){this.labelSelection&&this.labelSelection.transition().duration(200).style("opacity",1)}renderLabel(e,n,i){let a=e.selectAll("text").data(n,o=>o.id),r=a.enter().append("text").classed("bpchart__text",!0),s=a.exit();r.append("text"),this.labelSelection=a.merge(r),this.labelSelection.attr("font-weight","bold").attr("text-anchor","middle").style("dominant-baseline","middle").style("cursor",o=>this.params.highlightTarget&&this.params.highlightTarget!="none"?"pointer":"none").text(o=>this.params.text(o)).attr("font-size",this.params.fontSize).attr("fill",(o,l)=>this.params.solidColor??this.colorScale(o.data.itemLabel)).transition().attr("transform",o=>"translate("+o.x+","+o.y+")").on("end",()=>this.initHighlight()),s.remove()}}const tm={padding:zt,tooltipFollowing:{templateHtml:t=>`
      <div>
        <div>${t.datum.data.arcLabel}</div>
        <div>${t.datum.value}</div>
      </div>
    `}},L4={...tm,graphicArcPie:Jg,labelArcPie:jg,startAngle:0,endAngle:Math.PI*2,colors:ut,enterDuration:800,highlightTarget:"datum",highlightDatumId:"",highlightItemId:"",centerText:(t,e,n)=>[],centerTextAttrs:[],centerTextStyles:[]},em="__DEFAULT__",vf=(t,e,n)=>{const i=t-n.left-n.right,a=e-n.top-n.bottom;return i<a?i:a},C4=(t,e,n)=>t.map((i,a)=>{const r=i.itemLabel??em;return{...i,arcIndex:a,arcLabel:n[a],itemIndex:e.indexOf(r),itemLabel:r,id:n[a]}});class T4{constructor(e,n){this.params=tm,this.dataset={data:[],itemLabels:[],arcLabels:[]},this.width=se,this.height=oe,this.mouseoverCallback=function(){},this.mousemoveCallback=function(){},this.mouseoutCallback=function(){},this.clickCallback=function(){},this.graphicData=[],this.itemLabels=[],this.arcLabels=[],this.shorterSideWidth=0,this.middleX=0,this.middleY=0,this.selection=e,this.graphicGSelection=e.append("g")}setParams(e){this.initGraphic(e),this.shorterSideWidth=vf(this.width,this.height,this.params.padding),this.params.tooltipFollowing?this.tooltip=new Qg(this.selection,{templateHtml:this.params.tooltipFollowing.templateHtml,type:this.params.tooltipFollowing.type??"white",insideBoxMode:this.params.tooltipFollowing.insideBoxMode??!0}):this.tooltip&&(this.tooltip.remove(),this.tooltip=void 0)}resize({width:e,height:n}={width:this.width,height:this.height}){this.width=e,this.height=n,this.shorterSideWidth=vf(this.width,this.height,this.params.padding);const i=this.width/2,a=this.height/2;(i!==this.middleX||a!==this.middleY)&&(this.middleX=i,this.middleY=a,this.graphicGSelection.transition().attr("transform",`translate(${this.middleX}, ${this.middleY})`))}select(){return this.selection}remove(){this.selection.remove()}setDataset(e){this.dataset=e,this.itemLabels=this.dataset.itemLabels&&this.dataset.itemLabels.length?this.dataset.itemLabels:[em],this.arcLabels=this.dataset.arcLabels,this.graphicData=C4(this.dataset.data,this.itemLabels,this.arcLabels)}render(){this.setGraphicData({graphicData:this.graphicData,itemLabels:this.itemLabels,arcLabels:this.arcLabels,shorterSideWidth:this.shorterSideWidth}),this.renderGraphic()}on(e,n){return e==="click"?this.clickCallback=n:e==="mouseover"?this.mouseoverCallback=n:e==="mousemove"?this.mousemoveCallback=n:e==="mouseout"&&(this.mouseoutCallback=n),this}showTooltip(e,n){this.tooltip&&(n&&e?this.tooltip.setDatum({data:e,x:w.clientX,y:w.clientY}):this.tooltip.remove())}}const I4=({data:t,startAngle:e,endAngle:n,itemLabels:i,arcLabels:a})=>vg().startAngle(e).endAngle(n).value(o=>o.value).sort(null)(t).map((o,l)=>{const c=o.data.itemLabel;return{...o,itemIndex:i.indexOf(c),itemLabel:c,id:a[l]}}),Ua=(t,e,n)=>{const i=t.dataset.data.findIndex(a=>t.datum&&a.id===t.datum.id);return{dataset:e,groupData:t.groupData,itemData:t.itemData,datum:t.datum,itemIndex:t.itemIndex,itemLabel:t.itemLabel,arcIndex:i,arcLabel:e.arcLabels[i],clientX:n.clientX,clientY:n.clientY,offsetX:n.offsetX,offsetY:n.offsetY}},Va=(t,e,n)=>{const i=t.dataset.data.findIndex(a=>t.datum&&a.data.id===t.datum.data.id);return{dataset:e,groupData:t.groupData,itemData:t.itemData,datum:t.datum,itemIndex:t.itemIndex,itemLabel:t.itemLabel,arcIndex:i,arcLabel:e.arcLabels[i],clientX:n.clientX,clientY:n.clientY,offsetX:n.offsetX,offsetY:n.offsetY}},No=({eventCallback:t,eventName:e,t:n,centerText:i,centerTextAttrs:a,centerTextStyles:r})=>i(t,e,n).map((o,l)=>({text:o,attr:a[l],style:r[l]}));class R4 extends T4{constructor(e,n){super(e,n),this.params=L4,this.pieSelection=this.graphicGSelection.append("g"),this.labelSelection=this.graphicGSelection.append("g"),this.centerTextSelection=this.graphicGSelection.append("g"),this.pie=new k4(this.pieSelection,{}),this.label=new A4(this.labelSelection,{})}initGraphic(e){this.params={...this.params,...e,graphicArcPie:{...this.params.graphicArcPie,...e.graphicArcPie},labelArcPie:{...this.params.labelArcPie,...e.labelArcPie}},this.params.graphicArcPie={...this.params.graphicArcPie,colors:this.params.colors,startAngle:this.params.startAngle,endAngle:this.params.endAngle,highlightTarget:this.params.highlightTarget,highlightDatumId:this.params.highlightDatumId,highlightItemId:this.params.highlightItemId},this.params.labelArcPie={...this.params.labelArcPie,colors:this.params.colors,startAngle:this.params.startAngle,endAngle:this.params.endAngle,outerRadius:this.params.graphicArcPie.outerRadius,highlightTarget:this.params.highlightTarget,highlightDatumId:this.params.highlightDatumId,highlightItemId:this.params.highlightItemId},this.pie.setParams(this.params.graphicArcPie),this.pie.on("enterDuration",(n,i)=>{const a=No({eventCallback:n,eventName:"enterDuration",t:i,centerText:this.params.centerText,centerTextAttrs:this.params.centerTextAttrs,centerTextStyles:this.params.centerTextStyles});this.renderText(this.centerTextSelection,a)}).on("click",n=>{const i=Ua(n,this.dataset,w);this.clickCallback(i)}).on("mouseover",n=>{const i=Ua(n,this.dataset,w);this.showTooltip(i,w),this.mouseoverCallback(i),this.label.setParams({highlightItemId:this.params.highlightTarget==="item"?i.itemLabel:void 0,highlightDatumId:this.params.highlightTarget==="datum"?i.datum.id:void 0}),this.label.render();const a=No({eventCallback:i,eventName:"mouseover",t:1,centerText:this.params.centerText,centerTextAttrs:this.params.centerTextAttrs,centerTextStyles:this.params.centerTextStyles});this.renderText(this.centerTextSelection,a)}).on("mousemove",n=>{const i=Ua(n,this.dataset,w);this.showTooltip(i,w),this.mousemoveCallback(i)}).on("mouseout",n=>{const i=Ua(n,this.dataset,w);this.showTooltip(void 0,w),this.mouseoutCallback(i),this.label.setParams({highlightItemId:this.params.labelArcPie.highlightItemId,highlightDatumId:this.params.labelArcPie.highlightDatumId}),this.label.render();const a=No({eventCallback:i,eventName:"mouseout",t:1,centerText:this.params.centerText,centerTextAttrs:this.params.centerTextAttrs,centerTextStyles:this.params.centerTextStyles});this.renderText(this.centerTextSelection,a)}),this.label.setParams(this.params.labelArcPie),this.label.on("click",n=>{const i=Va(n,this.dataset,w);this.clickCallback(i)}).on("mouseover",n=>{const i=Va(n,this.dataset,w);this.showTooltip(i,w),this.mouseoverCallback(i),this.pie.setParams({highlightItemId:this.params.highlightTarget==="item"?i.itemLabel:void 0,highlightDatumId:this.params.highlightTarget==="datum"?i.datum.id:void 0}),this.pie.render()}).on("mousemove",n=>{const i=Va(n,this.dataset,w);this.showTooltip(i,w),this.mousemoveCallback(i)}).on("mouseout",n=>{const i=Va(n,this.dataset,w);this.showTooltip(void 0,w),this.mouseoutCallback(i),this.pie.setParams({highlightItemId:this.params.graphicArcPie.highlightItemId,highlightDatumId:this.params.graphicArcPie.highlightDatumId}),this.pie.render()})}setGraphicData({graphicData:e,itemLabels:n,arcLabels:i,shorterSideWidth:a}){const r=I4({data:e,startAngle:this.params.startAngle,endAngle:this.params.endAngle,itemLabels:n,arcLabels:i});this.pie.setDataset({data:r,itemLabels:n,axisWidth:a}),this.label.setDataset({data:r,itemLabels:n,arcLabels:i,axisWidth:a})}renderGraphic(){this.pie.render(),this.label.render()}renderText(e,n){const i=e.selectAll("text.bpchart__text").data(n),a=i.enter().append("text").classed("bpchart__text",!0);i.merge(a).each((s,o,l)=>{const c=W(l[o]).text(s.text);Object.keys(s.attr).forEach(h=>{c.attr(h,s.attr[h])}),Object.keys(s.style).forEach(h=>{c.style(h,s.style[h])})}),i.exit().remove()}}const P4=Zt("ul",null,[Zt("li",null,"中山區"),Zt("li",null,"有效票數：141,880"),Zt("li",null,"無效票數：1,922"),Zt("li",null,"投票數：143,802"),Zt("li",null,"投票率：75.6097％")],-1),zo={__name:"ChartArcPie",setup(t){const e={data:[{itemLabel:"宋楚瑜、余湘",value:6367},{itemLabel:"韓國瑜、張善政",value:56491},{itemLabel:"蔡英文、賴清德",value:79022}],itemLabels:["宋楚瑜、余湘","韓國瑜、張善政","蔡英文、賴清德"],arcLabels:["宋楚瑜、余湘","韓國瑜、張善政","蔡英文、賴清德"]},n={graphicArcPie:{outerMouseoverRadius:1,outerRadius:.95,innerRadius:.7,padAngle:.02,cornerRadius:0},centerText:(i,a,r=1)=>a==="mouseover"?[i.arcLabel,i.datum.value]:["蔡英文、賴清德",Math.round(i.dataset.data.reduce((s,o)=>s+o.value,0)*r)],centerTextStyles:[{"font-weight":"bold","text-anchor":"middle","pointer-events":"none","dominant-baseline":"middle","font-size":20,fill:"#000"},{"pointer-events":"none","dominant-baseline":"middle","text-anchor":"middle","font-size":18,fill:"rgb(96, 98, 102)"}],centerTextAttrs:[{transform:"translate(0, -12)"},{transform:"translate(0, 48)"}],colors:["#FF6310","#000095","#1B9431"]};return(i,a)=>(De(),Se("div",null,[st(_n,{module:on(R4),dataset:e,params:n},null,8,["module"]),je(" 選區票數說明：(需另外切版) "),P4]))}};class nh extends Kg{constructor(e,n){super(e,n),this.params=b4,this.tooltipSelection=void 0,this.lineSelection=void 0,this.containerSize={height:0,width:0,x:0,y:0},this.setParams(n??this.params)}setParams(e){this.params={...this.params,...e}}doRenderTooltip(e){try{this.tooltipSelection.interrupt("fadeout")}catch{}const n=this.tooltipSelection&&this.tooltipSelection.node()?hs(this.tooltipSelection):{width:0,height:0},i=this.containerSize.x+this.containerSize.width-n.width,a=this.containerSize.y+this.containerSize.height-n.height,r=l=>{l.style("left",c=>c.x<i?`${c.x+20}px`:`${c.x-n.width-20}px`).style("top",c=>this.params.alignCenter?this.containerSize.y+this.containerSize.height/2-n.height/2:c.y<a?`${c.y}px`:`${a+5}px`)},s=W("body").selectAll(".bpchat___tooltip").data(e);s.transition().duration(50).call(r).on("interrupt",(l,c,h)=>{W(h[c]).style("opacity",1)});const o=s.enter().append("div").classed("bpchat___tooltip",!0).call(this.setTooltipStyle);o.call(r),this.tooltipSelection=s.merge(o),this.tooltipSelection.style("position","fixed").style("z-index",1e4).html(l=>l.contentHtml),s.exit().transition("fadeout").style("opacity",0).remove().on("interrupt",(l,c,h)=>{W(h[c]).style("opacity",1)})}renderYLine(e){const n=e[0]?e[0].x-this.containerSize.x:0,i=this.selection.selectAll(".bpchart__tooltip__line").data(e),a=i.enter().append("line").classed("bpchart__tooltip__line",!0).style("stroke","#E4E7ED").style("stroke-width",1).style("pointer-events","none");this.lineSelection=i.merge(a).attr("x1",n).attr("y1",0).attr("x2",n).attr("y2",this.containerSize.height),i.exit().transition("fadeout").style("opacity",0).remove().on("interrupt",(r,s,o)=>{W(o[s]).style("opacity",1)})}renderTooltip(e){this.containerSize=hs(this.selection),this.params.yLine==!0&&this.renderYLine(e),this.doRenderTooltip(e)}remove(){this.tooltipSelection&&this.tooltipSelection.transition("fadeout").style("opacity",0).remove().on("end",()=>{var e;this.params.yLine==!0&&((e=this.lineSelection)==null||e.remove())}),this.renderData.contentHtml=""}}class ih{constructor(e){this.data=[],this.auxLineSelection=void 0,this.selection=e}setData(e){this.data=e}render(){const e=this.selection.selectAll("line.bpchart__auxline").data(this.data),n=e.enter().append("line").classed("bpchart__auxline",!0).style("stroke",Ne).style("stroke-width",1).style("stroke-dasharray","3,3").style("pointer-events","none");this.auxLineSelection=e.merge(n).attr("opacity",i=>i.active==!0?1:0),e.exit().remove(),n.attr("x1",i=>i.x1).attr("y1",i=>i.y1).attr("x2",i=>i.x2).attr("y2",i=>i.y2),e.transition().duration(50).attr("x1",i=>i.x1).attr("y1",i=>i.y1).attr("x2",i=>i.x2).attr("y2",i=>i.y2)}remove(){this.selection.remove()}}const nm={xLabel:"x",y1Label:"y1",y2Label:"y2",xLabelAnchor:"start",y1LabelAnchor:"end",y2LabelAnchor:"start",xLabelOffset:[0,0],y1LabelOffset:[0,0],y2LabelOffset:[0,0],y1LabelColor:Ne,y2LabelColor:Ne,y1TickFormat:",.0f",y2TickFormat:",.0f",xTickPadding:20,y1TickPadding:20,y2TickPadding:20,xTickLine:!1,y1TickLine:1,y2TickLine:1,xTickLineDasharray:"none",y1TickLineDasharray:"none",y2TickLineDasharray:"4",y1Ticks:4,y2Ticks:4,axisLineColor:Jc,axisLabelColor:Ne,rotateXLabel:!1,padding:zt,xVisible:!0,y1Visible:!0,y2Visible:!0},wi=6;class E4{constructor(e,n){this.width=se,this.height=oe,this.dataset={xScale:li(),y1Scale:Be(),y2Scale:Be(),y1MaxValue:0,y2MaxValue:0},this.params=nm,this.xAxisSelection=void 0,this.y1AxisSelection=void 0,this.y2AxisSelection=void 0,this.xLabelSelection=void 0,this.y1LabelSelection=void 0,this.y2LabelSelection=void 0,this.axisWidth=Wt(this.width,zt),this.axisHeight=Ot(this.height,zt),this.selection=e}setParams(e){this.params={...this.params,...e}}setDataset(e){this.dataset=e}resize({width:e=this.width,height:n=this.height}){this.width=e,this.height=n,this.axisWidth=Wt(this.width,this.params.padding),this.axisHeight=Ot(this.height,this.params.padding)}render(){this.renderXPointAxis(),this.renderY1LinearAxis(),this.renderY2LinearAxis();const e=this.dataset.y1Scale(0),n=this.dataset.y2Scale(0);this.renderZeroLine(this.selection,[{x1:0,y1:e,x2:this.axisWidth,y2:e},{x1:0,y1:n,x2:this.axisWidth,y2:n}])}remove(){this.selection.remove()}renderXPointAxis(){let e=[];this.params.xVisible&&e.push(this.params);const n=this.selection.selectAll("g.xAxis").data(e),i=n.enter().append("g");this.xAxisSelection=n.merge(i).classed("xAxis",!0).attr("transform",l=>"translate("+l.padding.left+","+(l.padding.top+this.axisHeight)+")"),n.exit().remove();const a=this.selection.selectAll("text.xLabel").data(e),r=a.enter().append("text").classed("xLabel",!0).style("font-size","14px").style("font-weight","bold").style("dominant-baseline","hanging");if(this.xLabelSelection=a.merge(r).attr("x",l=>this.width-l.padding.right+l.xTickPadding).attr("y",l=>l.padding.top+this.axisHeight+l.y2TickPadding+wi).attr("transform",`translate(${this.params.xLabelOffset[0]}, ${this.params.xLabelOffset[1]})`).attr("text-anchor",this.params.xLabelAnchor).style("fill",this.params.axisLabelColor).text(l=>l.xLabel),a.exit().remove(),this.xLabelSelection.size()==0)return;this.xAxis=ps(this.dataset.xScale).scale(this.dataset.xScale).tickSize(this.params.xTickLine&&typeof this.params.xTickLine=="boolean"?-this.axisHeight:this.params.xTickLine&&typeof this.params.xTickLine=="number"?-this.axisHeight*this.params.xTickLine:wi).tickSizeOuter(0).tickFormat(l=>l).tickPadding(this.params.xTickPadding);const s=this.xAxisSelection.transition().duration(50).call(this.xAxis).attr("text-anchor",()=>this.params.rotateXLabel!==!1?"end":"middle");s.selectAll("line").style("fill","none").style("stroke",this.params.axisLineColor).style("stroke-dasharray",this.params.xTickLineDasharray),s.selectAll("path").style("fill","none").style("stroke",this.params.axisLineColor).style("shape-rendering","crispEdges");const o=s.selectAll("text").style("font-family","sans-serif").style("font-size","14px").style("color",this.params.axisLabelColor).attr("transform-origin",`-5 ${this.params.xTickPadding+wi}`);this.params.rotateXLabel===!0?o.attr("transform","translate(0,0) rotate(-45)"):typeof this.params.rotateXLabel=="number"&&o.attr("transform",`translate(0,0) rotate(${this.params.rotateXLabel})`)}renderY1LinearAxis(){let e=[];this.params.y1Visible&&e.push(this.params);const n=this.selection.selectAll("g.y1Axis").data(e),i=n.enter().append("g");this.y1AxisSelection=n.merge(i).classed("y1Axis",!0).attr("transform",o=>"translate("+o.padding.left+","+o.padding.top+")"),n.exit().remove();const a=this.selection.selectAll("text.y1Label").data(e),r=a.enter().append("text").classed("y1Label",!0).style("font-size","14px").style("font-weight","bold");if(this.y1LabelSelection=a.merge(r).attr("fill",o=>o.y1LabelColor).attr("x",o=>o.padding.left-o.xTickPadding).attr("y",o=>o.padding.top-o.y1TickPadding).attr("transform",`translate(${this.params.y1LabelOffset[0]}, ${this.params.y1LabelOffset[1]})`).attr("text-anchor",this.params.y1LabelAnchor).text(o=>o.y1Label),a.exit().remove(),this.y1LabelSelection.size()==0)return;this.y1Axis=gs(this.dataset.y1Scale).scale(this.dataset.y1Scale).ticks(this.dataset.y1MaxValue>this.params.y1Ticks?this.params.y1Ticks:this.dataset.y1MaxValue===0?1:Math.ceil(this.dataset.y1MaxValue)).tickFormat(o=>us(o,this.params.y1TickFormat)).tickSize(this.params.y1TickLine&&typeof this.params.y1TickLine=="boolean"?-this.axisWidth:this.params.y1TickLine&&typeof this.params.y1TickLine=="number"?-this.axisWidth*this.params.y1TickLine:wi).tickPadding(this.params.y1TickPadding);const s=this.y1AxisSelection.transition().duration(100).call(this.y1Axis);s.selectAll("line").style("fill","none").style("stroke",this.params.axisLineColor).style("stroke-dasharray",this.params.y1TickLineDasharray),s.selectAll("path").style("fill","none").style("stroke","none").style("shape-rendering","crispEdges"),s.selectAll("text").style("font-family","sans-serif").style("font-size","14px").style("color",this.params.axisLabelColor)}renderY2LinearAxis(){let e=[];this.params.y2Visible&&e.push(this.params);const n=this.selection.selectAll("g.y2Axis").data(e),i=n.enter().append("g");this.y2AxisSelection=n.merge(i).classed("y2Axis",!0).attr("transform",o=>"translate("+(this.width-o.padding.right)+","+o.padding.top+")"),n.exit().remove();const a=this.selection.selectAll("text.y2Label").data(e),r=a.enter().append("text").classed("y1Label",!0).style("font-size","14px").style("font-weight","bold");if(this.y2LabelSelection=a.merge(r).attr("fill",o=>o.y2LabelColor).text(o=>o.y2Label).attr("x",o=>this.width-o.padding.right+o.xTickPadding).attr("y",o=>o.padding.top-o.y2TickPadding).attr("transform",`translate(${this.params.y2LabelOffset[0]}, ${this.params.y2LabelOffset[1]})`).attr("text-anchor",this.params.y2LabelAnchor),a.exit().remove(),this.y2LabelSelection.size()==0)return;this.y2Axis=Yf(this.dataset.y2Scale).scale(this.dataset.y2Scale).ticks(this.dataset.y2MaxValue>this.params.y2Ticks?this.params.y2Ticks:this.dataset.y2MaxValue===0?1:Math.ceil(this.dataset.y2MaxValue)).tickFormat(o=>us(o,this.params.y2TickFormat)).tickSize(this.params.y2TickLine&&typeof this.params.y2TickLine=="boolean"?-this.axisWidth:this.params.y2TickLine&&typeof this.params.y2TickLine=="number"?-this.axisWidth*this.params.y2TickLine:wi).tickPadding(this.params.y2TickPadding);const s=this.y2AxisSelection.transition().duration(100).call(this.y2Axis);s.selectAll("line").style("fill","none").style("stroke",this.params.axisLineColor).style("stroke-dasharray",this.params.y2TickLineDasharray),s.selectAll("path").style("fill","none").style("stroke","none").style("shape-rendering","crispEdges"),s.selectAll("text").style("font-family","sans-serif").style("font-size","14px").style("color",this.params.axisLabelColor)}renderZeroLine(e,n){const i=e.selectAll("g.bpchart__zero-line").data(n),a=i.enter().append("g").classed("bpchart__zero-line",!0).attr("transform",s=>"translate("+this.params.padding.left+","+this.params.padding.top+")");i.exit().remove();const r=i.merge(a);a.append("line"),r.select("line").attr("stroke",this.params.axisLabelColor).attr("stroke-width",1).transition().duration(100).attr("x1",s=>s.x1).attr("y1",s=>s.y1).attr("x2",s=>s.x2).attr("y2",s=>s.y2).attr("opacity",s=>s.y1>=0&&s.y1<=this.axisHeight?1:0)}}const ci={lineType:"line",lineCurve:"curveLinear",colors:ut,highlightTarget:"item",highlightItemId:"",enterDuration:800,labelTextMethod:(t,e)=>"",labelPositionMethod:(t,e)=>"top",labelStyleMethod:(t,e)=>"",labelFontSizeMethod:(t,e)=>10,labelColorMethod:(t,e)=>Ne,labelPadding:15},$4={barDirection:"right",positionPadding:5};function im(t,e=10){var a;const n=document.createElement("canvas").getContext("2d");return(((a=n==null?void 0:n.measureText(t))==null?void 0:a.width)??0)*e/10}const Y4=(t,e)=>{const n=t.map(s=>{const o=im(s.text,s.fontSize)+2,l=s.fontSize;let c=0,h=0,f="middle",u="central",p=0,d=0,g=0,m=0;return s.position==="left"?(c=s.barX0-e.positionPadding,h=(s.barY0+s.barY1)/2,f="end",u="central",p=c-o,d=c,g=h-l/2,m=h+l/2):s.position==="right"?(c=s.barX1+e.positionPadding,h=(s.barY0+s.barY1)/2,f="start",u="central",p=c,d=c+o,g=h-l/2,m=h+l/2):s.position==="top"?(c=(s.barX0+s.barX1)/2,h=s.barY0-e.positionPadding,f="middle",u="auto",p=c-o/2,d=c+o/2,g=h-l,m=h):s.position==="bottom"?(c=(s.barX0+s.barX1)/2,h=s.barY1+e.positionPadding,f="middle",u="hanging",p=c-o/2,d=c+o/2,g=h,m=h+l):s.position==="center"&&(c=(s.barX0+s.barX1)/2,h=(s.barY0+s.barY1)/2,f="middle",u="central",p=c-o/2,d=c+o/2,g=h,m=h+l),{...s,width:o,height:l,boundaryX0:p,boundaryX1:d,boundaryY0:g,boundaryY1:m,positionX:c,positionY:h,textAnchor:f,dominantBaseline:u,renderX:0,renderY:0,offsetX:0,offsetY:0}}),i=Object.assign([],n).sort((s,o)=>e.barDirection==="left"?o.positionX-s.positionX:e.barDirection==="right"?s.positionX-o.positionX:e.barDirection==="up"?o.positionY-s.positionY:e.barDirection==="down"?s.positionY-o.positionY:s.positionX-o.positionX),a=(s,o)=>o.filter(l=>(l.boundaryX0>=s.boundaryX0&&l.boundaryX0<=s.boundaryX1||l.boundaryX1>=s.boundaryX0&&l.boundaryX1<=s.boundaryX1)&&(l.boundaryY0>=s.boundaryY0&&l.boundaryY0<=s.boundaryY1||l.boundaryY1>=s.boundaryY0&&l.boundaryY1<=s.boundaryY1)),r=[];return i.forEach(s=>{let o=s.positionX,l=s.positionY;const c=a(s,r);let h=0,f=0;c.length&&(e.barDirection==="left"?h=c.reduce((b,v)=>v.boundaryX0<b?v.boundaryX0:b,1/0)-s.boundaryX1:e.barDirection==="right"?h=c.reduce((b,v)=>v.boundaryX1>b?v.boundaryX1:b,-1/0)-s.boundaryX0:e.barDirection==="up"?f=c.reduce((b,v)=>v.boundaryY0<b?v.boundaryY0:b,1/0)-s.boundaryY1:e.barDirection==="down"&&(f=c.reduce((b,v)=>v.boundaryY1>b?v.boundaryY1:b,1/0)-s.boundaryY0));let u=0,p=0;e.barDirection==="left"&&(s.position==="top"||s.position==="bottom"||s.position==="center")&&s.boundaryX1>s.barX1?u=s.barX1-s.boundaryX1:e.barDirection==="right"&&(s.position==="top"||s.position==="bottom"||s.position==="center")&&s.boundaryX0<s.barX0?u=s.barX0-s.boundaryX0:e.barDirection==="up"&&(s.position==="left"||s.position==="right"||s.position==="center")&&s.boundaryY1>s.barY1?p=s.barY1-s.boundaryY1:e.barDirection==="down"&&(s.position==="left"||s.position==="right"||s.position==="center")&&s.boundaryY0<s.barY0&&(p=s.barY0-s.boundaryY0);const d=Math.abs(h)>Math.abs(u)?h:u,g=Math.abs(f)>Math.abs(p)?f:p;r.push({...s,boundaryX0:s.boundaryX0+d,boundaryX1:s.boundaryX1+d,boundaryY0:s.boundaryY0+g,boundaryY1:s.boundaryY1+g,renderX:o,renderY:l,offsetX:d,offsetY:g})}),r};class am{constructor(e,n){this.data=[],this.params=$4,this.renderData=[],this.selection=e,this.labelGSelection=this.selection.append("g").style("pointer-events","none")}remove(){this.selection.remove()}setParams(e){this.params={...this.params,...e}}setData(e){this.data=e,this.renderData=Y4(e,this.params)}render(){const e=this.labelGSelection.selectAll("text").data(this.renderData),n=e.enter().append("text");e.exit().remove(),this.labelSelection=e.merge(n).attr("text-anchor",i=>i.textAnchor).attr("dominant-baseline",i=>i.dominantBaseline).attr("font-size",(i,a)=>i.fontSize).attr("fill",(i,a)=>i.color).attr("style",i=>i.style).text(i=>i.text),n.attr("x",i=>this.params.barDirection==="left"||this.params.barDirection==="right"?0:i.positionX).attr("y",i=>this.params.barDirection==="left"||this.params.barDirection==="right"?i.positionY:0).attr("transform",(i,a)=>this.params.barDirection==="left"||this.params.barDirection==="right"?`translate(0, ${i.offsetY})`:`translate(${i.offsetX}, 0)`),this.labelSelection.transition().duration(200).attr("x",i=>i.positionX).attr("y",i=>i.positionY).attr("transform",(i,a)=>`translate(${i.offsetX}, ${i.offsetY})`)}}const Ho=h4,qa=({lineData:t,data:e,event:n})=>({groupData:[],itemData:t,datum:void 0,itemLabel:t[0].itemLabel,itemIndex:t[0].itemIndex,clientX:n.clientX,clientY:n.clientY,offsetX:n.offsetX,offsetY:n.offsetY}),N4=t=>{let e=[[]],n=0;for(let i in t){if(t[i].value===void 0||t[i].value===null){e[n].length&&(n++,e[n]=[]);continue}e[n].push(t[i])}return e},z4=(t,e)=>{let n=[];return t.forEach((i,a)=>{i.forEach((r,s)=>{const o=[r.itemIndex,r.xIndex];n.push({id:r.id,data:r,barX0:r.x,barX1:r.x,barY0:r.y,barY1:r.y,position:e.labelPositionMethod(r,o),fontSize:e.labelFontSizeMethod(r,o),color:e.labelColorMethod(r,o),style:e.labelStyleMethod(r,o),text:e.labelTextMethod(r,o)})})}),n};let rm=class{constructor(e,n){this.params=ci,this.dataset={data:[],itemLabels:[],axisWidth:0,axisHeight:0,zeroY:0},this.graphicGSelection=void 0,this.linePath=ha().x(i=>i.x).y(i=>i.y).curve(Ho[this.params.lineCurve]),this.axisWidth=0,this.clickCallback=function(){},this.mouseoverCallback=function(){},this.mousemoveCallback=function(){},this.mouseoutCallback=function(){},this.selection=e,this.labelBoxSelection=this.selection.append("g"),this.defsSelection=e.append("defs"),this.utilGraphicBarLabel=new am(this.labelBoxSelection,{})}setParams(e){e.lineCurve&&e.lineCurve!=this.params.lineCurve&&(this.linePath=ha().x(n=>n.x).y(n=>n.y).curve(Ho[e.lineCurve])),this.params={...this.params,...e},this.colorScale=le(this.dataset.itemLabels,this.params.colors),this.initHighlight(),this.params.lineType=="line"?this.renderGraphicItem=this.renderLine:this.params.lineType=="area"?this.renderGraphicItem=this.renderArea:this.params.lineType==="gradientArea"&&(this.renderGraphicItem=this.renderGradientArea),this.utilGraphicBarLabel.setParams({barDirection:"up",positionPadding:this.params.labelPadding})}setDataset(e){this.dataset=e,this.colorScale=le(this.dataset.itemLabels,this.params.colors)}render(){this.axisWidth=this.dataset.axisWidth;const e=this.selection.selectAll("g.bpchart__graphic").data(this.dataset.data,(i,a)=>i[0]&&i[0].id?i[0].id:this.dataset.itemLabels[a]),n=e.enter().append("g").classed("bpchart__graphic",!0);if(e.exit().remove(),this.graphicGSelection=e.merge(n),this.graphicGSelection.attr("clip-path",(i,a)=>`url(#bpchart__clipPath_${this.dataset.itemLabels[a]})`),n.size()>0){const i=[];n.each((r,s,o)=>{i.push({id:`bpchart__clipPath_${r[s].itemLabel}`,x:0,y:0,width:0,height:this.dataset.axisHeight})}),this.renderClipPath(i);const a=[];e.each((r,s,o)=>{a.push({id:`bpchart__clipPath_${r[s].itemLabel}`,x:0,y:0,width:this.axisWidth,height:this.dataset.axisHeight})}),this.renderClipPath(i),this.selection.transition().duration(this.params.enterDuration).delay(100).tween("tween",(r,s,o)=>l=>{const c=this.axisWidth*l;n.each((h,f,u)=>{this.setClipPathItemWidth(`bpchart__clipPath_${h[f].itemLabel}`,c)})}).on("end",()=>{this.initHighlight()})}this.graphicGSelection.each((i,a,r)=>{const s=N4(i);this.renderGraphicItem({selection:W(r[a]),id:this.dataset.itemLabels&&this.dataset.itemLabels[a],data:s,linePath:this.linePath,colorScale:this.colorScale})}),this.graphicGSelection.on("mouseover",null),this.graphicGSelection.on("mouseout",null),this.graphicGSelection.on("click",(i,a)=>{const r=qa({lineData:i,data:this.dataset.data,event:w});this.clickCallback(r)}).on("mouseover",(i,a,r)=>{const s=qa({lineData:i,data:this.dataset.data,event:w});this.params.highlightTarget==="item"&&s&&s.itemLabel&&this.highlight(this.graphicGSelection,s.itemLabel),this.mouseoverCallback(s)}).on("mousemove",(i,a)=>{const r=qa({lineData:i,data:this.dataset.data,event:w});this.mousemoveCallback(r)}).on("mouseout",(i,a)=>{this.params.highlightTarget==="item"&&this.removeHighlight(this.graphicGSelection);const r=qa({lineData:i,data:this.dataset.data,event:w});this.initHighlight(),this.mouseoutCallback(r)}),this.utilGraphicBarLabel.setData(z4(this.dataset.data,this.params)),this.utilGraphicBarLabel.render()}on(e,n){return e==="click"?this.clickCallback=n:e==="mouseover"?this.mouseoverCallback=n:e==="mousemove"?this.mousemoveCallback=n:e==="mouseout"&&(this.mouseoutCallback=n),this}remove(){this.selection.remove()}renderClipPath(e){const n=this.defsSelection.selectAll("clipPath").data(e),i=n.enter().append("clipPath"),a=n.merge(i).attr("id",r=>r.id);n.exit().remove(),a.each((r,s,o)=>{const l=W(o[s]).selectAll("rect").data([r]),c=l.enter().append("rect");l.exit().remove(),l.merge(c).attr("x",h=>h.x).attr("y",h=>h.y).attr("width",h=>h.width).attr("height",h=>h.height)})}setClipPathItemWidth(e,n){this.defsSelection.select(`clipPath#${e}`).select("rect").attr("width",n)}renderGraphicItem({selection:e,id:n,data:i,linePath:a,colorScale:r}){}renderLine({selection:e,id:n,data:i,linePath:a,colorScale:r}){const s=e.selectAll("path.bpchart__graphic__line").data(i,(l,c)=>c),o=s.enter().append("path").classed("bpchart__graphic__line",!0).attr("fill","none").attr("stroke-width",2).style("vector-effect","non-scaling-stroke").style("cursor","pointer");s.exit(),s.merge(o).attr("stroke",(l,c)=>n?r(n):ut[c]).attr("d",l=>a(l))}renderArea({selection:e,id:n,data:i,linePath:a,colorScale:r}){const s=Wc().x(c=>c.x).y0(this.dataset.zeroY).y1(c=>c.y).curve(Ho[this.params.lineCurve]),o=e.selectAll("path.bpchart__graphic__area").data(i,(c,h)=>h),l=o.enter().append("path").classed("bpchart__graphic__area",!0).style("opacity",.5).style("pointer-events","none");o.exit(),o.merge(l).attr("transform","translate(0,0)").attr("fill",(c,h)=>this.params.lineType==="gradientArea"?`url(#bpchart__gradient__${n})`:n?r(n):ut[h]).attr("d",c=>s(c))}renderGradientArea({selection:e,id:n,data:i,linePath:a,colorScale:r}){const s=this.defsSelection.selectAll("linearGradient").data(this.dataset.itemLabels,l=>l),o=s.enter().append("linearGradient");s.merge(o).attr("id",(l,c)=>`bpchart__gradient__${this.dataset.itemLabels[Number(c)]}`).attr("x1","0%").attr("x2","0%").attr("y1","0%").attr("y2","100%").attr("spreadMethod","pad").html((l,c)=>`
          <stop offset="0%"   stop-color="${this.params.colors[Number(c)]}" stop-opacity="1"/>
          <stop offset="100%" stop-color="${this.params.colors[Number(c)]}" stop-opacity="0"/>
        `),s.exit().remove(),this.renderLine({selection:e,id:n,data:i,linePath:a,colorScale:r}),this.renderArea({selection:e,id:n,data:i,linePath:a,colorScale:r})}initHighlight(){this.graphicGSelection&&(this.params.highlightItemId?this.highlight(this.graphicGSelection,this.params.highlightItemId):this.removeHighlight(this.graphicGSelection))}highlight(e,n){e&&e.each((i,a,r)=>{i[0].itemLabel===n?W(r[a]).transition().duration(200).style("opacity",1):W(r[a]).transition().duration(200).style("opacity",.3)})}removeHighlight(e){this.params.highlightItemId?this.highlight(e,this.params.highlightItemId):this.params.highlightItemId||e.transition().duration(200).style("opacity",1)}};const Cn={r:4,fill:"#fff",strokeWidth:2,colors:ut,highlightTarget:"item",highlightItemId:"",highlightDatumId:"",enterDuration:20};class sm{constructor(e,n){this.params=Cn,this.dataset={data:[],itemLabels:[]},this.dotSelection=void 0,this.renderData=[],this.clickCallback=function(){},this.mouseoverCallback=function(){},this.mousemoveCallback=function(){},this.mouseoutCallback=function(){},this.selection=e}setParams(e){this.params={...this.params,...e},this.colorScale=le(this.dataset.itemLabels&&this.dataset.itemLabels.length?this.dataset.itemLabels:[""],this.params.colors)}setDataset(e){this.dataset=e,this.renderData=this.dataset.data.map(n=>({...n,itemLabel:n.itemLabel??""})),this.colorScale=le(this.dataset.itemLabels&&this.dataset.itemLabels.length?this.dataset.itemLabels:[""],this.params.colors)}render(){this.renderDot({selection:this.selection,data:this.renderData,colorScale:this.colorScale,params:this.params}),this.dotSelection.on("mouseover",null),this.dotSelection.on("mouseout",null),this.dotSelection.on("click",(e,n)=>{this.clickCallback(e)}).on("mouseover",(e,n)=>{this.params.highlightTarget==="item"&&e.itemLabel?this.highlight(this.dotSelection,e.itemLabel,""):this.params.highlightTarget==="datum"&&e.id&&this.highlight(this.dotSelection,"",e.id),this.mouseoverCallback(e)}).on("mousemove",(e,n)=>{this.mousemoveCallback(e)}).on("mouseout",(e,n)=>{this.params.highlightTarget==="item"&&this.removeHighlight(this.dotSelection),this.mouseoutCallback(e)})}on(e,n){return e==="click"?this.clickCallback=n:e==="mouseover"?this.mouseoverCallback=n:e==="mousemove"?this.mousemoveCallback=n:e==="mouseout"&&(this.mouseoutCallback=n),this}remove(){this.selection.remove()}renderDot({selection:e,data:n,colorScale:i,params:a}){const r=e.selectAll("circle.bpchart__circle").data(n,o=>o.id),s=r.enter().append("circle").attr("r",a.r).attr("fill",a.fill).attr("stroke-width",a.strokeWidth).style("cursor","pointer").classed("bpchart__circle",!0).attr("opacity",0);r.exit().remove(),this.dotSelection=r.merge(s),this.dotSelection.attr("stroke",(o,l)=>i(o.itemLabel)),s.attr("cx",o=>o.x).attr("cy",o=>o.y).attr("opacity",0).transition().delay((o,l)=>l*this.params.enterDuration).attr("opacity",1),r.transition().duration(50).attr("cx",o=>o.x).attr("cy",o=>o.y).attr("opacity",1),this.dotSelection.on("end",()=>{this.params.highlightItemId||this.params.highlightDatumId?this.highlight(this.dotSelection,this.params.highlightItemId,this.params.highlightDatumId):this.removeHighlight(this.dotSelection)})}highlight(e,n,i){if(!e)return;let a=[];if(i&&a.push(i),n){const r=this.dataset.data.flat().filter(s=>s.itemLabel===n).map(s=>s.id);a=a.concat(r)}e.each((r,s,o)=>{a.includes(r.id)?W(o[s]).style("opacity",1):W(o[s]).transition().duration(200).style("opacity",.3)})}removeHighlight(e){this.params.highlightItemId||this.params.highlightDatumId?this.highlight(e,this.params.highlightItemId,this.params.highlightDatumId):this.params.highlightItemId||e.style("opacity",1)}}const om={barType:"rect",barWidth:0,barPadding:1,barR:!1,colors:ut,highlightTarget:"datum",highlightDatumId:"",enterDuration:800},ah={barType:"rect",barWidth:0,barPadding:1,barGroupPadding:20,barR:!1,colors:ut,highlightTarget:"item",highlightGroupId:"",highlightItemId:"",highlightDatumId:"",enterDuration:800},H4=(t,e)=>{const n=new Map;return e.forEach((i,a)=>{n.set(i,t[a])}),n},X4=(t,e)=>{const n=new Map;return t.forEach((i,a)=>{i.forEach((r,s)=>{const o=n.get(e[s])??[];o.push(r),n.set(e[s],o)})}),n},G4=(t,e)=>e.map(n=>t.get(n)??[]),B4=(t,e,n)=>{const i=t/2,a=t*e.length+n.barPadding*e.length;return li().domain(e).range([-a/2+i,a/2-i])},Za=({datum:t,XDataMap:e,ItemDataMap:n,event:i})=>({groupData:e.get(t.xLabel),itemData:n.get(t.itemLabel),datum:t,xLabel:t.xLabel,xIndex:t.xIndex,itemLabel:t.itemLabel,itemIndex:t.itemIndex,clientX:i.clientX,clientY:i.clientY,offsetX:i.offsetX,offsetY:i.offsetY}),W4=({axisWidth:t,groupAmount:e,barAmountOfGroup:n,barPadding:i=0,barGroupPadding:a=0})=>{const r=(t/e-a)/n-i;return r>1?r:1},O4=(t,e=400)=>e/t;class F4{constructor(e,n){this.params=ah,this.dataset={data:[],itemLabels:[],xLabels:[],axisWidth:0,zeroY:0},this.graphicData=[],this.graphicGroupSelection=void 0,this.graphicBarSelection=void 0,this.itemLabels=[],this.ItemDataMap=new Map,this.XDataMap=new Map,this.axisWidth=0,this.barWidth=0,this.delayDuration=0,this.clickCallback=function(){},this.mouseoverCallback=function(){},this.mousemoveCallback=function(){},this.mouseoutCallback=function(){},this.selection=e,this.defsSelection=e.append("defs")}setParams(e){this.params={...this.params,...e},this.itemLabels=[],this.params.barType=="rect"?this.renderGraphic=this.renderRect:this.params.barType=="triangle"&&(this.renderGraphic=this.renderTriangle)}setDataset(e){this.dataset=e,this.itemLabels=this.dataset.itemLabels,this.ItemDataMap=H4(this.dataset.data,this.dataset.itemLabels),this.XDataMap=X4(this.dataset.data,this.dataset.xLabels),this.delayDuration=O4(this.dataset.xLabels.length)}render(){if(!this.itemLabels.length)return;this.colorScale=le(this.itemLabels,this.params.colors),this.setLinearGradient({defsSelection:this.defsSelection,itemLabels:this.itemLabels,colorScale:this.colorScale}),this.axisWidth=this.dataset.axisWidth,this.barWidth=this.params.barWidth?this.params.barWidth:W4({axisWidth:this.axisWidth,groupAmount:this.dataset.xLabels.length,barAmountOfGroup:this.dataset.itemLabels.length,barPadding:this.params.barPadding??0,barGroupPadding:this.params.barGroupPadding??0});const e=B4(this.barWidth,this.dataset.itemLabels,this.params);this.graphicData=G4(this.XDataMap,this.dataset.xLabels),this.renderGraphic({selection:this.selection,graphicData:this.graphicData,xLabels:this.dataset.xLabels,colorScale:this.colorScale,itemScale:e,params:this.params}),this.graphicBarSelection.on("click",(n,i)=>{const a=Za({datum:n,XDataMap:this.XDataMap,ItemDataMap:this.ItemDataMap,event:w});this.clickCallback(a)}).on("mouseover",(n,i,a)=>{const r=Za({datum:n,XDataMap:this.XDataMap,ItemDataMap:this.ItemDataMap,event:w});this.params.highlightTarget!=null&&this.params.highlightTarget!="none"&&(this.params.highlightTarget==="group"?this.highlight(this.graphicBarSelection,r.xLabel,void 0,void 0):this.params.highlightTarget==="item"?this.highlight(this.graphicBarSelection,void 0,r.itemLabel,void 0):this.params.highlightTarget==="datum"&&this.highlight(this.graphicBarSelection,void 0,void 0,r.datum&&r.datum.id)),this.mouseoverCallback(r)}).on("mousemove",(n,i)=>{const a=Za({datum:n,XDataMap:this.XDataMap,ItemDataMap:this.ItemDataMap,event:w});this.mousemoveCallback(a)}).on("mouseout",(n,i)=>{this.params.highlightTarget!=null&&this.params.highlightTarget!="none"&&this.removeHighlight(this.graphicBarSelection);const a=Za({datum:n,XDataMap:this.XDataMap,ItemDataMap:this.ItemDataMap,event:w});this.initHighlight(),this.mouseoutCallback(a)})}on(e,n){return e==="click"?this.clickCallback=n:e==="mouseover"?this.mouseoverCallback=n:e==="mousemove"?this.mousemoveCallback=n:e==="mouseout"&&(this.mouseoutCallback=n),this}remove(){this.selection.remove()}setLinearGradient({defsSelection:e,itemLabels:n,colorScale:i}){const a=e.selectAll("linearGradient").data(n,s=>s),r=a.enter().append("linearGradient").attr("x1","0%").attr("x2","0%").attr("y1","0%").attr("y2","100%").attr("spreadMethod","pad");a.merge(r).attr("id",(s,o)=>`bpchart__lineargradient__${s}`).html((s,o)=>`
          <stop offset="0%"   stop-color="${i(s)}" stop-opacity="1"/>
          <stop offset="100%" stop-color="${i(s)}" stop-opacity="0"/>
        `),a.exit().remove()}renderGraphic({selection:e,graphicData:n,xLabels:i,colorScale:a,itemScale:r,params:s}){}renderRect({selection:e,graphicData:n,xLabels:i,colorScale:a,itemScale:r,params:s}){if(this.barWidth<=0)return;const o=e.selectAll("g.bpchart__bar-g").data(n,(h,f)=>h[0]&&h[0].id?h[0].id:i[f]),l=o.enter().append("g").classed("bpchart__bar-g",!0).attr("cursor","pointer");o.exit().remove(),this.graphicGroupSelection=o.merge(l),l.attr("transform",(h,f)=>`translate(${h[0]?h[0].x:0}, 0)`),o.transition().duration(200).attr("transform",(h,f)=>`translate(${h[0]?h[0].x:0}, 0)`);const c=this.barWidth/2;this.graphicGroupSelection.each((h,f,u)=>{const p=W(u[f]).selectAll("g").data(h,g=>g.id),d=p.enter().append("g").classed("bpchart__bar",!0);d.append("rect").attr("rx",s.barR==!0?c:s.barR==!1?0:typeof s.barR=="number"?s.barR:0).attr("transform",`translate(${-c}, 0)`).attr("x",g=>r(g.itemLabel)).attr("y",g=>this.dataset.zeroY).attr("width",this.barWidth).attr("height",g=>0),p.merge(d).select("rect").attr("fill",g=>a(g.itemLabel)).transition().duration(this.params.enterDuration).ease(fn).delay((g,m)=>g.xIndex*this.delayDuration).attr("transform",`translate(${-c}, 0)`).attr("x",g=>r(g.itemLabel)).attr("y",g=>g.y<this.dataset.zeroY?g.y:this.dataset.zeroY).attr("width",this.barWidth).attr("height",g=>Math.abs(this.dataset.zeroY-g.y)).on("end",()=>this.initHighlight()),p.exit().remove()}),this.graphicBarSelection=this.graphicGroupSelection.selectAll("g.bpchart__bar")}renderTriangle({selection:e,graphicData:n,xLabels:i,colorScale:a,itemScale:r,params:s}){if(this.barWidth<=0)return;const o=e.selectAll("g.bpchart__bar-g").data(n,(h,f)=>h[0]&&h[0].id?h[0].id:i[f]),l=o.enter().append("g").classed("bpchart__bar-g",!0).attr("cursor","pointer");o.exit().remove(),this.graphicGroupSelection=o.merge(l).attr("transform",(h,f)=>`translate(${h[0]?h[0].x:0}, 0)`);const c=this.barWidth/2;this.graphicGroupSelection.each((h,f,u)=>{const p=W(u[f]).selectAll("g").data(h,g=>g.id),d=p.enter().append("g").classed("bpchart__bar",!0);d.append("path").attr("transform",`translate(${-c}, 0)`).attr("height",g=>0).attr("d",g=>{const m=r(g.itemLabel),b=0,v=b;return`M${m-this.params.barWidth/2},${b} L${m},${v} ${m+this.params.barWidth/2},${b}`}),p.merge(d).select("path").style("fill",g=>`url(#bpchart__lineargradient__${g.itemLabel})`).attr("stroke",g=>a(g.itemLabel)).attr("transform",`translate(${-c}, 0)`).transition().duration(this.params.enterDuration).ease(fn).delay((g,m)=>g.xIndex*this.delayDuration).attr("transform",`translate(${-c}, 0)`).attr("height",g=>Math.abs(this.dataset.zeroY-g.y)).attr("d",g=>{const m=r(g.itemLabel),b=this.dataset.zeroY,v=g.y;return`M${m},${b} L${m+this.params.barWidth/2},${v} ${m+this.params.barWidth},${b}`}).on("end",()=>this.initHighlight()),p.exit().remove()}),this.graphicBarSelection=this.graphicGroupSelection.selectAll("g.bpchart__bar")}initHighlight(){this.graphicBarSelection&&(this.params.highlightDatumId||this.params.highlightItemId||this.params.highlightGroupId)&&this.highlight(this.graphicBarSelection,this.params.highlightGroupId,this.params.highlightItemId,this.params.highlightDatumId)}highlight(e,n,i,a){if(!e)return;let r=[];if(a&&r.push(a),i){const s=this.dataset.data.flat().filter(o=>o.itemLabel===i).map(o=>o.id);r=r.concat(s)}if(n){const s=this.dataset.data.flat().filter(o=>o.xLabel===n).map(o=>o.id);r=r.concat(s)}e.each((s,o,l)=>{r.includes(s.id)?W(l[o]).transition().duration(200).style("opacity",1):W(l[o]).transition().duration(200).style("opacity",.3)})}removeHighlight(e){this.params.highlightDatumId||this.params.highlightItemId||this.params.highlightGroupId?this.highlight(e,this.params.highlightGroupId,this.params.highlightItemId,this.params.highlightDatumId):e.transition().duration(200).style("opacity",1)}}const lm={barWidth:0,barGroupPadding:1,barR:!1,colors:ut,highlightTarget:"item",highlightGroupId:"",highlightItemId:"",highlightDatumId:"",enterDuration:800},U4=ut.map(t=>t).reverse(),Ma={axisColumnTwoScales:nm,tooltipAside:{templateHtml:t=>t.y1.groupData&&t.y2.groupData?`
          <div>
            <div>${t.xLabel}</div>
            <div>${t.y1.groupData.map(e=>e.value).join(",")}</div>          
            <div>${t.y2.groupData.map(e=>e.value).join(",")}</div>          
          </div>
        `:""},y1Colors:ut,y2Colors:U4,padding:zt,highlightTarget:"datum",highlightDatumId:"",highlightItemId:"",highlightGroupId:"",showAuxLine:!1,y1DomainMinValue:0,y1DomainMaxValue:void 0,y1DomainMinRange:void 0,y1DomainMaxRange:.95,y2DomainMinValue:0,y2DomainMaxValue:void 0,y2DomainMinRange:void 0,y2DomainMaxRange:.95,showDot:"hover"};({...Ma});const V4={...Ma,graphicColumnLine:ci,graphicDot:Cn,graphicColumnBarGroup:ah};({...Ma});({...Ma});const xf=(t,e)=>({...t,padding:e}),q4=({dataset:t,activedItemId:e,Y1XDataMap:n,Y2XDataMap:i,Y1ItemDataMap:a,Y2ItemDataMap:r,padding:s,xRangeScale:o,event:l})=>{if(!l||!o)return{dataset:t,y1:{groupData:[],itemData:[],datum:void 0,itemLabel:"",itemIndex:-1},y2:{groupData:[],itemData:[],datum:void 0,itemLabel:"",itemIndex:-1},xLabel:"",xIndex:-1,rangeIndex:-1,clientX:-1,clientY:-1,offsetX:-1,offsetY:-1};const c=Number(l.offsetX)-s.left,h=Number(o(c)??0),f=t.xLabels[h],u=n.get(f)??[],p=i.get(f)??[];let d=[],g,m=[],b;return e&&(d=a.get(e)??[],g=u.find(v=>v.itemLabel===e),m=r.get(e)??[],b=p.find(v=>v.itemLabel===e)),{dataset:t,y1:{groupData:u,itemData:d,datum:g,itemLabel:g?g.itemLabel:"",itemIndex:g?g.itemIndex:-1},y2:{groupData:p,itemData:m,datum:b,itemLabel:b?b.itemLabel:"",itemIndex:b?b.itemIndex:-1},xLabel:f,xIndex:h,rangeIndex:h,clientX:w.clientX,clientY:w.clientY,offsetX:w.offsetX,offsetY:w.offsetY}};let Z4=class{constructor(e,n){this.width=se,this.height=oe,this.dataset={y1Data:[],y2Data:[],xLabels:[],y1ItemLabels:[],y2ItemLabels:[]},this.params=Ma,this.graphicY1Selection=void 0,this.graphicY2Selection=void 0,this.axisWidth=0,this.axisHeight=0,this.clickCallback=function(){},this.mouseoverCallback=function(){},this.mousemoveCallback=function(){},this.mouseoutCallback=function(){},this.Y1XDataMap=new Map,this.Y2XDataMap=new Map,this.Y1ItemDataMap=new Map,this.Y2ItemDataMap=new Map,this.y1RenderData=[],this.y2RenderData=[],this.axisParams=this.params.axisColumnTwoScales,this.xAxisSelection=void 0,this.yAxisSelection=void 0,this.xLabelSelection=void 0,this.yLabelSelection=void 0,this.auxLineSelection=void 0,this.y1MinValue=0,this.y1MaxValue=0,this.y2MinValue=0,this.y2MaxValue=0,this.makeActivedCallbackData=(i,a)=>q4({dataset:this.dataset,activedItemId:i,Y1XDataMap:this.Y1XDataMap,Y2XDataMap:this.Y2XDataMap,Y1ItemDataMap:this.Y1ItemDataMap,Y2ItemDataMap:this.Y2ItemDataMap,padding:this.params.padding,xRangeScale:this.xRangeScale,event:a}),this.selection=e,this.axisSelection=e.append("g"),this.axisColumnTwoScales=new E4(this.axisSelection,{}),this.rangeSelection=this.selection.append("rect").attr("opacity",0),this.setRangeEvent(this.rangeSelection),this.graphicY1Selection=e.append("g"),this.graphicY2Selection=e.append("g"),this.coverSelection=this.selection.append("g").classed("bpchart__cover",!0),this.utilAuxLine=new ih(this.coverSelection),this.setCoverEvent(this.selection)}setParams(e){this.params={...this.params,...e,axisColumnTwoScales:{...this.params.axisColumnTwoScales,...e.axisColumnTwoScales}},this.params.tooltipAside&&!this.tooltip&&(this.tooltip=new nh(this.selection,{templateHtml:this.params.tooltipAside.templateHtml,type:this.params.tooltipAside.type??"white",yLine:this.params.tooltipAside.yLine??!1})),this.axisParams=xf(this.params.axisColumnTwoScales,this.params.padding),this.axisWidth=Wt(this.width,this.params.padding),this.axisHeight=Ot(this.height,this.params.padding),this.axisColumnTwoScales.setParams(this.axisParams),this.graphicY1Selection.attr("transform",`translate(${this.params.padding.left}, ${this.params.padding.top})`),this.graphicY2Selection.attr("transform",`translate(${this.params.padding.left}, ${this.params.padding.top})`),this.coverSelection.attr("transform",`translate(${this.params.padding.left}, ${this.params.padding.top})`),this.initGraphic(this.params)}select(){return this.selection}remove(){this.selection.remove()}resize({width:e=this.width,height:n=this.height}){this.width=e,this.height=n,this.axisParams=xf(this.params.axisColumnTwoScales,this.params.padding),this.axisWidth=Wt(this.width,this.params.padding),this.axisHeight=Ot(this.height,this.params.padding),this.axisColumnTwoScales.setParams(this.axisParams),this.axisColumnTwoScales.resize({width:e,height:n}),this.rangeSelection.attr("x",this.params.padding.left).attr("y",this.params.padding.top).attr("width",this.axisWidth).attr("height",this.axisHeight)}setDataset(e){this.dataset=e;const[n,i]=this.getY1MinAndMaxValue(this.dataset.y1Data),[a,r]=this.getY2MinAndMaxValue(this.dataset.y2Data);this.y1MinValue=n,this.y1MaxValue=i,this.y2MinValue=a,this.y2MaxValue=r}render(){this.xScale=th({axisLabels:this.dataset.xLabels,axisWidth:this.axisWidth}),this.y1Scale=fs({maxValue:this.y1MaxValue,minValue:this.y1MinValue,axisWidth:this.axisHeight,domainMinValue:this.params.y1DomainMinValue,domainMaxValue:this.params.y1DomainMaxValue,domainMinRange:this.params.y1DomainMinRange,domainMaxRange:this.params.y1DomainMaxRange,reverse:!0}),this.y2Scale=fs({maxValue:this.y2MaxValue,minValue:this.y2MinValue,axisWidth:this.axisHeight,domainMinValue:this.params.y2DomainMinValue,domainMaxValue:this.params.y2DomainMaxValue,domainMinRange:this.params.y2DomainMinRange,domainMaxRange:this.params.y2DomainMaxRange,reverse:!0}),this.xRangeScale=eh({axisLabels:this.dataset.xLabels,axisWidth:this.axisWidth}),this.y1RenderData=this.makeY1GraphicRenderData({dataset:this.dataset,xScale:this.xScale,y1Scale:this.y1Scale}),this.y2RenderData=this.makeY2GraphicRenderData({dataset:this.dataset,xScale:this.xScale,y2Scale:this.y2Scale}),this.Y1XDataMap=this.makeY1XDataMap({y1RenderData:this.y1RenderData,xLabels:this.dataset.xLabels}),this.Y2XDataMap=this.makeY2XDataMap({y2RenderData:this.y2RenderData,xLabels:this.dataset.xLabels}),this.Y1ItemDataMap=this.makeY1ItemDataMap({y1RenderData:this.y1RenderData,y1ItemLabels:this.dataset.y1ItemLabels??[]}),this.Y1ItemDataMap=this.makeY2ItemDataMap({y2RenderData:this.y2RenderData,y2ItemLabels:this.dataset.y2ItemLabels??[]}),this.setGraphicData({y1RenderData:this.y1RenderData,y2RenderData:this.y2RenderData,y1ItemLabels:this.dataset.y1ItemLabels??[],y2ItemLabels:this.dataset.y2ItemLabels??[],xLabels:this.dataset.xLabels,xScale:this.xScale,y1Scale:this.y1Scale,y2Scale:this.y2Scale}),this.axisColumnTwoScales.setDataset({xScale:this.xScale,y1Scale:this.y1Scale,y2Scale:this.y2Scale,y1MaxValue:this.y1MaxValue,y2MaxValue:this.y2MaxValue}),this.axisColumnTwoScales.render(),this.renderGraphic()}on(e,n){return e==="click"?this.clickCallback=n:e==="mouseover"?this.mouseoverCallback=n:e==="mousemove"?this.mousemoveCallback=n:e==="mouseout"&&(this.mouseoutCallback=n),this}setRangeEvent(e){e.on("click",(n,i)=>{const a=this.makeActivedCallbackData("",w);this.clickCallback(a)}).on("mouseover",(n,i)=>{const a=this.makeActivedCallbackData("",w);this.mouseoverCallback(a)}).on("mousemove",n=>{const i=this.makeActivedCallbackData("",w);this.mousemoveCallback(i)}).on("mouseout",n=>{if(w.offsetX>0&&w.offsetX<this.width&&w.offsetY>0&&w.offsetY<this.height)return;const i=this.makeActivedCallbackData("",w);this.mouseoutCallback(i)})}showTooltip(e,n){n&&e&&this.xScale?this.tooltip.setDatum({data:e,x:e.clientX-e.offsetX+this.params.padding.left+this.xScale(e.xLabel),y:w.clientY}):this.tooltip.remove()}setCoverEvent(e){e.on("mouseover",(n,i)=>{const a=this.makeActivedCallbackData("",w);this.coverHighlight(a),this.showTooltip(a,w)}).on("mousemove",n=>{const i=this.makeActivedCallbackData("",w);this.coverHighlight(i),this.showTooltip(i,w)}).on("mouseout",n=>{w.offsetX>0&&w.offsetX<this.width&&w.offsetY>0&&w.offsetY<this.height||(this.coverHighlight(void 0),this.tooltip.remove())})}coverHighlight(e){this.params.showAuxLine&&this.renderAuxLine({coverSelection:this.coverSelection,xLabels:this.dataset.xLabels,activeRangeIndex:e?e.rangeIndex:-1,xScale:this.xScale,padding:this.params.padding,axisHeight:this.axisHeight}),this.renderGraphicCoverHighlight({eventData:e,xScale:this.xScale,y1Scale:this.y1Scale,y2Scale:this.y2Scale,padding:this.params.padding})}renderAuxLine({coverSelection:e,xLabels:n,activeRangeIndex:i,xScale:a,padding:r,axisHeight:s}){if(!a)return;const o=n.map((l,c)=>{const h=a(l)||0;return{x1:h,x2:h,y1:0,y2:s,active:i==c}});this.utilAuxLine.setData(o),this.utilAuxLine.render()}};const Yn="__DEFAULT__";class K4 extends Z4{constructor(e,n){super(e,n),this.params=V4,this.bar=new F4(this.graphicY1Selection,{}),this.line=new rm(this.graphicY2Selection,{}),this.dot=new sm(this.coverSelection,{})}initGraphic(e){this.params={...this.params,...e},this.params.graphicColumnBarGroup={...this.params.graphicColumnBarGroup,colors:this.params.y1Colors,highlightTarget:this.params.highlightTarget,highlightDatumId:this.params.highlightDatumId,highlightItemId:this.params.highlightItemId,highlightGroupId:this.params.highlightGroupId},this.params.graphicColumnLine={...this.params.graphicColumnLine,colors:this.params.y2Colors,highlightItemId:this.params.highlightItemId,highlightTarget:this.params.highlightTarget==="item"?"item":"none"},this.params.graphicDot={...this.params.graphicDot,colors:this.params.y2Colors,highlightItemId:this.params.highlightItemId,highlightTarget:this.params.highlightTarget==="item"?"item":"none"},this.bar.setParams(this.params.graphicColumnBarGroup),this.bar.on("click",n=>{const i=this.makeActivedCallbackData(n.itemLabel??"",w);this.clickCallback(i)}).on("mouseover",n=>{const i=this.makeActivedCallbackData(n.itemLabel??"",w);this.showTooltip(i,w),this.mouseoverCallback(i)}).on("mousemove",n=>{const i=this.makeActivedCallbackData(n.itemLabel??"",w);this.showTooltip(i,w),this.mousemoveCallback(i)}).on("mouseout",n=>{const i=this.makeActivedCallbackData("",w);this.showTooltip(void 0,w),this.mouseoutCallback(i)}),this.line.setParams(this.params.graphicColumnLine),this.line.on("click",n=>{const i=this.makeActivedCallbackData(n.itemLabel??"",w);this.clickCallback(i)}).on("mouseover",n=>{const i=this.makeActivedCallbackData(n.itemLabel??"",w);this.showTooltip(i,w),this.mouseoverCallback(i),this.params.highlightTarget==="item"&&(this.dot.setParams({highlightItemId:n.itemLabel}),this.dot.render())}).on("mousemove",n=>{const i=this.makeActivedCallbackData(n.itemLabel??"",w);this.showTooltip(i,w),this.mousemoveCallback(i)}).on("mouseout",n=>{const i=this.makeActivedCallbackData("",w);this.showTooltip(void 0,w),this.mouseoutCallback(i),this.params.highlightTarget==="item"&&(this.dot.setParams({highlightItemId:this.params.highlightItemId}),this.dot.render())}),this.dot.setParams(this.params.graphicDot),this.dot.on("click",n=>{const i=this.makeActivedCallbackData(n.itemLabel??"",w);this.clickCallback(i)}).on("mouseover",n=>{const i=this.makeActivedCallbackData(n.itemLabel??"",w);this.showTooltip(i,w),this.mouseoverCallback(i),this.params.highlightTarget==="item"&&(this.line.setParams({highlightItemId:n.itemLabel}),this.line.render())}).on("mousemove",n=>{const i=this.makeActivedCallbackData(n.itemLabel??"",w);this.showTooltip(i,w),this.mousemoveCallback(i)}).on("mouseout",n=>{const i=this.makeActivedCallbackData("",w);this.showTooltip(void 0,w),this.mouseoutCallback(i),this.params.highlightTarget==="item"&&(this.line.setParams({highlightItemId:this.params.highlightItemId}),this.line.render())})}makeY1GraphicRenderData({dataset:e,xScale:n,y1Scale:i}){return e.y1Data.map((a,r)=>{const s=e.y1ItemLabels&&e.y1ItemLabels[r]?e.y1ItemLabels[r]:Yn;return a.map((o,l)=>{const c=e.xLabels[l];return{...o,id:`${s}_${c}`,itemIndex:r,itemLabel:s,xIndex:l,xLabel:c,x:n(c)||0,y:i(o.value)||0}})})}makeY2GraphicRenderData({dataset:e,xScale:n,y2Scale:i}){return e.y2Data.map((a,r)=>{const s=e.y2ItemLabels&&e.y2ItemLabels[r]?e.y2ItemLabels[r]:Yn;return a.map((o,l)=>{const c=e.xLabels[l];return{...o,id:`${s}_${c}`,itemIndex:r,itemLabel:s,xIndex:l,xLabel:c,x:n(c)||0,y:i(o.value)||0}})})}getY1MinAndMaxValue(e){return e.length?e.flat().reduce((n,i)=>[i.value<n[0]?i.value:n[0],i.value>n[1]?i.value:n[1]],[1/0,0]):[0,0]}getY2MinAndMaxValue(e){return e.length?e.flat().reduce((n,i)=>[i.value<n[0]?i.value:n[0],i.value>n[1]?i.value:n[1]],[1/0,0]):[0,0]}makeY1XDataMap({y1RenderData:e,xLabels:n}){let i=new Map;return e.length&&e.forEach((a,r)=>{i.set(n[r]??"",a)}),i}makeY2XDataMap({y2RenderData:e,xLabels:n}){let i=new Map;return e.length&&e.forEach((a,r)=>{a.forEach((s,o)=>{const l=i.get(n[o])??[];l.push(s),i.set(n[o]??"",l)})}),i}makeY1ItemDataMap({y1RenderData:e,y1ItemLabels:n}){let i=new Map;return e.length&&e.forEach((a,r)=>{a.forEach(s=>{const o=i.get(s.itemLabel??"")??[];o.push(s),i.set(s.itemLabel??"",o)})}),i}makeY2ItemDataMap({y2RenderData:e,y2ItemLabels:n}){let i=new Map;return e.length&&e.forEach((a,r)=>{i.set(n[r]??"",a)}),i}setGraphicData({y1RenderData:e,y2RenderData:n,y1ItemLabels:i,y2ItemLabels:a,xLabels:r,xScale:s,y1Scale:o,y2Scale:l}){if(this.bar.setDataset({data:e,itemLabels:i&&i.length?i:[Yn],xLabels:r,axisWidth:this.axisWidth,zeroY:o(0)}),this.line.setDataset({data:n,itemLabels:a&&a.length?a:[Yn],axisWidth:this.axisWidth,axisHeight:this.axisHeight,zeroY:l(0)}),this.params.showDot==="always"){const c=n.flat();this.dot.setDataset({data:c,itemLabels:a??[Yn]})}}renderGraphic(){this.bar.render(),this.line.render(),this.params.showDot==="always"&&this.dot.render()}renderGraphicCoverHighlight({eventData:e,xScale:n,y1Scale:i,y2Scale:a,padding:r}){if(this.params.showDot==="hover"&&this.params.highlightTarget!=="none"){const s=e?e.y2.groupData.map(o=>({...o,id:o.itemLabel,x:n(o.xLabel),y:a(o.value)})):[];this.dot.setDataset({data:s,itemLabels:this.dataset.y2ItemLabels??[Yn]}),this.dot.render()}}}const Ka={__name:"ChartColumnTwoScalesBarGroupAndLine",setup(t){const e={y1Data:[[{value:70769},{value:14103},{value:41075},{value:55309}],[{value:685830},{value:102725},{value:339702},{value:610896}],[{value:875854},{value:144274},{value:786471},{value:1097621}]],y2Data:[[{value:76.3098},{value:75.7679},{value:77.4424},{value:76.5973}]],xLabels:["台北市","新竹市","台南市","高雄市"],y1ItemLabels:["宋楚瑜、余湘","韓國瑜、張善政","蔡英文、賴清德"],y2ItemLabels:["得票率"]},n={y1Colors:["#FF6310","#000095","#1B9431"]};return(i,a)=>(De(),Se("div",null,[st(_n,{module:on(K4),dataset:e,params:n},null,8,["module"])]))}},cm={xLabel:"x",yLabel:"y",xLabelAnchor:"start",yLabelAnchor:"end",xLabelOffset:[0,0],yLabelOffset:[0,0],xTickPadding:20,yTickPadding:20,xTickLine:!0,yTickLine:!1,xTickLineDasharray:"none",yTickLineDasharray:"none",xTickFormat:",.0f",xTicks:4,axisLineColor:Jc,axisLabelColor:Ne,rotateYLabel:!1,padding:zt,xVisible:!0,yVisible:!0,yLabelIconMethod:void 0},Qa=6;class Q4{constructor(e,n){this.width=se,this.height=oe,this.dataset={xScale:Be(),yScale:li(),maxValue:0},this.params=cm,this.xAxisSelection=void 0,this.yAxisSelection=void 0,this.xLabelSelection=void 0,this.yLabelSelection=void 0,this.axisWidth=Wt(this.width,zt),this.axisHeight=Ot(this.height,zt),this.selection=e}setParams(e){this.params={...this.params,...e}}setDataset(e){this.dataset=e}resize({width:e=this.width,height:n=this.height}){this.width=e,this.height=n,this.axisWidth=Wt(this.width,this.params.padding),this.axisHeight=Ot(this.height,this.params.padding)}render(){this.renderYPointAxis(),this.renderXLinearAxis();const e=this.dataset.xScale(0);this.renderZeroLine(this.selection,[{x1:e,y1:0,x2:e,y2:this.axisHeight}])}remove(){this.selection.remove()}renderYPointAxis(){let e=[];this.params.yVisible&&e.push(this.params);const n=this.selection.selectAll("g.yAxis").data(e),i=n.enter().append("g");this.yAxisSelection=n.merge(i).classed("yAxis",!0).attr("transform",l=>"translate("+l.padding.left+","+l.padding.top+")"),n.exit().remove();const a=this.selection.selectAll("text.yLabel").data(e),r=a.enter().append("text").classed("yLabel",!0).style("font-size","14px").style("font-weight","bold");if(this.yLabelSelection=a.merge(r).attr("x",l=>l.padding.left-l.xTickPadding-Qa).attr("y",l=>l.padding.top-l.yTickPadding).attr("text-anchor",this.params.yLabelAnchor).attr("transform",`translate(${this.params.yLabelOffset[0]}, ${this.params.yLabelOffset[1]})`).style("fill",this.params.axisLabelColor).text(l=>l.yLabel),a.exit().remove(),this.yLabelSelection.size()==0)return;this.yAxis=gs(this.dataset.yScale).scale(this.dataset.yScale).tickSize(this.params.yTickLine&&typeof this.params.yTickLine=="boolean"?-this.axisWidth:this.params.yTickLine&&typeof this.params.yTickLine=="number"?-this.axisWidth*this.params.yTickLine:Qa).tickSizeOuter(0).tickFormat(l=>l).tickPadding(this.params.yTickPadding);const s=this.yAxisSelection.transition().duration(50).call(this.yAxis).attr("text-anchor",()=>(this.params.rotateYLabel!==!1,"end"));s.selectAll("line").style("fill","none").style("stroke",this.params.axisLineColor).style("stroke-dasharray",this.params.yTickLineDasharray),s.selectAll("path").style("fill","none").style("stroke",this.params.axisLineColor).style("shape-rendering","crispEdges");const o=s.selectAll("text").style("font-family","sans-serif").style("font-size","14px").style("color",this.params.axisLabelColor).attr("transform-origin",`-5 ${this.params.xTickPadding+Qa}`);this.params.rotateYLabel===!0?o.attr("transform","translate(0,0) rotate(-45)"):typeof this.params.rotateYLabel=="number"&&o.attr("transform",`translate(0,0) rotate(${this.params.rotateYLabel})`),this.appendLabelIcon(this.yAxisSelection.selectAll("g.tick"),this.params.yLabelIconMethod)}appendLabelIcon(e,n){e.each((i,a,r)=>{const s=W(r[a]),o=s.select("text"),l=o.data(),c=Math.abs(Number(o.attr("x"))),h=im(l,14),f=-c-h-21,u=-7,p=s.selectAll("g.bpchart__icon").data([l]),d=p.enter().append("g").classed("bpchart__icon",!0);p.exit().remove(),d.size()&&n&&(console.log("enter.size()",d.size()),v4(d,n(l,a))),p.merge(d).attr("transform",`translate(${f}, ${u})`)})}renderXLinearAxis(){let e=[];this.params.xVisible&&e.push(this.params);const n=this.selection.selectAll("g.xAxis").data(e),i=n.enter().append("g");this.xAxisSelection=n.merge(i).classed("xAxis",!0).attr("transform",o=>"translate("+o.padding.left+","+(o.padding.top+this.axisHeight)+")"),n.exit().remove();const a=this.selection.selectAll("text.xLabel").data(e),r=a.enter().append("text").classed("xLabel",!0).style("font-size","14px").style("font-weight","bold").style("fill",this.params.axisLabelColor).style("dominant-baseline","hanging");if(this.xLabelSelection=a.merge(r).attr("x",o=>this.width-o.padding.right+o.xTickPadding).attr("y",o=>o.padding.top+this.axisHeight+o.yTickPadding).attr("transform",`translate(${this.params.xLabelOffset[0]}, ${this.params.xLabelOffset[1]})`).attr("text-anchor",this.params.xLabelAnchor).text(o=>o.xLabel),a.exit().remove(),this.xLabelSelection.size()==0)return;this.xAxis=ps(this.dataset.xScale).scale(this.dataset.xScale).ticks(this.dataset.maxValue>this.params.xTicks?this.params.xTicks:this.dataset.maxValue===0?1:Math.ceil(this.dataset.maxValue)).tickFormat(o=>us(o,this.params.xTickFormat)).tickSize(this.params.xTickLine&&typeof this.params.xTickLine=="boolean"?-this.axisHeight:this.params.xTickLine&&typeof this.params.xTickLine=="number"?-this.axisHeight*this.params.xTickLine:Qa).tickPadding(this.params.xTickPadding);const s=this.xAxisSelection.transition().duration(100).call(this.xAxis);s.selectAll("line").style("fill","none").style("stroke",this.params.axisLineColor).style("stroke-dasharray",this.params.xTickLineDasharray),s.selectAll("path").style("fill","none").style("stroke","none").style("shape-rendering","crispEdges"),s.selectAll("text").style("font-family","sans-serif").style("font-size","14px").style("color",this.params.axisLabelColor)}renderZeroLine(e,n){const i=e.selectAll("g.bpchart__zero-line").data(n),a=i.enter().append("g").classed("bpchart__zero-line",!0).attr("transform",s=>"translate("+this.params.padding.left+","+this.params.padding.top+")");i.exit().remove();const r=i.merge(a);a.append("line"),r.select("line").attr("stroke",this.params.axisLabelColor).attr("stroke-width",1).transition().duration(100).attr("x1",s=>s.x1).attr("y1",s=>s.y1).attr("x2",s=>s.x2).attr("y2",s=>s.y2).attr("opacity",s=>s.x1>=0&&s.x1<=this.axisWidth?1:0)}}const J4={barWidth:0,barPadding:1,barR:!1,colors:ut,highlightTarget:"datum",highlightDatumId:"",enterDuration:800},j4={barWidth:0,barPadding:1,barGroupPadding:20,barR:!1,colors:ut,highlightTarget:"item",highlightGroupId:"",highlightItemId:"",highlightDatumId:"",enterDuration:800},t7={barWidth:0,barGroupPadding:20,barR:!1,colors:ut,highlightTarget:"item",highlightGroupId:"",highlightItemId:"",highlightDatumId:"",enterDuration:800},hm={groupLayout:[],barPadding:1,barGroupPadding:20,colors:ut,highlightTarget:"item",highlightGroupId:"",highlightItemId:"",highlightDatumId:"",enterDuration:800,labelTextMethod:(t,e)=>String(t.value),labelPositionMethod:(t,e)=>"top",labelStyleMethod:(t,e)=>"",labelFontSizeMethod:(t,e)=>10,labelColorMethod:(t,e)=>Ne,labelPadding:5},e7=(t,e)=>{const n=new Map;return e.forEach((i,a)=>{n.set(i,t[a])}),n},n7=(t,e)=>{const n=new Map;return t.forEach((i,a)=>{i.forEach((r,s)=>{const o=n.get(e[s])??[];o.push(r),n.set(e[s],o)})}),n},i7=({groupLayout:t,yLabels:e,itemLabels:n,axisHeight:i,barPadding:a,barGroupPadding:r})=>{if(!t.length)return[{stackAmount:n.length,barWidth:_f({axisHeight:i,groupAmount:e.length,barAmountOfGroup:1,barPadding:a,barGroupPadding:r}),barR:!1,datumIndexList:n.map((f,u)=>u)}];const s=t.reduce((f,u)=>{let p=0;return u.barWidth&&(p=u.barWidth+a),f+p},0),o=t.reduce((f,u)=>f+(u.barWidth?1:0),0),l=s*e.length,c=_f({axisHeight:i-l,groupAmount:e.length,barAmountOfGroup:t.length-o,barPadding:a,barGroupPadding:r});let h=-1;return t.map((f,u)=>{const p=f.stackAmount??1;let d=[];h+=1;for(let g=h;g<h+p;g++)d.push(g);return h=d[d.length-1],{stackAmount:p,barWidth:f.barWidth??c,barR:f.barR??!1,datumIndexList:d}})},a7=({YDataMap:t,yLabels:e,axisHeight:n,groupLayout:i,barGroupPadding:a,barPadding:r})=>{let s=0;return i.every(o=>o.barWidth)?(s=i.reduce((o,l)=>o+l.barWidth,0),s+=r*(i.length-1)):s=um({axisHeight:n,groupAmount:e.length,barGroupPadding:a}),e.map((o,l)=>{const c=t.get(o)??[];let h=[],f=-s/2;return i.forEach((u,p)=>{let d=0;const g=f;u.datumIndexList.forEach(m=>{const b=c[m];h.push({...b,sourceIndex:[m,l],barX:d,barY:g+u.barWidth/2,groupY:b.y,barWidth:u.barWidth,barR:u.barR==!0?u.barWidth/2:typeof u.barR=="number"?u.barR:0,width:b.x}),d+=b.x}),f+=u.barWidth+r}),h})},r7=(t,e)=>{let n=[];return t.forEach((i,a)=>{i.forEach((r,s)=>{n.push({id:r.id,data:r,barX0:r.barX,barX1:r.barX+r.width,barY0:r.groupY+r.barY-r.barWidth/2,barY1:r.groupY+r.barY+r.barWidth/2,position:e.labelPositionMethod(r,r.sourceIndex),fontSize:e.labelFontSizeMethod(r,r.sourceIndex),color:e.labelColorMethod(r,r.sourceIndex),style:e.labelStyleMethod(r,r.sourceIndex),text:e.labelTextMethod(r,r.sourceIndex)})})}),n},Ja=({datum:t,YDataMap:e,ItemDataMap:n,event:i})=>({groupData:e.get(t.yLabel),itemData:n.get(t.itemLabel),datum:t,yLabel:t.yLabel,yIndex:t.yIndex,itemLabel:t.itemLabel,itemIndex:t.itemIndex,clientX:i.clientX,clientY:i.clientY,offsetX:i.offsetX,offsetY:i.offsetY}),um=({axisHeight:t,groupAmount:e,barGroupPadding:n=0})=>{const i=t/e-n;return i>1?i:1},_f=({axisHeight:t,groupAmount:e,barAmountOfGroup:n,barPadding:i=0,barGroupPadding:a=0})=>{const s=um({axisHeight:t,groupAmount:e,barGroupPadding:a})/n-i;return s>1?s:1},s7=(t,e=400)=>e/t;class o7{constructor(e,n){this.params=hm,this.dataset={data:[],itemLabels:[],yLabels:[],axisHeight:0,zeroX:0},this.graphicData=[],this.groupLayout=[],this.graphicGroupSelection=void 0,this.graphicBarSelection=void 0,this.itemLabels=[],this.ItemDataMap=new Map,this.YDataMap=new Map,this.axisHeight=0,this.delayDuration=0,this.clickCallback=function(){},this.mouseoverCallback=function(){},this.mousemoveCallback=function(){},this.mouseoutCallback=function(){},this.selection=e,this.graphicBoxSelection=this.selection.append("g"),this.labelBoxSelection=this.selection.append("g"),this.defsSelection=this.selection.append("defs"),this.utilGraphicBarLabel=new am(this.labelBoxSelection,{})}setParams(e){this.params={...this.params,...e},this.itemLabels=[],this.utilGraphicBarLabel.setParams({barDirection:"right",positionPadding:this.params.labelPadding})}setDataset(e){this.dataset=e,this.itemLabels=this.dataset.itemLabels,this.ItemDataMap=e7(this.dataset.data,this.dataset.itemLabels),this.YDataMap=n7(this.dataset.data,this.dataset.yLabels),this.delayDuration=s7(this.dataset.yLabels.length)}render(){this.itemLabels.length&&(this.colorScale=le(this.itemLabels,this.params.colors),this.axisHeight=this.dataset.axisHeight,this.groupLayout=i7({groupLayout:this.params.groupLayout,yLabels:this.dataset.yLabels,itemLabels:this.dataset.itemLabels,axisHeight:this.axisHeight,barPadding:this.params.barPadding,barGroupPadding:this.params.barGroupPadding}),this.graphicData=a7({YDataMap:this.YDataMap,yLabels:this.dataset.yLabels,axisHeight:this.axisHeight,groupLayout:this.groupLayout,barPadding:this.params.barPadding,barGroupPadding:this.params.barGroupPadding}),this.renderGraphic({selection:this.graphicBoxSelection,graphicData:this.graphicData,yLabels:this.dataset.yLabels,colorScale:this.colorScale,params:this.params}),this.graphicBarSelection.on("click",(e,n)=>{const i=Ja({datum:e,YDataMap:this.YDataMap,ItemDataMap:this.ItemDataMap,event:w});this.clickCallback(i)}).on("mouseover",(e,n,i)=>{const a=Ja({datum:e,YDataMap:this.YDataMap,ItemDataMap:this.ItemDataMap,event:w});this.params.highlightTarget!=null&&this.params.highlightTarget!="none"&&(this.params.highlightTarget==="group"?this.highlight(this.graphicBarSelection,a.yLabel,void 0,void 0):this.params.highlightTarget==="item"?this.highlight(this.graphicBarSelection,void 0,a.itemLabel,void 0):this.params.highlightTarget==="datum"&&this.highlight(this.graphicBarSelection,void 0,void 0,a.datum&&a.datum.id)),this.mouseoverCallback(a)}).on("mousemove",(e,n)=>{const i=Ja({datum:e,YDataMap:this.YDataMap,ItemDataMap:this.ItemDataMap,event:w});this.mousemoveCallback(i)}).on("mouseout",(e,n)=>{this.params.highlightTarget!=null&&this.params.highlightTarget!="none"&&this.removeHighlight(this.graphicBarSelection);const i=Ja({datum:e,YDataMap:this.YDataMap,ItemDataMap:this.ItemDataMap,event:w});this.initHighlight(),this.mouseoutCallback(i)}),this.utilGraphicBarLabel.setData(r7(this.graphicData,this.params)),this.utilGraphicBarLabel.render())}on(e,n){return e==="click"?this.clickCallback=n:e==="mouseover"?this.mouseoverCallback=n:e==="mousemove"?this.mousemoveCallback=n:e==="mouseout"&&(this.mouseoutCallback=n),this}remove(){this.selection.remove()}renderGraphic({selection:e,graphicData:n,yLabels:i,colorScale:a,params:r}){const s=e.selectAll("g.bpchart__bar-g").data(n,(l,c)=>i[c]),o=s.enter().append("g").classed("bpchart__bar-g",!0).attr("cursor","pointer");s.exit().remove(),this.graphicGroupSelection=s.merge(o),o.attr("transform",(l,c)=>`translate(0, ${l[0]?l[0].groupY:0})`),s.transition().duration(200).attr("transform",(l,c)=>`translate(0, ${l[0]?l[0].groupY:0})`),this.graphicGroupSelection.each((l,c,h)=>{const f=W(h[c]).selectAll("g").data(l,d=>d.id),u=f.enter().append("g").classed("bpchart__bar",!0);u.append("rect").attr("rx",d=>d.barR).attr("transform",d=>`translate(0, ${-d.barWidth/2})`).attr("x",this.dataset.zeroX).attr("y",d=>d.barY).attr("width",0).attr("height",d=>d.barWidth),f.merge(u).select("rect").attr("fill",d=>a(d.itemLabel)).transition().duration(this.params.enterDuration).ease(fn).delay((d,g)=>d.yIndex*this.delayDuration).attr("transform",d=>`translate(0, ${-d.barWidth/2})`).attr("x",d=>d.barX).attr("y",d=>d.barY).attr("width",d=>d.width).attr("height",d=>d.barWidth).on("end",()=>this.initHighlight()),f.exit().remove()}),this.graphicBarSelection=this.graphicGroupSelection.selectAll("g.bpchart__bar")}initHighlight(){this.graphicBarSelection&&(this.params.highlightDatumId||this.params.highlightItemId||this.params.highlightGroupId)&&this.highlight(this.graphicBarSelection,this.params.highlightGroupId,this.params.highlightItemId,this.params.highlightDatumId)}highlight(e,n,i,a){if(!e)return;let r=[];if(a&&r.push(a),i){const s=this.dataset.data.flat().filter(o=>o.itemLabel===i).map(o=>o.id);r=r.concat(s)}if(n){const s=this.dataset.data.flat().filter(o=>o.yLabel===n).map(o=>o.id);r=r.concat(s)}e.each((s,o,l)=>{r.includes(s.id)?W(l[o]).transition().duration(200).style("opacity",1):W(l[o]).transition().duration(200).style("opacity",.3)})}removeHighlight(e){this.params.highlightDatumId||this.params.highlightItemId||this.params.highlightGroupId?this.highlight(e,this.params.highlightGroupId,this.params.highlightItemId,this.params.highlightDatumId):e.transition().duration(200).style("opacity",1)}}const fm={barWidth:0,barGroupPadding:1,barR:!1,colors:ut,highlightTarget:"item",highlightGroupId:"",highlightItemId:"",highlightDatumId:"",enterDuration:800},l7=(t,e)=>{const n=new Map;return e.forEach((i,a)=>{n.set(i,t[a])}),n},c7=(t,e)=>{const n=new Map;return t.forEach((i,a)=>{i.forEach((r,s)=>{const o=n.get(e[s])??[];o.push(r),n.set(e[s],o)})}),n},h7=(t,e,n)=>e.map((i,a)=>{const r=t.get(i)??[];let s=[],o=0;for(let l=0;l<r.length;l++){const c=r[l],h=c.x;s.push({...c,graphicX:o,graphicY:c.y,width:h}),o=o+h}return s}),ja=({datum:t,YDataMap:e,ItemDataMap:n,event:i})=>({groupData:e.get(t.yLabel),itemData:n.get(t.itemLabel),datum:t,yLabel:t.yLabel,yIndex:t.yIndex,itemLabel:t.itemLabel,itemIndex:t.itemIndex,clientX:i.clientX,clientY:i.clientY,offsetX:i.offsetX,offsetY:i.offsetY}),u7=({axisWidth:t,groupAmount:e,barGroupPadding:n=0})=>{const i=t/e-n;return i>1?i:1},f7=(t,e=400)=>e/t;class d7{constructor(e,n){this.params=fm,this.dataset={data:[],itemLabels:[],yLabels:[],axisHeight:0,zeroX:0},this.graphicData=[],this.graphicGroupSelection=void 0,this.graphicBarSelection=void 0,this.itemLabels=[],this.ItemDataMap=new Map,this.YDataMap=new Map,this.axisHeight=0,this.barWidth=0,this.delayDuration=0,this.clickCallback=function(){},this.mouseoverCallback=function(){},this.mousemoveCallback=function(){},this.mouseoutCallback=function(){},this.selection=e,this.defsSelection=e.append("defs")}setParams(e){this.params={...this.params,...e},this.itemLabels=[]}setDataset(e){this.dataset=e,this.itemLabels=this.dataset.itemLabels,this.ItemDataMap=l7(this.dataset.data,this.dataset.itemLabels),this.YDataMap=c7(this.dataset.data,this.dataset.yLabels),this.delayDuration=f7(this.dataset.yLabels.length)}render(){console.log(this.dataset),this.itemLabels.length&&(this.colorScale=le(this.itemLabels,this.params.colors),this.axisHeight=this.dataset.axisHeight,this.barWidth=this.params.barWidth?this.params.barWidth:u7({axisWidth:this.axisHeight,groupAmount:this.dataset.yLabels.length,barGroupPadding:this.params.barGroupPadding??0}),this.graphicData=h7(this.YDataMap,this.dataset.yLabels,this.dataset.zeroX),this.renderGraphic({selection:this.selection,graphicData:this.graphicData,yLabels:this.dataset.yLabels,colorScale:this.colorScale,params:this.params}),this.graphicBarSelection.on("click",(e,n)=>{const i=ja({datum:e,YDataMap:this.YDataMap,ItemDataMap:this.ItemDataMap,event:w});this.clickCallback(i)}).on("mouseover",(e,n,i)=>{const a=ja({datum:e,YDataMap:this.YDataMap,ItemDataMap:this.ItemDataMap,event:w});this.params.highlightTarget!=null&&this.params.highlightTarget!="none"&&(this.params.highlightTarget==="group"?this.highlight(this.graphicBarSelection,a.yLabel,void 0,void 0):this.params.highlightTarget==="item"?this.highlight(this.graphicBarSelection,void 0,a.itemLabel,void 0):this.params.highlightTarget==="datum"&&this.highlight(this.graphicBarSelection,void 0,void 0,a.datum&&a.datum.id)),this.mouseoverCallback(a)}).on("mousemove",(e,n)=>{const i=ja({datum:e,YDataMap:this.YDataMap,ItemDataMap:this.ItemDataMap,event:w});this.mousemoveCallback(i)}).on("mouseout",(e,n)=>{this.params.highlightTarget!=null&&this.params.highlightTarget!="none"&&this.removeHighlight(this.graphicBarSelection);const i=ja({datum:e,YDataMap:this.YDataMap,ItemDataMap:this.ItemDataMap,event:w});this.initHighlight(),this.mouseoutCallback(i)}))}on(e,n){return e==="click"?this.clickCallback=n:e==="mouseover"?this.mouseoverCallback=n:e==="mousemove"?this.mousemoveCallback=n:e==="mouseout"&&(this.mouseoutCallback=n),this}remove(){this.selection.remove()}renderGraphic({selection:e,graphicData:n,yLabels:i,colorScale:a,params:r}){if(this.barWidth<=0)return;const s=e.selectAll("g.bpchart__bar-g").data(n,(c,h)=>i[h]),o=s.enter().append("g").classed("bpchart__bar-g",!0).attr("cursor","pointer");s.exit().remove(),this.graphicGroupSelection=s.merge(o),o.attr("transform",(c,h)=>`translate(0, ${c[0]?c[0].graphicY:0})`),s.transition().duration(200).attr("transform",(c,h)=>`translate(0, ${c[0]?c[0].graphicY:0})`);const l=this.barWidth/2;this.graphicGroupSelection.each((c,h,f)=>{const u=W(f[h]).selectAll("g").data(c,g=>g.id),p=u.enter().append("g").classed("bpchart__bar",!0);p.append("rect").attr("rx",r.barR==!0?l:r.barR==!1?0:typeof r.barR=="number"?r.barR:0).attr("transform",`translate(0, ${-l})`).attr("x",this.dataset.zeroX).attr("y",0).attr("width",0).attr("height",this.barWidth),u.merge(p).select("rect").attr("fill",g=>a(g.itemLabel)).transition().duration(this.params.enterDuration).ease(fn).delay((g,m)=>g.yIndex*this.delayDuration).attr("transform",`translate(0, ${-l})`).attr("x",g=>g.graphicX).attr("y",0).attr("width",g=>g.width).attr("height",this.barWidth).on("end",()=>this.initHighlight()),u.exit().remove()}),this.graphicBarSelection=this.graphicGroupSelection.selectAll("g.bpchart__bar")}initHighlight(){this.graphicBarSelection&&(this.params.highlightDatumId||this.params.highlightItemId||this.params.highlightGroupId)&&this.highlight(this.graphicBarSelection,this.params.highlightGroupId,this.params.highlightItemId,this.params.highlightDatumId)}highlight(e,n,i,a){if(!e)return;let r=[];if(a&&r.push(a),i){const s=this.dataset.data.flat().filter(o=>o.itemLabel===i).map(o=>o.id);r=r.concat(s)}if(n){const s=this.dataset.data.flat().filter(o=>o.yLabel===n).map(o=>o.id);r=r.concat(s)}e.each((s,o,l)=>{r.includes(s.id)?W(l[o]).transition().duration(200).style("opacity",1):W(l[o]).transition().duration(200).style("opacity",.3)})}removeHighlight(e){this.params.highlightDatumId||this.params.highlightItemId||this.params.highlightGroupId?this.highlight(e,this.params.highlightGroupId,this.params.highlightItemId,this.params.highlightDatumId):e.transition().duration(200).style("opacity",1)}}const hi={axisRow:cm,tooltipAside:{templateHtml:t=>t.groupData&&t.groupData[0]?`
          <div>
            <div>${t.groupData[0].yLabel}</div>
            <div>${t.groupData.map(e=>e.value).join(",")}</div>          
          </div>
        `:""},colors:ut,padding:zt,highlightTarget:"datum",highlightDatumId:"",highlightItemId:"",showAuxLine:!1,domainMinValue:0,domainMaxValue:void 0,domainMinRange:void 0,domainMaxRange:.95};({...hi});({...hi});({...hi});const p7={...hi,graphicRowBarLayout:hm},g7={...hi,graphicRowBarStack:fm},wf=(t,e)=>({...t,padding:e}),m7=({dataset:t,activedItemId:e,yDataMap:n,ItemDataMap:i,padding:a,yRangeScale:r,event:s})=>{if(!s||!r)return{dataset:t,groupData:[],itemData:[],datum:void 0,yLabel:"",yIndex:-1,itemLabel:"",itemIndex:-1,rangeIndex:-1,clientX:-1,clientY:-1,offsetX:-1,offsetY:-1};const o=Number(s.offsetY)-a.top,l=Number(r(o)??0),c=t.yLabels[l],h=n.get(c)??[];let f=[],u;return e&&(f=i.get(e)??[],u=h.find(p=>p.itemLabel===e)),{dataset:t,groupData:h,itemData:f,datum:u,yLabel:c,yIndex:l,itemLabel:u?u.itemLabel:"",itemIndex:u?u.itemIndex:-1,rangeIndex:l,clientX:w.clientX,clientY:w.clientY,offsetX:w.offsetX,offsetY:w.offsetY}};class dm{constructor(e,n){this.width=se,this.height=oe,this.dataset={data:[],yLabels:[]},this.params=hi,this.graphicSelection=void 0,this.axisWidth=0,this.axisHeight=0,this.clickCallback=function(){},this.mouseoverCallback=function(){},this.mousemoveCallback=function(){},this.mouseoutCallback=function(){},this.yDataMap=new Map,this.ItemDataMap=new Map,this.renderData=[],this.axisParams=this.params.axisRow,this.xAxisSelection=void 0,this.yAxisSelection=void 0,this.xLabelSelection=void 0,this.yLabelSelection=void 0,this.auxLineSelection=void 0,this.minValue=0,this.maxValue=0,this.makeActivedCallbackData=(i,a)=>m7({dataset:this.dataset,activedItemId:i,yDataMap:this.yDataMap,ItemDataMap:this.ItemDataMap,padding:this.params.padding,yRangeScale:this.yRangeScale,event:a}),this.selection=e,this.axisSelection=e.append("g"),this.axisRow=new Q4(this.axisSelection,{}),this.rangeSelection=this.selection.append("rect").attr("opacity",0),this.setRangeEvent(this.rangeSelection),this.graphicSelection=e.append("g"),this.coverSelection=this.selection.append("g").classed("bpchart__cover",!0),this.utilAuxLine=new ih(this.coverSelection),this.setCoverEvent(this.selection)}setParams(e){this.params={...this.params,...e,axisRow:{...this.params.axisRow,...e.axisRow}},this.params.tooltipAside&&!this.tooltip&&(this.tooltip=new nh(this.selection,{templateHtml:this.params.tooltipAside.templateHtml,type:this.params.tooltipAside.type??"white",yLine:this.params.tooltipAside.yLine??!1})),this.axisParams=wf(this.params.axisRow,this.params.padding),this.axisWidth=Wt(this.width,this.params.padding),this.axisHeight=Ot(this.height,this.params.padding),this.axisRow.setParams(this.axisParams),this.graphicSelection.attr("transform",`translate(${this.params.padding.left}, ${this.params.padding.top})`),this.coverSelection.attr("transform",`translate(${this.params.padding.left}, ${this.params.padding.top})`),this.initGraphic(this.params)}select(){return this.selection}remove(){this.selection.remove()}resize({width:e=this.width,height:n=this.height}){this.width=e,this.height=n,this.axisParams=wf(this.params.axisRow,this.params.padding),this.axisWidth=Wt(this.width,this.params.padding),this.axisHeight=Ot(this.height,this.params.padding),this.axisRow.setParams(this.axisParams),this.axisRow.resize({width:e,height:n}),this.rangeSelection.attr("x",this.params.padding.left).attr("y",this.params.padding.top).attr("width",this.axisWidth).attr("height",this.axisHeight)}setDataset(e){this.dataset=e;const[n,i]=this.getMinAndMaxValue(this.dataset.data);this.minValue=n,this.maxValue=i}render(){this.yScale=th({axisLabels:this.dataset.yLabels,axisWidth:this.axisHeight,reverse:!0}),this.xScale=fs({maxValue:this.maxValue,minValue:this.minValue,axisWidth:this.axisWidth,domainMinValue:this.params.domainMinValue,domainMaxValue:this.params.domainMaxValue,domainMinRange:this.params.domainMinRange,domainMaxRange:this.params.domainMaxRange}),this.yRangeScale=eh({axisLabels:this.dataset.yLabels,axisWidth:this.axisHeight,reverse:!0}),this.renderData=this.makeGraphicRenderData({dataset:this.dataset,xScale:this.xScale,yScale:this.yScale}),this.yDataMap=this.makeYDataMap({renderData:this.renderData,yLabels:this.dataset.yLabels}),this.ItemDataMap=this.makeItemDataMap({renderData:this.renderData,itemLabels:this.dataset.itemLabels??[]}),this.setGraphicData({renderData:this.renderData,itemLabels:this.dataset.itemLabels??[],yLabels:this.dataset.yLabels,xScale:this.xScale,yScale:this.yScale}),this.axisRow.setDataset({xScale:this.xScale,yScale:this.yScale,maxValue:this.maxValue}),this.axisRow.render(),this.renderGraphic()}on(e,n){return e==="click"?this.clickCallback=n:e==="mouseover"?this.mouseoverCallback=n:e==="mousemove"?this.mousemoveCallback=n:e==="mouseout"&&(this.mouseoutCallback=n),this}setRangeEvent(e){e.on("click",(n,i)=>{const a=this.makeActivedCallbackData("",w);this.clickCallback(a)}).on("mouseover",(n,i)=>{const a=this.makeActivedCallbackData("",w);this.mouseoverCallback(a)}).on("mousemove",n=>{const i=this.makeActivedCallbackData("",w);this.mousemoveCallback(i)}).on("mouseout",n=>{if(w.offsetX>0&&w.offsetX<this.width&&w.offsetY>0&&w.offsetY<this.height)return;const i=this.makeActivedCallbackData("",w);this.mouseoutCallback(i)})}showTooltip(e,n){n&&e&&this.yScale?this.tooltip.setDatum({data:e,x:w.clientX,y:e.clientY-e.offsetY+this.params.padding.top+this.yScale(e.yLabel)}):this.tooltip.remove()}setCoverEvent(e){e.on("mouseover",(n,i)=>{const a=this.makeActivedCallbackData("",w);this.coverHighlight(a),this.showTooltip(a,w)}).on("mousemove",n=>{const i=this.makeActivedCallbackData("",w);this.coverHighlight(i),this.showTooltip(i,w)}).on("mouseout",n=>{w.offsetX>0&&w.offsetX<this.width&&w.offsetY>0&&w.offsetY<this.height||(this.coverHighlight(void 0),this.tooltip.remove())})}coverHighlight(e){this.params.showAuxLine&&this.renderAuxLine({coverSelection:this.coverSelection,yLabels:this.dataset.yLabels,activeRangeIndex:e?e.rangeIndex:-1,yScale:this.yScale,padding:this.params.padding,axisWidth:this.axisWidth}),this.renderGraphicCoverHighlight({eventData:e,xScale:this.xScale,yScale:this.yScale,padding:this.params.padding})}renderAuxLine({coverSelection:e,yLabels:n,activeRangeIndex:i,yScale:a,padding:r,axisWidth:s}){if(!a)return;const o=n.map((l,c)=>{const h=a(l)||0;return{x1:0,x2:s,y1:h,y2:h,active:i==c}});this.utilAuxLine.setData(o),this.utilAuxLine.render()}}const Mf="__DEFAULT__";let b7=class extends dm{constructor(e,n){super(e,n),this.params=p7,this.bar=new o7(this.graphicSelection,{})}initGraphic(e){this.params={...this.params,...e,graphicRowBarLayout:{...this.params.graphicRowBarLayout,...e.graphicRowBarLayout}},this.bar.setParams({...this.params.graphicRowBarLayout,colors:this.params.colors,highlightTarget:this.params.highlightTarget,highlightDatumId:this.params.highlightDatumId,highlightItemId:this.params.highlightItemId,highlightGroupId:this.params.highlightGroupId}),this.bar.on("click",n=>{const i=this.makeActivedCallbackData(n.itemLabel??"",w);this.clickCallback(i)}).on("mouseover",n=>{const i=this.makeActivedCallbackData(n.itemLabel??"",w);this.showTooltip(i,w),this.mouseoverCallback(i)}).on("mousemove",n=>{const i=this.makeActivedCallbackData(n.itemLabel??"",w);this.showTooltip(i,w),this.mousemoveCallback(i)}).on("mouseout",n=>{const i=this.makeActivedCallbackData("",w);this.showTooltip(void 0,w),this.mouseoutCallback(i)})}makeGraphicRenderData({dataset:e,xScale:n,yScale:i}){return e.data.map((a,r)=>{const s=e.itemLabels&&e.itemLabels[r]?e.itemLabels[r]:Mf;return a.map((o,l)=>{const c=e.yLabels[l],h=i(c)||0;return{...o,id:`${s}_${c}`,itemIndex:r,itemLabel:s,yIndex:l,yLabel:c,x:n(o.value)||0,y:h}})})}getMinAndMaxValue(e){if(!e.length)return[0,0];const n=(r,s,o)=>{let l=[];for(let c=0;c<r[0].length;c++){l[c]=0;for(let h=s;h<=o;h++)l[c]+=r[h][c].value}return l};let i=0,a=[];return this.params.graphicRowBarLayout.groupLayout.length?this.params.graphicRowBarLayout.groupLayout.forEach(r=>{const s=i+r.stackAmount-1;a=a.concat(n(e,i,s)),i=s+1}):a=n(e,0,e[0].length-1),a.reduce((r,s)=>[s<r[0]?s:r[0],s>r[1]?s:r[1]],[1/0,0])}makeYDataMap({renderData:e,yLabels:n}){let i=new Map;return e.length&&e.forEach((a,r)=>{a.forEach((s,o)=>{const l=i.get(n[o])??[];l.push(s),i.set(n[o],l)})}),i}makeItemDataMap({renderData:e,itemLabels:n}){let i=new Map;return e.length&&n.forEach((a,r)=>{i.set(a,e[r])}),i}setGraphicData({renderData:e,itemLabels:n,yLabels:i,xScale:a,yScale:r}){this.bar.setDataset({data:e,yLabels:i,itemLabels:n??[Mf],axisHeight:this.axisHeight,zeroX:0})}renderGraphic(){this.bar.render()}renderGraphicCoverHighlight({eventData:e,xScale:n,yScale:i,padding:a}){}};const kf="__DEFAULT__";class y7 extends dm{constructor(e,n){super(e,n),this.params=g7,this.bar=new d7(this.graphicSelection,{})}initGraphic(e){this.params={...this.params,...e,graphicRowBarStack:{...this.params.graphicRowBarStack,...e.graphicRowBarStack}},this.bar.setParams({...this.params.graphicRowBarStack,colors:this.params.colors,highlightTarget:this.params.highlightTarget,highlightDatumId:this.params.highlightDatumId,highlightItemId:this.params.highlightItemId,highlightGroupId:this.params.highlightGroupId}),this.bar.on("click",n=>{const i=this.makeActivedCallbackData(n.itemLabel??"",w);this.clickCallback(i)}).on("mouseover",n=>{const i=this.makeActivedCallbackData(n.itemLabel??"",w);this.showTooltip(i,w),this.mouseoverCallback(i)}).on("mousemove",n=>{const i=this.makeActivedCallbackData(n.itemLabel??"",w);this.showTooltip(i,w),this.mousemoveCallback(i)}).on("mouseout",n=>{const i=this.makeActivedCallbackData("",w);this.showTooltip(void 0,w),this.mouseoutCallback(i)})}makeGraphicRenderData({dataset:e,xScale:n,yScale:i}){return e.data.map((a,r)=>{const s=e.itemLabels&&e.itemLabels[r]?e.itemLabels[r]:kf;return a.map((o,l)=>{const c=e.yLabels[l],h=i(c)||0;return{...o,id:`${s}_${c}`,itemIndex:r,itemLabel:s,yIndex:l,yLabel:c,x:n(o.value)||0,y:h}})})}getMinAndMaxValue(e){if(!e.length)return[0,0];let n=[];for(let i=0;i<e[0].length;i++){n[i]=0;for(let a=0;a<e.length;a++)n[i]+=e[a][i].value}return n.reduce((i,a)=>[a<i[0]?a:i[0],a>i[1]?a:i[1]],[1/0,0])}makeYDataMap({renderData:e,yLabels:n}){let i=new Map;return e.length&&e.forEach((a,r)=>{a.forEach((s,o)=>{const l=i.get(n[o])??[];l.push(s),i.set(n[o],l)})}),i}makeItemDataMap({renderData:e,itemLabels:n}){let i=new Map;return e.length&&n.forEach((a,r)=>{i.set(a,e[r])}),i}setGraphicData({renderData:e,itemLabels:n,yLabels:i,xScale:a,yScale:r}){this.bar.setDataset({data:e,yLabels:i,itemLabels:n??[kf],axisHeight:this.axisHeight,zeroX:0})}renderGraphic(){this.bar.render()}renderGraphicCoverHighlight({eventData:e,xScale:n,yScale:i,padding:a}){}}const Df={__name:"ChartRow",setup(t){const e={data:[[{value:1653834},{value:264533},{value:1179611},{value:1780844}],[{value:513287},{value:80812},{value:377234},{value:518714}]],yLabels:["台北市","新竹市","台南市","高雄市"],itemLabels:["發出票數","剩餘票數"]},n={graphicRowBarStack:{barWidth:20,barR:5}};return(i,a)=>(De(),Se("div",null,[st(_n,{module:on(y7),dataset:e,params:n},null,8,["module"])]))}},pm={xLabel:"x",yLabel:"y",xLabelAnchor:"start",yLabelAnchor:"end",xLabelOffset:[0,0],yLabelOffset:[0,0],xTickPadding:20,yTickPadding:20,xTickLine:!1,yTickLine:!0,xTickLineDasharray:"none",yTickLineDasharray:"none",yTickFormat:",.0f",yTicks:4,axisLineColor:Jc,axisLabelColor:Ne,rotateXLabel:!1,padding:zt,xVisible:!0,yVisible:!0},tr=6;class v7{constructor(e,n){this.width=se,this.height=oe,this.dataset={xScale:li(),yScale:Be(),maxValue:0},this.params=pm,this.xAxisSelection=void 0,this.yAxisSelection=void 0,this.xLabelSelection=void 0,this.yLabelSelection=void 0,this.axisWidth=Wt(this.width,zt),this.axisHeight=Ot(this.height,zt),this.selection=e}setParams(e){this.params={...this.params,...e}}setDataset(e){this.dataset=e}resize({width:e=this.width,height:n=this.height}){this.width=e,this.height=n,this.axisWidth=Wt(this.width,this.params.padding),this.axisHeight=Ot(this.height,this.params.padding)}render(){this.renderXPointAxis(),this.renderYLinearAxis();const e=this.dataset.yScale(0);this.renderZeroLine(this.selection,[{x1:0,y1:e,x2:this.axisWidth,y2:e}])}remove(){this.selection.remove()}renderXPointAxis(){let e=[];this.params.xVisible&&e.push(this.params);const n=this.selection.selectAll("g.xAxis").data(e),i=n.enter().append("g");this.xAxisSelection=n.merge(i).classed("xAxis",!0).attr("transform",l=>"translate("+l.padding.left+","+(l.padding.top+this.axisHeight)+")"),n.exit().remove();const a=this.selection.selectAll("text.xLabel").data(e),r=a.enter().append("text").classed("xLabel",!0).style("font-size","14px").style("font-weight","bold").style("dominant-baseline","hanging");if(this.xLabelSelection=a.merge(r).attr("x",l=>this.width-l.padding.right+l.xTickPadding).attr("y",l=>l.padding.top+this.axisHeight+l.yTickPadding+tr).attr("transform",`translate(${this.params.xLabelOffset[0]}, ${this.params.xLabelOffset[1]})`).attr("text-anchor",this.params.xLabelAnchor).style("fill",this.params.axisLabelColor).text(l=>l.xLabel),a.exit().remove(),this.xLabelSelection.size()==0)return;this.xAxis=ps(this.dataset.xScale).scale(this.dataset.xScale).tickSize(this.params.xTickLine&&typeof this.params.xTickLine=="boolean"?-this.axisHeight:this.params.xTickLine&&typeof this.params.xTickLine=="number"?-this.axisHeight*this.params.xTickLine:tr).tickSizeOuter(0).tickFormat(l=>l).tickPadding(this.params.xTickPadding);const s=this.xAxisSelection.transition().duration(50).call(this.xAxis).attr("text-anchor",()=>this.params.rotateXLabel!==!1?"end":"middle");s.selectAll("line").style("fill","none").style("stroke",this.params.axisLineColor).style("stroke-dasharray",this.params.xTickLineDasharray),s.selectAll("path").style("fill","none").style("stroke",this.params.axisLineColor).style("shape-rendering","crispEdges");const o=s.selectAll("text").style("font-family","sans-serif").style("font-size","14px").style("color",this.params.axisLabelColor).attr("transform-origin",`-5 ${this.params.xTickPadding+tr}`);this.params.rotateXLabel===!0?o.attr("transform","translate(0,0) rotate(-45)"):typeof this.params.rotateXLabel=="number"&&o.attr("transform",`translate(0,0) rotate(${this.params.rotateXLabel})`)}renderYLinearAxis(){let e=[];this.params.xVisible&&e.push(this.params);const n=this.selection.selectAll("g.yAxis").data(e),i=n.enter().append("g");this.yAxisSelection=n.merge(i).classed("yAxis",!0).attr("transform",o=>"translate("+o.padding.left+","+o.padding.top+")"),n.exit().remove();const a=this.selection.selectAll("text.yLabel").data(e),r=a.enter().append("text").classed("yLabel",!0).style("font-size","14px").style("font-weight","bold");if(this.yLabelSelection=a.merge(r).attr("x",o=>o.padding.left-o.xTickPadding).attr("y",o=>o.padding.top-o.yTickPadding).attr("text-anchor",this.params.yLabelAnchor).attr("transform",`translate(${this.params.yLabelOffset[0]}, ${this.params.yLabelOffset[1]})`).style("fill",this.params.axisLabelColor).text(o=>o.yLabel),a.exit().remove(),this.yLabelSelection.size()==0)return;this.yAxis=gs(this.dataset.yScale).scale(this.dataset.yScale).ticks(this.dataset.maxValue>this.params.yTicks?this.params.yTicks:this.dataset.maxValue===0?1:Math.ceil(this.dataset.maxValue)).tickFormat(o=>us(o,this.params.yTickFormat)).tickSize(this.params.yTickLine&&typeof this.params.yTickLine=="boolean"?-this.axisWidth:this.params.yTickLine&&typeof this.params.yTickLine=="number"?-this.axisWidth*this.params.yTickLine:tr).tickPadding(this.params.yTickPadding);const s=this.yAxisSelection.transition().duration(100).call(this.yAxis);s.selectAll("line").style("fill","none").style("stroke",this.params.axisLineColor).style("stroke-dasharray",this.params.yTickLineDasharray),s.selectAll("path").style("fill","none").style("stroke","none").style("shape-rendering","crispEdges"),s.selectAll("text").style("font-family","sans-serif").style("font-size","14px").style("color",this.params.axisLabelColor)}renderZeroLine(e,n){const i=e.selectAll("g.bpchart__zero-line").data(n),a=i.enter().append("g").classed("bpchart__zero-line",!0).attr("transform",s=>"translate("+this.params.padding.left+","+this.params.padding.top+")");i.exit().remove();const r=i.merge(a);a.append("line"),r.select("line").attr("stroke",this.params.axisLabelColor).attr("stroke-width",1).transition().duration(100).attr("x1",s=>s.x1).attr("y1",s=>s.y1).attr("x2",s=>s.x2).attr("y2",s=>s.y2).attr("opacity",s=>s.y1>=0&&s.y1<=this.axisHeight?1:0)}}const x7={barWidth:0,barGroupPadding:20,barR:!1,colors:ut,highlightTarget:"item",highlightGroupId:"",highlightItemId:"",highlightDatumId:"",enterDuration:800},_7={lineCurve:"curveLinear",colors:ut,highlightTarget:"item",highlightItemId:"",enterDuration:800},Fe={axisColumn:pm,tooltipAside:{templateHtml:t=>t.groupData&&t.groupData[0]?`
          <div>
            <div>${t.groupData[0].xLabel}</div>
            <div>${t.groupData.map(e=>e.value).join(",")}</div>          
          </div>
        `:""},colors:ut,padding:zt,highlightTarget:"datum",highlightDatumId:"",highlightItemId:"",showAuxLine:!1,domainMinValue:0,domainMaxValue:void 0,domainMinRange:void 0,domainMaxRange:.95},w7={...Fe,highlightTarget:"item",graphicColumnLine:ci,graphicDot:Cn,showDot:"hover"};({...Fe});({...Fe});({...Fe});({...Fe});({...Fe});const Sf=(t,e)=>({...t,padding:e}),M7=({dataset:t,activedItemId:e,XDataMap:n,ItemDataMap:i,padding:a,xRangeScale:r,event:s})=>{if(!s||!r)return{dataset:t,groupData:[],itemData:[],datum:void 0,xLabel:"",xIndex:-1,itemLabel:"",itemIndex:-1,rangeIndex:-1,clientX:-1,clientY:-1,offsetX:-1,offsetY:-1};const o=Number(s.offsetX)-a.left,l=Number(r(o)??0),c=t.xLabels[l],h=n.get(c)??[];let f=[],u;return e&&(f=i.get(e)??[],u=h.find(p=>p.itemLabel===e)),{dataset:t,groupData:h,itemData:f,datum:u,xLabel:c,xIndex:l,itemLabel:u?u.itemLabel:"",itemIndex:u?u.itemIndex:-1,rangeIndex:l,clientX:w.clientX,clientY:w.clientY,offsetX:w.offsetX,offsetY:w.offsetY}},k7=({dataset:t,filterConfig:e,params:n})=>{let i=[];if(!e||!e.filterItems||!t.itemLabels)return{filteredDataset:t,filteredParams:n};const a=e.filterItems.reduce((s,o)=>(s[o]=!0,s),{}),r=s=>!s.itemLabel||a[s.itemLabel]==!0;return t.data[0]&&Array.isArray(t.data[0])?i=t.data.filter((s,o)=>a[t.itemLabels[o]]==!0).map(s=>s.filter(r)):i=t.data.filter(r),{filteredDataset:{...t,data:i,itemLabels:e&&e.filterItems?e.filterItems:t.itemLabels},filteredParams:{...n,colors:t.itemLabels&&e.filterItems?n.colors.filter((s,o)=>!t.itemLabels[o]||a[t.itemLabels[o]]):n.colors}}};class D7{constructor(e,n){this.width=se,this.height=oe,this.dataset={data:[],xLabels:[]},this.params=Fe,this.filterConfig={},this.graphicSelection=void 0,this.axisWidth=0,this.axisHeight=0,this.clickCallback=function(){},this.mouseoverCallback=function(){},this.mousemoveCallback=function(){},this.mouseoutCallback=function(){},this.XDataMap=new Map,this.ItemDataMap=new Map,this.renderData=[],this.filteredDataset={data:[],xLabels:[]},this.filteredParams=Fe,this.axisParams=this.params.axisColumn,this.xAxisSelection=void 0,this.yAxisSelection=void 0,this.xLabelSelection=void 0,this.yLabelSelection=void 0,this.auxLineSelection=void 0,this.minValue=0,this.maxValue=0,this.makeActivedCallbackData=(i,a)=>M7({dataset:this.dataset,activedItemId:i,XDataMap:this.XDataMap,ItemDataMap:this.ItemDataMap,padding:this.params.padding,xRangeScale:this.xRangeScale,event:a}),this.selection=e,this.axisSelection=e.append("g"),this.axisColumn=new v7(this.axisSelection,{}),this.rangeSelection=this.selection.append("rect").attr("opacity",0),this.setRangeEvent(this.rangeSelection),this.graphicSelection=e.append("g"),this.coverSelection=this.selection.append("g").classed("bpchart__cover",!0),this.utilAuxLine=new ih(this.coverSelection),this.setCoverEvent(this.selection)}setParams(e){this.params={...this.params,...e,axisColumn:{...this.params.axisColumn,...e.axisColumn}},this.params.tooltipAside&&!this.tooltip&&(this.tooltip=new nh(this.selection,{templateHtml:this.params.tooltipAside.templateHtml,type:this.params.tooltipAside.type??"white",yLine:this.params.tooltipAside.yLine??!1})),this.axisParams=Sf(this.params.axisColumn,this.params.padding),this.axisWidth=Wt(this.width,this.params.padding),this.axisHeight=Ot(this.height,this.params.padding),this.axisColumn.setParams(this.axisParams),this.graphicSelection.attr("transform",`translate(${this.params.padding.left}, ${this.params.padding.top})`),this.coverSelection.attr("transform",`translate(${this.params.padding.left}, ${this.params.padding.top})`)}select(){return this.selection}remove(){this.selection.remove()}resize({width:e=this.width,height:n=this.height}){this.width=e,this.height=n,this.axisParams=Sf(this.params.axisColumn,this.params.padding),this.axisWidth=Wt(this.width,this.params.padding),this.axisHeight=Ot(this.height,this.params.padding),this.axisColumn.setParams(this.axisParams),this.axisColumn.resize({width:e,height:n}),this.rangeSelection.attr("x",this.params.padding.left).attr("y",this.params.padding.top).attr("width",this.axisWidth).attr("height",this.axisHeight)}setDataset(e){this.dataset=e}filter(e){this.filterConfig={...this.filterConfig,...e}}render(){this.xRangeScale=eh({axisLabels:this.dataset.xLabels,axisWidth:this.axisWidth});const{filteredDataset:e,filteredParams:n}=k7({dataset:this.dataset,filterConfig:this.filterConfig,params:this.params});this.filteredDataset=e,this.filteredParams=n;const[i,a]=this.getMinAndMaxValue(this.filteredDataset.data);this.minValue=i,this.maxValue=a,this.xScale=th({axisLabels:this.filteredDataset.xLabels,axisWidth:this.axisWidth}),this.yScale=fs({maxValue:this.maxValue,minValue:this.minValue,axisWidth:this.axisHeight,domainMinValue:this.params.domainMinValue,domainMaxValue:this.params.domainMaxValue,domainMinRange:this.params.domainMinRange,domainMaxRange:this.params.domainMaxRange,reverse:!0}),this.renderData=this.makeGraphicRenderData({dataset:this.filteredDataset,xScale:this.xScale,yScale:this.yScale}),this.XDataMap=this.makeXDataMap({renderData:this.renderData,xLabels:this.filteredDataset.xLabels}),this.ItemDataMap=this.makeItemDataMap({renderData:this.renderData,itemLabels:this.filteredDataset.itemLabels??[]}),this.initGraphic(this.filteredParams),this.setGraphicData({renderData:this.renderData,itemLabels:this.filteredDataset.itemLabels??[],xLabels:this.filteredDataset.xLabels,xScale:this.xScale,yScale:this.yScale}),this.axisColumn.setDataset({xScale:this.xScale,yScale:this.yScale,maxValue:this.maxValue}),this.axisColumn.render(),this.renderGraphic()}on(e,n){return e==="click"?this.clickCallback=n:e==="mouseover"?this.mouseoverCallback=n:e==="mousemove"?this.mousemoveCallback=n:e==="mouseout"&&(this.mouseoutCallback=n),this}setRangeEvent(e){e.on("click",(n,i)=>{const a=this.makeActivedCallbackData("",w);this.clickCallback(a)}).on("mouseover",(n,i)=>{const a=this.makeActivedCallbackData("",w);this.mouseoverCallback(a)}).on("mousemove",n=>{const i=this.makeActivedCallbackData("",w);this.mousemoveCallback(i)}).on("mouseout",n=>{if(w.offsetX>0&&w.offsetX<this.width&&w.offsetY>0&&w.offsetY<this.height)return;const i=this.makeActivedCallbackData("",w);this.mouseoutCallback(i)})}showTooltip(e,n){n&&e&&this.xScale?this.tooltip.setDatum({data:e,x:e.clientX-e.offsetX+this.params.padding.left+this.xScale(e.xLabel),y:w.clientY}):this.tooltip.remove()}setCoverEvent(e){e.on("mouseover",(n,i)=>{const a=this.makeActivedCallbackData("",w);this.coverHighlight(a),this.showTooltip(a,w)}).on("mousemove",n=>{const i=this.makeActivedCallbackData("",w);this.coverHighlight(i),this.showTooltip(i,w)}).on("mouseout",n=>{w.offsetX>0&&w.offsetX<this.width&&w.offsetY>0&&w.offsetY<this.height||(this.coverHighlight(void 0),this.tooltip.remove())})}coverHighlight(e){this.params.showAuxLine&&this.renderAuxLine({coverSelection:this.coverSelection,xLabels:this.dataset.xLabels,activeRangeIndex:e?e.rangeIndex:-1,xScale:this.xScale,padding:this.params.padding,axisHeight:this.axisHeight}),this.renderGraphicCoverHighlight({eventData:e,xScale:this.xScale,yScale:this.yScale,padding:this.params.padding})}renderAuxLine({coverSelection:e,xLabels:n,activeRangeIndex:i,xScale:a,padding:r,axisHeight:s}){if(!a)return;const o=n.map((l,c)=>{const h=a(l)||0;return{x1:h,x2:h,y1:0,y2:s,active:i==c}});this.utilAuxLine.setData(o),this.utilAuxLine.render()}}const er="__DEFAULT__";class S7 extends D7{constructor(e,n){super(e,n),this.params=w7,this.line=new rm(this.graphicSelection,{}),this.dot=new sm(this.coverSelection,{})}initGraphic(e){this.params.graphicColumnLine={...this.params.graphicColumnLine,colors:e.colors,highlightItemId:e.highlightItemId,highlightTarget:e.highlightTarget==="item"?"item":"none"},this.params.graphicDot={...this.params.graphicDot,colors:e.colors,highlightItemId:e.highlightItemId,highlightTarget:e.highlightTarget==="item"?"item":"none"},this.line.setParams(this.params.graphicColumnLine),this.line.on("click",n=>{const i=this.makeActivedCallbackData(n.itemLabel??"",w);this.clickCallback(i)}).on("mouseover",n=>{const i=this.makeActivedCallbackData(n.itemLabel??"",w);this.showTooltip(i,w),this.mouseoverCallback(i),this.params.highlightTarget==="item"&&(this.dot.setParams({highlightItemId:n.itemLabel}),this.dot.render())}).on("mousemove",n=>{const i=this.makeActivedCallbackData(n.itemLabel??"",w);this.showTooltip(i,w),this.mousemoveCallback(i)}).on("mouseout",n=>{const i=this.makeActivedCallbackData("",w);this.showTooltip(void 0,w),this.mouseoutCallback(i),this.params.highlightTarget==="item"&&(this.dot.setParams({highlightItemId:this.params.highlightItemId}),this.dot.render())}),this.dot.setParams(this.params.graphicDot),this.dot.on("click",n=>{const i=this.makeActivedCallbackData(n.itemLabel??"",w);this.clickCallback(i)}).on("mouseover",n=>{const i=this.makeActivedCallbackData(n.itemLabel??"",w);this.showTooltip(i,w),this.mouseoverCallback(i),this.params.highlightTarget==="item"&&(this.line.setParams({highlightItemId:n.itemLabel}),this.line.render())}).on("mousemove",n=>{const i=this.makeActivedCallbackData(n.itemLabel??"",w);this.showTooltip(i,w),this.mousemoveCallback(i)}).on("mouseout",n=>{const i=this.makeActivedCallbackData("",w);this.showTooltip(void 0,w),this.mouseoutCallback(i),this.params.highlightTarget==="item"&&(this.line.setParams({highlightItemId:this.params.highlightItemId}),this.line.render())})}makeGraphicRenderData({dataset:e,xScale:n,yScale:i}){return e.data.map((a,r)=>{const s=e.itemLabels&&e.itemLabels[r]?e.itemLabels[r]:er;return a.map((o,l)=>{const c=e.xLabels[l];return{...o,id:`${s}_${c}`,itemIndex:r,itemLabel:s,xIndex:l,xLabel:c,x:n(c)||0,y:o.value?i(o.value):i(0)}})})}getMinAndMaxValue(e){return e.length?e.flat().reduce((n,i)=>[i.value&&i.value<n[0]?i.value:n[0],i.value&&i.value>n[1]?i.value:n[1]],[1/0,0]):[0,0]}makeXDataMap({renderData:e,xLabels:n}){let i=new Map;return e.length&&e.forEach((a,r)=>{a.forEach((s,o)=>{const l=i.get(n[o])??[];l.push(s),i.set(n[o]??"",l)})}),i}makeItemDataMap({renderData:e,itemLabels:n}){let i=new Map;return e.length&&e.forEach((a,r)=>{i.set(n[r]??"",a)}),i}setGraphicData({renderData:e,itemLabels:n,xLabels:i,xScale:a,yScale:r}){if(this.line.setDataset({data:e,itemLabels:n??[er],axisWidth:this.axisWidth,axisHeight:this.axisHeight,zeroY:r(0)}),this.params.showDot==="always"){const s=e.flat();this.dot.setDataset({data:s,itemLabels:this.filteredDataset.itemLabels??[er]})}}renderGraphic(){this.line.render(),this.params.showDot==="always"&&this.dot.render()}renderGraphicCoverHighlight({eventData:e,xScale:n,yScale:i,padding:a}){if(this.params.showDot==="hover"&&this.params.highlightTarget!=="none"){const r=e?e.groupData.filter(s=>s.value!=null).map(s=>({...s,id:s.itemLabel,x:n(s.xLabel),y:i(s.value)})):[];this.dot.setDataset({data:r,itemLabels:this.filteredDataset.itemLabels??[er]}),this.dot.render()}}}const A7={__name:"ChartColumn",setup(t){const e={data:[[{value:76.3098},{value:76.5973},{value:75.7679},{value:77.4424}]],xLabels:["台北市","新竹市","台南市","高雄市"],itemLabels:["投票率"]};return(n,i)=>(De(),Se("div",null,[st(_n,{module:on(S7),dataset:e},null,8,["module"])]))}},L7={__name:"ChartRowBarLayout",setup(t){const e={data:[[{value:70769},{value:14103},{value:41075},{value:55309}],[{value:685830},{value:102725},{value:339702},{value:610896}],[{value:875854},{value:144274},{value:786471},{value:1097621}],[{value:1632453},{value:261102},{value:1167248},{value:1763826}],[{value:21381},{value:3423},{value:12341},{value:17006}],[{value:1653834},{value:264525},{value:1179589},{value:1780832}]],yLabels:["台北市","新竹市","台南市","高雄市"],itemLabels:["宋楚瑜、余湘","韓國瑜、張善政","蔡英文、賴清德","有效票數","無效票數","投票數"]},n={colors:["#FF6310","#000095","#1B9431","#8F4586","#5A5AAD","#709EE2"],padding:{top:50,right:70,bottom:50,left:100},axisRow:{yLabel:"",xLabel:""},graphicRowBarLayout:{groupLayout:[{stackAmount:3,barWidth:24},{stackAmount:2,barwidth:6,barR:10},{stackAmount:1,barwidth:12,barR:10}],barPadding:5,barGroupPadding:30,labelTextMethod:(i,a)=>String(i.value),labelPositionMethod:(i,a)=>a[0]===5?"right":"center",labelStyleMethod:(i,a)=>a[0]===5?"font-weight:800;font-size:18px;fill:#709EE2":"",labelFontSizeMethod:(i,a)=>10,labelColorMethod:(i,a)=>"#ffffff",labelPadding:5}};return(i,a)=>(De(),Se("div",null,[st(_n,{module:on(b7),dataset:e,params:n},null,8,["module"])]))}},C7={types:[],colors:ut,highlightId:void 0,groupMode:"center",padding:zt,tooltipFollowing:{templateHtml:t=>`
      <div>${t.label}</div>
      <div>${t.value}</div>
    `,insideBoxMode:!0,type:"black"},force:{strength:.03,velocityDecay:.2,collisionSpacing:2}};class Af{constructor(e,n){this.params=C7,this.data=[],this.width=se,this.height=oe,this.sourceData=[],this.graphicWidth=se,this.graphicHeight=oe,this.bubbleGroupR=350,this.groupMode="center",this.maxValue=0,this.totalValue=0,this.avgValue=0,this.highlightId="",this.tooltip=void 0,this.mouseoverCallback=function(){},this.mousemoveCallback=function(){},this.mouseoutCallback=function(){},this.clickCallback=function(){},this.selection=e,this.graphicSelection=this.selection.append("g"),this.tooltip=new Qg(this.selection)}resize({width:e,height:n}){this.width=e,this.height=n,this.graphicWidth=Wt(this.width,this.params.padding),this.graphicHeight=Ot(this.height,this.params.padding),this.selection.attr("width",e).attr("height",n),this.graphicSelection.attr("width",this.graphicWidth).attr("height",this.graphicHeight);const i=Math.min(this.graphicWidth,this.graphicHeight);this.bubbleGroupR=i/2}setData(e){if(this.sourceData=JSON.parse(JSON.stringify(e)),!this.data.length)this.data=this.sourceData.map((n,i)=>({...n,x:Math.random()*this.graphicWidth,y:Math.random()*this.graphicHeight,r:0}));else{const n=new Map(this.data.map(i=>[i.id,i]));this.data=this.sourceData.map((i,a)=>{const r=n.get(i.id);return r?(r.x,r.y,{...r,value:i.value,label:i.label,type:i.type,r:0}):{...i,x:Math.random()*this.graphicWidth,y:Math.random()*this.graphicHeight,r:0}})}this.data=this.data.sort((n,i)=>i.value-n.value),this.maxValue=Math.max(...this.sourceData.map(n=>n.value)),this.totalValue=this.sourceData.map(n=>n.value).reduce((n,i)=>n+i,0),this.avgValue=this.totalValue/this.sourceData.length}render(){this.calcBubbleR(this.data,this.bubbleGroupR);let e=this.graphicSelection.selectAll("g").data(this.data,i=>i.id),n=e.enter().append("g").attr("cursor","pointer");n.style("font-size",12).style("fill","#ffffff").attr("text-anchor","middle").attr("transform",i=>`translate(${i.x},${i.y})`),n.append("circle").attr("class","node").attr("cx",0).attr("cy",0).attr("fill",i=>this.scaleFillColor(i.type)),n.append("text").style("opacity",.8),e.exit().remove(),this.bubblesSelection=e.merge(n),this.bubblesSelection.select("circle").transition().duration(200).attr("r",i=>i.r).attr("fill",i=>this.scaleFillColor(i.type)),this.bubblesSelection.each((i,a,r)=>{const s=W(r[a]);let o=!0;i.label.length<5&&(o=!1),x4(s,{text:i.label,radius:i.r*.6,lineHeight:12,isBreakAll:o})}),this.setBubbleMouseEvent(this.bubblesSelection),this.force.nodes(this.data),this.groupMode=="type"?this.splitBubbles():this.groupMode=="rank"?this.rankBubbles():this.groupBubbles()}remove(){this.selection.remove()}select(){return this.selection}setParams(e){this.params={...this.params,...e,force:{...this.params.force,...e.force},tooltipFollowing:{...this.params.tooltipFollowing,...e.tooltipFollowing}},e.highlightId!=null&&this.setHighlight(e.highlightId),e.groupMode!=null&&(this.params.groupMode=e.groupMode,this.groupMode=e.groupMode),e.tooltipFollowing&&this.tooltip.setParams({templateHtml:this.params.tooltipFollowing.templateHtml,insideBoxMode:this.params.tooltipFollowing.insideBoxMode??!0,type:this.params.tooltipFollowing.type??"black"}),this.graphicSelection.attr("transform",`translate(${this.params.padding.left}, ${this.params.padding.top})`),this.scaleFillColor=_a().domain(this.params.types).range(this.params.colors),this.force=this.makeForce(this.params),this.force.stop()}on(e,n){return e==="click"?this.clickCallback=n:e==="mouseover"?this.mouseoverCallback=n:e==="mousemove"?this.mousemoveCallback=n:e==="mouseout"&&(this.mouseoutCallback=n),this}makeForce(e){return Od().velocityDecay(e.force.velocityDecay).force("collision",Wd().radius(n=>n.r+e.force.collisionSpacing)).force("charge",Fd().strength(n=>-Math.pow(n.r,2)*e.force.strength)).on("tick",()=>{this.bubblesSelection&&this.bubblesSelection.attr("transform",n=>`translate(${n.x},${n.y})`)})}calcBubbleR(e,n){const i=()=>{const a=n/Math.sqrt(this.data.length),s=a*a*Math.PI/this.avgValue,o=this.maxValue*s;return Math.pow(o/Math.PI,.5)*.75};this.scaleBubbleR=Ys().domain([0,this.maxValue]).range([0,i()]).exponent(.5),e.forEach(a=>{const r=this.scaleBubbleR(a.value);a.r=this.highlightId==a.id?r+10:r})}setBubbleMouseEvent(e){e.on("mouseover",(n,i,a)=>{this.tooltip.setDatum({data:n,x:w.clientX,y:w.clientY}),this.setHighlight(n.id),this.mouseoverCallback(n)}).on("mousemove",(n,i,a)=>{this.tooltip.setDatum({x:w.clientX,y:w.clientY}),this.mousemoveCallback(n)}).on("mouseout",(n,i,a)=>{this.tooltip.remove(),this.setHighlight(""),this.mouseoutCallback(n)}).on("click",(n,i,a)=>{this.clickCallback(n)}).call(this.drag())}drag(){return Uf().on("start",e=>{w.active||this.force.alpha(1).restart(),e.fx=e.x,e.fy=e.y}).on("drag",e=>{w.active||this.force.alphaTarget(0),e.fx=w.x,e.fy=w.y}).on("end",e=>{e.fx=null,e.fy=null})}splitBubbles(){const e=this.graphicWidth/(this.params.types.length+1),n=new Map(this.params.types.map((i,a)=>[i,{x:e*(a+1),y:this.graphicHeight/2}]));this.force.force("x",cr().strength(this.params.force.strength).x(i=>n.get(i.type).x)).force("y",hr().strength(this.params.force.strength).y(this.graphicHeight/2)),this.force.alpha(3).restart()}groupBubbles(){this.force.force("x",cr().strength(this.params.force.strength).x(this.graphicWidth/2)).force("y",hr().strength(this.params.force.strength).y(this.graphicHeight/2)),this.force.alpha(1).restart()}rankBubbles(){if(!this.data.length)return;const e=100,n=10,i=this.graphicWidth-e*2;let a=e,r=e+this.data[0].r,s=0,o=this.data[0].r,l=this.data.map((c,h)=>{let f=a+s+n+c.r,u=r;return f>i&&(f=e+c.r,u+=o+n+c.r,o=c.r),a=f,r=u,s=c.r,{x:f,y:u}});this.force.force("x",cr().strength(this.params.force.strength).x((c,h)=>l[h].x)).force("y",hr().strength(this.params.force.strength).y((c,h)=>l[h].y)),this.force.alpha(3).restart()}setHighlight(e){this.params.highlightId=e,this.highlightId=e,this.highlightId==""?this.bubblesSelection.style("opacity",1):this.bubblesSelection.style("opacity",n=>n.id==this.highlightId?1:.5)}}const T7={__name:"ChartBubbleGroup",props:["groupMode"],setup(t){const e=t,n=[{id:"台北市_選舉人數",label:"台北市",value:2167264,type:"選舉人數"},{id:"新竹市_選舉人數",label:"新竹市",value:345345,type:"選舉人數"},{id:"台南市_選舉人數",label:"台南市",value:1556845,type:"選舉人數"},{id:"高雄市_選舉人數",label:"高雄市",value:2299558,type:"選舉人數"},{id:"台北市_投票數",label:"台北市",value:1653834,type:"投票數"},{id:"新竹市_投票數",label:"新竹市",value:264525,type:"投票數"},{id:"台南市_投票數",label:"台南市",value:1179589,type:"投票數"},{id:"高雄市_投票數",label:"高雄市",value:1780832,type:"投票數"},{id:"台北市_有效票數",label:"台北市",value:1632453,type:"有效票數"},{id:"新竹市_有效票數",label:"新竹市",value:261102,type:"有效票數"},{id:"台南市_有效票數",label:"台南市",value:1167248,type:"有效票數"},{id:"高雄市_有效票數",label:"高雄市",value:1763826,type:"有效票數"},{id:"台北市_無效票數",label:"台北市",value:21381,type:"無效票數"},{id:"新竹市_無效票數",label:"新竹市",value:3423,type:"無效票數"},{id:"台南市_無效票數",label:"台南市",value:12341,type:"無效票數"},{id:"高雄市_無效票數",label:"高雄市",value:17006,type:"無效票數"},{id:"台北市_未投票數",label:"台北市",value:143,type:"未投票數"},{id:"新竹市_未投票數",label:"新竹市",value:8,type:"未投票數"},{id:"台南市_未投票數",label:"台南市",value:22,type:"未投票數"},{id:"高雄市_未投票數",label:"高雄市",value:12,type:"未投票數"}],i=Ee({colors:["#4A4AFF","#0080FF","#00E3E3","#02F78E","#00EC00"],types:["選舉人數","投票數","有效票數","無效票數","未投票數"],collisionSpacing:2,groupMode:"center"}),a={colors:["#4A4AFF","#0080FF","#00E3E3","#02F78E","#00EC00"],types:["選舉人數","投票數","有效票數","無效票數","未投票數"],collisionSpacing:2,groupMode:"type"};return te(()=>e.groupMode,r=>{i.value.groupMode=r}),(r,s)=>(De(),Se("div",null,[st(_n,{module:on(Af),data:n,params:i.value},null,8,["module","params"]),st(_n,{module:on(Af),data:n,params:a},null,8,["module"])]))}};const I7={style:{width:"100vw"}},R7={class:"container"},P7={class:"container"},E7={class:"container"},$7={__name:"Index",setup(t){return(e,n)=>{const i=vm("el-button");return De(),Se("div",I7,[Zt("div",null,[st(i,null,{default:Tn(()=>[je("投票統計類別摘要區塊")]),_:1}),st(T7,{groupMode:"type"})]),Zt("div",null,[st(i,null,{default:Tn(()=>[je("候選人區域比較區塊")]),_:1}),st(Ka,{class:"child"})]),Zt("div",null,[st(i,null,{default:Tn(()=>[je("候選人各單區得票顯示區塊")]),_:1}),st(L7)]),Zt("div",R7,[st(i,null,{default:Tn(()=>[je("投票統計類別摘要區塊")]),_:1}),st(Df,{class:"child"}),st(Df,{class:"child"}),st(A7,{class:"child"})]),Zt("div",P7,[st(i,null,{default:Tn(()=>[je("候選人區域比較區塊")]),_:1}),st(Ka,{class:"child"}),st(Ka,{class:"child"}),st(Ka,{class:"child"})]),Zt("div",E7,[st(i,null,{default:Tn(()=>[je("候選人各單區得票顯示區塊")]),_:1}),st(zo,{class:"child"}),st(zo,{class:"child"}),st(zo,{class:"child"})])])}}},G7=Zg($7,[["__scopeId","data-v-8370a3d4"]]);export{G7 as default};
