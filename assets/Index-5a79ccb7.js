import{r as en,w as le,d as om,u as lm,c as ih,o as cm,a as $e,b as Ye,n as hm,e as dt,f as ca,g as vi,h as ce,i as um,j as wa}from"./index-c4264250.js";var fm="5.16.0";function Ue(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function Yl(t){return t.length===1&&(t=dm(t)),{left:function(e,n,i,a){for(i==null&&(i=0),a==null&&(a=e.length);i<a;){var r=i+a>>>1;t(e[r],n)<0?i=r+1:a=r}return i},right:function(e,n,i,a){for(i==null&&(i=0),a==null&&(a=e.length);i<a;){var r=i+a>>>1;t(e[r],n)>0?a=r:i=r+1}return i}}}function dm(t){return function(e,n){return Ue(t(e),n)}}var Df=Yl(Ue),Ne=Df.right,pm=Df.left;function gm(t,e){e==null&&(e=Sf);for(var n=0,i=t.length-1,a=t[0],r=new Array(i<0?0:i);n<i;)r[n]=e(a,a=t[++n]);return r}function Sf(t,e){return[t,e]}function mm(t,e,n){var i=t.length,a=e.length,r=new Array(i*a),s,o,l,c;for(n==null&&(n=Sf),s=l=0;s<i;++s)for(c=t[s],o=0;o<a;++o,++l)r[l]=n(c,e[o]);return r}function bm(t,e){return e<t?-1:e>t?1:e>=t?0:NaN}function ze(t){return t===null?NaN:+t}function Af(t,e){var n=t.length,i=0,a=-1,r=0,s,o,l=0;if(e==null)for(;++a<n;)isNaN(s=ze(t[a]))||(o=s-r,r+=o/++i,l+=o*(s-r));else for(;++a<n;)isNaN(s=ze(e(t[a],a,t)))||(o=s-r,r+=o/++i,l+=o*(s-r));if(i>1)return l/(i-1)}function Lf(t,e){var n=Af(t,e);return n&&Math.sqrt(n)}function Nl(t,e){var n=t.length,i=-1,a,r,s;if(e==null){for(;++i<n;)if((a=t[i])!=null&&a>=a)for(r=s=a;++i<n;)(a=t[i])!=null&&(r>a&&(r=a),s<a&&(s=a))}else for(;++i<n;)if((a=e(t[i],i,t))!=null&&a>=a)for(r=s=a;++i<n;)(a=e(t[i],i,t))!=null&&(r>a&&(r=a),s<a&&(s=a));return[r,s]}var Cf=Array.prototype,ym=Cf.slice,vm=Cf.map;function Ma(t){return function(){return t}}function xm(t){return t}function Gt(t,e,n){t=+t,e=+e,n=(a=arguments.length)<2?(e=t,t=0,1):a<3?1:+n;for(var i=-1,a=Math.max(0,Math.ceil((e-t)/n))|0,r=new Array(a);++i<a;)r[i]=t+i*n;return r}var No=Math.sqrt(50),zo=Math.sqrt(10),Xo=Math.sqrt(2);function zl(t,e,n){var i,a=-1,r,s,o;if(e=+e,t=+t,n=+n,t===e&&n>0)return[t];if((i=e<t)&&(r=t,t=e,e=r),(o=Yi(t,e,n))===0||!isFinite(o))return[];if(o>0)for(t=Math.ceil(t/o),e=Math.floor(e/o),s=new Array(r=Math.ceil(e-t+1));++a<r;)s[a]=(t+a)*o;else for(t=Math.floor(t*o),e=Math.ceil(e*o),s=new Array(r=Math.ceil(t-e+1));++a<r;)s[a]=(t-a)/o;return i&&s.reverse(),s}function Yi(t,e,n){var i=(e-t)/Math.max(0,n),a=Math.floor(Math.log(i)/Math.LN10),r=i/Math.pow(10,a);return a>=0?(r>=No?10:r>=zo?5:r>=Xo?2:1)*Math.pow(10,a):-Math.pow(10,-a)/(r>=No?10:r>=zo?5:r>=Xo?2:1)}function sn(t,e,n){var i=Math.abs(e-t)/Math.max(0,n),a=Math.pow(10,Math.floor(Math.log(i)/Math.LN10)),r=i/a;return r>=No?a*=10:r>=zo?a*=5:r>=Xo&&(a*=2),e<t?-a:a}function Xl(t){return Math.ceil(Math.log(t.length)/Math.LN2)+1}function _m(){var t=xm,e=Nl,n=Xl;function i(a){var r,s=a.length,o,l=new Array(s);for(r=0;r<s;++r)l[r]=t(a[r],r,a);var c=e(l),h=c[0],f=c[1],u=n(l,h,f);Array.isArray(u)||(u=sn(h,f,u),u=Gt(Math.ceil(h/u)*u,f,u));for(var d=u.length;u[0]<=h;)u.shift(),--d;for(;u[d-1]>f;)u.pop(),--d;var p=new Array(d+1),g;for(r=0;r<=d;++r)g=p[r]=[],g.x0=r>0?u[r-1]:h,g.x1=r<d?u[r]:f;for(r=0;r<s;++r)o=l[r],h<=o&&o<=f&&p[Ne(u,o,0,d)].push(a[r]);return p}return i.value=function(a){return arguments.length?(t=typeof a=="function"?a:Ma(a),i):t},i.domain=function(a){return arguments.length?(e=typeof a=="function"?a:Ma([a[0],a[1]]),i):e},i.thresholds=function(a){return arguments.length?(n=typeof a=="function"?a:Array.isArray(a)?Ma(ym.call(a)):Ma(a),i):n},i}function Bi(t,e,n){if(n==null&&(n=ze),!!(i=t.length)){if((e=+e)<=0||i<2)return+n(t[0],0,t);if(e>=1)return+n(t[i-1],i-1,t);var i,a=(i-1)*e,r=Math.floor(a),s=+n(t[r],r,t),o=+n(t[r+1],r+1,t);return s+(o-s)*(a-r)}}function wm(t,e,n){return t=vm.call(t,ze).sort(Ue),Math.ceil((n-e)/(2*(Bi(t,.75)-Bi(t,.25))*Math.pow(t.length,-1/3)))}function Mm(t,e,n){return Math.ceil((n-e)/(3.5*Lf(t)*Math.pow(t.length,-1/3)))}function Tf(t,e){var n=t.length,i=-1,a,r;if(e==null){for(;++i<n;)if((a=t[i])!=null&&a>=a)for(r=a;++i<n;)(a=t[i])!=null&&a>r&&(r=a)}else for(;++i<n;)if((a=e(t[i],i,t))!=null&&a>=a)for(r=a;++i<n;)(a=e(t[i],i,t))!=null&&a>r&&(r=a);return r}function km(t,e){var n=t.length,i=n,a=-1,r,s=0;if(e==null)for(;++a<n;)isNaN(r=ze(t[a]))?--i:s+=r;else for(;++a<n;)isNaN(r=ze(e(t[a],a,t)))?--i:s+=r;if(i)return s/i}function Dm(t,e){var n=t.length,i=-1,a,r=[];if(e==null)for(;++i<n;)isNaN(a=ze(t[i]))||r.push(a);else for(;++i<n;)isNaN(a=ze(e(t[i],i,t)))||r.push(a);return Bi(r.sort(Ue),.5)}function Hl(t){for(var e=t.length,n,i=-1,a=0,r,s;++i<e;)a+=t[i].length;for(r=new Array(a);--e>=0;)for(s=t[e],n=s.length;--n>=0;)r[--a]=s[n];return r}function If(t,e){var n=t.length,i=-1,a,r;if(e==null){for(;++i<n;)if((a=t[i])!=null&&a>=a)for(r=a;++i<n;)(a=t[i])!=null&&r>a&&(r=a)}else for(;++i<n;)if((a=e(t[i],i,t))!=null&&a>=a)for(r=a;++i<n;)(a=e(t[i],i,t))!=null&&r>a&&(r=a);return r}function Sm(t,e){for(var n=e.length,i=new Array(n);n--;)i[n]=t[e[n]];return i}function Am(t,e){if(n=t.length){var n,i=0,a=0,r,s=t[a];for(e==null&&(e=Ue);++i<n;)(e(r=t[i],s)<0||e(s,s)!==0)&&(s=r,a=i);if(e(s,s)===0)return a}}function Lm(t,e,n){for(var i=(n??t.length)-(e=e==null?0:+e),a,r;i;)r=Math.random()*i--|0,a=t[i+e],t[i+e]=t[r+e],t[r+e]=a;return t}function Cm(t,e){var n=t.length,i=-1,a,r=0;if(e==null)for(;++i<n;)(a=+t[i])&&(r+=a);else for(;++i<n;)(a=+e(t[i],i,t))&&(r+=a);return r}function Rf(t){if(!(r=t.length))return[];for(var e=-1,n=If(t,Tm),i=new Array(n);++e<n;)for(var a=-1,r,s=i[e]=new Array(r);++a<r;)s[a]=t[a][e];return i}function Tm(t){return t.length}function Im(){return Rf(arguments)}var Ws=Array.prototype.slice;function Rm(t){return t}var tr=1,er=2,Ho=3,xi=4,ah=1e-6;function Pm(t){return"translate("+(t+.5)+",0)"}function Em(t){return"translate(0,"+(t+.5)+")"}function $m(t){return function(e){return+t(e)}}function Ym(t){var e=Math.max(0,t.bandwidth()-1)/2;return t.round()&&(e=Math.round(e)),function(n){return+t(n)+e}}function Nm(){return!this.__axis}function cs(t,e){var n=[],i=null,a=null,r=6,s=6,o=3,l=t===tr||t===xi?-1:1,c=t===xi||t===er?"x":"y",h=t===tr||t===Ho?Pm:Em;function f(u){var d=i??(e.ticks?e.ticks.apply(e,n):e.domain()),p=a??(e.tickFormat?e.tickFormat.apply(e,n):Rm),g=Math.max(r,0)+o,m=e.range(),b=+m[0]+.5,v=+m[m.length-1]+.5,y=(e.bandwidth?Ym:$m)(e.copy()),x=u.selection?u.selection():u,M=x.selectAll(".domain").data([null]),S=x.selectAll(".tick").data(d,e).order(),k=S.exit(),I=S.enter().append("g").attr("class","tick"),C=S.select("line"),T=S.select("text");M=M.merge(M.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),S=S.merge(I),C=C.merge(I.append("line").attr("stroke","currentColor").attr(c+"2",l*r)),T=T.merge(I.append("text").attr("fill","currentColor").attr(c,l*g).attr("dy",t===tr?"0em":t===Ho?"0.71em":"0.32em")),u!==x&&(M=M.transition(u),S=S.transition(u),C=C.transition(u),T=T.transition(u),k=k.transition(u).attr("opacity",ah).attr("transform",function(L){return isFinite(L=y(L))?h(L):this.getAttribute("transform")}),I.attr("opacity",ah).attr("transform",function(L){var _=this.parentNode.__axis;return h(_&&isFinite(_=_(L))?_:y(L))})),k.remove(),M.attr("d",t===xi||t==er?s?"M"+l*s+","+b+"H0.5V"+v+"H"+l*s:"M0.5,"+b+"V"+v:s?"M"+b+","+l*s+"V0.5H"+v+"V"+l*s:"M"+b+",0.5H"+v),S.attr("opacity",1).attr("transform",function(L){return h(y(L))}),C.attr(c+"2",l*r),T.attr(c,l*g).text(p),x.filter(Nm).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===er?"start":t===xi?"end":"middle"),x.each(function(){this.__axis=y})}return f.scale=function(u){return arguments.length?(e=u,f):e},f.ticks=function(){return n=Ws.call(arguments),f},f.tickArguments=function(u){return arguments.length?(n=u==null?[]:Ws.call(u),f):n.slice()},f.tickValues=function(u){return arguments.length?(i=u==null?null:Ws.call(u),f):i&&i.slice()},f.tickFormat=function(u){return arguments.length?(a=u,f):a},f.tickSize=function(u){return arguments.length?(r=s=+u,f):r},f.tickSizeInner=function(u){return arguments.length?(r=+u,f):r},f.tickSizeOuter=function(u){return arguments.length?(s=+u,f):s},f.tickPadding=function(u){return arguments.length?(o=+u,f):o},f}function zm(t){return cs(tr,t)}function Pf(t){return cs(er,t)}function hs(t){return cs(Ho,t)}function us(t){return cs(xi,t)}var Xm={value:function(){}};function vn(){for(var t=0,e=arguments.length,n={},i;t<e;++t){if(!(i=arguments[t]+"")||i in n||/[\s.]/.test(i))throw new Error("illegal type: "+i);n[i]=[]}return new nr(n)}function nr(t){this._=t}function Hm(t,e){return t.trim().split(/^|\s+/).map(function(n){var i="",a=n.indexOf(".");if(a>=0&&(i=n.slice(a+1),n=n.slice(0,a)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:i}})}nr.prototype=vn.prototype={constructor:nr,on:function(t,e){var n=this._,i=Hm(t+"",n),a,r=-1,s=i.length;if(arguments.length<2){for(;++r<s;)if((a=(t=i[r]).type)&&(a=Gm(n[a],t.name)))return a;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++r<s;)if(a=(t=i[r]).type)n[a]=rh(n[a],t.name,e);else if(e==null)for(a in n)n[a]=rh(n[a],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new nr(t)},call:function(t,e){if((a=arguments.length-2)>0)for(var n=new Array(a),i=0,a,r;i<a;++i)n[i]=arguments[i+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(r=this._[t],i=0,a=r.length;i<a;++i)r[i].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var i=this._[t],a=0,r=i.length;a<r;++a)i[a].value.apply(e,n)}};function Gm(t,e){for(var n=0,i=t.length,a;n<i;++n)if((a=t[n]).name===e)return a.value}function rh(t,e,n){for(var i=0,a=t.length;i<a;++i)if(t[i].name===e){t[i]=Xm,t=t.slice(0,i).concat(t.slice(i+1));break}return n!=null&&t.push({name:e,value:n}),t}var Go="http://www.w3.org/1999/xhtml";const Bo={svg:"http://www.w3.org/2000/svg",xhtml:Go,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function ha(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),Bo.hasOwnProperty(e)?{space:Bo[e],local:t}:t}function Bm(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===Go&&e.documentElement.namespaceURI===Go?e.createElement(t):e.createElementNS(n,t)}}function Om(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function fs(t){var e=ha(t);return(e.local?Om:Bm)(e)}function Wm(){}function ds(t){return t==null?Wm:function(){return this.querySelector(t)}}function Um(t){typeof t!="function"&&(t=ds(t));for(var e=this._groups,n=e.length,i=new Array(n),a=0;a<n;++a)for(var r=e[a],s=r.length,o=i[a]=new Array(s),l,c,h=0;h<s;++h)(l=r[h])&&(c=t.call(l,l.__data__,h,r))&&("__data__"in l&&(c.__data__=l.__data__),o[h]=c);return new It(i,this._parents)}function Fm(){return[]}function Gl(t){return t==null?Fm:function(){return this.querySelectorAll(t)}}function Vm(t){typeof t!="function"&&(t=Gl(t));for(var e=this._groups,n=e.length,i=[],a=[],r=0;r<n;++r)for(var s=e[r],o=s.length,l,c=0;c<o;++c)(l=s[c])&&(i.push(t.call(l,l.__data__,c,s)),a.push(l));return new It(i,a)}function Bl(t){return function(){return this.matches(t)}}function qm(t){typeof t!="function"&&(t=Bl(t));for(var e=this._groups,n=e.length,i=new Array(n),a=0;a<n;++a)for(var r=e[a],s=r.length,o=i[a]=[],l,c=0;c<s;++c)(l=r[c])&&t.call(l,l.__data__,c,r)&&o.push(l);return new It(i,this._parents)}function Ef(t){return new Array(t.length)}function Zm(){return new It(this._enter||this._groups.map(Ef),this._parents)}function ur(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}ur.prototype={constructor:ur,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function Km(t){return function(){return t}}var sh="$";function Qm(t,e,n,i,a,r){for(var s=0,o,l=e.length,c=r.length;s<c;++s)(o=e[s])?(o.__data__=r[s],i[s]=o):n[s]=new ur(t,r[s]);for(;s<l;++s)(o=e[s])&&(a[s]=o)}function Jm(t,e,n,i,a,r,s){var o,l,c={},h=e.length,f=r.length,u=new Array(h),d;for(o=0;o<h;++o)(l=e[o])&&(u[o]=d=sh+s.call(l,l.__data__,o,e),d in c?a[o]=l:c[d]=l);for(o=0;o<f;++o)d=sh+s.call(t,r[o],o,r),(l=c[d])?(i[o]=l,l.__data__=r[o],c[d]=null):n[o]=new ur(t,r[o]);for(o=0;o<h;++o)(l=e[o])&&c[u[o]]===l&&(a[o]=l)}function jm(t,e){if(!t)return d=new Array(this.size()),c=-1,this.each(function(S){d[++c]=S}),d;var n=e?Jm:Qm,i=this._parents,a=this._groups;typeof t!="function"&&(t=Km(t));for(var r=a.length,s=new Array(r),o=new Array(r),l=new Array(r),c=0;c<r;++c){var h=i[c],f=a[c],u=f.length,d=t.call(h,h&&h.__data__,c,i),p=d.length,g=o[c]=new Array(p),m=s[c]=new Array(p),b=l[c]=new Array(u);n(h,f,g,m,b,d,e);for(var v=0,y=0,x,M;v<p;++v)if(x=g[v]){for(v>=y&&(y=v+1);!(M=m[y])&&++y<p;);x._next=M||null}}return s=new It(s,i),s._enter=o,s._exit=l,s}function t1(){return new It(this._exit||this._groups.map(Ef),this._parents)}function e1(t,e,n){var i=this.enter(),a=this,r=this.exit();return i=typeof t=="function"?t(i):i.append(t+""),e!=null&&(a=e(a)),n==null?r.remove():n(r),i&&a?i.merge(a).order():a}function n1(t){for(var e=this._groups,n=t._groups,i=e.length,a=n.length,r=Math.min(i,a),s=new Array(i),o=0;o<r;++o)for(var l=e[o],c=n[o],h=l.length,f=s[o]=new Array(h),u,d=0;d<h;++d)(u=l[d]||c[d])&&(f[d]=u);for(;o<i;++o)s[o]=e[o];return new It(s,this._parents)}function i1(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var i=t[e],a=i.length-1,r=i[a],s;--a>=0;)(s=i[a])&&(r&&s.compareDocumentPosition(r)^4&&r.parentNode.insertBefore(s,r),r=s);return this}function a1(t){t||(t=r1);function e(f,u){return f&&u?t(f.__data__,u.__data__):!f-!u}for(var n=this._groups,i=n.length,a=new Array(i),r=0;r<i;++r){for(var s=n[r],o=s.length,l=a[r]=new Array(o),c,h=0;h<o;++h)(c=s[h])&&(l[h]=c);l.sort(e)}return new It(a,this._parents).order()}function r1(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function s1(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function o1(){var t=new Array(this.size()),e=-1;return this.each(function(){t[++e]=this}),t}function l1(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i=t[e],a=0,r=i.length;a<r;++a){var s=i[a];if(s)return s}return null}function c1(){var t=0;return this.each(function(){++t}),t}function h1(){return!this.node()}function u1(t){for(var e=this._groups,n=0,i=e.length;n<i;++n)for(var a=e[n],r=0,s=a.length,o;r<s;++r)(o=a[r])&&t.call(o,o.__data__,r,a);return this}function f1(t){return function(){this.removeAttribute(t)}}function d1(t){return function(){this.removeAttributeNS(t.space,t.local)}}function p1(t,e){return function(){this.setAttribute(t,e)}}function g1(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function m1(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function b1(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function y1(t,e){var n=ha(t);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((e==null?n.local?d1:f1:typeof e=="function"?n.local?b1:m1:n.local?g1:p1)(n,e))}function Ol(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function v1(t){return function(){this.style.removeProperty(t)}}function x1(t,e,n){return function(){this.style.setProperty(t,e,n)}}function _1(t,e,n){return function(){var i=e.apply(this,arguments);i==null?this.style.removeProperty(t):this.style.setProperty(t,i,n)}}function w1(t,e,n){return arguments.length>1?this.each((e==null?v1:typeof e=="function"?_1:x1)(t,e,n??"")):on(this.node(),t)}function on(t,e){return t.style.getPropertyValue(e)||Ol(t).getComputedStyle(t,null).getPropertyValue(e)}function M1(t){return function(){delete this[t]}}function k1(t,e){return function(){this[t]=e}}function D1(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function S1(t,e){return arguments.length>1?this.each((e==null?M1:typeof e=="function"?D1:k1)(t,e)):this.node()[t]}function $f(t){return t.trim().split(/^|\s+/)}function Wl(t){return t.classList||new Yf(t)}function Yf(t){this._node=t,this._names=$f(t.getAttribute("class")||"")}Yf.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function Nf(t,e){for(var n=Wl(t),i=-1,a=e.length;++i<a;)n.add(e[i])}function zf(t,e){for(var n=Wl(t),i=-1,a=e.length;++i<a;)n.remove(e[i])}function A1(t){return function(){Nf(this,t)}}function L1(t){return function(){zf(this,t)}}function C1(t,e){return function(){(e.apply(this,arguments)?Nf:zf)(this,t)}}function T1(t,e){var n=$f(t+"");if(arguments.length<2){for(var i=Wl(this.node()),a=-1,r=n.length;++a<r;)if(!i.contains(n[a]))return!1;return!0}return this.each((typeof e=="function"?C1:e?A1:L1)(n,e))}function I1(){this.textContent=""}function R1(t){return function(){this.textContent=t}}function P1(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function E1(t){return arguments.length?this.each(t==null?I1:(typeof t=="function"?P1:R1)(t)):this.node().textContent}function $1(){this.innerHTML=""}function Y1(t){return function(){this.innerHTML=t}}function N1(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function z1(t){return arguments.length?this.each(t==null?$1:(typeof t=="function"?N1:Y1)(t)):this.node().innerHTML}function X1(){this.nextSibling&&this.parentNode.appendChild(this)}function H1(){return this.each(X1)}function G1(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function B1(){return this.each(G1)}function O1(t){var e=typeof t=="function"?t:fs(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function W1(){return null}function U1(t,e){var n=typeof t=="function"?t:fs(t),i=e==null?W1:typeof e=="function"?e:ds(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)})}function F1(){var t=this.parentNode;t&&t.removeChild(this)}function V1(){return this.each(F1)}function q1(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Z1(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function K1(t){return this.select(t?Z1:q1)}function Q1(t){return arguments.length?this.property("__data__",t):this.node().__data__}var Xf={},w=null;if(typeof document<"u"){var J1=document.documentElement;"onmouseenter"in J1||(Xf={mouseenter:"mouseover",mouseleave:"mouseout"})}function j1(t,e,n){return t=Hf(t,e,n),function(i){var a=i.relatedTarget;(!a||a!==this&&!(a.compareDocumentPosition(this)&8))&&t.call(this,i)}}function Hf(t,e,n){return function(i){var a=w;w=i;try{t.call(this,this.__data__,e,n)}finally{w=a}}}function tb(t){return t.trim().split(/^|\s+/).map(function(e){var n="",i=e.indexOf(".");return i>=0&&(n=e.slice(i+1),e=e.slice(0,i)),{type:e,name:n}})}function eb(t){return function(){var e=this.__on;if(e){for(var n=0,i=-1,a=e.length,r;n<a;++n)r=e[n],(!t.type||r.type===t.type)&&r.name===t.name?this.removeEventListener(r.type,r.listener,r.capture):e[++i]=r;++i?e.length=i:delete this.__on}}}function nb(t,e,n){var i=Xf.hasOwnProperty(t.type)?j1:Hf;return function(a,r,s){var o=this.__on,l,c=i(e,r,s);if(o){for(var h=0,f=o.length;h<f;++h)if((l=o[h]).type===t.type&&l.name===t.name){this.removeEventListener(l.type,l.listener,l.capture),this.addEventListener(l.type,l.listener=c,l.capture=n),l.value=e;return}}this.addEventListener(t.type,c,n),l={type:t.type,name:t.name,value:e,listener:c,capture:n},o?o.push(l):this.__on=[l]}}function ib(t,e,n){var i=tb(t+""),a,r=i.length,s;if(arguments.length<2){var o=this.node().__on;if(o){for(var l=0,c=o.length,h;l<c;++l)for(a=0,h=o[l];a<r;++a)if((s=i[a]).type===h.type&&s.name===h.name)return h.value}return}for(o=e?nb:eb,n==null&&(n=!1),a=0;a<r;++a)this.each(o(i[a],e,n));return this}function Oi(t,e,n,i){var a=w;t.sourceEvent=w,w=t;try{return e.apply(n,i)}finally{w=a}}function Gf(t,e,n){var i=Ol(t),a=i.CustomEvent;typeof a=="function"?a=new a(e,n):(a=i.document.createEvent("Event"),n?(a.initEvent(e,n.bubbles,n.cancelable),a.detail=n.detail):a.initEvent(e,!1,!1)),t.dispatchEvent(a)}function ab(t,e){return function(){return Gf(this,t,e)}}function rb(t,e){return function(){return Gf(this,t,e.apply(this,arguments))}}function sb(t,e){return this.each((typeof e=="function"?rb:ab)(t,e))}var Ul=[null];function It(t,e){this._groups=t,this._parents=e}function xn(){return new It([[document.documentElement]],Ul)}It.prototype=xn.prototype={constructor:It,select:Um,selectAll:Vm,filter:qm,data:jm,enter:Zm,exit:t1,join:e1,merge:n1,order:i1,sort:a1,call:s1,nodes:o1,node:l1,size:c1,empty:h1,each:u1,attr:y1,style:w1,property:S1,classed:T1,text:E1,html:z1,raise:H1,lower:B1,append:O1,insert:U1,remove:V1,clone:K1,datum:Q1,on:ib,dispatch:sb};function O(t){return typeof t=="string"?new It([[document.querySelector(t)]],[document.documentElement]):new It([[t]],Ul)}function ob(t){return O(fs(t).call(document.documentElement))}var lb=0;function Bf(){return new Oo}function Oo(){this._="@"+(++lb).toString(36)}Oo.prototype=Bf.prototype={constructor:Oo,get:function(t){for(var e=this._;!(e in t);)if(!(t=t.parentNode))return;return t[e]},set:function(t,e){return t[this._]=e},remove:function(t){return this._ in t&&delete t[this._]},toString:function(){return this._}};function Fl(){for(var t=w,e;e=t.sourceEvent;)t=e;return t}function ps(t,e){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var i=n.createSVGPoint();return i.x=e.clientX,i.y=e.clientY,i=i.matrixTransform(t.getScreenCTM().inverse()),[i.x,i.y]}var a=t.getBoundingClientRect();return[e.clientX-a.left-t.clientLeft,e.clientY-a.top-t.clientTop]}function nn(t){var e=Fl();return e.changedTouches&&(e=e.changedTouches[0]),ps(t,e)}function cb(t){return typeof t=="string"?new It([document.querySelectorAll(t)],[document.documentElement]):new It([t??[]],Ul)}function Wi(t,e,n){arguments.length<3&&(n=e,e=Fl().changedTouches);for(var i=0,a=e?e.length:0,r;i<a;++i)if((r=e[i]).identifier===n)return ps(t,r);return null}function hb(t,e){e==null&&(e=Fl().touches);for(var n=0,i=e?e.length:0,a=new Array(i);n<i;++n)a[n]=ps(t,e[n]);return a}function Us(){w.stopImmediatePropagation()}function Nn(){w.preventDefault(),w.stopImmediatePropagation()}function gs(t){var e=t.document.documentElement,n=O(t).on("dragstart.drag",Nn,!0);"onselectstart"in e?n.on("selectstart.drag",Nn,!0):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function ms(t,e){var n=t.document.documentElement,i=O(t).on("dragstart.drag",null);e&&(i.on("click.drag",Nn,!0),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in n?i.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function ka(t){return function(){return t}}function Wo(t,e,n,i,a,r,s,o,l,c){this.target=t,this.type=e,this.subject=n,this.identifier=i,this.active=a,this.x=r,this.y=s,this.dx=o,this.dy=l,this._=c}Wo.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function ub(){return!w.ctrlKey&&!w.button}function fb(){return this.parentNode}function db(t){return t??{x:w.x,y:w.y}}function pb(){return navigator.maxTouchPoints||"ontouchstart"in this}function gb(){var t=ub,e=fb,n=db,i=pb,a={},r=vn("start","drag","end"),s=0,o,l,c,h,f=0;function u(x){x.on("mousedown.drag",d).filter(i).on("touchstart.drag",m).on("touchmove.drag",b).on("touchend.drag touchcancel.drag",v).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function d(){if(!(h||!t.apply(this,arguments))){var x=y("mouse",e.apply(this,arguments),nn,this,arguments);x&&(O(w.view).on("mousemove.drag",p,!0).on("mouseup.drag",g,!0),gs(w.view),Us(),c=!1,o=w.clientX,l=w.clientY,x("start"))}}function p(){if(Nn(),!c){var x=w.clientX-o,M=w.clientY-l;c=x*x+M*M>f}a.mouse("drag")}function g(){O(w.view).on("mousemove.drag mouseup.drag",null),ms(w.view,c),Nn(),a.mouse("end")}function m(){if(t.apply(this,arguments)){var x=w.changedTouches,M=e.apply(this,arguments),S=x.length,k,I;for(k=0;k<S;++k)(I=y(x[k].identifier,M,Wi,this,arguments))&&(Us(),I("start"))}}function b(){var x=w.changedTouches,M=x.length,S,k;for(S=0;S<M;++S)(k=a[x[S].identifier])&&(Nn(),k("drag"))}function v(){var x=w.changedTouches,M=x.length,S,k;for(h&&clearTimeout(h),h=setTimeout(function(){h=null},500),S=0;S<M;++S)(k=a[x[S].identifier])&&(Us(),k("end"))}function y(x,M,S,k,I){var C=S(M,x),T,L,_,A=r.copy();if(Oi(new Wo(u,"beforestart",T,x,s,C[0],C[1],0,0,A),function(){return(w.subject=T=n.apply(k,I))==null?!1:(L=T.x-C[0]||0,_=T.y-C[1]||0,!0)}))return function P(D){var R=C,z;switch(D){case"start":a[x]=P,z=s++;break;case"end":delete a[x],--s;case"drag":C=S(M,x),z=s;break}Oi(new Wo(u,D,T,x,z,C[0]+L,C[1]+_,C[0]-R[0],C[1]-R[1],A),A.apply,A,[D,k,I])}}return u.filter=function(x){return arguments.length?(t=typeof x=="function"?x:ka(!!x),u):t},u.container=function(x){return arguments.length?(e=typeof x=="function"?x:ka(x),u):e},u.subject=function(x){return arguments.length?(n=typeof x=="function"?x:ka(x),u):n},u.touchable=function(x){return arguments.length?(i=typeof x=="function"?x:ka(!!x),u):i},u.on=function(){var x=r.on.apply(r,arguments);return x===r?u:x},u.clickDistance=function(x){return arguments.length?(f=(x=+x)*x,u):Math.sqrt(f)},u}function ti(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function ua(t,e){var n=Object.create(t.prototype);for(var i in e)n[i]=e[i];return n}function Fe(){}var ln=.7,On=1/ln,zn="\\s*([+-]?\\d+)\\s*",Ui="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",pe="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",mb=/^#([0-9a-f]{3,8})$/,bb=new RegExp("^rgb\\("+[zn,zn,zn]+"\\)$"),yb=new RegExp("^rgb\\("+[pe,pe,pe]+"\\)$"),vb=new RegExp("^rgba\\("+[zn,zn,zn,Ui]+"\\)$"),xb=new RegExp("^rgba\\("+[pe,pe,pe,Ui]+"\\)$"),_b=new RegExp("^hsl\\("+[Ui,pe,pe]+"\\)$"),wb=new RegExp("^hsla\\("+[Ui,pe,pe,Ui]+"\\)$"),oh={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};ti(Fe,Xe,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:lh,formatHex:lh,formatHsl:Mb,formatRgb:ch,toString:ch});function lh(){return this.rgb().formatHex()}function Mb(){return Of(this).formatHsl()}function ch(){return this.rgb().formatRgb()}function Xe(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=mb.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?hh(e):n===3?new vt(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?Da(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?Da(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=bb.exec(t))?new vt(e[1],e[2],e[3],1):(e=yb.exec(t))?new vt(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=vb.exec(t))?Da(e[1],e[2],e[3],e[4]):(e=xb.exec(t))?Da(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=_b.exec(t))?dh(e[1],e[2]/100,e[3]/100,1):(e=wb.exec(t))?dh(e[1],e[2]/100,e[3]/100,e[4]):oh.hasOwnProperty(t)?hh(oh[t]):t==="transparent"?new vt(NaN,NaN,NaN,0):null}function hh(t){return new vt(t>>16&255,t>>8&255,t&255,1)}function Da(t,e,n,i){return i<=0&&(t=e=n=NaN),new vt(t,e,n,i)}function Vl(t){return t instanceof Fe||(t=Xe(t)),t?(t=t.rgb(),new vt(t.r,t.g,t.b,t.opacity)):new vt}function Wn(t,e,n,i){return arguments.length===1?Vl(t):new vt(t,e,n,i??1)}function vt(t,e,n,i){this.r=+t,this.g=+e,this.b=+n,this.opacity=+i}ti(vt,Wn,ua(Fe,{brighter:function(t){return t=t==null?On:Math.pow(On,t),new vt(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=t==null?ln:Math.pow(ln,t),new vt(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:uh,formatHex:uh,formatRgb:fh,toString:fh}));function uh(){return"#"+Fs(this.r)+Fs(this.g)+Fs(this.b)}function fh(){var t=this.opacity;return t=isNaN(t)?1:Math.max(0,Math.min(1,t)),(t===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(t===1?")":", "+t+")")}function Fs(t){return t=Math.max(0,Math.min(255,Math.round(t)||0)),(t<16?"0":"")+t.toString(16)}function dh(t,e,n,i){return i<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new he(t,e,n,i)}function Of(t){if(t instanceof he)return new he(t.h,t.s,t.l,t.opacity);if(t instanceof Fe||(t=Xe(t)),!t)return new he;if(t instanceof he)return t;t=t.rgb();var e=t.r/255,n=t.g/255,i=t.b/255,a=Math.min(e,n,i),r=Math.max(e,n,i),s=NaN,o=r-a,l=(r+a)/2;return o?(e===r?s=(n-i)/o+(n<i)*6:n===r?s=(i-e)/o+2:s=(e-n)/o+4,o/=l<.5?r+a:2-r-a,s*=60):o=l>0&&l<1?0:s,new he(s,o,l,t.opacity)}function fr(t,e,n,i){return arguments.length===1?Of(t):new he(t,e,n,i??1)}function he(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}ti(he,fr,ua(Fe,{brighter:function(t){return t=t==null?On:Math.pow(On,t),new he(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=t==null?ln:Math.pow(ln,t),new he(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*e,a=2*n-i;return new vt(Vs(t>=240?t-240:t+120,a,i),Vs(t,a,i),Vs(t<120?t+240:t-120,a,i),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return t=isNaN(t)?1:Math.max(0,Math.min(1,t)),(t===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(t===1?")":", "+t+")")}}));function Vs(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}var Wf=Math.PI/180,Uf=180/Math.PI,dr=18,Ff=.96422,Vf=1,qf=.82521,Zf=4/29,Xn=6/29,Kf=3*Xn*Xn,kb=Xn*Xn*Xn;function Qf(t){if(t instanceof ne)return new ne(t.l,t.a,t.b,t.opacity);if(t instanceof de)return jf(t);t instanceof vt||(t=Vl(t));var e=Qs(t.r),n=Qs(t.g),i=Qs(t.b),a=qs((.2225045*e+.7168786*n+.0606169*i)/Vf),r,s;return e===n&&n===i?r=s=a:(r=qs((.4360747*e+.3850649*n+.1430804*i)/Ff),s=qs((.0139322*e+.0971045*n+.7141733*i)/qf)),new ne(116*a-16,500*(r-a),200*(a-s),t.opacity)}function Db(t,e){return new ne(t,0,0,e??1)}function pr(t,e,n,i){return arguments.length===1?Qf(t):new ne(t,e,n,i??1)}function ne(t,e,n,i){this.l=+t,this.a=+e,this.b=+n,this.opacity=+i}ti(ne,pr,ua(Fe,{brighter:function(t){return new ne(this.l+dr*(t??1),this.a,this.b,this.opacity)},darker:function(t){return new ne(this.l-dr*(t??1),this.a,this.b,this.opacity)},rgb:function(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,n=isNaN(this.b)?t:t-this.b/200;return e=Ff*Zs(e),t=Vf*Zs(t),n=qf*Zs(n),new vt(Ks(3.1338561*e-1.6168667*t-.4906146*n),Ks(-.9787684*e+1.9161415*t+.033454*n),Ks(.0719453*e-.2289914*t+1.4052427*n),this.opacity)}}));function qs(t){return t>kb?Math.pow(t,1/3):t/Kf+Zf}function Zs(t){return t>Xn?t*t*t:Kf*(t-Zf)}function Ks(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function Qs(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Jf(t){if(t instanceof de)return new de(t.h,t.c,t.l,t.opacity);if(t instanceof ne||(t=Qf(t)),t.a===0&&t.b===0)return new de(NaN,0<t.l&&t.l<100?0:NaN,t.l,t.opacity);var e=Math.atan2(t.b,t.a)*Uf;return new de(e<0?e+360:e,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function Sb(t,e,n,i){return arguments.length===1?Jf(t):new de(n,e,t,i??1)}function gr(t,e,n,i){return arguments.length===1?Jf(t):new de(t,e,n,i??1)}function de(t,e,n,i){this.h=+t,this.c=+e,this.l=+n,this.opacity=+i}function jf(t){if(isNaN(t.h))return new ne(t.l,0,0,t.opacity);var e=t.h*Wf;return new ne(t.l,Math.cos(e)*t.c,Math.sin(e)*t.c,t.opacity)}ti(de,gr,ua(Fe,{brighter:function(t){return new de(this.h,this.c,this.l+dr*(t??1),this.opacity)},darker:function(t){return new de(this.h,this.c,this.l-dr*(t??1),this.opacity)},rgb:function(){return jf(this).rgb()}}));var td=-.14861,ql=1.78277,Zl=-.29227,bs=-.90649,Fi=1.97294,ph=Fi*bs,gh=Fi*ql,mh=ql*Zl-bs*td;function Ab(t){if(t instanceof an)return new an(t.h,t.s,t.l,t.opacity);t instanceof vt||(t=Vl(t));var e=t.r/255,n=t.g/255,i=t.b/255,a=(mh*i+ph*e-gh*n)/(mh+ph-gh),r=i-a,s=(Fi*(n-a)-Zl*r)/bs,o=Math.sqrt(s*s+r*r)/(Fi*a*(1-a)),l=o?Math.atan2(s,r)*Uf-120:NaN;return new an(l<0?l+360:l,o,a,t.opacity)}function ie(t,e,n,i){return arguments.length===1?Ab(t):new an(t,e,n,i??1)}function an(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}ti(an,ie,ua(Fe,{brighter:function(t){return t=t==null?On:Math.pow(On,t),new an(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=t==null?ln:Math.pow(ln,t),new an(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=isNaN(this.h)?0:(this.h+120)*Wf,e=+this.l,n=isNaN(this.s)?0:this.s*e*(1-e),i=Math.cos(t),a=Math.sin(t);return new vt(255*(e+n*(td*i+ql*a)),255*(e+n*(Zl*i+bs*a)),255*(e+n*(Fi*i)),this.opacity)}}));function ed(t,e,n,i,a){var r=t*t,s=r*t;return((1-3*t+3*r-s)*e+(4-6*r+3*s)*n+(1+3*t+3*r-3*s)*i+s*a)/6}function nd(t){var e=t.length-1;return function(n){var i=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),a=t[i],r=t[i+1],s=i>0?t[i-1]:2*a-r,o=i<e-1?t[i+2]:2*r-a;return ed((n-i/e)*e,s,a,r,o)}}function id(t){var e=t.length;return function(n){var i=Math.floor(((n%=1)<0?++n:n)*e),a=t[(i+e-1)%e],r=t[i%e],s=t[(i+1)%e],o=t[(i+2)%e];return ed((n-i/e)*e,a,r,s,o)}}function ys(t){return function(){return t}}function ad(t,e){return function(n){return t+n*e}}function Lb(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(i){return Math.pow(t+i*e,n)}}function vs(t,e){var n=e-t;return n?ad(t,n>180||n<-180?n-360*Math.round(n/360):n):ys(isNaN(t)?e:t)}function Cb(t){return(t=+t)==1?mt:function(e,n){return n-e?Lb(e,n,t):ys(isNaN(e)?n:e)}}function mt(t,e){var n=e-t;return n?ad(t,n):ys(isNaN(t)?e:t)}const Vi=function t(e){var n=Cb(e);function i(a,r){var s=n((a=Wn(a)).r,(r=Wn(r)).r),o=n(a.g,r.g),l=n(a.b,r.b),c=mt(a.opacity,r.opacity);return function(h){return a.r=s(h),a.g=o(h),a.b=l(h),a.opacity=c(h),a+""}}return i.gamma=t,i}(1);function rd(t){return function(e){var n=e.length,i=new Array(n),a=new Array(n),r=new Array(n),s,o;for(s=0;s<n;++s)o=Wn(e[s]),i[s]=o.r||0,a[s]=o.g||0,r[s]=o.b||0;return i=t(i),a=t(a),r=t(r),o.opacity=1,function(l){return o.r=i(l),o.g=a(l),o.b=r(l),o+""}}}var sd=rd(nd),Tb=rd(id);function Kl(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,i=e.slice(),a;return function(r){for(a=0;a<n;++a)i[a]=t[a]*(1-r)+e[a]*r;return i}}function od(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Ib(t,e){return(od(e)?Kl:ld)(t,e)}function ld(t,e){var n=e?e.length:0,i=t?Math.min(n,t.length):0,a=new Array(i),r=new Array(n),s;for(s=0;s<i;++s)a[s]=fa(t[s],e[s]);for(;s<n;++s)r[s]=e[s];return function(o){for(s=0;s<i;++s)r[s]=a[s](o);return r}}function cd(t,e){var n=new Date;return t=+t,e=+e,function(i){return n.setTime(t*(1-i)+e*i),n}}function Vt(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function hd(t,e){var n={},i={},a;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(a in e)a in t?n[a]=fa(t[a],e[a]):i[a]=e[a];return function(r){for(a in n)i[a]=n[a](r);return i}}var Uo=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Js=new RegExp(Uo.source,"g");function Rb(t){return function(){return t}}function Pb(t){return function(e){return t(e)+""}}function Ql(t,e){var n=Uo.lastIndex=Js.lastIndex=0,i,a,r,s=-1,o=[],l=[];for(t=t+"",e=e+"";(i=Uo.exec(t))&&(a=Js.exec(e));)(r=a.index)>n&&(r=e.slice(n,r),o[s]?o[s]+=r:o[++s]=r),(i=i[0])===(a=a[0])?o[s]?o[s]+=a:o[++s]=a:(o[++s]=null,l.push({i:s,x:Vt(i,a)})),n=Js.lastIndex;return n<e.length&&(r=e.slice(n),o[s]?o[s]+=r:o[++s]=r),o.length<2?l[0]?Pb(l[0].x):Rb(e):(e=l.length,function(c){for(var h=0,f;h<e;++h)o[(f=l[h]).i]=f.x(c);return o.join("")})}function fa(t,e){var n=typeof e,i;return e==null||n==="boolean"?ys(e):(n==="number"?Vt:n==="string"?(i=Xe(e))?(e=i,Vi):Ql:e instanceof Xe?Vi:e instanceof Date?cd:od(e)?Kl:Array.isArray(e)?ld:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?hd:Vt)(t,e)}function Eb(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}}function $b(t,e){var n=vs(+t,+e);return function(i){var a=n(i);return a-360*Math.floor(a/360)}}function ud(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}var bh=180/Math.PI,Fo={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function fd(t,e,n,i,a,r){var s,o,l;return(s=Math.sqrt(t*t+e*e))&&(t/=s,e/=s),(l=t*n+e*i)&&(n-=t*l,i-=e*l),(o=Math.sqrt(n*n+i*i))&&(n/=o,i/=o,l/=o),t*i<e*n&&(t=-t,e=-e,l=-l,s=-s),{translateX:a,translateY:r,rotate:Math.atan2(e,t)*bh,skewX:Math.atan(l)*bh,scaleX:s,scaleY:o}}var oi,js,yh,Sa;function Yb(t){return t==="none"?Fo:(oi||(oi=document.createElement("DIV"),js=document.documentElement,yh=document.defaultView),oi.style.transform=t,t=yh.getComputedStyle(js.appendChild(oi),null).getPropertyValue("transform"),js.removeChild(oi),t=t.slice(7,-1).split(","),fd(+t[0],+t[1],+t[2],+t[3],+t[4],+t[5]))}function Nb(t){return t==null||(Sa||(Sa=document.createElementNS("http://www.w3.org/2000/svg","g")),Sa.setAttribute("transform",t),!(t=Sa.transform.baseVal.consolidate()))?Fo:(t=t.matrix,fd(t.a,t.b,t.c,t.d,t.e,t.f))}function dd(t,e,n,i){function a(c){return c.length?c.pop()+" ":""}function r(c,h,f,u,d,p){if(c!==f||h!==u){var g=d.push("translate(",null,e,null,n);p.push({i:g-4,x:Vt(c,f)},{i:g-2,x:Vt(h,u)})}else(f||u)&&d.push("translate("+f+e+u+n)}function s(c,h,f,u){c!==h?(c-h>180?h+=360:h-c>180&&(c+=360),u.push({i:f.push(a(f)+"rotate(",null,i)-2,x:Vt(c,h)})):h&&f.push(a(f)+"rotate("+h+i)}function o(c,h,f,u){c!==h?u.push({i:f.push(a(f)+"skewX(",null,i)-2,x:Vt(c,h)}):h&&f.push(a(f)+"skewX("+h+i)}function l(c,h,f,u,d,p){if(c!==f||h!==u){var g=d.push(a(d)+"scale(",null,",",null,")");p.push({i:g-4,x:Vt(c,f)},{i:g-2,x:Vt(h,u)})}else(f!==1||u!==1)&&d.push(a(d)+"scale("+f+","+u+")")}return function(c,h){var f=[],u=[];return c=t(c),h=t(h),r(c.translateX,c.translateY,h.translateX,h.translateY,f,u),s(c.rotate,h.rotate,f,u),o(c.skewX,h.skewX,f,u),l(c.scaleX,c.scaleY,h.scaleX,h.scaleY,f,u),c=h=null,function(d){for(var p=-1,g=u.length,m;++p<g;)f[(m=u[p]).i]=m.x(d);return f.join("")}}}var pd=dd(Yb,"px, ","px)","deg)"),gd=dd(Nb,", ",")",")"),li=Math.SQRT2,to=2,vh=4,zb=1e-12;function xh(t){return((t=Math.exp(t))+1/t)/2}function Xb(t){return((t=Math.exp(t))-1/t)/2}function Hb(t){return((t=Math.exp(2*t))-1)/(t+1)}function md(t,e){var n=t[0],i=t[1],a=t[2],r=e[0],s=e[1],o=e[2],l=r-n,c=s-i,h=l*l+c*c,f,u;if(h<zb)u=Math.log(o/a)/li,f=function(v){return[n+v*l,i+v*c,a*Math.exp(li*v*u)]};else{var d=Math.sqrt(h),p=(o*o-a*a+vh*h)/(2*a*to*d),g=(o*o-a*a-vh*h)/(2*o*to*d),m=Math.log(Math.sqrt(p*p+1)-p),b=Math.log(Math.sqrt(g*g+1)-g);u=(b-m)/li,f=function(v){var y=v*u,x=xh(m),M=a/(to*d)*(x*Hb(li*y+m)-Xb(m));return[n+M*l,i+M*c,a*x/xh(li*y+m)]}}return f.duration=u*1e3,f}function bd(t){return function(e,n){var i=t((e=fr(e)).h,(n=fr(n)).h),a=mt(e.s,n.s),r=mt(e.l,n.l),s=mt(e.opacity,n.opacity);return function(o){return e.h=i(o),e.s=a(o),e.l=r(o),e.opacity=s(o),e+""}}}const Gb=bd(vs);var Bb=bd(mt);function Ob(t,e){var n=mt((t=pr(t)).l,(e=pr(e)).l),i=mt(t.a,e.a),a=mt(t.b,e.b),r=mt(t.opacity,e.opacity);return function(s){return t.l=n(s),t.a=i(s),t.b=a(s),t.opacity=r(s),t+""}}function yd(t){return function(e,n){var i=t((e=gr(e)).h,(n=gr(n)).h),a=mt(e.c,n.c),r=mt(e.l,n.l),s=mt(e.opacity,n.opacity);return function(o){return e.h=i(o),e.c=a(o),e.l=r(o),e.opacity=s(o),e+""}}}const Wb=yd(vs);var Ub=yd(mt);function vd(t){return function e(n){n=+n;function i(a,r){var s=t((a=ie(a)).h,(r=ie(r)).h),o=mt(a.s,r.s),l=mt(a.l,r.l),c=mt(a.opacity,r.opacity);return function(h){return a.h=s(h),a.s=o(h),a.l=l(Math.pow(h,n)),a.opacity=c(h),a+""}}return i.gamma=e,i}(1)}const Fb=vd(vs);var xs=vd(mt);function Vb(t,e){for(var n=0,i=e.length-1,a=e[0],r=new Array(i<0?0:i);n<i;)r[n]=t(a,a=e[++n]);return function(s){var o=Math.max(0,Math.min(i-1,Math.floor(s*=i)));return r[o](s-o)}}function qb(t,e){for(var n=new Array(e),i=0;i<e;++i)n[i]=t(i/(e-1));return n}var Un=0,_i=0,ci=0,xd=1e3,mr,wi,br=0,cn=0,_s=0,qi=typeof performance=="object"&&performance.now?performance:Date,_d=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function ei(){return cn||(_d(Zb),cn=qi.now()+_s)}function Zb(){cn=0}function Zi(){this._call=this._time=this._next=null}Zi.prototype=ws.prototype={constructor:Zi,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?ei():+n)+(e==null?0:+e),!this._next&&wi!==this&&(wi?wi._next=this:mr=this,wi=this),this._call=t,this._time=n,Vo()},stop:function(){this._call&&(this._call=null,this._time=1/0,Vo())}};function ws(t,e,n){var i=new Zi;return i.restart(t,e,n),i}function wd(){ei(),++Un;for(var t=mr,e;t;)(e=cn-t._time)>=0&&t._call.call(null,e),t=t._next;--Un}function _h(){cn=(br=qi.now())+_s,Un=_i=0;try{wd()}finally{Un=0,Qb(),cn=0}}function Kb(){var t=qi.now(),e=t-br;e>xd&&(_s-=e,br=t)}function Qb(){for(var t,e=mr,n,i=1/0;e;)e._call?(i>e._time&&(i=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:mr=n);wi=t,Vo(i)}function Vo(t){if(!Un){_i&&(_i=clearTimeout(_i));var e=t-cn;e>24?(t<1/0&&(_i=setTimeout(_h,t-qi.now()-_s)),ci&&(ci=clearInterval(ci))):(ci||(br=qi.now(),ci=setInterval(Kb,xd)),Un=1,_d(_h))}}function qo(t,e,n){var i=new Zi;return e=e==null?0:+e,i.restart(function(a){i.stop(),t(a+e)},e,n),i}function Jb(t,e,n){var i=new Zi,a=e;return e==null?(i.restart(t,e,n),i):(e=+e,n=n==null?ei():+n,i.restart(function r(s){s+=a,i.restart(r,a+=e,n),t(s)},e,n),i)}var jb=vn("start","end","cancel","interrupt"),ty=[],Md=0,Zo=1,Ko=2,ir=3,wh=4,Qo=5,ar=6;function Ms(t,e,n,i,a,r){var s=t.__transition;if(!s)t.__transition={};else if(n in s)return;ey(t,n,{name:e,index:i,group:a,on:jb,tween:ty,time:r.time,delay:r.delay,duration:r.duration,ease:r.ease,timer:null,state:Md})}function Jl(t,e){var n=re(t,e);if(n.state>Md)throw new Error("too late; already scheduled");return n}function De(t,e){var n=re(t,e);if(n.state>ir)throw new Error("too late; already running");return n}function re(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function ey(t,e,n){var i=t.__transition,a;i[e]=n,n.timer=ws(r,0,n.time);function r(c){n.state=Zo,n.timer.restart(s,n.delay,n.time),n.delay<=c&&s(c-n.delay)}function s(c){var h,f,u,d;if(n.state!==Zo)return l();for(h in i)if(d=i[h],d.name===n.name){if(d.state===ir)return qo(s);d.state===wh?(d.state=ar,d.timer.stop(),d.on.call("interrupt",t,t.__data__,d.index,d.group),delete i[h]):+h<e&&(d.state=ar,d.timer.stop(),d.on.call("cancel",t,t.__data__,d.index,d.group),delete i[h])}if(qo(function(){n.state===ir&&(n.state=wh,n.timer.restart(o,n.delay,n.time),o(c))}),n.state=Ko,n.on.call("start",t,t.__data__,n.index,n.group),n.state===Ko){for(n.state=ir,a=new Array(u=n.tween.length),h=0,f=-1;h<u;++h)(d=n.tween[h].value.call(t,t.__data__,n.index,n.group))&&(a[++f]=d);a.length=f+1}}function o(c){for(var h=c<n.duration?n.ease.call(null,c/n.duration):(n.timer.restart(l),n.state=Qo,1),f=-1,u=a.length;++f<u;)a[f].call(t,h);n.state===Qo&&(n.on.call("end",t,t.__data__,n.index,n.group),l())}function l(){n.state=ar,n.timer.stop(),delete i[e];for(var c in i)return;delete t.__transition}}function rn(t,e){var n=t.__transition,i,a,r=!0,s;if(n){e=e==null?null:e+"";for(s in n){if((i=n[s]).name!==e){r=!1;continue}a=i.state>Ko&&i.state<Qo,i.state=ar,i.timer.stop(),i.on.call(a?"interrupt":"cancel",t,t.__data__,i.index,i.group),delete n[s]}r&&delete t.__transition}}function ny(t){return this.each(function(){rn(this,t)})}function iy(t,e){var n,i;return function(){var a=De(this,t),r=a.tween;if(r!==n){i=n=r;for(var s=0,o=i.length;s<o;++s)if(i[s].name===e){i=i.slice(),i.splice(s,1);break}}a.tween=i}}function ay(t,e,n){var i,a;if(typeof n!="function")throw new Error;return function(){var r=De(this,t),s=r.tween;if(s!==i){a=(i=s).slice();for(var o={name:e,value:n},l=0,c=a.length;l<c;++l)if(a[l].name===e){a[l]=o;break}l===c&&a.push(o)}r.tween=a}}function ry(t,e){var n=this._id;if(t+="",arguments.length<2){for(var i=re(this.node(),n).tween,a=0,r=i.length,s;a<r;++a)if((s=i[a]).name===t)return s.value;return null}return this.each((e==null?iy:ay)(n,t,e))}function jl(t,e,n){var i=t._id;return t.each(function(){var a=De(this,i);(a.value||(a.value={}))[e]=n.apply(this,arguments)}),function(a){return re(a,i).value[e]}}function kd(t,e){var n;return(typeof e=="number"?Vt:e instanceof Xe?Vi:(n=Xe(e))?(e=n,Vi):Ql)(t,e)}function sy(t){return function(){this.removeAttribute(t)}}function oy(t){return function(){this.removeAttributeNS(t.space,t.local)}}function ly(t,e,n){var i,a=n+"",r;return function(){var s=this.getAttribute(t);return s===a?null:s===i?r:r=e(i=s,n)}}function cy(t,e,n){var i,a=n+"",r;return function(){var s=this.getAttributeNS(t.space,t.local);return s===a?null:s===i?r:r=e(i=s,n)}}function hy(t,e,n){var i,a,r;return function(){var s,o=n(this),l;return o==null?void this.removeAttribute(t):(s=this.getAttribute(t),l=o+"",s===l?null:s===i&&l===a?r:(a=l,r=e(i=s,o)))}}function uy(t,e,n){var i,a,r;return function(){var s,o=n(this),l;return o==null?void this.removeAttributeNS(t.space,t.local):(s=this.getAttributeNS(t.space,t.local),l=o+"",s===l?null:s===i&&l===a?r:(a=l,r=e(i=s,o)))}}function fy(t,e){var n=ha(t),i=n==="transform"?gd:kd;return this.attrTween(t,typeof e=="function"?(n.local?uy:hy)(n,i,jl(this,"attr."+t,e)):e==null?(n.local?oy:sy)(n):(n.local?cy:ly)(n,i,e))}function dy(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function py(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function gy(t,e){var n,i;function a(){var r=e.apply(this,arguments);return r!==i&&(n=(i=r)&&py(t,r)),n}return a._value=e,a}function my(t,e){var n,i;function a(){var r=e.apply(this,arguments);return r!==i&&(n=(i=r)&&dy(t,r)),n}return a._value=e,a}function by(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var i=ha(t);return this.tween(n,(i.local?gy:my)(i,e))}function yy(t,e){return function(){Jl(this,t).delay=+e.apply(this,arguments)}}function vy(t,e){return e=+e,function(){Jl(this,t).delay=e}}function xy(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?yy:vy)(e,t)):re(this.node(),e).delay}function _y(t,e){return function(){De(this,t).duration=+e.apply(this,arguments)}}function wy(t,e){return e=+e,function(){De(this,t).duration=e}}function My(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?_y:wy)(e,t)):re(this.node(),e).duration}function ky(t,e){if(typeof e!="function")throw new Error;return function(){De(this,t).ease=e}}function Dy(t){var e=this._id;return arguments.length?this.each(ky(e,t)):re(this.node(),e).ease}function Sy(t){typeof t!="function"&&(t=Bl(t));for(var e=this._groups,n=e.length,i=new Array(n),a=0;a<n;++a)for(var r=e[a],s=r.length,o=i[a]=[],l,c=0;c<s;++c)(l=r[c])&&t.call(l,l.__data__,c,r)&&o.push(l);return new ge(i,this._parents,this._name,this._id)}function Ay(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,i=e.length,a=n.length,r=Math.min(i,a),s=new Array(i),o=0;o<r;++o)for(var l=e[o],c=n[o],h=l.length,f=s[o]=new Array(h),u,d=0;d<h;++d)(u=l[d]||c[d])&&(f[d]=u);for(;o<i;++o)s[o]=e[o];return new ge(s,this._parents,this._name,this._id)}function Ly(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function Cy(t,e,n){var i,a,r=Ly(e)?Jl:De;return function(){var s=r(this,t),o=s.on;o!==i&&(a=(i=o).copy()).on(e,n),s.on=a}}function Ty(t,e){var n=this._id;return arguments.length<2?re(this.node(),n).on.on(t):this.each(Cy(n,t,e))}function Iy(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function Ry(){return this.on("end.remove",Iy(this._id))}function Py(t){var e=this._name,n=this._id;typeof t!="function"&&(t=ds(t));for(var i=this._groups,a=i.length,r=new Array(a),s=0;s<a;++s)for(var o=i[s],l=o.length,c=r[s]=new Array(l),h,f,u=0;u<l;++u)(h=o[u])&&(f=t.call(h,h.__data__,u,o))&&("__data__"in h&&(f.__data__=h.__data__),c[u]=f,Ms(c[u],e,n,u,c,re(h,n)));return new ge(r,this._parents,e,n)}function Ey(t){var e=this._name,n=this._id;typeof t!="function"&&(t=Gl(t));for(var i=this._groups,a=i.length,r=[],s=[],o=0;o<a;++o)for(var l=i[o],c=l.length,h,f=0;f<c;++f)if(h=l[f]){for(var u=t.call(h,h.__data__,f,l),d,p=re(h,n),g=0,m=u.length;g<m;++g)(d=u[g])&&Ms(d,e,n,g,u,p);r.push(u),s.push(h)}return new ge(r,s,e,n)}var $y=xn.prototype.constructor;function Yy(){return new $y(this._groups,this._parents)}function Ny(t,e){var n,i,a;return function(){var r=on(this,t),s=(this.style.removeProperty(t),on(this,t));return r===s?null:r===n&&s===i?a:a=e(n=r,i=s)}}function Dd(t){return function(){this.style.removeProperty(t)}}function zy(t,e,n){var i,a=n+"",r;return function(){var s=on(this,t);return s===a?null:s===i?r:r=e(i=s,n)}}function Xy(t,e,n){var i,a,r;return function(){var s=on(this,t),o=n(this),l=o+"";return o==null&&(l=o=(this.style.removeProperty(t),on(this,t))),s===l?null:s===i&&l===a?r:(a=l,r=e(i=s,o))}}function Hy(t,e){var n,i,a,r="style."+e,s="end."+r,o;return function(){var l=De(this,t),c=l.on,h=l.value[r]==null?o||(o=Dd(e)):void 0;(c!==n||a!==h)&&(i=(n=c).copy()).on(s,a=h),l.on=i}}function Gy(t,e,n){var i=(t+="")=="transform"?pd:kd;return e==null?this.styleTween(t,Ny(t,i)).on("end.style."+t,Dd(t)):typeof e=="function"?this.styleTween(t,Xy(t,i,jl(this,"style."+t,e))).each(Hy(this._id,t)):this.styleTween(t,zy(t,i,e),n).on("end.style."+t,null)}function By(t,e,n){return function(i){this.style.setProperty(t,e.call(this,i),n)}}function Oy(t,e,n){var i,a;function r(){var s=e.apply(this,arguments);return s!==a&&(i=(a=s)&&By(t,s,n)),i}return r._value=e,r}function Wy(t,e,n){var i="style."+(t+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(e==null)return this.tween(i,null);if(typeof e!="function")throw new Error;return this.tween(i,Oy(t,e,n??""))}function Uy(t){return function(){this.textContent=t}}function Fy(t){return function(){var e=t(this);this.textContent=e??""}}function Vy(t){return this.tween("text",typeof t=="function"?Fy(jl(this,"text",t)):Uy(t==null?"":t+""))}function qy(t){return function(e){this.textContent=t.call(this,e)}}function Zy(t){var e,n;function i(){var a=t.apply(this,arguments);return a!==n&&(e=(n=a)&&qy(a)),e}return i._value=t,i}function Ky(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,Zy(t))}function Qy(){for(var t=this._name,e=this._id,n=Ad(),i=this._groups,a=i.length,r=0;r<a;++r)for(var s=i[r],o=s.length,l,c=0;c<o;++c)if(l=s[c]){var h=re(l,e);Ms(l,t,n,c,s,{time:h.time+h.delay+h.duration,delay:0,duration:h.duration,ease:h.ease})}return new ge(i,this._parents,t,n)}function Jy(){var t,e,n=this,i=n._id,a=n.size();return new Promise(function(r,s){var o={value:s},l={value:function(){--a===0&&r()}};n.each(function(){var c=De(this,i),h=c.on;h!==t&&(e=(t=h).copy(),e._.cancel.push(o),e._.interrupt.push(o),e._.end.push(l)),c.on=e})})}var jy=0;function ge(t,e,n,i){this._groups=t,this._parents=e,this._name=n,this._id=i}function Sd(t){return xn().transition(t)}function Ad(){return++jy}var An=xn.prototype;ge.prototype=Sd.prototype={constructor:ge,select:Py,selectAll:Ey,filter:Sy,merge:Ay,selection:Yy,transition:Qy,call:An.call,nodes:An.nodes,node:An.node,size:An.size,empty:An.empty,each:An.each,on:Ty,attr:fy,attrTween:by,style:Gy,styleTween:Wy,text:Vy,textTween:Ky,remove:Ry,tween:ry,delay:xy,duration:My,ease:Dy,end:Jy};function tv(t){return+t}function ev(t){return t*t}function nv(t){return t*(2-t)}function Mh(t){return((t*=2)<=1?t*t:--t*(2-t)+1)/2}function iv(t){return t*t*t}function av(t){return--t*t*t+1}function Jo(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var tc=3,rv=function t(e){e=+e;function n(i){return Math.pow(i,e)}return n.exponent=t,n}(tc),sv=function t(e){e=+e;function n(i){return 1-Math.pow(1-i,e)}return n.exponent=t,n}(tc),kh=function t(e){e=+e;function n(i){return((i*=2)<=1?Math.pow(i,e):2-Math.pow(2-i,e))/2}return n.exponent=t,n}(tc),Ld=Math.PI,Cd=Ld/2;function ov(t){return+t==1?1:1-Math.cos(t*Cd)}function lv(t){return Math.sin(t*Cd)}function Dh(t){return(1-Math.cos(Ld*t))/2}function He(t){return(Math.pow(2,-10*t)-.0009765625)*1.0009775171065494}function cv(t){return He(1-+t)}function hv(t){return 1-He(t)}function Sh(t){return((t*=2)<=1?He(1-t):2-He(t-1))/2}function uv(t){return 1-Math.sqrt(1-t*t)}function fv(t){return Math.sqrt(1- --t*t)}function Ah(t){return((t*=2)<=1?1-Math.sqrt(1-t*t):Math.sqrt(1-(t-=2)*t)+1)/2}var jo=4/11,dv=6/11,pv=8/11,gv=3/4,mv=9/11,bv=10/11,yv=15/16,vv=21/22,xv=63/64,Aa=1/jo/jo;function _v(t){return 1-Ki(1-t)}function Ki(t){return(t=+t)<jo?Aa*t*t:t<pv?Aa*(t-=dv)*t+gv:t<bv?Aa*(t-=mv)*t+yv:Aa*(t-=vv)*t+xv}function wv(t){return((t*=2)<=1?1-Ki(1-t):Ki(t-1)+1)/2}var ec=1.70158,Mv=function t(e){e=+e;function n(i){return(i=+i)*i*(e*(i-1)+i)}return n.overshoot=t,n}(ec),kv=function t(e){e=+e;function n(i){return--i*i*((i+1)*e+i)+1}return n.overshoot=t,n}(ec),Lh=function t(e){e=+e;function n(i){return((i*=2)<1?i*i*((e+1)*i-e):(i-=2)*i*((e+1)*i+e)+2)/2}return n.overshoot=t,n}(ec),Fn=2*Math.PI,nc=1,ic=.3,Dv=function t(e,n){var i=Math.asin(1/(e=Math.max(1,e)))*(n/=Fn);function a(r){return e*He(- --r)*Math.sin((i-r)/n)}return a.amplitude=function(r){return t(r,n*Fn)},a.period=function(r){return t(e,r)},a}(nc,ic),hn=function t(e,n){var i=Math.asin(1/(e=Math.max(1,e)))*(n/=Fn);function a(r){return 1-e*He(r=+r)*Math.sin((r+i)/n)}return a.amplitude=function(r){return t(r,n*Fn)},a.period=function(r){return t(e,r)},a}(nc,ic),Sv=function t(e,n){var i=Math.asin(1/(e=Math.max(1,e)))*(n/=Fn);function a(r){return((r=r*2-1)<0?e*He(-r)*Math.sin((i-r)/n):2-e*He(r)*Math.sin((i+r)/n))/2}return a.amplitude=function(r){return t(r,n*Fn)},a.period=function(r){return t(e,r)},a}(nc,ic),tl={time:null,delay:0,duration:250,ease:Jo};function Av(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))return tl.time=ei(),tl;return n}function Lv(t){var e,n;t instanceof ge?(e=t._id,t=t._name):(e=Ad(),(n=tl).time=ei(),t=t==null?null:t+"");for(var i=this._groups,a=i.length,r=0;r<a;++r)for(var s=i[r],o=s.length,l,c=0;c<o;++c)(l=s[c])&&Ms(l,t,e,c,s,n||Av(l,e));return new ge(i,this._parents,t,e)}xn.prototype.interrupt=ny;xn.prototype.transition=Lv;var Cv=[null];function Tv(t,e){var n=t.__transition,i,a;if(n){e=e==null?null:e+"";for(a in n)if((i=n[a]).state>Zo&&i.name===e)return new ge([[t]],Cv,e,+a)}return null}function eo(t){return function(){return t}}function Iv(t,e,n){this.target=t,this.type=e,this.selection=n}function Ch(){w.stopImmediatePropagation()}function no(){w.preventDefault(),w.stopImmediatePropagation()}var Th={name:"drag"},io={name:"space"},Ln={name:"handle"},Cn={name:"center"};function Ih(t){return[+t[0],+t[1]]}function el(t){return[Ih(t[0]),Ih(t[1])]}function Rv(t){return function(e){return Wi(e,w.touches,t)}}var rr={name:"x",handles:["w","e"].map(Qi),input:function(t,e){return t==null?null:[[+t[0],e[0][1]],[+t[1],e[1][1]]]},output:function(t){return t&&[t[0][0],t[1][0]]}},sr={name:"y",handles:["n","s"].map(Qi),input:function(t,e){return t==null?null:[[e[0][0],+t[0]],[e[1][0],+t[1]]]},output:function(t){return t&&[t[0][1],t[1][1]]}},Pv={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(Qi),input:function(t){return t==null?null:el(t)},output:function(t){return t}},ve={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Rh={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},Ph={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},Ev={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},$v={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function Qi(t){return{type:t}}function Yv(){return!w.ctrlKey&&!w.button}function Nv(){var t=this.ownerSVGElement||this;return t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]}function zv(){return navigator.maxTouchPoints||"ontouchstart"in this}function ao(t){for(;!t.__brush;)if(!(t=t.parentNode))return;return t.__brush}function Xv(t){return t[0][0]===t[1][0]||t[0][1]===t[1][1]}function Hv(t){var e=t.__brush;return e?e.dim.output(e.selection):null}function Gv(){return ac(rr)}function Bv(){return ac(sr)}function Ov(){return ac(Pv)}function ac(t){var e=Nv,n=Yv,i=zv,a=!0,r=vn("start","brush","end"),s=6,o;function l(m){var b=m.property("__brush",g).selectAll(".overlay").data([Qi("overlay")]);b.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",ve.overlay).merge(b).each(function(){var y=ao(this).extent;O(this).attr("x",y[0][0]).attr("y",y[0][1]).attr("width",y[1][0]-y[0][0]).attr("height",y[1][1]-y[0][1])}),m.selectAll(".selection").data([Qi("selection")]).enter().append("rect").attr("class","selection").attr("cursor",ve.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var v=m.selectAll(".handle").data(t.handles,function(y){return y.type});v.exit().remove(),v.enter().append("rect").attr("class",function(y){return"handle handle--"+y.type}).attr("cursor",function(y){return ve[y.type]}),m.each(c).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",u).filter(i).on("touchstart.brush",u).on("touchmove.brush",d).on("touchend.brush touchcancel.brush",p).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}l.move=function(m,b){m.selection?m.on("start.brush",function(){h(this,arguments).beforestart().start()}).on("interrupt.brush end.brush",function(){h(this,arguments).end()}).tween("brush",function(){var v=this,y=v.__brush,x=h(v,arguments),M=y.selection,S=t.input(typeof b=="function"?b.apply(this,arguments):b,y.extent),k=fa(M,S);function I(C){y.selection=C===1&&S===null?null:k(C),c.call(v),x.brush()}return M!==null&&S!==null?I:I(1)}):m.each(function(){var v=this,y=arguments,x=v.__brush,M=t.input(typeof b=="function"?b.apply(v,y):b,x.extent),S=h(v,y).beforestart();rn(v),x.selection=M===null?null:M,c.call(v),S.start().brush().end()})},l.clear=function(m){l.move(m,null)};function c(){var m=O(this),b=ao(this).selection;b?(m.selectAll(".selection").style("display",null).attr("x",b[0][0]).attr("y",b[0][1]).attr("width",b[1][0]-b[0][0]).attr("height",b[1][1]-b[0][1]),m.selectAll(".handle").style("display",null).attr("x",function(v){return v.type[v.type.length-1]==="e"?b[1][0]-s/2:b[0][0]-s/2}).attr("y",function(v){return v.type[0]==="s"?b[1][1]-s/2:b[0][1]-s/2}).attr("width",function(v){return v.type==="n"||v.type==="s"?b[1][0]-b[0][0]+s:s}).attr("height",function(v){return v.type==="e"||v.type==="w"?b[1][1]-b[0][1]+s:s})):m.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function h(m,b,v){var y=m.__brush.emitter;return y&&(!v||!y.clean)?y:new f(m,b,v)}function f(m,b,v){this.that=m,this.args=b,this.state=m.__brush,this.active=0,this.clean=v}f.prototype={beforestart:function(){return++this.active===1&&(this.state.emitter=this,this.starting=!0),this},start:function(){return this.starting?(this.starting=!1,this.emit("start")):this.emit("brush"),this},brush:function(){return this.emit("brush"),this},end:function(){return--this.active===0&&(delete this.state.emitter,this.emit("end")),this},emit:function(m){Oi(new Iv(l,m,t.output(this.state.selection)),r.apply,r,[m,this.that,this.args])}};function u(){if(o&&!w.touches||!n.apply(this,arguments))return;var m=this,b=w.target.__data__.type,v=(a&&w.metaKey?b="overlay":b)==="selection"?Th:a&&w.altKey?Cn:Ln,y=t===sr?null:Ev[b],x=t===rr?null:$v[b],M=ao(m),S=M.extent,k=M.selection,I=S[0][0],C,T,L=S[0][1],_,A,P=S[1][0],D,R,z=S[1][1],Y,X,W=0,U=0,rt,et=y&&x&&a&&w.shiftKey,J,ht,Ot=w.touches?Rv(w.changedTouches[0].identifier):nn,Qt=Ot(m),Jt=Qt,$=h(m,arguments,!0).beforestart();b==="overlay"?(k&&(rt=!0),M.selection=k=[[C=t===sr?I:Qt[0],_=t===rr?L:Qt[1]],[D=t===sr?P:C,Y=t===rr?z:_]]):(C=k[0][0],_=k[0][1],D=k[1][0],Y=k[1][1]),T=C,A=_,R=D,X=Y;var F=O(m).attr("pointer-events","none"),Z=F.selectAll(".overlay").attr("cursor",ve[b]);if(w.touches)$.moved=yt,$.ended=_t;else{var E=O(w.view).on("mousemove.brush",yt,!0).on("mouseup.brush",_t,!0);a&&E.on("keydown.brush",Dt,!0).on("keyup.brush",ye,!0),gs(w.view)}Ch(),rn(m),c.call(m),$.start();function yt(){var St=Ot(m);et&&!J&&!ht&&(Math.abs(St[0]-Jt[0])>Math.abs(St[1]-Jt[1])?ht=!0:J=!0),Jt=St,rt=!0,no(),j()}function j(){var St;switch(W=Jt[0]-Qt[0],U=Jt[1]-Qt[1],v){case io:case Th:{y&&(W=Math.max(I-C,Math.min(P-D,W)),T=C+W,R=D+W),x&&(U=Math.max(L-_,Math.min(z-Y,U)),A=_+U,X=Y+U);break}case Ln:{y<0?(W=Math.max(I-C,Math.min(P-C,W)),T=C+W,R=D):y>0&&(W=Math.max(I-D,Math.min(P-D,W)),T=C,R=D+W),x<0?(U=Math.max(L-_,Math.min(z-_,U)),A=_+U,X=Y):x>0&&(U=Math.max(L-Y,Math.min(z-Y,U)),A=_,X=Y+U);break}case Cn:{y&&(T=Math.max(I,Math.min(P,C-W*y)),R=Math.max(I,Math.min(P,D+W*y))),x&&(A=Math.max(L,Math.min(z,_-U*x)),X=Math.max(L,Math.min(z,Y+U*x)));break}}R<T&&(y*=-1,St=C,C=D,D=St,St=T,T=R,R=St,b in Rh&&Z.attr("cursor",ve[b=Rh[b]])),X<A&&(x*=-1,St=_,_=Y,Y=St,St=A,A=X,X=St,b in Ph&&Z.attr("cursor",ve[b=Ph[b]])),M.selection&&(k=M.selection),J&&(T=k[0][0],R=k[1][0]),ht&&(A=k[0][1],X=k[1][1]),(k[0][0]!==T||k[0][1]!==A||k[1][0]!==R||k[1][1]!==X)&&(M.selection=[[T,A],[R,X]],c.call(m),$.brush())}function _t(){if(Ch(),w.touches){if(w.touches.length)return;o&&clearTimeout(o),o=setTimeout(function(){o=null},500)}else ms(w.view,rt),E.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);F.attr("pointer-events","all"),Z.attr("cursor",ve.overlay),M.selection&&(k=M.selection),Xv(k)&&(M.selection=null,c.call(m)),$.end()}function Dt(){switch(w.keyCode){case 16:{et=y&&x;break}case 18:{v===Ln&&(y&&(D=R-W*y,C=T+W*y),x&&(Y=X-U*x,_=A+U*x),v=Cn,j());break}case 32:{(v===Ln||v===Cn)&&(y<0?D=R-W:y>0&&(C=T-W),x<0?Y=X-U:x>0&&(_=A-U),v=io,Z.attr("cursor",ve.selection),j());break}default:return}no()}function ye(){switch(w.keyCode){case 16:{et&&(J=ht=et=!1,j());break}case 18:{v===Cn&&(y<0?D=R:y>0&&(C=T),x<0?Y=X:x>0&&(_=A),v=Ln,j());break}case 32:{v===io&&(w.altKey?(y&&(D=R-W*y,C=T+W*y),x&&(Y=X-U*x,_=A+U*x),v=Cn):(y<0?D=R:y>0&&(C=T),x<0?Y=X:x>0&&(_=A),v=Ln),Z.attr("cursor",ve[b]),j());break}default:return}no()}}function d(){h(this,arguments).moved()}function p(){h(this,arguments).ended()}function g(){var m=this.__brush||{selection:null};return m.extent=el(e.apply(this,arguments)),m.dim=t,m}return l.extent=function(m){return arguments.length?(e=typeof m=="function"?m:eo(el(m)),l):e},l.filter=function(m){return arguments.length?(n=typeof m=="function"?m:eo(!!m),l):n},l.touchable=function(m){return arguments.length?(i=typeof m=="function"?m:eo(!!m),l):i},l.handleSize=function(m){return arguments.length?(s=+m,l):s},l.keyModifiers=function(m){return arguments.length?(a=!!m,l):a},l.on=function(){var m=r.on.apply(r,arguments);return m===r?l:m},l}var Eh=Math.cos,$h=Math.sin,Td=Math.PI,La=Td/2,Yh=Td*2,Nh=Math.max;function Wv(t){return function(e,n){return t(e.source.value+e.target.value,n.source.value+n.target.value)}}function Uv(){var t=0,e=null,n=null,i=null;function a(r){var s=r.length,o=[],l=Gt(s),c=[],h=[],f=h.groups=new Array(s),u=new Array(s*s),d,p,g,m,b,v;for(d=0,b=-1;++b<s;){for(p=0,v=-1;++v<s;)p+=r[b][v];o.push(p),c.push(Gt(s)),d+=p}for(e&&l.sort(function(T,L){return e(o[T],o[L])}),n&&c.forEach(function(T,L){T.sort(function(_,A){return n(r[L][_],r[L][A])})}),d=Nh(0,Yh-t*s)/d,m=d?t:Yh/s,p=0,b=-1;++b<s;){for(g=p,v=-1;++v<s;){var y=l[b],x=c[y][v],M=r[y][x],S=p,k=p+=M*d;u[x*s+y]={index:y,subindex:x,startAngle:S,endAngle:k,value:M}}f[y]={index:y,startAngle:g,endAngle:p,value:o[y]},p+=m}for(b=-1;++b<s;)for(v=b-1;++v<s;){var I=u[v*s+b],C=u[b*s+v];(I.value||C.value)&&h.push(I.value<C.value?{source:C,target:I}:{source:I,target:C})}return i?h.sort(i):h}return a.padAngle=function(r){return arguments.length?(t=Nh(0,r),a):t},a.sortGroups=function(r){return arguments.length?(e=r,a):e},a.sortSubgroups=function(r){return arguments.length?(n=r,a):n},a.sortChords=function(r){return arguments.length?(r==null?i=null:(i=Wv(r))._=r,a):i&&i._},a}var Fv=Array.prototype.slice;function ro(t){return function(){return t}}var nl=Math.PI,il=2*nl,Je=1e-6,Vv=il-Je;function al(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function Ve(){return new al}al.prototype=Ve.prototype={constructor:al,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,n,i){this._+="Q"+ +t+","+ +e+","+(this._x1=+n)+","+(this._y1=+i)},bezierCurveTo:function(t,e,n,i,a,r){this._+="C"+ +t+","+ +e+","+ +n+","+ +i+","+(this._x1=+a)+","+(this._y1=+r)},arcTo:function(t,e,n,i,a){t=+t,e=+e,n=+n,i=+i,a=+a;var r=this._x1,s=this._y1,o=n-t,l=i-e,c=r-t,h=s-e,f=c*c+h*h;if(a<0)throw new Error("negative radius: "+a);if(this._x1===null)this._+="M"+(this._x1=t)+","+(this._y1=e);else if(f>Je)if(!(Math.abs(h*o-l*c)>Je)||!a)this._+="L"+(this._x1=t)+","+(this._y1=e);else{var u=n-r,d=i-s,p=o*o+l*l,g=u*u+d*d,m=Math.sqrt(p),b=Math.sqrt(f),v=a*Math.tan((nl-Math.acos((p+f-g)/(2*m*b)))/2),y=v/b,x=v/m;Math.abs(y-1)>Je&&(this._+="L"+(t+y*c)+","+(e+y*h)),this._+="A"+a+","+a+",0,0,"+ +(h*u>c*d)+","+(this._x1=t+x*o)+","+(this._y1=e+x*l)}},arc:function(t,e,n,i,a,r){t=+t,e=+e,n=+n,r=!!r;var s=n*Math.cos(i),o=n*Math.sin(i),l=t+s,c=e+o,h=1^r,f=r?i-a:a-i;if(n<0)throw new Error("negative radius: "+n);this._x1===null?this._+="M"+l+","+c:(Math.abs(this._x1-l)>Je||Math.abs(this._y1-c)>Je)&&(this._+="L"+l+","+c),n&&(f<0&&(f=f%il+il),f>Vv?this._+="A"+n+","+n+",0,1,"+h+","+(t-s)+","+(e-o)+"A"+n+","+n+",0,1,"+h+","+(this._x1=l)+","+(this._y1=c):f>Je&&(this._+="A"+n+","+n+",0,"+ +(f>=nl)+","+h+","+(this._x1=t+n*Math.cos(a))+","+(this._y1=e+n*Math.sin(a))))},rect:function(t,e,n,i){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +n+"v"+ +i+"h"+-n+"Z"},toString:function(){return this._}};function qv(t){return t.source}function Zv(t){return t.target}function Kv(t){return t.radius}function Qv(t){return t.startAngle}function Jv(t){return t.endAngle}function jv(){var t=qv,e=Zv,n=Kv,i=Qv,a=Jv,r=null;function s(){var o,l=Fv.call(arguments),c=t.apply(this,l),h=e.apply(this,l),f=+n.apply(this,(l[0]=c,l)),u=i.apply(this,l)-La,d=a.apply(this,l)-La,p=f*Eh(u),g=f*$h(u),m=+n.apply(this,(l[0]=h,l)),b=i.apply(this,l)-La,v=a.apply(this,l)-La;if(r||(r=o=Ve()),r.moveTo(p,g),r.arc(0,0,f,u,d),(u!==b||d!==v)&&(r.quadraticCurveTo(0,0,m*Eh(b),m*$h(b)),r.arc(0,0,m,b,v)),r.quadraticCurveTo(0,0,p,g),r.closePath(),o)return r=null,o+""||null}return s.radius=function(o){return arguments.length?(n=typeof o=="function"?o:ro(+o),s):n},s.startAngle=function(o){return arguments.length?(i=typeof o=="function"?o:ro(+o),s):i},s.endAngle=function(o){return arguments.length?(a=typeof o=="function"?o:ro(+o),s):a},s.source=function(o){return arguments.length?(t=o,s):t},s.target=function(o){return arguments.length?(e=o,s):e},s.context=function(o){return arguments.length?(r=o??null,s):r},s}var Ft="$";function yr(){}yr.prototype=Me.prototype={constructor:yr,has:function(t){return Ft+t in this},get:function(t){return this[Ft+t]},set:function(t,e){return this[Ft+t]=e,this},remove:function(t){var e=Ft+t;return e in this&&delete this[e]},clear:function(){for(var t in this)t[0]===Ft&&delete this[t]},keys:function(){var t=[];for(var e in this)e[0]===Ft&&t.push(e.slice(1));return t},values:function(){var t=[];for(var e in this)e[0]===Ft&&t.push(this[e]);return t},entries:function(){var t=[];for(var e in this)e[0]===Ft&&t.push({key:e.slice(1),value:this[e]});return t},size:function(){var t=0;for(var e in this)e[0]===Ft&&++t;return t},empty:function(){for(var t in this)if(t[0]===Ft)return!1;return!0},each:function(t){for(var e in this)e[0]===Ft&&t(this[e],e.slice(1),this)}};function Me(t,e){var n=new yr;if(t instanceof yr)t.each(function(o,l){n.set(l,o)});else if(Array.isArray(t)){var i=-1,a=t.length,r;if(e==null)for(;++i<a;)n.set(i,t[i]);else for(;++i<a;)n.set(e(r=t[i],i,t),r)}else if(t)for(var s in t)n.set(s,t[s]);return n}function tx(){var t=[],e=[],n,i,a;function r(o,l,c,h){if(l>=t.length)return n!=null&&o.sort(n),i!=null?i(o):o;for(var f=-1,u=o.length,d=t[l++],p,g,m=Me(),b,v=c();++f<u;)(b=m.get(p=d(g=o[f])+""))?b.push(g):m.set(p,[g]);return m.each(function(y,x){h(v,x,r(y,l,c,h))}),v}function s(o,l){if(++l>t.length)return o;var c,h=e[l-1];return i!=null&&l>=t.length?c=o.entries():(c=[],o.each(function(f,u){c.push({key:u,values:s(f,l)})})),h!=null?c.sort(function(f,u){return h(f.key,u.key)}):c}return a={object:function(o){return r(o,0,ex,nx)},map:function(o){return r(o,0,zh,Xh)},entries:function(o){return s(r(o,0,zh,Xh),0)},key:function(o){return t.push(o),a},sortKeys:function(o){return e[t.length-1]=o,a},sortValues:function(o){return n=o,a},rollup:function(o){return i=o,a}}}function ex(){return{}}function nx(t,e,n){t[e]=n}function zh(){return Me()}function Xh(t,e,n){t.set(e,n)}function vr(){}var Ke=Me.prototype;vr.prototype=Id.prototype={constructor:vr,has:Ke.has,add:function(t){return t+="",this[Ft+t]=t,this},remove:Ke.remove,clear:Ke.clear,values:Ke.keys,size:Ke.size,empty:Ke.empty,each:Ke.each};function Id(t,e){var n=new vr;if(t instanceof vr)t.each(function(r){n.add(r)});else if(t){var i=-1,a=t.length;if(e==null)for(;++i<a;)n.add(t[i]);else for(;++i<a;)n.add(e(t[i],i,t))}return n}function ix(t){var e=[];for(var n in t)e.push(n);return e}function ax(t){var e=[];for(var n in t)e.push(t[n]);return e}function rx(t){var e=[];for(var n in t)e.push({key:n,value:t[n]});return e}var sx=Array.prototype,Rd=sx.slice;function ox(t,e){return t-e}function lx(t){for(var e=0,n=t.length,i=t[n-1][1]*t[0][0]-t[n-1][0]*t[0][1];++e<n;)i+=t[e-1][1]*t[e][0]-t[e-1][0]*t[e][1];return i}function Ce(t){return function(){return t}}function cx(t,e){for(var n=-1,i=e.length,a;++n<i;)if(a=hx(t,e[n]))return a;return 0}function hx(t,e){for(var n=e[0],i=e[1],a=-1,r=0,s=t.length,o=s-1;r<s;o=r++){var l=t[r],c=l[0],h=l[1],f=t[o],u=f[0],d=f[1];if(ux(l,f,e))return 0;h>i!=d>i&&n<(u-c)*(i-h)/(d-h)+c&&(a=-a)}return a}function ux(t,e,n){var i;return fx(t,e,n)&&dx(t[i=+(t[0]===e[0])],n[i],e[i])}function fx(t,e,n){return(e[0]-t[0])*(n[1]-t[1])===(n[0]-t[0])*(e[1]-t[1])}function dx(t,e,n){return t<=e&&e<=n||n<=e&&e<=t}function px(){}var xe=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function Pd(){var t=1,e=1,n=Xl,i=l;function a(c){var h=n(c);if(Array.isArray(h))h=h.slice().sort(ox);else{var f=Nl(c),u=f[0],d=f[1];h=sn(u,d,h),h=Gt(Math.floor(u/h)*h,Math.floor(d/h)*h,h)}return h.map(function(p){return r(c,p)})}function r(c,h){var f=[],u=[];return s(c,h,function(d){i(d,c,h),lx(d)>0?f.push([d]):u.push(d)}),u.forEach(function(d){for(var p=0,g=f.length,m;p<g;++p)if(cx((m=f[p])[0],d)!==-1){m.push(d);return}}),{type:"MultiPolygon",value:h,coordinates:f}}function s(c,h,f){var u=new Array,d=new Array,p,g,m,b,v,y;for(p=g=-1,b=c[0]>=h,xe[b<<1].forEach(x);++p<t-1;)m=b,b=c[p+1]>=h,xe[m|b<<1].forEach(x);for(xe[b<<0].forEach(x);++g<e-1;){for(p=-1,b=c[g*t+t]>=h,v=c[g*t]>=h,xe[b<<1|v<<2].forEach(x);++p<t-1;)m=b,b=c[g*t+t+p+1]>=h,y=v,v=c[g*t+p+1]>=h,xe[m|b<<1|v<<2|y<<3].forEach(x);xe[b|v<<3].forEach(x)}for(p=-1,v=c[g*t]>=h,xe[v<<2].forEach(x);++p<t-1;)y=v,v=c[g*t+p+1]>=h,xe[v<<2|y<<3].forEach(x);xe[v<<3].forEach(x);function x(M){var S=[M[0][0]+p,M[0][1]+g],k=[M[1][0]+p,M[1][1]+g],I=o(S),C=o(k),T,L;(T=d[I])?(L=u[C])?(delete d[T.end],delete u[L.start],T===L?(T.ring.push(k),f(T.ring)):u[T.start]=d[L.end]={start:T.start,end:L.end,ring:T.ring.concat(L.ring)}):(delete d[T.end],T.ring.push(k),d[T.end=C]=T):(T=u[C])?(L=d[I])?(delete u[T.start],delete d[L.end],T===L?(T.ring.push(k),f(T.ring)):u[L.start]=d[T.end]={start:L.start,end:T.end,ring:L.ring.concat(T.ring)}):(delete u[T.start],T.ring.unshift(S),u[T.start=I]=T):u[I]=d[C]={start:I,end:C,ring:[S,k]}}}function o(c){return c[0]*2+c[1]*(t+1)*4}function l(c,h,f){c.forEach(function(u){var d=u[0],p=u[1],g=d|0,m=p|0,b,v=h[m*t+g];d>0&&d<t&&g===d&&(b=h[m*t+g-1],u[0]=d+(f-b)/(v-b)-.5),p>0&&p<e&&m===p&&(b=h[(m-1)*t+g],u[1]=p+(f-b)/(v-b)-.5)})}return a.contour=r,a.size=function(c){if(!arguments.length)return[t,e];var h=Math.ceil(c[0]),f=Math.ceil(c[1]);if(!(h>0)||!(f>0))throw new Error("invalid size");return t=h,e=f,a},a.thresholds=function(c){return arguments.length?(n=typeof c=="function"?c:Array.isArray(c)?Ce(Rd.call(c)):Ce(c),a):n},a.smooth=function(c){return arguments.length?(i=c?l:px,a):i===l},a}function so(t,e,n){for(var i=t.width,a=t.height,r=(n<<1)+1,s=0;s<a;++s)for(var o=0,l=0;o<i+n;++o)o<i&&(l+=t.data[o+s*i]),o>=n&&(o>=r&&(l-=t.data[o-r+s*i]),e.data[o-n+s*i]=l/Math.min(o+1,i-1+r-o,r))}function oo(t,e,n){for(var i=t.width,a=t.height,r=(n<<1)+1,s=0;s<i;++s)for(var o=0,l=0;o<a+n;++o)o<a&&(l+=t.data[s+o*i]),o>=n&&(o>=r&&(l-=t.data[s+(o-r)*i]),e.data[s+(o-n)*i]=l/Math.min(o+1,a-1+r-o,r))}function gx(t){return t[0]}function mx(t){return t[1]}function bx(){return 1}function yx(){var t=gx,e=mx,n=bx,i=960,a=500,r=20,s=2,o=r*3,l=i+o*2>>s,c=a+o*2>>s,h=Ce(20);function f(b){var v=new Float32Array(l*c),y=new Float32Array(l*c);b.forEach(function(S,k,I){var C=+t(S,k,I)+o>>s,T=+e(S,k,I)+o>>s,L=+n(S,k,I);C>=0&&C<l&&T>=0&&T<c&&(v[C+T*l]+=L)}),so({width:l,height:c,data:v},{width:l,height:c,data:y},r>>s),oo({width:l,height:c,data:y},{width:l,height:c,data:v},r>>s),so({width:l,height:c,data:v},{width:l,height:c,data:y},r>>s),oo({width:l,height:c,data:y},{width:l,height:c,data:v},r>>s),so({width:l,height:c,data:v},{width:l,height:c,data:y},r>>s),oo({width:l,height:c,data:y},{width:l,height:c,data:v},r>>s);var x=h(v);if(!Array.isArray(x)){var M=Tf(v);x=sn(0,M,x),x=Gt(0,Math.floor(M/x)*x,x),x.shift()}return Pd().thresholds(x).size([l,c])(v).map(u)}function u(b){return b.value*=Math.pow(2,-2*s),b.coordinates.forEach(d),b}function d(b){b.forEach(p)}function p(b){b.forEach(g)}function g(b){b[0]=b[0]*Math.pow(2,s)-o,b[1]=b[1]*Math.pow(2,s)-o}function m(){return o=r*3,l=i+o*2>>s,c=a+o*2>>s,f}return f.x=function(b){return arguments.length?(t=typeof b=="function"?b:Ce(+b),f):t},f.y=function(b){return arguments.length?(e=typeof b=="function"?b:Ce(+b),f):e},f.weight=function(b){return arguments.length?(n=typeof b=="function"?b:Ce(+b),f):n},f.size=function(b){if(!arguments.length)return[i,a];var v=Math.ceil(b[0]),y=Math.ceil(b[1]);if(!(v>=0)&&!(v>=0))throw new Error("invalid size");return i=v,a=y,m()},f.cellSize=function(b){if(!arguments.length)return 1<<s;if(!((b=+b)>=1))throw new Error("invalid cell size");return s=Math.floor(Math.log(b)/Math.LN2),m()},f.thresholds=function(b){return arguments.length?(h=typeof b=="function"?b:Array.isArray(b)?Ce(Rd.call(b)):Ce(b),f):h},f.bandwidth=function(b){if(!arguments.length)return Math.sqrt(r*(r+1));if(!((b=+b)>=0))throw new Error("invalid bandwidth");return r=Math.round((Math.sqrt(4*b*b+1)-1)/2),m()},f}var Hh={},lo={},co=34,hi=10,ho=13;function Ed(t){return new Function("d","return {"+t.map(function(e,n){return JSON.stringify(e)+": d["+n+'] || ""'}).join(",")+"}")}function vx(t,e){var n=Ed(t);return function(i,a){return e(n(i),a,t)}}function Gh(t){var e=Object.create(null),n=[];return t.forEach(function(i){for(var a in i)a in e||n.push(e[a]=a)}),n}function Yt(t,e){var n=t+"",i=n.length;return i<e?new Array(e-i+1).join(0)+n:n}function xx(t){return t<0?"-"+Yt(-t,6):t>9999?"+"+Yt(t,6):Yt(t,4)}function _x(t){var e=t.getUTCHours(),n=t.getUTCMinutes(),i=t.getUTCSeconds(),a=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":xx(t.getUTCFullYear())+"-"+Yt(t.getUTCMonth()+1,2)+"-"+Yt(t.getUTCDate(),2)+(a?"T"+Yt(e,2)+":"+Yt(n,2)+":"+Yt(i,2)+"."+Yt(a,3)+"Z":i?"T"+Yt(e,2)+":"+Yt(n,2)+":"+Yt(i,2)+"Z":n||e?"T"+Yt(e,2)+":"+Yt(n,2)+"Z":"")}function ks(t){var e=new RegExp('["'+t+`
\r]`),n=t.charCodeAt(0);function i(f,u){var d,p,g=a(f,function(m,b){if(d)return d(m,b-1);p=m,d=u?vx(m,u):Ed(m)});return g.columns=p||[],g}function a(f,u){var d=[],p=f.length,g=0,m=0,b,v=p<=0,y=!1;f.charCodeAt(p-1)===hi&&--p,f.charCodeAt(p-1)===ho&&--p;function x(){if(v)return lo;if(y)return y=!1,Hh;var S,k=g,I;if(f.charCodeAt(k)===co){for(;g++<p&&f.charCodeAt(g)!==co||f.charCodeAt(++g)===co;);return(S=g)>=p?v=!0:(I=f.charCodeAt(g++))===hi?y=!0:I===ho&&(y=!0,f.charCodeAt(g)===hi&&++g),f.slice(k+1,S-1).replace(/""/g,'"')}for(;g<p;){if((I=f.charCodeAt(S=g++))===hi)y=!0;else if(I===ho)y=!0,f.charCodeAt(g)===hi&&++g;else if(I!==n)continue;return f.slice(k,S)}return v=!0,f.slice(k,p)}for(;(b=x())!==lo;){for(var M=[];b!==Hh&&b!==lo;)M.push(b),b=x();u&&(M=u(M,m++))==null||d.push(M)}return d}function r(f,u){return f.map(function(d){return u.map(function(p){return h(d[p])}).join(t)})}function s(f,u){return u==null&&(u=Gh(f)),[u.map(h).join(t)].concat(r(f,u)).join(`
`)}function o(f,u){return u==null&&(u=Gh(f)),r(f,u).join(`
`)}function l(f){return f.map(c).join(`
`)}function c(f){return f.map(h).join(t)}function h(f){return f==null?"":f instanceof Date?_x(f):e.test(f+="")?'"'+f.replace(/"/g,'""')+'"':f}return{parse:i,parseRows:a,format:s,formatBody:o,formatRows:l,formatRow:c,formatValue:h}}var _n=ks(","),$d=_n.parse,wx=_n.parseRows,Mx=_n.format,kx=_n.formatBody,Dx=_n.formatRows,Sx=_n.formatRow,Ax=_n.formatValue,wn=ks("	"),Yd=wn.parse,Lx=wn.parseRows,Cx=wn.format,Tx=wn.formatBody,Ix=wn.formatRows,Rx=wn.formatRow,Px=wn.formatValue;function Ex(t){for(var e in t){var n=t[e].trim(),i,a;if(!n)n=null;else if(n==="true")n=!0;else if(n==="false")n=!1;else if(n==="NaN")n=NaN;else if(!isNaN(i=+n))n=i;else if(a=n.match(/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/))$x&&a[4]&&!a[7]&&(n=n.replace(/-/g,"/").replace(/T/," ")),n=new Date(n);else continue;t[e]=n}return t}var $x=new Date("2019-01-01T00:00").getHours()||new Date("2019-07-01T00:00").getHours();function Yx(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.blob()}function Nx(t,e){return fetch(t,e).then(Yx)}function zx(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.arrayBuffer()}function Xx(t,e){return fetch(t,e).then(zx)}function Hx(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.text()}function Ds(t,e){return fetch(t,e).then(Hx)}function Nd(t){return function(e,n,i){return arguments.length===2&&typeof n=="function"&&(i=n,n=void 0),Ds(e,n).then(function(a){return t(a,i)})}}function Gx(t,e,n,i){arguments.length===3&&typeof n=="function"&&(i=n,n=void 0);var a=ks(t);return Ds(e,n).then(function(r){return a.parse(r,i)})}var Bx=Nd($d),Ox=Nd(Yd);function Wx(t,e){return new Promise(function(n,i){var a=new Image;for(var r in e)a[r]=e[r];a.onerror=i,a.onload=function(){n(a)},a.src=t})}function Ux(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);if(!(t.status===204||t.status===205))return t.json()}function Fx(t,e){return fetch(t,e).then(Ux)}function rc(t){return function(e,n){return Ds(e,n).then(function(i){return new DOMParser().parseFromString(i,t)})}}const Vx=rc("application/xml");var qx=rc("text/html"),Zx=rc("image/svg+xml");function Kx(t,e){var n;t==null&&(t=0),e==null&&(e=0);function i(){var a,r=n.length,s,o=0,l=0;for(a=0;a<r;++a)s=n[a],o+=s.x,l+=s.y;for(o=o/r-t,l=l/r-e,a=0;a<r;++a)s=n[a],s.x-=o,s.y-=l}return i.initialize=function(a){n=a},i.x=function(a){return arguments.length?(t=+a,i):t},i.y=function(a){return arguments.length?(e=+a,i):e},i}function pt(t){return function(){return t}}function Re(){return(Math.random()-.5)*1e-6}function Qx(t){var e=+this._x.call(null,t),n=+this._y.call(null,t);return zd(this.cover(e,n),e,n,t)}function zd(t,e,n,i){if(isNaN(e)||isNaN(n))return t;var a,r=t._root,s={data:i},o=t._x0,l=t._y0,c=t._x1,h=t._y1,f,u,d,p,g,m,b,v;if(!r)return t._root=s,t;for(;r.length;)if((g=e>=(f=(o+c)/2))?o=f:c=f,(m=n>=(u=(l+h)/2))?l=u:h=u,a=r,!(r=r[b=m<<1|g]))return a[b]=s,t;if(d=+t._x.call(null,r.data),p=+t._y.call(null,r.data),e===d&&n===p)return s.next=r,a?a[b]=s:t._root=s,t;do a=a?a[b]=new Array(4):t._root=new Array(4),(g=e>=(f=(o+c)/2))?o=f:c=f,(m=n>=(u=(l+h)/2))?l=u:h=u;while((b=m<<1|g)===(v=(p>=u)<<1|d>=f));return a[v]=r,a[b]=s,t}function Jx(t){var e,n,i=t.length,a,r,s=new Array(i),o=new Array(i),l=1/0,c=1/0,h=-1/0,f=-1/0;for(n=0;n<i;++n)isNaN(a=+this._x.call(null,e=t[n]))||isNaN(r=+this._y.call(null,e))||(s[n]=a,o[n]=r,a<l&&(l=a),a>h&&(h=a),r<c&&(c=r),r>f&&(f=r));if(l>h||c>f)return this;for(this.cover(l,c).cover(h,f),n=0;n<i;++n)zd(this,s[n],o[n],t[n]);return this}function jx(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,i=this._y0,a=this._x1,r=this._y1;if(isNaN(n))a=(n=Math.floor(t))+1,r=(i=Math.floor(e))+1;else{for(var s=a-n,o=this._root,l,c;n>t||t>=a||i>e||e>=r;)switch(c=(e<i)<<1|t<n,l=new Array(4),l[c]=o,o=l,s*=2,c){case 0:a=n+s,r=i+s;break;case 1:n=a-s,r=i+s;break;case 2:a=n+s,i=r-s;break;case 3:n=a-s,i=r-s;break}this._root&&this._root.length&&(this._root=o)}return this._x0=n,this._y0=i,this._x1=a,this._y1=r,this}function t2(){var t=[];return this.visit(function(e){if(!e.length)do t.push(e.data);while(e=e.next)}),t}function e2(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function Tt(t,e,n,i,a){this.node=t,this.x0=e,this.y0=n,this.x1=i,this.y1=a}function n2(t,e,n){var i,a=this._x0,r=this._y0,s,o,l,c,h=this._x1,f=this._y1,u=[],d=this._root,p,g;for(d&&u.push(new Tt(d,a,r,h,f)),n==null?n=1/0:(a=t-n,r=e-n,h=t+n,f=e+n,n*=n);p=u.pop();)if(!(!(d=p.node)||(s=p.x0)>h||(o=p.y0)>f||(l=p.x1)<a||(c=p.y1)<r))if(d.length){var m=(s+l)/2,b=(o+c)/2;u.push(new Tt(d[3],m,b,l,c),new Tt(d[2],s,b,m,c),new Tt(d[1],m,o,l,b),new Tt(d[0],s,o,m,b)),(g=(e>=b)<<1|t>=m)&&(p=u[u.length-1],u[u.length-1]=u[u.length-1-g],u[u.length-1-g]=p)}else{var v=t-+this._x.call(null,d.data),y=e-+this._y.call(null,d.data),x=v*v+y*y;if(x<n){var M=Math.sqrt(n=x);a=t-M,r=e-M,h=t+M,f=e+M,i=d.data}}return i}function i2(t){if(isNaN(h=+this._x.call(null,t))||isNaN(f=+this._y.call(null,t)))return this;var e,n=this._root,i,a,r,s=this._x0,o=this._y0,l=this._x1,c=this._y1,h,f,u,d,p,g,m,b;if(!n)return this;if(n.length)for(;;){if((p=h>=(u=(s+l)/2))?s=u:l=u,(g=f>=(d=(o+c)/2))?o=d:c=d,e=n,!(n=n[m=g<<1|p]))return this;if(!n.length)break;(e[m+1&3]||e[m+2&3]||e[m+3&3])&&(i=e,b=m)}for(;n.data!==t;)if(a=n,!(n=n.next))return this;return(r=n.next)&&delete n.next,a?(r?a.next=r:delete a.next,this):e?(r?e[m]=r:delete e[m],(n=e[0]||e[1]||e[2]||e[3])&&n===(e[3]||e[2]||e[1]||e[0])&&!n.length&&(i?i[b]=n:this._root=n),this):(this._root=r,this)}function a2(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this}function r2(){return this._root}function s2(){var t=0;return this.visit(function(e){if(!e.length)do++t;while(e=e.next)}),t}function o2(t){var e=[],n,i=this._root,a,r,s,o,l;for(i&&e.push(new Tt(i,this._x0,this._y0,this._x1,this._y1));n=e.pop();)if(!t(i=n.node,r=n.x0,s=n.y0,o=n.x1,l=n.y1)&&i.length){var c=(r+o)/2,h=(s+l)/2;(a=i[3])&&e.push(new Tt(a,c,h,o,l)),(a=i[2])&&e.push(new Tt(a,r,h,c,l)),(a=i[1])&&e.push(new Tt(a,c,s,o,h)),(a=i[0])&&e.push(new Tt(a,r,s,c,h))}return this}function l2(t){var e=[],n=[],i;for(this._root&&e.push(new Tt(this._root,this._x0,this._y0,this._x1,this._y1));i=e.pop();){var a=i.node;if(a.length){var r,s=i.x0,o=i.y0,l=i.x1,c=i.y1,h=(s+l)/2,f=(o+c)/2;(r=a[0])&&e.push(new Tt(r,s,o,h,f)),(r=a[1])&&e.push(new Tt(r,h,o,l,f)),(r=a[2])&&e.push(new Tt(r,s,f,h,c)),(r=a[3])&&e.push(new Tt(r,h,f,l,c))}n.push(i)}for(;i=n.pop();)t(i.node,i.x0,i.y0,i.x1,i.y1);return this}function c2(t){return t[0]}function h2(t){return arguments.length?(this._x=t,this):this._x}function u2(t){return t[1]}function f2(t){return arguments.length?(this._y=t,this):this._y}function Ss(t,e,n){var i=new sc(e??c2,n??u2,NaN,NaN,NaN,NaN);return t==null?i:i.addAll(t)}function sc(t,e,n,i,a,r){this._x=t,this._y=e,this._x0=n,this._y0=i,this._x1=a,this._y1=r,this._root=void 0}function Bh(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}var $t=Ss.prototype=sc.prototype;$t.copy=function(){var t=new sc(this._x,this._y,this._x0,this._y0,this._x1,this._y1),e=this._root,n,i;if(!e)return t;if(!e.length)return t._root=Bh(e),t;for(n=[{source:e,target:t._root=new Array(4)}];e=n.pop();)for(var a=0;a<4;++a)(i=e.source[a])&&(i.length?n.push({source:i,target:e.target[a]=new Array(4)}):e.target[a]=Bh(i));return t};$t.add=Qx;$t.addAll=Jx;$t.cover=jx;$t.data=t2;$t.extent=e2;$t.find=n2;$t.remove=i2;$t.removeAll=a2;$t.root=r2;$t.size=s2;$t.visit=o2;$t.visitAfter=l2;$t.x=h2;$t.y=f2;function d2(t){return t.x+t.vx}function p2(t){return t.y+t.vy}function g2(t){var e,n,i=1,a=1;typeof t!="function"&&(t=pt(t==null?1:+t));function r(){for(var l,c=e.length,h,f,u,d,p,g,m=0;m<a;++m)for(h=Ss(e,d2,p2).visitAfter(s),l=0;l<c;++l)f=e[l],p=n[f.index],g=p*p,u=f.x+f.vx,d=f.y+f.vy,h.visit(b);function b(v,y,x,M,S){var k=v.data,I=v.r,C=p+I;if(k){if(k.index>f.index){var T=u-k.x-k.vx,L=d-k.y-k.vy,_=T*T+L*L;_<C*C&&(T===0&&(T=Re(),_+=T*T),L===0&&(L=Re(),_+=L*L),_=(C-(_=Math.sqrt(_)))/_*i,f.vx+=(T*=_)*(C=(I*=I)/(g+I)),f.vy+=(L*=_)*C,k.vx-=T*(C=1-C),k.vy-=L*C)}return}return y>u+C||M<u-C||x>d+C||S<d-C}}function s(l){if(l.data)return l.r=n[l.data.index];for(var c=l.r=0;c<4;++c)l[c]&&l[c].r>l.r&&(l.r=l[c].r)}function o(){if(e){var l,c=e.length,h;for(n=new Array(c),l=0;l<c;++l)h=e[l],n[h.index]=+t(h,l,e)}}return r.initialize=function(l){e=l,o()},r.iterations=function(l){return arguments.length?(a=+l,r):a},r.strength=function(l){return arguments.length?(i=+l,r):i},r.radius=function(l){return arguments.length?(t=typeof l=="function"?l:pt(+l),o(),r):t},r}function m2(t){return t.index}function Oh(t,e){var n=t.get(e);if(!n)throw new Error("missing: "+e);return n}function b2(t){var e=m2,n=h,i,a=pt(30),r,s,o,l,c=1;t==null&&(t=[]);function h(g){return 1/Math.min(o[g.source.index],o[g.target.index])}function f(g){for(var m=0,b=t.length;m<c;++m)for(var v=0,y,x,M,S,k,I,C;v<b;++v)y=t[v],x=y.source,M=y.target,S=M.x+M.vx-x.x-x.vx||Re(),k=M.y+M.vy-x.y-x.vy||Re(),I=Math.sqrt(S*S+k*k),I=(I-r[v])/I*g*i[v],S*=I,k*=I,M.vx-=S*(C=l[v]),M.vy-=k*C,x.vx+=S*(C=1-C),x.vy+=k*C}function u(){if(s){var g,m=s.length,b=t.length,v=Me(s,e),y;for(g=0,o=new Array(m);g<b;++g)y=t[g],y.index=g,typeof y.source!="object"&&(y.source=Oh(v,y.source)),typeof y.target!="object"&&(y.target=Oh(v,y.target)),o[y.source.index]=(o[y.source.index]||0)+1,o[y.target.index]=(o[y.target.index]||0)+1;for(g=0,l=new Array(b);g<b;++g)y=t[g],l[g]=o[y.source.index]/(o[y.source.index]+o[y.target.index]);i=new Array(b),d(),r=new Array(b),p()}}function d(){if(s)for(var g=0,m=t.length;g<m;++g)i[g]=+n(t[g],g,t)}function p(){if(s)for(var g=0,m=t.length;g<m;++g)r[g]=+a(t[g],g,t)}return f.initialize=function(g){s=g,u()},f.links=function(g){return arguments.length?(t=g,u(),f):t},f.id=function(g){return arguments.length?(e=g,f):e},f.iterations=function(g){return arguments.length?(c=+g,f):c},f.strength=function(g){return arguments.length?(n=typeof g=="function"?g:pt(+g),d(),f):n},f.distance=function(g){return arguments.length?(a=typeof g=="function"?g:pt(+g),p(),f):a},f}function y2(t){return t.x}function v2(t){return t.y}var x2=10,_2=Math.PI*(3-Math.sqrt(5));function w2(t){var e,n=1,i=.001,a=1-Math.pow(i,1/300),r=0,s=.6,o=Me(),l=ws(h),c=vn("tick","end");t==null&&(t=[]);function h(){f(),c.call("tick",e),n<i&&(l.stop(),c.call("end",e))}function f(p){var g,m=t.length,b;p===void 0&&(p=1);for(var v=0;v<p;++v)for(n+=(r-n)*a,o.each(function(y){y(n)}),g=0;g<m;++g)b=t[g],b.fx==null?b.x+=b.vx*=s:(b.x=b.fx,b.vx=0),b.fy==null?b.y+=b.vy*=s:(b.y=b.fy,b.vy=0);return e}function u(){for(var p=0,g=t.length,m;p<g;++p){if(m=t[p],m.index=p,m.fx!=null&&(m.x=m.fx),m.fy!=null&&(m.y=m.fy),isNaN(m.x)||isNaN(m.y)){var b=x2*Math.sqrt(p),v=p*_2;m.x=b*Math.cos(v),m.y=b*Math.sin(v)}(isNaN(m.vx)||isNaN(m.vy))&&(m.vx=m.vy=0)}}function d(p){return p.initialize&&p.initialize(t),p}return u(),e={tick:f,restart:function(){return l.restart(h),e},stop:function(){return l.stop(),e},nodes:function(p){return arguments.length?(t=p,u(),o.each(d),e):t},alpha:function(p){return arguments.length?(n=+p,e):n},alphaMin:function(p){return arguments.length?(i=+p,e):i},alphaDecay:function(p){return arguments.length?(a=+p,e):+a},alphaTarget:function(p){return arguments.length?(r=+p,e):r},velocityDecay:function(p){return arguments.length?(s=1-p,e):1-s},force:function(p,g){return arguments.length>1?(g==null?o.remove(p):o.set(p,d(g)),e):o.get(p)},find:function(p,g,m){var b=0,v=t.length,y,x,M,S,k;for(m==null?m=1/0:m*=m,b=0;b<v;++b)S=t[b],y=p-S.x,x=g-S.y,M=y*y+x*x,M<m&&(k=S,m=M);return k},on:function(p,g){return arguments.length>1?(c.on(p,g),e):c.on(p)}}}function M2(){var t,e,n,i=pt(-30),a,r=1,s=1/0,o=.81;function l(u){var d,p=t.length,g=Ss(t,y2,v2).visitAfter(h);for(n=u,d=0;d<p;++d)e=t[d],g.visit(f)}function c(){if(t){var u,d=t.length,p;for(a=new Array(d),u=0;u<d;++u)p=t[u],a[p.index]=+i(p,u,t)}}function h(u){var d=0,p,g,m=0,b,v,y;if(u.length){for(b=v=y=0;y<4;++y)(p=u[y])&&(g=Math.abs(p.value))&&(d+=p.value,m+=g,b+=g*p.x,v+=g*p.y);u.x=b/m,u.y=v/m}else{p=u,p.x=p.data.x,p.y=p.data.y;do d+=a[p.data.index];while(p=p.next)}u.value=d}function f(u,d,p,g){if(!u.value)return!0;var m=u.x-e.x,b=u.y-e.y,v=g-d,y=m*m+b*b;if(v*v/o<y)return y<s&&(m===0&&(m=Re(),y+=m*m),b===0&&(b=Re(),y+=b*b),y<r&&(y=Math.sqrt(r*y)),e.vx+=m*u.value*n/y,e.vy+=b*u.value*n/y),!0;if(u.length||y>=s)return;(u.data!==e||u.next)&&(m===0&&(m=Re(),y+=m*m),b===0&&(b=Re(),y+=b*b),y<r&&(y=Math.sqrt(r*y)));do u.data!==e&&(v=a[u.data.index]*n/y,e.vx+=m*v,e.vy+=b*v);while(u=u.next)}return l.initialize=function(u){t=u,c()},l.strength=function(u){return arguments.length?(i=typeof u=="function"?u:pt(+u),c(),l):i},l.distanceMin=function(u){return arguments.length?(r=u*u,l):Math.sqrt(r)},l.distanceMax=function(u){return arguments.length?(s=u*u,l):Math.sqrt(s)},l.theta=function(u){return arguments.length?(o=u*u,l):Math.sqrt(o)},l}function k2(t,e,n){var i,a=pt(.1),r,s;typeof t!="function"&&(t=pt(+t)),e==null&&(e=0),n==null&&(n=0);function o(c){for(var h=0,f=i.length;h<f;++h){var u=i[h],d=u.x-e||1e-6,p=u.y-n||1e-6,g=Math.sqrt(d*d+p*p),m=(s[h]-g)*r[h]*c/g;u.vx+=d*m,u.vy+=p*m}}function l(){if(i){var c,h=i.length;for(r=new Array(h),s=new Array(h),c=0;c<h;++c)s[c]=+t(i[c],c,i),r[c]=isNaN(s[c])?0:+a(i[c],c,i)}}return o.initialize=function(c){i=c,l()},o.strength=function(c){return arguments.length?(a=typeof c=="function"?c:pt(+c),l(),o):a},o.radius=function(c){return arguments.length?(t=typeof c=="function"?c:pt(+c),l(),o):t},o.x=function(c){return arguments.length?(e=+c,o):e},o.y=function(c){return arguments.length?(n=+c,o):n},o}function D2(t){var e=pt(.1),n,i,a;typeof t!="function"&&(t=pt(t==null?0:+t));function r(o){for(var l=0,c=n.length,h;l<c;++l)h=n[l],h.vx+=(a[l]-h.x)*i[l]*o}function s(){if(n){var o,l=n.length;for(i=new Array(l),a=new Array(l),o=0;o<l;++o)i[o]=isNaN(a[o]=+t(n[o],o,n))?0:+e(n[o],o,n)}}return r.initialize=function(o){n=o,s()},r.strength=function(o){return arguments.length?(e=typeof o=="function"?o:pt(+o),s(),r):e},r.x=function(o){return arguments.length?(t=typeof o=="function"?o:pt(+o),s(),r):t},r}function S2(t){var e=pt(.1),n,i,a;typeof t!="function"&&(t=pt(t==null?0:+t));function r(o){for(var l=0,c=n.length,h;l<c;++l)h=n[l],h.vy+=(a[l]-h.y)*i[l]*o}function s(){if(n){var o,l=n.length;for(i=new Array(l),a=new Array(l),o=0;o<l;++o)i[o]=isNaN(a[o]=+t(n[o],o,n))?0:+e(n[o],o,n)}}return r.initialize=function(o){n=o,s()},r.strength=function(o){return arguments.length?(e=typeof o=="function"?o:pt(+o),s(),r):e},r.y=function(o){return arguments.length?(t=typeof o=="function"?o:pt(+o),s(),r):t},r}function A2(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function xr(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,i=t.slice(0,n);return[i.length>1?i[0]+i.slice(2):i,+t.slice(n+1)]}function Vn(t){return t=xr(Math.abs(t)),t?t[1]:NaN}function L2(t,e){return function(n,i){for(var a=n.length,r=[],s=0,o=t[0],l=0;a>0&&o>0&&(l+o+1>i&&(o=Math.max(1,i-l)),r.push(n.substring(a-=o,a+o)),!((l+=o+1)>i));)o=t[s=(s+1)%t.length];return r.reverse().join(e)}}function C2(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var T2=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Ji(t){if(!(e=T2.exec(t)))throw new Error("invalid format: "+t);var e;return new As({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Ji.prototype=As.prototype;function As(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}As.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function I2(t){t:for(var e=t.length,n=1,i=-1,a;n<e;++n)switch(t[n]){case".":i=a=n;break;case"0":i===0&&(i=n),a=n;break;default:if(!+t[n])break t;i>0&&(i=0);break}return i>0?t.slice(0,i)+t.slice(a+1):t}var Xd;function R2(t,e){var n=xr(t,e);if(!n)return t+"";var i=n[0],a=n[1],r=a-(Xd=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,s=i.length;return r===s?i:r>s?i+new Array(r-s+1).join("0"):r>0?i.slice(0,r)+"."+i.slice(r):"0."+new Array(1-r).join("0")+xr(t,Math.max(0,e+r-1))[0]}function Wh(t,e){var n=xr(t,e);if(!n)return t+"";var i=n[0],a=n[1];return a<0?"0."+new Array(-a).join("0")+i:i.length>a+1?i.slice(0,a+1)+"."+i.slice(a+1):i+new Array(a-i.length+2).join("0")}const Uh={"%":function(t,e){return(t*100).toFixed(e)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:A2,e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},g:function(t,e){return t.toPrecision(e)},o:function(t){return Math.round(t).toString(8)},p:function(t,e){return Wh(t*100,e)},r:Wh,s:R2,X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}};function Fh(t){return t}var Vh=Array.prototype.map,qh=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function Hd(t){var e=t.grouping===void 0||t.thousands===void 0?Fh:L2(Vh.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",i=t.currency===void 0?"":t.currency[1]+"",a=t.decimal===void 0?".":t.decimal+"",r=t.numerals===void 0?Fh:C2(Vh.call(t.numerals,String)),s=t.percent===void 0?"%":t.percent+"",o=t.minus===void 0?"-":t.minus+"",l=t.nan===void 0?"NaN":t.nan+"";function c(f){f=Ji(f);var u=f.fill,d=f.align,p=f.sign,g=f.symbol,m=f.zero,b=f.width,v=f.comma,y=f.precision,x=f.trim,M=f.type;M==="n"?(v=!0,M="g"):Uh[M]||(y===void 0&&(y=12),x=!0,M="g"),(m||u==="0"&&d==="=")&&(m=!0,u="0",d="=");var S=g==="$"?n:g==="#"&&/[boxX]/.test(M)?"0"+M.toLowerCase():"",k=g==="$"?i:/[%p]/.test(M)?s:"",I=Uh[M],C=/[defgprs%]/.test(M);y=y===void 0?6:/[gprs]/.test(M)?Math.max(1,Math.min(21,y)):Math.max(0,Math.min(20,y));function T(L){var _=S,A=k,P,D,R;if(M==="c")A=I(L)+A,L="";else{L=+L;var z=L<0||1/L<0;if(L=isNaN(L)?l:I(Math.abs(L),y),x&&(L=I2(L)),z&&+L==0&&p!=="+"&&(z=!1),_=(z?p==="("?p:o:p==="-"||p==="("?"":p)+_,A=(M==="s"?qh[8+Xd/3]:"")+A+(z&&p==="("?")":""),C){for(P=-1,D=L.length;++P<D;)if(R=L.charCodeAt(P),48>R||R>57){A=(R===46?a+L.slice(P+1):L.slice(P))+A,L=L.slice(0,P);break}}}v&&!m&&(L=e(L,1/0));var Y=_.length+L.length+A.length,X=Y<b?new Array(b-Y+1).join(u):"";switch(v&&m&&(L=e(X+L,X.length?b-A.length:1/0),X=""),d){case"<":L=_+L+A+X;break;case"=":L=_+X+L+A;break;case"^":L=X.slice(0,Y=X.length>>1)+_+L+A+X.slice(Y);break;default:L=X+_+L+A;break}return r(L)}return T.toString=function(){return f+""},T}function h(f,u){var d=c((f=Ji(f),f.type="f",f)),p=Math.max(-8,Math.min(8,Math.floor(Vn(u)/3)))*3,g=Math.pow(10,-p),m=qh[8+p/3];return function(b){return d(g*b)+m}}return{format:c,formatPrefix:h}}var Ca,da,oc;Gd({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"});function Gd(t){return Ca=Hd(t),da=Ca.format,oc=Ca.formatPrefix,Ca}function Bd(t){return Math.max(0,-Vn(Math.abs(t)))}function Od(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Vn(e)/3)))*3-Vn(Math.abs(t)))}function Wd(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Vn(e)-Vn(t))+1}function qe(){return new _r}function _r(){this.reset()}_r.prototype={constructor:_r,reset:function(){this.s=this.t=0},add:function(t){Zh(Ta,t,this.t),Zh(this,Ta.s,this.s),this.s?this.t+=Ta.t:this.s=Ta.t},valueOf:function(){return this.s}};var Ta=new _r;function Zh(t,e,n){var i=t.s=e+n,a=i-e,r=i-a;t.t=e-r+(n-a)}var G=1e-6,wr=1e-12,q=Math.PI,ct=q/2,Mr=q/4,Rt=q*2,it=180/q,B=q/180,Q=Math.abs,ni=Math.atan,Pt=Math.atan2,H=Math.cos,Ia=Math.ceil,Ud=Math.exp,kr=Math.log,uo=Math.pow,N=Math.sin,qt=Math.sign||function(t){return t>0?1:t<0?-1:0},ft=Math.sqrt,lc=Math.tan;function Fd(t){return t>1?0:t<-1?q:Math.acos(t)}function Et(t){return t>1?ct:t<-1?-ct:Math.asin(t)}function Kh(t){return(t=N(t/2))*t}function ot(){}function Dr(t,e){t&&Jh.hasOwnProperty(t.type)&&Jh[t.type](t,e)}var Qh={Feature:function(t,e){Dr(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,i=-1,a=n.length;++i<a;)Dr(n[i].geometry,e)}},Jh={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,i=-1,a=n.length;++i<a;)t=n[i],e.point(t[0],t[1],t[2])},LineString:function(t,e){rl(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,i=-1,a=n.length;++i<a;)rl(n[i],e,0)},Polygon:function(t,e){jh(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,i=-1,a=n.length;++i<a;)jh(n[i],e)},GeometryCollection:function(t,e){for(var n=t.geometries,i=-1,a=n.length;++i<a;)Dr(n[i],e)}};function rl(t,e,n){var i=-1,a=t.length-n,r;for(e.lineStart();++i<a;)r=t[i],e.point(r[0],r[1],r[2]);e.lineEnd()}function jh(t,e){var n=-1,i=t.length;for(e.polygonStart();++n<i;)rl(t[n],e,1);e.polygonEnd()}function jt(t,e){t&&Qh.hasOwnProperty(t.type)?Qh[t.type](t,e):Dr(t,e)}var Sr=qe(),Ar=qe(),Vd,qd,sl,ol,ll,me={point:ot,lineStart:ot,lineEnd:ot,polygonStart:function(){Sr.reset(),me.lineStart=P2,me.lineEnd=E2},polygonEnd:function(){var t=+Sr;Ar.add(t<0?Rt+t:t),this.lineStart=this.lineEnd=this.point=ot},sphere:function(){Ar.add(Rt)}};function P2(){me.point=$2}function E2(){Zd(Vd,qd)}function $2(t,e){me.point=Zd,Vd=t,qd=e,t*=B,e*=B,sl=t,ol=H(e=e/2+Mr),ll=N(e)}function Zd(t,e){t*=B,e*=B,e=e/2+Mr;var n=t-sl,i=n>=0?1:-1,a=i*n,r=H(e),s=N(e),o=ll*s,l=ol*r+o*H(a),c=o*i*N(a);Sr.add(Pt(c,l)),sl=t,ol=r,ll=s}function Y2(t){return Ar.reset(),jt(t,me),Ar*2}function Lr(t){return[Pt(t[1],t[0]),Et(t[2])]}function un(t){var e=t[0],n=t[1],i=H(n);return[i*H(e),i*N(e),N(n)]}function Ra(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function qn(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function fo(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function Pa(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function Cr(t){var e=ft(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}var st,Nt,lt,Xt,je,Kd,Qd,Hn,Ni=qe(),Te,ke,_e={point:cl,lineStart:tu,lineEnd:eu,polygonStart:function(){_e.point=jd,_e.lineStart=N2,_e.lineEnd=z2,Ni.reset(),me.polygonStart()},polygonEnd:function(){me.polygonEnd(),_e.point=cl,_e.lineStart=tu,_e.lineEnd=eu,Sr<0?(st=-(lt=180),Nt=-(Xt=90)):Ni>G?Xt=90:Ni<-G&&(Nt=-90),ke[0]=st,ke[1]=lt},sphere:function(){st=-(lt=180),Nt=-(Xt=90)}};function cl(t,e){Te.push(ke=[st=t,lt=t]),e<Nt&&(Nt=e),e>Xt&&(Xt=e)}function Jd(t,e){var n=un([t*B,e*B]);if(Hn){var i=qn(Hn,n),a=[i[1],-i[0],0],r=qn(a,i);Cr(r),r=Lr(r);var s=t-je,o=s>0?1:-1,l=r[0]*it*o,c,h=Q(s)>180;h^(o*je<l&&l<o*t)?(c=r[1]*it,c>Xt&&(Xt=c)):(l=(l+360)%360-180,h^(o*je<l&&l<o*t)?(c=-r[1]*it,c<Nt&&(Nt=c)):(e<Nt&&(Nt=e),e>Xt&&(Xt=e))),h?t<je?zt(st,t)>zt(st,lt)&&(lt=t):zt(t,lt)>zt(st,lt)&&(st=t):lt>=st?(t<st&&(st=t),t>lt&&(lt=t)):t>je?zt(st,t)>zt(st,lt)&&(lt=t):zt(t,lt)>zt(st,lt)&&(st=t)}else Te.push(ke=[st=t,lt=t]);e<Nt&&(Nt=e),e>Xt&&(Xt=e),Hn=n,je=t}function tu(){_e.point=Jd}function eu(){ke[0]=st,ke[1]=lt,_e.point=cl,Hn=null}function jd(t,e){if(Hn){var n=t-je;Ni.add(Q(n)>180?n+(n>0?360:-360):n)}else Kd=t,Qd=e;me.point(t,e),Jd(t,e)}function N2(){me.lineStart()}function z2(){jd(Kd,Qd),me.lineEnd(),Q(Ni)>G&&(st=-(lt=180)),ke[0]=st,ke[1]=lt,Hn=null}function zt(t,e){return(e-=t)<0?e+360:e}function X2(t,e){return t[0]-e[0]}function nu(t,e){return t[0]<=t[1]?t[0]<=e&&e<=t[1]:e<t[0]||t[1]<e}function H2(t){var e,n,i,a,r,s,o;if(Xt=lt=-(st=Nt=1/0),Te=[],jt(t,_e),n=Te.length){for(Te.sort(X2),e=1,i=Te[0],r=[i];e<n;++e)a=Te[e],nu(i,a[0])||nu(i,a[1])?(zt(i[0],a[1])>zt(i[0],i[1])&&(i[1]=a[1]),zt(a[0],i[1])>zt(i[0],i[1])&&(i[0]=a[0])):r.push(i=a);for(s=-1/0,n=r.length-1,e=0,i=r[n];e<=n;i=a,++e)a=r[e],(o=zt(i[1],a[0]))>s&&(s=o,st=a[0],lt=i[1])}return Te=ke=null,st===1/0||Nt===1/0?[[NaN,NaN],[NaN,NaN]]:[[st,Nt],[lt,Xt]]}var Mi,Tr,Ir,Rr,Pr,Er,$r,Yr,hl,ul,fl,t0,e0,At,Lt,Ct,ee={sphere:ot,point:cc,lineStart:iu,lineEnd:au,polygonStart:function(){ee.lineStart=O2,ee.lineEnd=W2},polygonEnd:function(){ee.lineStart=iu,ee.lineEnd=au}};function cc(t,e){t*=B,e*=B;var n=H(e);pa(n*H(t),n*N(t),N(e))}function pa(t,e,n){++Mi,Ir+=(t-Ir)/Mi,Rr+=(e-Rr)/Mi,Pr+=(n-Pr)/Mi}function iu(){ee.point=G2}function G2(t,e){t*=B,e*=B;var n=H(e);At=n*H(t),Lt=n*N(t),Ct=N(e),ee.point=B2,pa(At,Lt,Ct)}function B2(t,e){t*=B,e*=B;var n=H(e),i=n*H(t),a=n*N(t),r=N(e),s=Pt(ft((s=Lt*r-Ct*a)*s+(s=Ct*i-At*r)*s+(s=At*a-Lt*i)*s),At*i+Lt*a+Ct*r);Tr+=s,Er+=s*(At+(At=i)),$r+=s*(Lt+(Lt=a)),Yr+=s*(Ct+(Ct=r)),pa(At,Lt,Ct)}function au(){ee.point=cc}function O2(){ee.point=U2}function W2(){n0(t0,e0),ee.point=cc}function U2(t,e){t0=t,e0=e,t*=B,e*=B,ee.point=n0;var n=H(e);At=n*H(t),Lt=n*N(t),Ct=N(e),pa(At,Lt,Ct)}function n0(t,e){t*=B,e*=B;var n=H(e),i=n*H(t),a=n*N(t),r=N(e),s=Lt*r-Ct*a,o=Ct*i-At*r,l=At*a-Lt*i,c=ft(s*s+o*o+l*l),h=Et(c),f=c&&-h/c;hl+=f*s,ul+=f*o,fl+=f*l,Tr+=h,Er+=h*(At+(At=i)),$r+=h*(Lt+(Lt=a)),Yr+=h*(Ct+(Ct=r)),pa(At,Lt,Ct)}function F2(t){Mi=Tr=Ir=Rr=Pr=Er=$r=Yr=hl=ul=fl=0,jt(t,ee);var e=hl,n=ul,i=fl,a=e*e+n*n+i*i;return a<wr&&(e=Er,n=$r,i=Yr,Tr<G&&(e=Ir,n=Rr,i=Pr),a=e*e+n*n+i*i,a<wr)?[NaN,NaN]:[Pt(n,e)*it,Et(i/ft(a))*it]}function Tn(t){return function(){return t}}function dl(t,e){function n(i,a){return i=t(i,a),e(i[0],i[1])}return t.invert&&e.invert&&(n.invert=function(i,a){return i=e.invert(i,a),i&&t.invert(i[0],i[1])}),n}function pl(t,e){return[Q(t)>q?t+Math.round(-t/Rt)*Rt:t,e]}pl.invert=pl;function hc(t,e,n){return(t%=Rt)?e||n?dl(su(t),ou(e,n)):su(t):e||n?ou(e,n):pl}function ru(t){return function(e,n){return e+=t,[e>q?e-Rt:e<-q?e+Rt:e,n]}}function su(t){var e=ru(t);return e.invert=ru(-t),e}function ou(t,e){var n=H(t),i=N(t),a=H(e),r=N(e);function s(o,l){var c=H(l),h=H(o)*c,f=N(o)*c,u=N(l),d=u*n+h*i;return[Pt(f*a-d*r,h*n-u*i),Et(d*a+f*r)]}return s.invert=function(o,l){var c=H(l),h=H(o)*c,f=N(o)*c,u=N(l),d=u*a-f*r;return[Pt(f*a+u*r,h*n+d*i),Et(d*n-h*i)]},s}function i0(t){t=hc(t[0]*B,t[1]*B,t.length>2?t[2]*B:0);function e(n){return n=t(n[0]*B,n[1]*B),n[0]*=it,n[1]*=it,n}return e.invert=function(n){return n=t.invert(n[0]*B,n[1]*B),n[0]*=it,n[1]*=it,n},e}function a0(t,e,n,i,a,r){if(n){var s=H(e),o=N(e),l=i*n;a==null?(a=e+i*Rt,r=e-l/2):(a=lu(s,a),r=lu(s,r),(i>0?a<r:a>r)&&(a+=i*Rt));for(var c,h=a;i>0?h>r:h<r;h-=l)c=Lr([s,-o*H(h),-o*N(h)]),t.point(c[0],c[1])}}function lu(t,e){e=un(e),e[0]-=t,Cr(e);var n=Fd(-e[1]);return((-e[2]<0?-n:n)+Rt-G)%Rt}function V2(){var t=Tn([0,0]),e=Tn(90),n=Tn(6),i,a,r={point:s};function s(l,c){i.push(l=a(l,c)),l[0]*=it,l[1]*=it}function o(){var l=t.apply(this,arguments),c=e.apply(this,arguments)*B,h=n.apply(this,arguments)*B;return i=[],a=hc(-l[0]*B,-l[1]*B,0).invert,a0(r,c,h,1),l={type:"Polygon",coordinates:[i]},i=a=null,l}return o.center=function(l){return arguments.length?(t=typeof l=="function"?l:Tn([+l[0],+l[1]]),o):t},o.radius=function(l){return arguments.length?(e=typeof l=="function"?l:Tn(+l),o):e},o.precision=function(l){return arguments.length?(n=typeof l=="function"?l:Tn(+l),o):n},o}function r0(){var t=[],e;return{point:function(n,i,a){e.push([n,i,a])},lineStart:function(){t.push(e=[])},lineEnd:ot,rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))},result:function(){var n=t;return t=[],e=null,n}}}function or(t,e){return Q(t[0]-e[0])<G&&Q(t[1]-e[1])<G}function Ea(t,e,n,i){this.x=t,this.z=e,this.o=n,this.e=i,this.v=!1,this.n=this.p=null}function s0(t,e,n,i,a){var r=[],s=[],o,l;if(t.forEach(function(p){if(!((g=p.length-1)<=0)){var g,m=p[0],b=p[g],v;if(or(m,b)){if(!m[2]&&!b[2]){for(a.lineStart(),o=0;o<g;++o)a.point((m=p[o])[0],m[1]);a.lineEnd();return}b[0]+=2*G}r.push(v=new Ea(m,p,null,!0)),s.push(v.o=new Ea(m,null,v,!1)),r.push(v=new Ea(b,p,null,!1)),s.push(v.o=new Ea(b,null,v,!0))}}),!!r.length){for(s.sort(e),cu(r),cu(s),o=0,l=s.length;o<l;++o)s[o].e=n=!n;for(var c=r[0],h,f;;){for(var u=c,d=!0;u.v;)if((u=u.n)===c)return;h=u.z,a.lineStart();do{if(u.v=u.o.v=!0,u.e){if(d)for(o=0,l=h.length;o<l;++o)a.point((f=h[o])[0],f[1]);else i(u.x,u.n.x,1,a);u=u.n}else{if(d)for(h=u.p.z,o=h.length-1;o>=0;--o)a.point((f=h[o])[0],f[1]);else i(u.x,u.p.x,-1,a);u=u.p}u=u.o,h=u.z,d=!d}while(!u.v);a.lineEnd()}}}function cu(t){if(e=t.length){for(var e,n=0,i=t[0],a;++n<e;)i.n=a=t[n],a.p=i,i=a;i.n=a=t[0],a.p=i}}var po=qe();function go(t){return Q(t[0])<=q?t[0]:qt(t[0])*((Q(t[0])+q)%Rt-q)}function o0(t,e){var n=go(e),i=e[1],a=N(i),r=[N(n),-H(n),0],s=0,o=0;po.reset(),a===1?i=ct+G:a===-1&&(i=-ct-G);for(var l=0,c=t.length;l<c;++l)if(f=(h=t[l]).length)for(var h,f,u=h[f-1],d=go(u),p=u[1]/2+Mr,g=N(p),m=H(p),b=0;b<f;++b,d=y,g=M,m=S,u=v){var v=h[b],y=go(v),x=v[1]/2+Mr,M=N(x),S=H(x),k=y-d,I=k>=0?1:-1,C=I*k,T=C>q,L=g*M;if(po.add(Pt(L*I*N(C),m*S+L*H(C))),s+=T?k+I*Rt:k,T^d>=n^y>=n){var _=qn(un(u),un(v));Cr(_);var A=qn(r,_);Cr(A);var P=(T^k>=0?-1:1)*Et(A[2]);(i>P||i===P&&(_[0]||_[1]))&&(o+=T^k>=0?1:-1)}}return(s<-G||s<G&&po<-G)^o&1}function l0(t,e,n,i){return function(a){var r=e(a),s=r0(),o=e(s),l=!1,c,h,f,u={point:d,lineStart:g,lineEnd:m,polygonStart:function(){u.point=b,u.lineStart=v,u.lineEnd=y,h=[],c=[]},polygonEnd:function(){u.point=d,u.lineStart=g,u.lineEnd=m,h=Hl(h);var x=o0(c,i);h.length?(l||(a.polygonStart(),l=!0),s0(h,Z2,x,n,a)):x&&(l||(a.polygonStart(),l=!0),a.lineStart(),n(null,null,1,a),a.lineEnd()),l&&(a.polygonEnd(),l=!1),h=c=null},sphere:function(){a.polygonStart(),a.lineStart(),n(null,null,1,a),a.lineEnd(),a.polygonEnd()}};function d(x,M){t(x,M)&&a.point(x,M)}function p(x,M){r.point(x,M)}function g(){u.point=p,r.lineStart()}function m(){u.point=d,r.lineEnd()}function b(x,M){f.push([x,M]),o.point(x,M)}function v(){o.lineStart(),f=[]}function y(){b(f[0][0],f[0][1]),o.lineEnd();var x=o.clean(),M=s.result(),S,k=M.length,I,C,T;if(f.pop(),c.push(f),f=null,!!k){if(x&1){if(C=M[0],(I=C.length-1)>0){for(l||(a.polygonStart(),l=!0),a.lineStart(),S=0;S<I;++S)a.point((T=C[S])[0],T[1]);a.lineEnd()}return}k>1&&x&2&&M.push(M.pop().concat(M.shift())),h.push(M.filter(q2))}}return u}}function q2(t){return t.length>1}function Z2(t,e){return((t=t.x)[0]<0?t[1]-ct-G:ct-t[1])-((e=e.x)[0]<0?e[1]-ct-G:ct-e[1])}const gl=l0(function(){return!0},K2,J2,[-q,-ct]);function K2(t){var e=NaN,n=NaN,i=NaN,a;return{lineStart:function(){t.lineStart(),a=1},point:function(r,s){var o=r>0?q:-q,l=Q(r-e);Q(l-q)<G?(t.point(e,n=(n+s)/2>0?ct:-ct),t.point(i,n),t.lineEnd(),t.lineStart(),t.point(o,n),t.point(r,n),a=0):i!==o&&l>=q&&(Q(e-i)<G&&(e-=i*G),Q(r-o)<G&&(r-=o*G),n=Q2(e,n,r,s),t.point(i,n),t.lineEnd(),t.lineStart(),t.point(o,n),a=0),t.point(e=r,n=s),i=o},lineEnd:function(){t.lineEnd(),e=n=NaN},clean:function(){return 2-a}}}function Q2(t,e,n,i){var a,r,s=N(t-n);return Q(s)>G?ni((N(e)*(r=H(i))*N(n)-N(i)*(a=H(e))*N(t))/(a*r*s)):(e+i)/2}function J2(t,e,n,i){var a;if(t==null)a=n*ct,i.point(-q,a),i.point(0,a),i.point(q,a),i.point(q,0),i.point(q,-a),i.point(0,-a),i.point(-q,-a),i.point(-q,0),i.point(-q,a);else if(Q(t[0]-e[0])>G){var r=t[0]<e[0]?q:-q;a=n*r/2,i.point(-r,a),i.point(0,a),i.point(r,a)}else i.point(e[0],e[1])}function c0(t){var e=H(t),n=6*B,i=e>0,a=Q(e)>G;function r(h,f,u,d){a0(d,t,n,u,h,f)}function s(h,f){return H(h)*H(f)>e}function o(h){var f,u,d,p,g;return{lineStart:function(){p=d=!1,g=1},point:function(m,b){var v=[m,b],y,x=s(m,b),M=i?x?0:c(m,b):x?c(m+(m<0?q:-q),b):0;if(!f&&(p=d=x)&&h.lineStart(),x!==d&&(y=l(f,v),(!y||or(f,y)||or(v,y))&&(v[2]=1)),x!==d)g=0,x?(h.lineStart(),y=l(v,f),h.point(y[0],y[1])):(y=l(f,v),h.point(y[0],y[1],2),h.lineEnd()),f=y;else if(a&&f&&i^x){var S;!(M&u)&&(S=l(v,f,!0))&&(g=0,i?(h.lineStart(),h.point(S[0][0],S[0][1]),h.point(S[1][0],S[1][1]),h.lineEnd()):(h.point(S[1][0],S[1][1]),h.lineEnd(),h.lineStart(),h.point(S[0][0],S[0][1],3)))}x&&(!f||!or(f,v))&&h.point(v[0],v[1]),f=v,d=x,u=M},lineEnd:function(){d&&h.lineEnd(),f=null},clean:function(){return g|(p&&d)<<1}}}function l(h,f,u){var d=un(h),p=un(f),g=[1,0,0],m=qn(d,p),b=Ra(m,m),v=m[0],y=b-v*v;if(!y)return!u&&h;var x=e*b/y,M=-e*v/y,S=qn(g,m),k=Pa(g,x),I=Pa(m,M);fo(k,I);var C=S,T=Ra(k,C),L=Ra(C,C),_=T*T-L*(Ra(k,k)-1);if(!(_<0)){var A=ft(_),P=Pa(C,(-T-A)/L);if(fo(P,k),P=Lr(P),!u)return P;var D=h[0],R=f[0],z=h[1],Y=f[1],X;R<D&&(X=D,D=R,R=X);var W=R-D,U=Q(W-q)<G,rt=U||W<G;if(!U&&Y<z&&(X=z,z=Y,Y=X),rt?U?z+Y>0^P[1]<(Q(P[0]-D)<G?z:Y):z<=P[1]&&P[1]<=Y:W>q^(D<=P[0]&&P[0]<=R)){var et=Pa(C,(-T+A)/L);return fo(et,k),[P,Lr(et)]}}}function c(h,f){var u=i?t:q-t,d=0;return h<-u?d|=1:h>u&&(d|=2),f<-u?d|=4:f>u&&(d|=8),d}return l0(s,o,r,i?[0,-t]:[-q,t-q])}function j2(t,e,n,i,a,r){var s=t[0],o=t[1],l=e[0],c=e[1],h=0,f=1,u=l-s,d=c-o,p;if(p=n-s,!(!u&&p>0)){if(p/=u,u<0){if(p<h)return;p<f&&(f=p)}else if(u>0){if(p>f)return;p>h&&(h=p)}if(p=a-s,!(!u&&p<0)){if(p/=u,u<0){if(p>f)return;p>h&&(h=p)}else if(u>0){if(p<h)return;p<f&&(f=p)}if(p=i-o,!(!d&&p>0)){if(p/=d,d<0){if(p<h)return;p<f&&(f=p)}else if(d>0){if(p>f)return;p>h&&(h=p)}if(p=r-o,!(!d&&p<0)){if(p/=d,d<0){if(p>f)return;p>h&&(h=p)}else if(d>0){if(p<h)return;p<f&&(f=p)}return h>0&&(t[0]=s+h*u,t[1]=o+h*d),f<1&&(e[0]=s+f*u,e[1]=o+f*d),!0}}}}}var ki=1e9,$a=-ki;function Ls(t,e,n,i){function a(c,h){return t<=c&&c<=n&&e<=h&&h<=i}function r(c,h,f,u){var d=0,p=0;if(c==null||(d=s(c,f))!==(p=s(h,f))||l(c,h)<0^f>0)do u.point(d===0||d===3?t:n,d>1?i:e);while((d=(d+f+4)%4)!==p);else u.point(h[0],h[1])}function s(c,h){return Q(c[0]-t)<G?h>0?0:3:Q(c[0]-n)<G?h>0?2:1:Q(c[1]-e)<G?h>0?1:0:h>0?3:2}function o(c,h){return l(c.x,h.x)}function l(c,h){var f=s(c,1),u=s(h,1);return f!==u?f-u:f===0?h[1]-c[1]:f===1?c[0]-h[0]:f===2?c[1]-h[1]:h[0]-c[0]}return function(c){var h=c,f=r0(),u,d,p,g,m,b,v,y,x,M,S,k={point:I,lineStart:_,lineEnd:A,polygonStart:T,polygonEnd:L};function I(D,R){a(D,R)&&h.point(D,R)}function C(){for(var D=0,R=0,z=d.length;R<z;++R)for(var Y=d[R],X=1,W=Y.length,U=Y[0],rt,et,J=U[0],ht=U[1];X<W;++X)rt=J,et=ht,U=Y[X],J=U[0],ht=U[1],et<=i?ht>i&&(J-rt)*(i-et)>(ht-et)*(t-rt)&&++D:ht<=i&&(J-rt)*(i-et)<(ht-et)*(t-rt)&&--D;return D}function T(){h=f,u=[],d=[],S=!0}function L(){var D=C(),R=S&&D,z=(u=Hl(u)).length;(R||z)&&(c.polygonStart(),R&&(c.lineStart(),r(null,null,1,c),c.lineEnd()),z&&s0(u,o,D,r,c),c.polygonEnd()),h=c,u=d=p=null}function _(){k.point=P,d&&d.push(p=[]),M=!0,x=!1,v=y=NaN}function A(){u&&(P(g,m),b&&x&&f.rejoin(),u.push(f.result())),k.point=I,x&&h.lineEnd()}function P(D,R){var z=a(D,R);if(d&&p.push([D,R]),M)g=D,m=R,b=z,M=!1,z&&(h.lineStart(),h.point(D,R));else if(z&&x)h.point(D,R);else{var Y=[v=Math.max($a,Math.min(ki,v)),y=Math.max($a,Math.min(ki,y))],X=[D=Math.max($a,Math.min(ki,D)),R=Math.max($a,Math.min(ki,R))];j2(Y,X,t,e,n,i)?(x||(h.lineStart(),h.point(Y[0],Y[1])),h.point(X[0],X[1]),z||h.lineEnd(),S=!1):z&&(h.lineStart(),h.point(D,R),S=!1)}v=D,y=R,x=z}return k}}function t_(){var t=0,e=0,n=960,i=500,a,r,s;return s={stream:function(o){return a&&r===o?a:a=Ls(t,e,n,i)(r=o)},extent:function(o){return arguments.length?(t=+o[0][0],e=+o[0][1],n=+o[1][0],i=+o[1][1],a=r=null,s):[[t,e],[n,i]]}}}var ml=qe(),bl,lr,cr,Zn={sphere:ot,point:ot,lineStart:e_,lineEnd:ot,polygonStart:ot,polygonEnd:ot};function e_(){Zn.point=i_,Zn.lineEnd=n_}function n_(){Zn.point=Zn.lineEnd=ot}function i_(t,e){t*=B,e*=B,bl=t,lr=N(e),cr=H(e),Zn.point=a_}function a_(t,e){t*=B,e*=B;var n=N(e),i=H(e),a=Q(t-bl),r=H(a),s=N(a),o=i*s,l=cr*n-lr*i*r,c=lr*n+cr*i*r;ml.add(Pt(ft(o*o+l*l),c)),bl=t,lr=n,cr=i}function h0(t){return ml.reset(),jt(t,Zn),+ml}var yl=[null,null],r_={type:"LineString",coordinates:yl};function Nr(t,e){return yl[0]=t,yl[1]=e,h0(r_)}var hu={Feature:function(t,e){return zr(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,i=-1,a=n.length;++i<a;)if(zr(n[i].geometry,e))return!0;return!1}},uu={Sphere:function(){return!0},Point:function(t,e){return fu(t.coordinates,e)},MultiPoint:function(t,e){for(var n=t.coordinates,i=-1,a=n.length;++i<a;)if(fu(n[i],e))return!0;return!1},LineString:function(t,e){return du(t.coordinates,e)},MultiLineString:function(t,e){for(var n=t.coordinates,i=-1,a=n.length;++i<a;)if(du(n[i],e))return!0;return!1},Polygon:function(t,e){return pu(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,i=-1,a=n.length;++i<a;)if(pu(n[i],e))return!0;return!1},GeometryCollection:function(t,e){for(var n=t.geometries,i=-1,a=n.length;++i<a;)if(zr(n[i],e))return!0;return!1}};function zr(t,e){return t&&uu.hasOwnProperty(t.type)?uu[t.type](t,e):!1}function fu(t,e){return Nr(t,e)===0}function du(t,e){for(var n,i,a,r=0,s=t.length;r<s;r++){if(i=Nr(t[r],e),i===0||r>0&&(a=Nr(t[r],t[r-1]),a>0&&n<=a&&i<=a&&(n+i-a)*(1-Math.pow((n-i)/a,2))<wr*a))return!0;n=i}return!1}function pu(t,e){return!!o0(t.map(s_),u0(e))}function s_(t){return t=t.map(u0),t.pop(),t}function u0(t){return[t[0]*B,t[1]*B]}function o_(t,e){return(t&&hu.hasOwnProperty(t.type)?hu[t.type]:zr)(t,e)}function gu(t,e,n){var i=Gt(t,e-G,n).concat(e);return function(a){return i.map(function(r){return[a,r]})}}function mu(t,e,n){var i=Gt(t,e-G,n).concat(e);return function(a){return i.map(function(r){return[r,a]})}}function f0(){var t,e,n,i,a,r,s,o,l=10,c=l,h=90,f=360,u,d,p,g,m=2.5;function b(){return{type:"MultiLineString",coordinates:v()}}function v(){return Gt(Ia(i/h)*h,n,h).map(p).concat(Gt(Ia(o/f)*f,s,f).map(g)).concat(Gt(Ia(e/l)*l,t,l).filter(function(y){return Q(y%h)>G}).map(u)).concat(Gt(Ia(r/c)*c,a,c).filter(function(y){return Q(y%f)>G}).map(d))}return b.lines=function(){return v().map(function(y){return{type:"LineString",coordinates:y}})},b.outline=function(){return{type:"Polygon",coordinates:[p(i).concat(g(s).slice(1),p(n).reverse().slice(1),g(o).reverse().slice(1))]}},b.extent=function(y){return arguments.length?b.extentMajor(y).extentMinor(y):b.extentMinor()},b.extentMajor=function(y){return arguments.length?(i=+y[0][0],n=+y[1][0],o=+y[0][1],s=+y[1][1],i>n&&(y=i,i=n,n=y),o>s&&(y=o,o=s,s=y),b.precision(m)):[[i,o],[n,s]]},b.extentMinor=function(y){return arguments.length?(e=+y[0][0],t=+y[1][0],r=+y[0][1],a=+y[1][1],e>t&&(y=e,e=t,t=y),r>a&&(y=r,r=a,a=y),b.precision(m)):[[e,r],[t,a]]},b.step=function(y){return arguments.length?b.stepMajor(y).stepMinor(y):b.stepMinor()},b.stepMajor=function(y){return arguments.length?(h=+y[0],f=+y[1],b):[h,f]},b.stepMinor=function(y){return arguments.length?(l=+y[0],c=+y[1],b):[l,c]},b.precision=function(y){return arguments.length?(m=+y,u=gu(r,a,90),d=mu(e,t,m),p=gu(o,s,90),g=mu(i,n,m),b):m},b.extentMajor([[-180,-90+G],[180,90-G]]).extentMinor([[-180,-80-G],[180,80+G]])}function l_(){return f0()()}function c_(t,e){var n=t[0]*B,i=t[1]*B,a=e[0]*B,r=e[1]*B,s=H(i),o=N(i),l=H(r),c=N(r),h=s*H(n),f=s*N(n),u=l*H(a),d=l*N(a),p=2*Et(ft(Kh(r-i)+s*l*Kh(a-n))),g=N(p),m=p?function(b){var v=N(b*=p)/g,y=N(p-b)/g,x=y*h+v*u,M=y*f+v*d,S=y*o+v*c;return[Pt(M,x)*it,Pt(S,ft(x*x+M*M))*it]}:function(){return[n*it,i*it]};return m.distance=p,m}function ji(t){return t}var mo=qe(),vl=qe(),d0,p0,xl,_l,Ie={point:ot,lineStart:ot,lineEnd:ot,polygonStart:function(){Ie.lineStart=h_,Ie.lineEnd=f_},polygonEnd:function(){Ie.lineStart=Ie.lineEnd=Ie.point=ot,mo.add(Q(vl)),vl.reset()},result:function(){var t=mo/2;return mo.reset(),t}};function h_(){Ie.point=u_}function u_(t,e){Ie.point=g0,d0=xl=t,p0=_l=e}function g0(t,e){vl.add(_l*t-xl*e),xl=t,_l=e}function f_(){g0(d0,p0)}const bu=Ie;var Kn=1/0,Xr=Kn,ta=-Kn,Hr=ta,d_={point:p_,lineStart:ot,lineEnd:ot,polygonStart:ot,polygonEnd:ot,result:function(){var t=[[Kn,Xr],[ta,Hr]];return ta=Hr=-(Xr=Kn=1/0),t}};function p_(t,e){t<Kn&&(Kn=t),t>ta&&(ta=t),e<Xr&&(Xr=e),e>Hr&&(Hr=e)}const Gr=d_;var wl=0,Ml=0,Di=0,Br=0,Or=0,En=0,kl=0,Dl=0,Si=0,m0,b0,ue,fe,te={point:fn,lineStart:yu,lineEnd:vu,polygonStart:function(){te.lineStart=b_,te.lineEnd=y_},polygonEnd:function(){te.point=fn,te.lineStart=yu,te.lineEnd=vu},result:function(){var t=Si?[kl/Si,Dl/Si]:En?[Br/En,Or/En]:Di?[wl/Di,Ml/Di]:[NaN,NaN];return wl=Ml=Di=Br=Or=En=kl=Dl=Si=0,t}};function fn(t,e){wl+=t,Ml+=e,++Di}function yu(){te.point=g_}function g_(t,e){te.point=m_,fn(ue=t,fe=e)}function m_(t,e){var n=t-ue,i=e-fe,a=ft(n*n+i*i);Br+=a*(ue+t)/2,Or+=a*(fe+e)/2,En+=a,fn(ue=t,fe=e)}function vu(){te.point=fn}function b_(){te.point=v_}function y_(){y0(m0,b0)}function v_(t,e){te.point=y0,fn(m0=ue=t,b0=fe=e)}function y0(t,e){var n=t-ue,i=e-fe,a=ft(n*n+i*i);Br+=a*(ue+t)/2,Or+=a*(fe+e)/2,En+=a,a=fe*t-ue*e,kl+=a*(ue+t),Dl+=a*(fe+e),Si+=a*3,fn(ue=t,fe=e)}const xu=te;function v0(t){this._context=t}v0.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(t,e){switch(this._point){case 0:{this._context.moveTo(t,e),this._point=1;break}case 1:{this._context.lineTo(t,e);break}default:{this._context.moveTo(t+this._radius,e),this._context.arc(t,e,this._radius,0,Rt);break}}},result:ot};var Sl=qe(),bo,x0,_0,Ai,Li,Wr={point:ot,lineStart:function(){Wr.point=x_},lineEnd:function(){bo&&w0(x0,_0),Wr.point=ot},polygonStart:function(){bo=!0},polygonEnd:function(){bo=null},result:function(){var t=+Sl;return Sl.reset(),t}};function x_(t,e){Wr.point=w0,x0=Ai=t,_0=Li=e}function w0(t,e){Ai-=t,Li-=e,Sl.add(ft(Ai*Ai+Li*Li)),Ai=t,Li=e}const _u=Wr;function M0(){this._string=[]}M0.prototype={_radius:4.5,_circle:wu(4.5),pointRadius:function(t){return(t=+t)!==this._radius&&(this._radius=t,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._string.push("Z"),this._point=NaN},point:function(t,e){switch(this._point){case 0:{this._string.push("M",t,",",e),this._point=1;break}case 1:{this._string.push("L",t,",",e);break}default:{this._circle==null&&(this._circle=wu(this._radius)),this._string.push("M",t,",",e,this._circle);break}}},result:function(){if(this._string.length){var t=this._string.join("");return this._string=[],t}else return null}};function wu(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}function __(t,e){var n=4.5,i,a;function r(s){return s&&(typeof n=="function"&&a.pointRadius(+n.apply(this,arguments)),jt(s,i(a))),a.result()}return r.area=function(s){return jt(s,i(bu)),bu.result()},r.measure=function(s){return jt(s,i(_u)),_u.result()},r.bounds=function(s){return jt(s,i(Gr)),Gr.result()},r.centroid=function(s){return jt(s,i(xu)),xu.result()},r.projection=function(s){return arguments.length?(i=s==null?(t=null,ji):(t=s).stream,r):t},r.context=function(s){return arguments.length?(a=s==null?(e=null,new M0):new v0(e=s),typeof n!="function"&&a.pointRadius(n),r):e},r.pointRadius=function(s){return arguments.length?(n=typeof s=="function"?s:(a.pointRadius(+s),+s),r):n},r.projection(t).context(e)}function w_(t){return{stream:ga(t)}}function ga(t){return function(e){var n=new Al;for(var i in t)n[i]=t[i];return n.stream=e,n}}function Al(){}Al.prototype={constructor:Al,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function uc(t,e,n){var i=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),i!=null&&t.clipExtent(null),jt(n,t.stream(Gr)),e(Gr.result()),i!=null&&t.clipExtent(i),t}function Cs(t,e,n){return uc(t,function(i){var a=e[1][0]-e[0][0],r=e[1][1]-e[0][1],s=Math.min(a/(i[1][0]-i[0][0]),r/(i[1][1]-i[0][1])),o=+e[0][0]+(a-s*(i[1][0]+i[0][0]))/2,l=+e[0][1]+(r-s*(i[1][1]+i[0][1]))/2;t.scale(150*s).translate([o,l])},n)}function fc(t,e,n){return Cs(t,[[0,0],e],n)}function dc(t,e,n){return uc(t,function(i){var a=+e,r=a/(i[1][0]-i[0][0]),s=(a-r*(i[1][0]+i[0][0]))/2,o=-r*i[0][1];t.scale(150*r).translate([s,o])},n)}function pc(t,e,n){return uc(t,function(i){var a=+e,r=a/(i[1][1]-i[0][1]),s=-r*i[0][0],o=(a-r*(i[1][1]+i[0][1]))/2;t.scale(150*r).translate([s,o])},n)}var Mu=16,M_=H(30*B);function ku(t,e){return+e?D_(t,e):k_(t)}function k_(t){return ga({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}function D_(t,e){function n(i,a,r,s,o,l,c,h,f,u,d,p,g,m){var b=c-i,v=h-a,y=b*b+v*v;if(y>4*e&&g--){var x=s+u,M=o+d,S=l+p,k=ft(x*x+M*M+S*S),I=Et(S/=k),C=Q(Q(S)-1)<G||Q(r-f)<G?(r+f)/2:Pt(M,x),T=t(C,I),L=T[0],_=T[1],A=L-i,P=_-a,D=v*A-b*P;(D*D/y>e||Q((b*A+v*P)/y-.5)>.3||s*u+o*d+l*p<M_)&&(n(i,a,r,s,o,l,L,_,C,x/=k,M/=k,S,g,m),m.point(L,_),n(L,_,C,x,M,S,c,h,f,u,d,p,g,m))}}return function(i){var a,r,s,o,l,c,h,f,u,d,p,g,m={point:b,lineStart:v,lineEnd:x,polygonStart:function(){i.polygonStart(),m.lineStart=M},polygonEnd:function(){i.polygonEnd(),m.lineStart=v}};function b(I,C){I=t(I,C),i.point(I[0],I[1])}function v(){f=NaN,m.point=y,i.lineStart()}function y(I,C){var T=un([I,C]),L=t(I,C);n(f,u,h,d,p,g,f=L[0],u=L[1],h=I,d=T[0],p=T[1],g=T[2],Mu,i),i.point(f,u)}function x(){m.point=b,i.lineEnd()}function M(){v(),m.point=S,m.lineEnd=k}function S(I,C){y(a=I,C),r=f,s=u,o=d,l=p,c=g,m.point=y}function k(){n(f,u,h,d,p,g,r,s,a,o,l,c,Mu,i),m.lineEnd=x,x()}return m}}var S_=ga({point:function(t,e){this.stream.point(t*B,e*B)}});function A_(t){return ga({point:function(e,n){var i=t(e,n);return this.stream.point(i[0],i[1])}})}function L_(t,e,n,i,a){function r(s,o){return s*=i,o*=a,[e+t*s,n-t*o]}return r.invert=function(s,o){return[(s-e)/t*i,(n-o)/t*a]},r}function Du(t,e,n,i,a,r){var s=H(r),o=N(r),l=s*t,c=o*t,h=s/t,f=o/t,u=(o*n-s*e)/t,d=(o*e+s*n)/t;function p(g,m){return g*=i,m*=a,[l*g-c*m+e,n-c*g-l*m]}return p.invert=function(g,m){return[i*(h*g-f*m+u),a*(d-f*g-h*m)]},p}function be(t){return gc(function(){return t})()}function gc(t){var e,n=150,i=480,a=250,r=0,s=0,o=0,l=0,c=0,h,f=0,u=1,d=1,p=null,g=gl,m=null,b,v,y,x=ji,M=.5,S,k,I,C,T;function L(D){return I(D[0]*B,D[1]*B)}function _(D){return D=I.invert(D[0],D[1]),D&&[D[0]*it,D[1]*it]}L.stream=function(D){return C&&T===D?C:C=S_(A_(h)(g(S(x(T=D)))))},L.preclip=function(D){return arguments.length?(g=D,p=void 0,P()):g},L.postclip=function(D){return arguments.length?(x=D,m=b=v=y=null,P()):x},L.clipAngle=function(D){return arguments.length?(g=+D?c0(p=D*B):(p=null,gl),P()):p*it},L.clipExtent=function(D){return arguments.length?(x=D==null?(m=b=v=y=null,ji):Ls(m=+D[0][0],b=+D[0][1],v=+D[1][0],y=+D[1][1]),P()):m==null?null:[[m,b],[v,y]]},L.scale=function(D){return arguments.length?(n=+D,A()):n},L.translate=function(D){return arguments.length?(i=+D[0],a=+D[1],A()):[i,a]},L.center=function(D){return arguments.length?(r=D[0]%360*B,s=D[1]%360*B,A()):[r*it,s*it]},L.rotate=function(D){return arguments.length?(o=D[0]%360*B,l=D[1]%360*B,c=D.length>2?D[2]%360*B:0,A()):[o*it,l*it,c*it]},L.angle=function(D){return arguments.length?(f=D%360*B,A()):f*it},L.reflectX=function(D){return arguments.length?(u=D?-1:1,A()):u<0},L.reflectY=function(D){return arguments.length?(d=D?-1:1,A()):d<0},L.precision=function(D){return arguments.length?(S=ku(k,M=D*D),P()):ft(M)},L.fitExtent=function(D,R){return Cs(L,D,R)},L.fitSize=function(D,R){return fc(L,D,R)},L.fitWidth=function(D,R){return dc(L,D,R)},L.fitHeight=function(D,R){return pc(L,D,R)};function A(){var D=Du(n,0,0,u,d,f).apply(null,e(r,s)),R=(f?Du:L_)(n,i-D[0],a-D[1],u,d,f);return h=hc(o,l,c),k=dl(e,R),I=dl(h,k),S=ku(k,M),P()}function P(){return C=T=null,L}return function(){return e=t.apply(this,arguments),L.invert=e.invert&&_,A()}}function mc(t){var e=0,n=q/3,i=gc(t),a=i(e,n);return a.parallels=function(r){return arguments.length?i(e=r[0]*B,n=r[1]*B):[e*it,n*it]},a}function C_(t){var e=H(t);function n(i,a){return[i*e,N(a)/e]}return n.invert=function(i,a){return[i/e,Et(a*e)]},n}function k0(t,e){var n=N(t),i=(n+N(e))/2;if(Q(i)<G)return C_(t);var a=1+n*(2*i-n),r=ft(a)/i;function s(o,l){var c=ft(a-2*i*N(l))/i;return[c*N(o*=i),r-c*H(o)]}return s.invert=function(o,l){var c=r-l,h=Pt(o,Q(c))*qt(c);return c*i<0&&(h-=q*qt(o)*qt(c)),[h/i,Et((a-(o*o+c*c)*i*i)/(2*i))]},s}function Ur(){return mc(k0).scale(155.424).center([0,33.6442])}function D0(){return Ur().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function T_(t){var e=t.length;return{point:function(n,i){for(var a=-1;++a<e;)t[a].point(n,i)},sphere:function(){for(var n=-1;++n<e;)t[n].sphere()},lineStart:function(){for(var n=-1;++n<e;)t[n].lineStart()},lineEnd:function(){for(var n=-1;++n<e;)t[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<e;)t[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<e;)t[n].polygonEnd()}}}function I_(){var t,e,n=D0(),i,a=Ur().rotate([154,0]).center([-2,58.5]).parallels([55,65]),r,s=Ur().rotate([157,0]).center([-3,19.9]).parallels([8,18]),o,l,c={point:function(u,d){l=[u,d]}};function h(u){var d=u[0],p=u[1];return l=null,i.point(d,p),l||(r.point(d,p),l)||(o.point(d,p),l)}h.invert=function(u){var d=n.scale(),p=n.translate(),g=(u[0]-p[0])/d,m=(u[1]-p[1])/d;return(m>=.12&&m<.234&&g>=-.425&&g<-.214?a:m>=.166&&m<.234&&g>=-.214&&g<-.115?s:n).invert(u)},h.stream=function(u){return t&&e===u?t:t=T_([n.stream(e=u),a.stream(u),s.stream(u)])},h.precision=function(u){return arguments.length?(n.precision(u),a.precision(u),s.precision(u),f()):n.precision()},h.scale=function(u){return arguments.length?(n.scale(u),a.scale(u*.35),s.scale(u),h.translate(n.translate())):n.scale()},h.translate=function(u){if(!arguments.length)return n.translate();var d=n.scale(),p=+u[0],g=+u[1];return i=n.translate(u).clipExtent([[p-.455*d,g-.238*d],[p+.455*d,g+.238*d]]).stream(c),r=a.translate([p-.307*d,g+.201*d]).clipExtent([[p-.425*d+G,g+.12*d+G],[p-.214*d-G,g+.234*d-G]]).stream(c),o=s.translate([p-.205*d,g+.212*d]).clipExtent([[p-.214*d+G,g+.166*d+G],[p-.115*d-G,g+.234*d-G]]).stream(c),f()},h.fitExtent=function(u,d){return Cs(h,u,d)},h.fitSize=function(u,d){return fc(h,u,d)},h.fitWidth=function(u,d){return dc(h,u,d)},h.fitHeight=function(u,d){return pc(h,u,d)};function f(){return t=e=null,h}return h.scale(1070)}function S0(t){return function(e,n){var i=H(e),a=H(n),r=t(i*a);return[r*a*N(e),r*N(n)]}}function ma(t){return function(e,n){var i=ft(e*e+n*n),a=t(i),r=N(a),s=H(a);return[Pt(e*r,i*s),Et(i&&n*r/i)]}}var bc=S0(function(t){return ft(2/(1+t))});bc.invert=ma(function(t){return 2*Et(t/2)});function R_(){return be(bc).scale(124.75).clipAngle(180-.001)}var yc=S0(function(t){return(t=Fd(t))&&t/N(t)});yc.invert=ma(function(t){return t});function P_(){return be(yc).scale(79.4188).clipAngle(180-.001)}function ba(t,e){return[t,kr(lc((ct+e)/2))]}ba.invert=function(t,e){return[t,2*ni(Ud(e))-ct]};function E_(){return A0(ba).scale(961/Rt)}function A0(t){var e=be(t),n=e.center,i=e.scale,a=e.translate,r=e.clipExtent,s=null,o,l,c;e.scale=function(f){return arguments.length?(i(f),h()):i()},e.translate=function(f){return arguments.length?(a(f),h()):a()},e.center=function(f){return arguments.length?(n(f),h()):n()},e.clipExtent=function(f){return arguments.length?(f==null?s=o=l=c=null:(s=+f[0][0],o=+f[0][1],l=+f[1][0],c=+f[1][1]),h()):s==null?null:[[s,o],[l,c]]};function h(){var f=q*i(),u=e(i0(e.rotate()).invert([0,0]));return r(s==null?[[u[0]-f,u[1]-f],[u[0]+f,u[1]+f]]:t===ba?[[Math.max(u[0]-f,s),o],[Math.min(u[0]+f,l),c]]:[[s,Math.max(u[1]-f,o)],[l,Math.min(u[1]+f,c)]])}return h()}function Ya(t){return lc((ct+t)/2)}function L0(t,e){var n=H(t),i=t===e?N(t):kr(n/H(e))/kr(Ya(e)/Ya(t)),a=n*uo(Ya(t),i)/i;if(!i)return ba;function r(s,o){a>0?o<-ct+G&&(o=-ct+G):o>ct-G&&(o=ct-G);var l=a/uo(Ya(o),i);return[l*N(i*s),a-l*H(i*s)]}return r.invert=function(s,o){var l=a-o,c=qt(i)*ft(s*s+l*l),h=Pt(s,Q(l))*qt(l);return l*i<0&&(h-=q*qt(s)*qt(l)),[h/i,2*ni(uo(a/c,1/i))-ct]},r}function $_(){return mc(L0).scale(109.5).parallels([30,30])}function ea(t,e){return[t,e]}ea.invert=ea;function Y_(){return be(ea).scale(152.63)}function C0(t,e){var n=H(t),i=t===e?N(t):(n-H(e))/(e-t),a=n/i+t;if(Q(i)<G)return ea;function r(s,o){var l=a-o,c=i*s;return[l*N(c),a-l*H(c)]}return r.invert=function(s,o){var l=a-o,c=Pt(s,Q(l))*qt(l);return l*i<0&&(c-=q*qt(s)*qt(l)),[c/i,a-qt(i)*ft(s*s+l*l)]},r}function N_(){return mc(C0).scale(131.154).center([0,13.9389])}var zi=1.340264,Xi=-.081106,Hi=893e-6,Gi=.003796,Fr=ft(3)/2,z_=12;function vc(t,e){var n=Et(Fr*N(e)),i=n*n,a=i*i*i;return[t*H(n)/(Fr*(zi+3*Xi*i+a*(7*Hi+9*Gi*i))),n*(zi+Xi*i+a*(Hi+Gi*i))]}vc.invert=function(t,e){for(var n=e,i=n*n,a=i*i*i,r=0,s,o,l;r<z_&&(o=n*(zi+Xi*i+a*(Hi+Gi*i))-e,l=zi+3*Xi*i+a*(7*Hi+9*Gi*i),n-=s=o/l,i=n*n,a=i*i*i,!(Q(s)<wr));++r);return[Fr*t*(zi+3*Xi*i+a*(7*Hi+9*Gi*i))/H(n),Et(N(n)/Fr)]};function X_(){return be(vc).scale(177.158)}function xc(t,e){var n=H(e),i=H(t)*n;return[n*N(t)/i,N(e)/i]}xc.invert=ma(ni);function H_(){return be(xc).scale(144.049).clipAngle(60)}function G_(){var t=1,e=0,n=0,i=1,a=1,r=0,s,o,l=null,c,h,f,u=1,d=1,p=ga({point:function(x,M){var S=y([x,M]);this.stream.point(S[0],S[1])}}),g=ji,m,b;function v(){return u=t*i,d=t*a,m=b=null,y}function y(x){var M=x[0]*u,S=x[1]*d;if(r){var k=S*s-M*o;M=M*s+S*o,S=k}return[M+e,S+n]}return y.invert=function(x){var M=x[0]-e,S=x[1]-n;if(r){var k=S*s+M*o;M=M*s-S*o,S=k}return[M/u,S/d]},y.stream=function(x){return m&&b===x?m:m=p(g(b=x))},y.postclip=function(x){return arguments.length?(g=x,l=c=h=f=null,v()):g},y.clipExtent=function(x){return arguments.length?(g=x==null?(l=c=h=f=null,ji):Ls(l=+x[0][0],c=+x[0][1],h=+x[1][0],f=+x[1][1]),v()):l==null?null:[[l,c],[h,f]]},y.scale=function(x){return arguments.length?(t=+x,v()):t},y.translate=function(x){return arguments.length?(e=+x[0],n=+x[1],v()):[e,n]},y.angle=function(x){return arguments.length?(r=x%360*B,o=N(r),s=H(r),v()):r*it},y.reflectX=function(x){return arguments.length?(i=x?-1:1,v()):i<0},y.reflectY=function(x){return arguments.length?(a=x?-1:1,v()):a<0},y.fitExtent=function(x,M){return Cs(y,x,M)},y.fitSize=function(x,M){return fc(y,x,M)},y.fitWidth=function(x,M){return dc(y,x,M)},y.fitHeight=function(x,M){return pc(y,x,M)},y}function _c(t,e){var n=e*e,i=n*n;return[t*(.8707-.131979*n+i*(-.013791+i*(.003971*n-.001529*i))),e*(1.007226+n*(.015085+i*(-.044475+.028874*n-.005916*i)))]}_c.invert=function(t,e){var n=e,i=25,a;do{var r=n*n,s=r*r;n-=a=(n*(1.007226+r*(.015085+s*(-.044475+.028874*r-.005916*s)))-e)/(1.007226+r*(.015085*3+s*(-.044475*7+.028874*9*r-.005916*11*s)))}while(Q(a)>G&&--i>0);return[t/(.8707+(r=n*n)*(-.131979+r*(-.013791+r*r*r*(.003971-.001529*r)))),n]};function B_(){return be(_c).scale(175.295)}function wc(t,e){return[H(e)*N(t),N(e)]}wc.invert=ma(Et);function O_(){return be(wc).scale(249.5).clipAngle(90+G)}function Mc(t,e){var n=H(e),i=1+H(t)*n;return[n*N(t)/i,N(e)/i]}Mc.invert=ma(function(t){return 2*ni(t)});function W_(){return be(Mc).scale(250).clipAngle(142)}function kc(t,e){return[kr(lc((ct+e)/2)),-t]}kc.invert=function(t,e){return[-e,2*ni(Ud(t))-ct]};function U_(){var t=A0(kc),e=t.center,n=t.rotate;return t.center=function(i){return arguments.length?e([-i[1],i[0]]):(i=e(),[i[1],-i[0]])},t.rotate=function(i){return arguments.length?n([i[0],i[1],i.length>2?i[2]+90:90]):(i=n(),[i[0],i[1],i[2]-90])},n([0,0,90]).scale(159.155)}function F_(t,e){return t.parent===e.parent?1:2}function V_(t){return t.reduce(q_,0)/t.length}function q_(t,e){return t+e.x}function Z_(t){return 1+t.reduce(K_,0)}function K_(t,e){return Math.max(t,e.y)}function Q_(t){for(var e;e=t.children;)t=e[0];return t}function J_(t){for(var e;e=t.children;)t=e[e.length-1];return t}function j_(){var t=F_,e=1,n=1,i=!1;function a(r){var s,o=0;r.eachAfter(function(u){var d=u.children;d?(u.x=V_(d),u.y=Z_(d)):(u.x=s?o+=t(u,s):0,u.y=0,s=u)});var l=Q_(r),c=J_(r),h=l.x-t(l,c)/2,f=c.x+t(c,l)/2;return r.eachAfter(i?function(u){u.x=(u.x-r.x)*e,u.y=(r.y-u.y)*n}:function(u){u.x=(u.x-h)/(f-h)*e,u.y=(1-(r.y?u.y/r.y:1))*n})}return a.separation=function(r){return arguments.length?(t=r,a):t},a.size=function(r){return arguments.length?(i=!1,e=+r[0],n=+r[1],a):i?null:[e,n]},a.nodeSize=function(r){return arguments.length?(i=!0,e=+r[0],n=+r[1],a):i?[e,n]:null},a}function tw(t){var e=0,n=t.children,i=n&&n.length;if(!i)e=1;else for(;--i>=0;)e+=n[i].value;t.value=e}function ew(){return this.eachAfter(tw)}function nw(t){var e=this,n,i=[e],a,r,s;do for(n=i.reverse(),i=[];e=n.pop();)if(t(e),a=e.children,a)for(r=0,s=a.length;r<s;++r)i.push(a[r]);while(i.length);return this}function iw(t){for(var e=this,n=[e],i,a;e=n.pop();)if(t(e),i=e.children,i)for(a=i.length-1;a>=0;--a)n.push(i[a]);return this}function aw(t){for(var e=this,n=[e],i=[],a,r,s;e=n.pop();)if(i.push(e),a=e.children,a)for(r=0,s=a.length;r<s;++r)n.push(a[r]);for(;e=i.pop();)t(e);return this}function rw(t){return this.eachAfter(function(e){for(var n=+t(e.data)||0,i=e.children,a=i&&i.length;--a>=0;)n+=i[a].value;e.value=n})}function sw(t){return this.eachBefore(function(e){e.children&&e.children.sort(t)})}function ow(t){for(var e=this,n=lw(e,t),i=[e];e!==n;)e=e.parent,i.push(e);for(var a=i.length;t!==n;)i.splice(a,0,t),t=t.parent;return i}function lw(t,e){if(t===e)return t;var n=t.ancestors(),i=e.ancestors(),a=null;for(t=n.pop(),e=i.pop();t===e;)a=t,t=n.pop(),e=i.pop();return a}function cw(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e}function hw(){var t=[];return this.each(function(e){t.push(e)}),t}function uw(){var t=[];return this.eachBefore(function(e){e.children||t.push(e)}),t}function fw(){var t=this,e=[];return t.each(function(n){n!==t&&e.push({source:n.parent,target:n})}),e}function Dc(t,e){var n=new Qn(t),i=+t.value&&(n.value=t.value),a,r=[n],s,o,l,c;for(e==null&&(e=pw);a=r.pop();)if(i&&(a.value=+a.data.value),(o=e(a.data))&&(c=o.length))for(a.children=new Array(c),l=c-1;l>=0;--l)r.push(s=a.children[l]=new Qn(o[l])),s.parent=a,s.depth=a.depth+1;return n.eachBefore(T0)}function dw(){return Dc(this).eachBefore(gw)}function pw(t){return t.children}function gw(t){t.data=t.data.data}function T0(t){var e=0;do t.height=e;while((t=t.parent)&&t.height<++e)}function Qn(t){this.data=t,this.depth=this.height=0,this.parent=null}Qn.prototype=Dc.prototype={constructor:Qn,count:ew,each:nw,eachAfter:aw,eachBefore:iw,sum:rw,sort:sw,path:ow,ancestors:cw,descendants:hw,leaves:uw,links:fw,copy:dw};var mw=Array.prototype.slice;function bw(t){for(var e=t.length,n,i;e;)i=Math.random()*e--|0,n=t[e],t[e]=t[i],t[i]=n;return t}function I0(t){for(var e=0,n=(t=bw(mw.call(t))).length,i=[],a,r;e<n;)a=t[e],r&&R0(r,a)?++e:(r=vw(i=yw(i,a)),e=0);return r}function yw(t,e){var n,i;if(yo(e,t))return[e];for(n=0;n<t.length;++n)if(Na(e,t[n])&&yo(Ci(t[n],e),t))return[t[n],e];for(n=0;n<t.length-1;++n)for(i=n+1;i<t.length;++i)if(Na(Ci(t[n],t[i]),e)&&Na(Ci(t[n],e),t[i])&&Na(Ci(t[i],e),t[n])&&yo(P0(t[n],t[i],e),t))return[t[n],t[i],e];throw new Error}function Na(t,e){var n=t.r-e.r,i=e.x-t.x,a=e.y-t.y;return n<0||n*n<i*i+a*a}function R0(t,e){var n=t.r-e.r+1e-6,i=e.x-t.x,a=e.y-t.y;return n>0&&n*n>i*i+a*a}function yo(t,e){for(var n=0;n<e.length;++n)if(!R0(t,e[n]))return!1;return!0}function vw(t){switch(t.length){case 1:return xw(t[0]);case 2:return Ci(t[0],t[1]);case 3:return P0(t[0],t[1],t[2])}}function xw(t){return{x:t.x,y:t.y,r:t.r}}function Ci(t,e){var n=t.x,i=t.y,a=t.r,r=e.x,s=e.y,o=e.r,l=r-n,c=s-i,h=o-a,f=Math.sqrt(l*l+c*c);return{x:(n+r+l/f*h)/2,y:(i+s+c/f*h)/2,r:(f+a+o)/2}}function P0(t,e,n){var i=t.x,a=t.y,r=t.r,s=e.x,o=e.y,l=e.r,c=n.x,h=n.y,f=n.r,u=i-s,d=i-c,p=a-o,g=a-h,m=l-r,b=f-r,v=i*i+a*a-r*r,y=v-s*s-o*o+l*l,x=v-c*c-h*h+f*f,M=d*p-u*g,S=(p*x-g*y)/(M*2)-i,k=(g*m-p*b)/M,I=(d*y-u*x)/(M*2)-a,C=(u*b-d*m)/M,T=k*k+C*C-1,L=2*(r+S*k+I*C),_=S*S+I*I-r*r,A=-(T?(L+Math.sqrt(L*L-4*T*_))/(2*T):_/L);return{x:i+S+k*A,y:a+I+C*A,r:A}}function Su(t,e,n){var i=t.x-e.x,a,r,s=t.y-e.y,o,l,c=i*i+s*s;c?(r=e.r+n.r,r*=r,l=t.r+n.r,l*=l,r>l?(a=(c+l-r)/(2*c),o=Math.sqrt(Math.max(0,l/c-a*a)),n.x=t.x-a*i-o*s,n.y=t.y-a*s+o*i):(a=(c+r-l)/(2*c),o=Math.sqrt(Math.max(0,r/c-a*a)),n.x=e.x+a*i-o*s,n.y=e.y+a*s+o*i)):(n.x=e.x+n.r,n.y=e.y)}function Au(t,e){var n=t.r+e.r-1e-6,i=e.x-t.x,a=e.y-t.y;return n>0&&n*n>i*i+a*a}function Lu(t){var e=t._,n=t.next._,i=e.r+n.r,a=(e.x*n.r+n.x*e.r)/i,r=(e.y*n.r+n.y*e.r)/i;return a*a+r*r}function za(t){this._=t,this.next=null,this.previous=null}function E0(t){if(!(a=t.length))return 0;var e,n,i,a,r,s,o,l,c,h,f;if(e=t[0],e.x=0,e.y=0,!(a>1))return e.r;if(n=t[1],e.x=-n.r,n.x=e.r,n.y=0,!(a>2))return e.r+n.r;Su(n,e,i=t[2]),e=new za(e),n=new za(n),i=new za(i),e.next=i.previous=n,n.next=e.previous=i,i.next=n.previous=e;t:for(o=3;o<a;++o){Su(e._,n._,i=t[o]),i=new za(i),l=n.next,c=e.previous,h=n._.r,f=e._.r;do if(h<=f){if(Au(l._,i._)){n=l,e.next=n,n.previous=e,--o;continue t}h+=l._.r,l=l.next}else{if(Au(c._,i._)){e=c,e.next=n,n.previous=e,--o;continue t}f+=c._.r,c=c.previous}while(l!==c.next);for(i.previous=e,i.next=n,e.next=n.previous=n=i,r=Lu(e);(i=i.next)!==n;)(s=Lu(i))<r&&(e=i,r=s);n=e.next}for(e=[n._],i=n;(i=i.next)!==n;)e.push(i._);for(i=I0(e),o=0;o<a;++o)e=t[o],e.x-=i.x,e.y-=i.y;return i.r}function _w(t){return E0(t),t}function ww(t){return t==null?null:Vr(t)}function Vr(t){if(typeof t!="function")throw new Error;return t}function tn(){return 0}function Pn(t){return function(){return t}}function Mw(t){return Math.sqrt(t.value)}function kw(){var t=null,e=1,n=1,i=tn;function a(r){return r.x=e/2,r.y=n/2,t?r.eachBefore(Cu(t)).eachAfter(vo(i,.5)).eachBefore(Tu(1)):r.eachBefore(Cu(Mw)).eachAfter(vo(tn,1)).eachAfter(vo(i,r.r/Math.min(e,n))).eachBefore(Tu(Math.min(e,n)/(2*r.r))),r}return a.radius=function(r){return arguments.length?(t=ww(r),a):t},a.size=function(r){return arguments.length?(e=+r[0],n=+r[1],a):[e,n]},a.padding=function(r){return arguments.length?(i=typeof r=="function"?r:Pn(+r),a):i},a}function Cu(t){return function(e){e.children||(e.r=Math.max(0,+t(e)||0))}}function vo(t,e){return function(n){if(i=n.children){var i,a,r=i.length,s=t(n)*e||0,o;if(s)for(a=0;a<r;++a)i[a].r+=s;if(o=E0(i),s)for(a=0;a<r;++a)i[a].r-=s;n.r=o+s}}}function Tu(t){return function(e){var n=e.parent;e.r*=t,n&&(e.x=n.x+t*e.x,e.y=n.y+t*e.y)}}function $0(t){t.x0=Math.round(t.x0),t.y0=Math.round(t.y0),t.x1=Math.round(t.x1),t.y1=Math.round(t.y1)}function ya(t,e,n,i,a){for(var r=t.children,s,o=-1,l=r.length,c=t.value&&(i-e)/t.value;++o<l;)s=r[o],s.y0=n,s.y1=a,s.x0=e,s.x1=e+=s.value*c}function Dw(){var t=1,e=1,n=0,i=!1;function a(s){var o=s.height+1;return s.x0=s.y0=n,s.x1=t,s.y1=e/o,s.eachBefore(r(e,o)),i&&s.eachBefore($0),s}function r(s,o){return function(l){l.children&&ya(l,l.x0,s*(l.depth+1)/o,l.x1,s*(l.depth+2)/o);var c=l.x0,h=l.y0,f=l.x1-n,u=l.y1-n;f<c&&(c=f=(c+f)/2),u<h&&(h=u=(h+u)/2),l.x0=c,l.y0=h,l.x1=f,l.y1=u}}return a.round=function(s){return arguments.length?(i=!!s,a):i},a.size=function(s){return arguments.length?(t=+s[0],e=+s[1],a):[t,e]},a.padding=function(s){return arguments.length?(n=+s,a):n},a}var Iu="$",Sw={depth:-1},Ru={};function Aw(t){return t.id}function Lw(t){return t.parentId}function Cw(){var t=Aw,e=Lw;function n(i){var a,r,s=i.length,o,l,c,h=new Array(s),f,u,d={};for(r=0;r<s;++r)a=i[r],c=h[r]=new Qn(a),(f=t(a,r,i))!=null&&(f+="")&&(u=Iu+(c.id=f),d[u]=u in d?Ru:c);for(r=0;r<s;++r)if(c=h[r],f=e(i[r],r,i),f==null||!(f+="")){if(o)throw new Error("multiple roots");o=c}else{if(l=d[Iu+f],!l)throw new Error("missing: "+f);if(l===Ru)throw new Error("ambiguous: "+f);l.children?l.children.push(c):l.children=[c],c.parent=l}if(!o)throw new Error("no root");if(o.parent=Sw,o.eachBefore(function(p){p.depth=p.parent.depth+1,--s}).eachBefore(T0),o.parent=null,s>0)throw new Error("cycle");return o}return n.id=function(i){return arguments.length?(t=Vr(i),n):t},n.parentId=function(i){return arguments.length?(e=Vr(i),n):e},n}function Tw(t,e){return t.parent===e.parent?1:2}function xo(t){var e=t.children;return e?e[0]:t.t}function _o(t){var e=t.children;return e?e[e.length-1]:t.t}function Iw(t,e,n){var i=n/(e.i-t.i);e.c-=i,e.s+=n,t.c+=i,e.z+=n,e.m+=n}function Rw(t){for(var e=0,n=0,i=t.children,a=i.length,r;--a>=0;)r=i[a],r.z+=e,r.m+=e,e+=r.s+(n+=r.c)}function Pw(t,e,n){return t.a.parent===e.parent?t.a:n}function hr(t,e){this._=t,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=e}hr.prototype=Object.create(Qn.prototype);function Ew(t){for(var e=new hr(t,0),n,i=[e],a,r,s,o;n=i.pop();)if(r=n._.children)for(n.children=new Array(o=r.length),s=o-1;s>=0;--s)i.push(a=n.children[s]=new hr(r[s],s)),a.parent=n;return(e.parent=new hr(null,0)).children=[e],e}function $w(){var t=Tw,e=1,n=1,i=null;function a(c){var h=Ew(c);if(h.eachAfter(r),h.parent.m=-h.z,h.eachBefore(s),i)c.eachBefore(l);else{var f=c,u=c,d=c;c.eachBefore(function(v){v.x<f.x&&(f=v),v.x>u.x&&(u=v),v.depth>d.depth&&(d=v)});var p=f===u?1:t(f,u)/2,g=p-f.x,m=e/(u.x+p+g),b=n/(d.depth||1);c.eachBefore(function(v){v.x=(v.x+g)*m,v.y=v.depth*b})}return c}function r(c){var h=c.children,f=c.parent.children,u=c.i?f[c.i-1]:null;if(h){Rw(c);var d=(h[0].z+h[h.length-1].z)/2;u?(c.z=u.z+t(c._,u._),c.m=c.z-d):c.z=d}else u&&(c.z=u.z+t(c._,u._));c.parent.A=o(c,u,c.parent.A||f[0])}function s(c){c._.x=c.z+c.parent.m,c.m+=c.parent.m}function o(c,h,f){if(h){for(var u=c,d=c,p=h,g=u.parent.children[0],m=u.m,b=d.m,v=p.m,y=g.m,x;p=_o(p),u=xo(u),p&&u;)g=xo(g),d=_o(d),d.a=c,x=p.z+v-u.z-m+t(p._,u._),x>0&&(Iw(Pw(p,c,f),c,x),m+=x,b+=x),v+=p.m,m+=u.m,y+=g.m,b+=d.m;p&&!_o(d)&&(d.t=p,d.m+=v-b),u&&!xo(g)&&(g.t=u,g.m+=m-y,f=c)}return f}function l(c){c.x*=e,c.y=c.depth*n}return a.separation=function(c){return arguments.length?(t=c,a):t},a.size=function(c){return arguments.length?(i=!1,e=+c[0],n=+c[1],a):i?null:[e,n]},a.nodeSize=function(c){return arguments.length?(i=!0,e=+c[0],n=+c[1],a):i?[e,n]:null},a}function Ts(t,e,n,i,a){for(var r=t.children,s,o=-1,l=r.length,c=t.value&&(a-n)/t.value;++o<l;)s=r[o],s.x0=e,s.x1=i,s.y0=n,s.y1=n+=s.value*c}var Y0=(1+Math.sqrt(5))/2;function N0(t,e,n,i,a,r){for(var s=[],o=e.children,l,c,h=0,f=0,u=o.length,d,p,g=e.value,m,b,v,y,x,M,S;h<u;){d=a-n,p=r-i;do m=o[f++].value;while(!m&&f<u);for(b=v=m,M=Math.max(p/d,d/p)/(g*t),S=m*m*M,x=Math.max(v/S,S/b);f<u;++f){if(m+=c=o[f].value,c<b&&(b=c),c>v&&(v=c),S=m*m*M,y=Math.max(v/S,S/b),y>x){m-=c;break}x=y}s.push(l={value:m,dice:d<p,children:o.slice(h,f)}),l.dice?ya(l,n,i,a,g?i+=p*m/g:r):Ts(l,n,i,g?n+=d*m/g:a,r),g-=m,h=f}return s}const z0=function t(e){function n(i,a,r,s,o){N0(e,i,a,r,s,o)}return n.ratio=function(i){return t((i=+i)>1?i:1)},n}(Y0);function Yw(){var t=z0,e=!1,n=1,i=1,a=[0],r=tn,s=tn,o=tn,l=tn,c=tn;function h(u){return u.x0=u.y0=0,u.x1=n,u.y1=i,u.eachBefore(f),a=[0],e&&u.eachBefore($0),u}function f(u){var d=a[u.depth],p=u.x0+d,g=u.y0+d,m=u.x1-d,b=u.y1-d;m<p&&(p=m=(p+m)/2),b<g&&(g=b=(g+b)/2),u.x0=p,u.y0=g,u.x1=m,u.y1=b,u.children&&(d=a[u.depth+1]=r(u)/2,p+=c(u)-d,g+=s(u)-d,m-=o(u)-d,b-=l(u)-d,m<p&&(p=m=(p+m)/2),b<g&&(g=b=(g+b)/2),t(u,p,g,m,b))}return h.round=function(u){return arguments.length?(e=!!u,h):e},h.size=function(u){return arguments.length?(n=+u[0],i=+u[1],h):[n,i]},h.tile=function(u){return arguments.length?(t=Vr(u),h):t},h.padding=function(u){return arguments.length?h.paddingInner(u).paddingOuter(u):h.paddingInner()},h.paddingInner=function(u){return arguments.length?(r=typeof u=="function"?u:Pn(+u),h):r},h.paddingOuter=function(u){return arguments.length?h.paddingTop(u).paddingRight(u).paddingBottom(u).paddingLeft(u):h.paddingTop()},h.paddingTop=function(u){return arguments.length?(s=typeof u=="function"?u:Pn(+u),h):s},h.paddingRight=function(u){return arguments.length?(o=typeof u=="function"?u:Pn(+u),h):o},h.paddingBottom=function(u){return arguments.length?(l=typeof u=="function"?u:Pn(+u),h):l},h.paddingLeft=function(u){return arguments.length?(c=typeof u=="function"?u:Pn(+u),h):c},h}function Nw(t,e,n,i,a){var r=t.children,s,o=r.length,l,c=new Array(o+1);for(c[0]=l=s=0;s<o;++s)c[s+1]=l+=r[s].value;h(0,o,t.value,e,n,i,a);function h(f,u,d,p,g,m,b){if(f>=u-1){var v=r[f];v.x0=p,v.y0=g,v.x1=m,v.y1=b;return}for(var y=c[f],x=d/2+y,M=f+1,S=u-1;M<S;){var k=M+S>>>1;c[k]<x?M=k+1:S=k}x-c[M-1]<c[M]-x&&f+1<M&&--M;var I=c[M]-y,C=d-I;if(m-p>b-g){var T=(p*C+m*I)/d;h(f,M,I,p,g,T,b),h(M,u,C,T,g,m,b)}else{var L=(g*C+b*I)/d;h(f,M,I,p,g,m,L),h(M,u,C,p,L,m,b)}}}function zw(t,e,n,i,a){(t.depth&1?Ts:ya)(t,e,n,i,a)}const Xw=function t(e){function n(i,a,r,s,o){if((l=i._squarify)&&l.ratio===e)for(var l,c,h,f,u=-1,d,p=l.length,g=i.value;++u<p;){for(c=l[u],h=c.children,f=c.value=0,d=h.length;f<d;++f)c.value+=h[f].value;c.dice?ya(c,a,r,s,r+=(o-r)*c.value/g):Ts(c,a,r,a+=(s-a)*c.value/g,o),g-=c.value}else i._squarify=l=N0(e,i,a,r,s,o),l.ratio=e}return n.ratio=function(i){return t((i=+i)>1?i:1)},n}(Y0);function Hw(t){for(var e=-1,n=t.length,i,a=t[n-1],r=0;++e<n;)i=a,a=t[e],r+=i[1]*a[0]-i[0]*a[1];return r/2}function Gw(t){for(var e=-1,n=t.length,i=0,a=0,r,s=t[n-1],o,l=0;++e<n;)r=s,s=t[e],l+=o=r[0]*s[1]-s[0]*r[1],i+=(r[0]+s[0])*o,a+=(r[1]+s[1])*o;return l*=3,[i/l,a/l]}function Bw(t,e,n){return(e[0]-t[0])*(n[1]-t[1])-(e[1]-t[1])*(n[0]-t[0])}function Ow(t,e){return t[0]-e[0]||t[1]-e[1]}function Pu(t){for(var e=t.length,n=[0,1],i=2,a=2;a<e;++a){for(;i>1&&Bw(t[n[i-2]],t[n[i-1]],t[a])<=0;)--i;n[i++]=a}return n.slice(0,i)}function Ww(t){if((n=t.length)<3)return null;var e,n,i=new Array(n),a=new Array(n);for(e=0;e<n;++e)i[e]=[+t[e][0],+t[e][1],e];for(i.sort(Ow),e=0;e<n;++e)a[e]=[i[e][0],-i[e][1]];var r=Pu(i),s=Pu(a),o=s[0]===r[0],l=s[s.length-1]===r[r.length-1],c=[];for(e=r.length-1;e>=0;--e)c.push(t[i[r[e]][2]]);for(e=+o;e<s.length-l;++e)c.push(t[i[s[e]][2]]);return c}function Uw(t,e){for(var n=t.length,i=t[n-1],a=e[0],r=e[1],s=i[0],o=i[1],l,c,h=!1,f=0;f<n;++f)i=t[f],l=i[0],c=i[1],c>r!=o>r&&a<(s-l)*(r-c)/(o-c)+l&&(h=!h),s=l,o=c;return h}function Fw(t){for(var e=-1,n=t.length,i=t[n-1],a,r,s=i[0],o=i[1],l=0;++e<n;)a=s,r=o,i=t[e],s=i[0],o=i[1],a-=s,r-=o,l+=Math.sqrt(a*a+r*r);return l}function ii(){return Math.random()}const Vw=function t(e){function n(i,a){return i=i==null?0:+i,a=a==null?1:+a,arguments.length===1?(a=i,i=0):a-=i,function(){return e()*a+i}}return n.source=t,n}(ii),X0=function t(e){function n(i,a){var r,s;return i=i==null?0:+i,a=a==null?1:+a,function(){var o;if(r!=null)o=r,r=null;else do r=e()*2-1,o=e()*2-1,s=r*r+o*o;while(!s||s>1);return i+a*o*Math.sqrt(-2*Math.log(s)/s)}}return n.source=t,n}(ii),qw=function t(e){function n(){var i=X0.source(e).apply(this,arguments);return function(){return Math.exp(i())}}return n.source=t,n}(ii),H0=function t(e){function n(i){return function(){for(var a=0,r=0;r<i;++r)a+=e();return a}}return n.source=t,n}(ii),Zw=function t(e){function n(i){var a=H0.source(e)(i);return function(){return a()/i}}return n.source=t,n}(ii),Kw=function t(e){function n(i){return function(){return-Math.log(1-e())/i}}return n.source=t,n}(ii);function se(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function Se(t,e){switch(arguments.length){case 0:break;case 1:this.interpolator(t);break;default:this.interpolator(e).domain(t);break}return this}var G0=Array.prototype,qr=G0.map,dn=G0.slice,Ll={name:"implicit"};function Is(){var t=Me(),e=[],n=[],i=Ll;function a(r){var s=r+"",o=t.get(s);if(!o){if(i!==Ll)return i;t.set(s,o=e.push(r))}return n[(o-1)%n.length]}return a.domain=function(r){if(!arguments.length)return e.slice();e=[],t=Me();for(var s=-1,o=r.length,l,c;++s<o;)t.has(c=(l=r[s])+"")||t.set(c,e.push(l));return a},a.range=function(r){return arguments.length?(n=dn.call(r),a):n.slice()},a.unknown=function(r){return arguments.length?(i=r,a):i},a.copy=function(){return Is(e,n).unknown(i)},se.apply(a,arguments),a}function Sc(){var t=Is().unknown(void 0),e=t.domain,n=t.range,i=[0,1],a,r,s=!1,o=0,l=0,c=.5;delete t.unknown;function h(){var f=e().length,u=i[1]<i[0],d=i[u-0],p=i[1-u];a=(p-d)/Math.max(1,f-o+l*2),s&&(a=Math.floor(a)),d+=(p-d-a*(f-o))*c,r=a*(1-o),s&&(d=Math.round(d),r=Math.round(r));var g=Gt(f).map(function(m){return d+a*m});return n(u?g.reverse():g)}return t.domain=function(f){return arguments.length?(e(f),h()):e()},t.range=function(f){return arguments.length?(i=[+f[0],+f[1]],h()):i.slice()},t.rangeRound=function(f){return i=[+f[0],+f[1]],s=!0,h()},t.bandwidth=function(){return r},t.step=function(){return a},t.round=function(f){return arguments.length?(s=!!f,h()):s},t.padding=function(f){return arguments.length?(o=Math.min(1,l=+f),h()):o},t.paddingInner=function(f){return arguments.length?(o=Math.min(1,f),h()):o},t.paddingOuter=function(f){return arguments.length?(l=+f,h()):l},t.align=function(f){return arguments.length?(c=Math.max(0,Math.min(1,f)),h()):c},t.copy=function(){return Sc(e(),i).round(s).paddingInner(o).paddingOuter(l).align(c)},se.apply(h(),arguments)}function B0(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return B0(e())},t}function ai(){return B0(Sc.apply(null,arguments).paddingInner(1))}function Qw(t){return function(){return t}}function Cl(t){return+t}var Eu=[0,1];function xt(t){return t}function Tl(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:Qw(isNaN(e)?NaN:.5)}function $u(t){var e=t[0],n=t[t.length-1],i;return e>n&&(i=e,e=n,n=i),function(a){return Math.max(e,Math.min(n,a))}}function Jw(t,e,n){var i=t[0],a=t[1],r=e[0],s=e[1];return a<i?(i=Tl(a,i),r=n(s,r)):(i=Tl(i,a),r=n(r,s)),function(o){return r(i(o))}}function jw(t,e,n){var i=Math.min(t.length,e.length)-1,a=new Array(i),r=new Array(i),s=-1;for(t[i]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++s<i;)a[s]=Tl(t[s],t[s+1]),r[s]=n(e[s],e[s+1]);return function(o){var l=Ne(t,o,1,i)-1;return r[l](a[l](o))}}function va(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function Rs(){var t=Eu,e=Eu,n=fa,i,a,r,s=xt,o,l,c;function h(){return o=Math.min(t.length,e.length)>2?jw:Jw,l=c=null,f}function f(u){return isNaN(u=+u)?r:(l||(l=o(t.map(i),e,n)))(i(s(u)))}return f.invert=function(u){return s(a((c||(c=o(e,t.map(i),Vt)))(u)))},f.domain=function(u){return arguments.length?(t=qr.call(u,Cl),s===xt||(s=$u(t)),h()):t.slice()},f.range=function(u){return arguments.length?(e=dn.call(u),h()):e.slice()},f.rangeRound=function(u){return e=dn.call(u),n=ud,h()},f.clamp=function(u){return arguments.length?(s=u?$u(t):xt,f):s!==xt},f.interpolate=function(u){return arguments.length?(n=u,h()):n},f.unknown=function(u){return arguments.length?(r=u,f):r},function(u,d){return i=u,a=d,h()}}function O0(t,e){return Rs()(t,e)}function W0(t,e,n,i){var a=sn(t,e,n),r;switch(i=Ji(i??",f"),i.type){case"s":{var s=Math.max(Math.abs(t),Math.abs(e));return i.precision==null&&!isNaN(r=Od(a,s))&&(i.precision=r),oc(i,s)}case"":case"e":case"g":case"p":case"r":{i.precision==null&&!isNaN(r=Wd(a,Math.max(Math.abs(t),Math.abs(e))))&&(i.precision=r-(i.type==="e"));break}case"f":case"%":{i.precision==null&&!isNaN(r=Bd(a))&&(i.precision=r-(i.type==="%")*2);break}}return da(i)}function Mn(t){var e=t.domain;return t.ticks=function(n){var i=e();return zl(i[0],i[i.length-1],n??10)},t.tickFormat=function(n,i){var a=e();return W0(a[0],a[a.length-1],n??10,i)},t.nice=function(n){n==null&&(n=10);var i=e(),a=0,r=i.length-1,s=i[a],o=i[r],l;return o<s&&(l=s,s=o,o=l,l=a,a=r,r=l),l=Yi(s,o,n),l>0?(s=Math.floor(s/l)*l,o=Math.ceil(o/l)*l,l=Yi(s,o,n)):l<0&&(s=Math.ceil(s*l)/l,o=Math.floor(o*l)/l,l=Yi(s,o,n)),l>0?(i[a]=Math.floor(s/l)*l,i[r]=Math.ceil(o/l)*l,e(i)):l<0&&(i[a]=Math.ceil(s*l)/l,i[r]=Math.floor(o*l)/l,e(i)),t},t}function Ge(){var t=O0(xt,xt);return t.copy=function(){return va(t,Ge())},se.apply(t,arguments),Mn(t)}function U0(t){var e;function n(i){return isNaN(i=+i)?e:i}return n.invert=n,n.domain=n.range=function(i){return arguments.length?(t=qr.call(i,Cl),n):t.slice()},n.unknown=function(i){return arguments.length?(e=i,n):e},n.copy=function(){return U0(t).unknown(e)},t=arguments.length?qr.call(t,Cl):[0,1],Mn(n)}function F0(t,e){t=t.slice();var n=0,i=t.length-1,a=t[n],r=t[i],s;return r<a&&(s=n,n=i,i=s,s=a,a=r,r=s),t[n]=e.floor(a),t[i]=e.ceil(r),t}function Yu(t){return Math.log(t)}function Nu(t){return Math.exp(t)}function t5(t){return-Math.log(-t)}function e5(t){return-Math.exp(-t)}function n5(t){return isFinite(t)?+("1e"+t):t<0?0:t}function i5(t){return t===10?n5:t===Math.E?Math.exp:function(e){return Math.pow(t,e)}}function a5(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),function(e){return Math.log(e)/t})}function zu(t){return function(e){return-t(-e)}}function Ac(t){var e=t(Yu,Nu),n=e.domain,i=10,a,r;function s(){return a=a5(i),r=i5(i),n()[0]<0?(a=zu(a),r=zu(r),t(t5,e5)):t(Yu,Nu),e}return e.base=function(o){return arguments.length?(i=+o,s()):i},e.domain=function(o){return arguments.length?(n(o),s()):n()},e.ticks=function(o){var l=n(),c=l[0],h=l[l.length-1],f;(f=h<c)&&(u=c,c=h,h=u);var u=a(c),d=a(h),p,g,m,b=o==null?10:+o,v=[];if(!(i%1)&&d-u<b){if(u=Math.round(u)-1,d=Math.round(d)+1,c>0){for(;u<d;++u)for(g=1,p=r(u);g<i;++g)if(m=p*g,!(m<c)){if(m>h)break;v.push(m)}}else for(;u<d;++u)for(g=i-1,p=r(u);g>=1;--g)if(m=p*g,!(m<c)){if(m>h)break;v.push(m)}}else v=zl(u,d,Math.min(d-u,b)).map(r);return f?v.reverse():v},e.tickFormat=function(o,l){if(l==null&&(l=i===10?".0e":","),typeof l!="function"&&(l=da(l)),o===1/0)return l;o==null&&(o=10);var c=Math.max(1,i*o/e.ticks().length);return function(h){var f=h/r(Math.round(a(h)));return f*i<i-.5&&(f*=i),f<=c?l(h):""}},e.nice=function(){return n(F0(n(),{floor:function(o){return r(Math.floor(a(o)))},ceil:function(o){return r(Math.ceil(a(o)))}}))},e}function V0(){var t=Ac(Rs()).domain([1,10]);return t.copy=function(){return va(t,V0()).base(t.base())},se.apply(t,arguments),t}function Xu(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function Hu(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function Lc(t){var e=1,n=t(Xu(e),Hu(e));return n.constant=function(i){return arguments.length?t(Xu(e=+i),Hu(e)):e},Mn(n)}function q0(){var t=Lc(Rs());return t.copy=function(){return va(t,q0()).constant(t.constant())},se.apply(t,arguments)}function Gu(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function r5(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function s5(t){return t<0?-t*t:t*t}function Cc(t){var e=t(xt,xt),n=1;function i(){return n===1?t(xt,xt):n===.5?t(r5,s5):t(Gu(n),Gu(1/n))}return e.exponent=function(a){return arguments.length?(n=+a,i()):n},Mn(e)}function Tc(){var t=Cc(Rs());return t.copy=function(){return va(t,Tc()).exponent(t.exponent())},se.apply(t,arguments),t}function o5(){return Tc.apply(null,arguments).exponent(.5)}function Z0(){var t=[],e=[],n=[],i;function a(){var s=0,o=Math.max(1,e.length);for(n=new Array(o-1);++s<o;)n[s-1]=Bi(t,s/o);return r}function r(s){return isNaN(s=+s)?i:e[Ne(n,s)]}return r.invertExtent=function(s){var o=e.indexOf(s);return o<0?[NaN,NaN]:[o>0?n[o-1]:t[0],o<n.length?n[o]:t[t.length-1]]},r.domain=function(s){if(!arguments.length)return t.slice();t=[];for(var o=0,l=s.length,c;o<l;++o)c=s[o],c!=null&&!isNaN(c=+c)&&t.push(c);return t.sort(Ue),a()},r.range=function(s){return arguments.length?(e=dn.call(s),a()):e.slice()},r.unknown=function(s){return arguments.length?(i=s,r):i},r.quantiles=function(){return n.slice()},r.copy=function(){return Z0().domain(t).range(e).unknown(i)},se.apply(r,arguments)}function Ic(){var t=0,e=1,n=1,i=[.5],a=[0,1],r;function s(l){return l<=l?a[Ne(i,l,0,n)]:r}function o(){var l=-1;for(i=new Array(n);++l<n;)i[l]=((l+1)*e-(l-n)*t)/(n+1);return s}return s.domain=function(l){return arguments.length?(t=+l[0],e=+l[1],o()):[t,e]},s.range=function(l){return arguments.length?(n=(a=dn.call(l)).length-1,o()):a.slice()},s.invertExtent=function(l){var c=a.indexOf(l);return c<0?[NaN,NaN]:c<1?[t,i[0]]:c>=n?[i[n-1],e]:[i[c-1],i[c]]},s.unknown=function(l){return arguments.length&&(r=l),s},s.thresholds=function(){return i.slice()},s.copy=function(){return Ic().domain([t,e]).range(a).unknown(r)},se.apply(Mn(s),arguments)}function K0(){var t=[.5],e=[0,1],n,i=1;function a(r){return r<=r?e[Ne(t,r,0,i)]:n}return a.domain=function(r){return arguments.length?(t=dn.call(r),i=Math.min(t.length,e.length-1),a):t.slice()},a.range=function(r){return arguments.length?(e=dn.call(r),i=Math.min(t.length,e.length-1),a):e.slice()},a.invertExtent=function(r){var s=e.indexOf(r);return[t[s-1],t[s]]},a.unknown=function(r){return arguments.length?(n=r,a):n},a.copy=function(){return K0().domain(t).range(e).unknown(n)},se.apply(a,arguments)}var wo=new Date,Mo=new Date;function gt(t,e,n,i){function a(r){return t(r=arguments.length===0?new Date:new Date(+r)),r}return a.floor=function(r){return t(r=new Date(+r)),r},a.ceil=function(r){return t(r=new Date(r-1)),e(r,1),t(r),r},a.round=function(r){var s=a(r),o=a.ceil(r);return r-s<o-r?s:o},a.offset=function(r,s){return e(r=new Date(+r),s==null?1:Math.floor(s)),r},a.range=function(r,s,o){var l=[],c;if(r=a.ceil(r),o=o==null?1:Math.floor(o),!(r<s)||!(o>0))return l;do l.push(c=new Date(+r)),e(r,o),t(r);while(c<r&&r<s);return l},a.filter=function(r){return gt(function(s){if(s>=s)for(;t(s),!r(s);)s.setTime(s-1)},function(s,o){if(s>=s)if(o<0)for(;++o<=0;)for(;e(s,-1),!r(s););else for(;--o>=0;)for(;e(s,1),!r(s););})},n&&(a.count=function(r,s){return wo.setTime(+r),Mo.setTime(+s),t(wo),t(Mo),Math.floor(n(wo,Mo))},a.every=function(r){return r=Math.floor(r),!isFinite(r)||!(r>0)?null:r>1?a.filter(i?function(s){return i(s)%r===0}:function(s){return a.count(0,s)%r===0}):a}),a}var Zr=gt(function(){},function(t,e){t.setTime(+t+e)},function(t,e){return e-t});Zr.every=function(t){return t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?gt(function(e){e.setTime(Math.floor(e/t)*t)},function(e,n){e.setTime(+e+n*t)},function(e,n){return(n-e)/t}):Zr};const Kr=Zr;var Bu=Zr.range,Qr=1e3,pn=6e4,Jr=36e5,Q0=864e5,J0=6048e5,j0=gt(function(t){t.setTime(t-t.getMilliseconds())},function(t,e){t.setTime(+t+e*Qr)},function(t,e){return(e-t)/Qr},function(t){return t.getUTCSeconds()});const jr=j0;var Ou=j0.range,tp=gt(function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*Qr)},function(t,e){t.setTime(+t+e*pn)},function(t,e){return(e-t)/pn},function(t){return t.getMinutes()});const ep=tp;var l5=tp.range,np=gt(function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*Qr-t.getMinutes()*pn)},function(t,e){t.setTime(+t+e*Jr)},function(t,e){return(e-t)/Jr},function(t){return t.getHours()});const ip=np;var c5=np.range,ap=gt(function(t){t.setHours(0,0,0,0)},function(t,e){t.setDate(t.getDate()+e)},function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*pn)/Q0},function(t){return t.getDate()-1});const Ps=ap;var h5=ap.range;function kn(t){return gt(function(e){e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},function(e,n){e.setDate(e.getDate()+n*7)},function(e,n){return(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*pn)/J0})}var na=kn(0),ia=kn(1),rp=kn(2),sp=kn(3),gn=kn(4),op=kn(5),lp=kn(6),Wu=na.range,u5=ia.range,f5=rp.range,d5=sp.range,p5=gn.range,g5=op.range,m5=lp.range,cp=gt(function(t){t.setDate(1),t.setHours(0,0,0,0)},function(t,e){t.setMonth(t.getMonth()+e)},function(t,e){return e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12},function(t){return t.getMonth()});const hp=cp;var b5=cp.range,Rc=gt(function(t){t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t,e){return e.getFullYear()-t.getFullYear()},function(t){return t.getFullYear()});Rc.every=function(t){return!isFinite(t=Math.floor(t))||!(t>0)?null:gt(function(e){e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,n){e.setFullYear(e.getFullYear()+n*t)})};const mn=Rc;var y5=Rc.range,up=gt(function(t){t.setUTCSeconds(0,0)},function(t,e){t.setTime(+t+e*pn)},function(t,e){return(e-t)/pn},function(t){return t.getUTCMinutes()});const fp=up;var v5=up.range,dp=gt(function(t){t.setUTCMinutes(0,0,0)},function(t,e){t.setTime(+t+e*Jr)},function(t,e){return(e-t)/Jr},function(t){return t.getUTCHours()});const pp=dp;var x5=dp.range,gp=gt(function(t){t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCDate(t.getUTCDate()+e)},function(t,e){return(e-t)/Q0},function(t){return t.getUTCDate()-1});const Es=gp;var _5=gp.range;function Dn(t){return gt(function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},function(e,n){e.setUTCDate(e.getUTCDate()+n*7)},function(e,n){return(n-e)/J0})}var aa=Dn(0),ra=Dn(1),mp=Dn(2),bp=Dn(3),bn=Dn(4),yp=Dn(5),vp=Dn(6),Uu=aa.range,w5=ra.range,M5=mp.range,k5=bp.range,D5=bn.range,S5=yp.range,A5=vp.range,xp=gt(function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCMonth(t.getUTCMonth()+e)},function(t,e){return e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12},function(t){return t.getUTCMonth()});const _p=xp;var L5=xp.range,Pc=gt(function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e)},function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()},function(t){return t.getUTCFullYear()});Pc.every=function(t){return!isFinite(t=Math.floor(t))||!(t>0)?null:gt(function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,n){e.setUTCFullYear(e.getUTCFullYear()+n*t)})};const yn=Pc;var C5=Pc.range;function ko(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function Do(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function ui(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function wp(t){var e=t.dateTime,n=t.date,i=t.time,a=t.periods,r=t.days,s=t.shortDays,o=t.months,l=t.shortMonths,c=fi(a),h=di(a),f=fi(r),u=di(r),d=fi(s),p=di(s),g=fi(o),m=di(o),b=fi(l),v=di(l),y={a:z,A:Y,b:X,B:W,c:null,d:Qu,e:Qu,f:J5,g:l3,G:h3,H:Z5,I:K5,j:Q5,L:Mp,m:j5,M:t3,p:U,q:rt,Q:tf,s:ef,S:e3,u:n3,U:i3,V:a3,w:r3,W:s3,x:null,X:null,y:o3,Y:c3,Z:u3,"%":ju},x={a:et,A:J,b:ht,B:Ot,c:null,d:Ju,e:Ju,f:g3,g:D3,G:A3,H:f3,I:d3,j:p3,L:Dp,m:m3,M:b3,p:Qt,q:Jt,Q:tf,s:ef,S:y3,u:v3,U:x3,V:_3,w:w3,W:M3,x:null,X:null,y:k3,Y:S3,Z:L3,"%":ju},M={a:T,A:L,b:_,B:A,c:P,d:Zu,e:Zu,f:U5,g:qu,G:Vu,H:Ku,I:Ku,j:G5,L:W5,m:H5,M:B5,p:C,q:X5,Q:V5,s:q5,S:O5,u:E5,U:$5,V:Y5,w:P5,W:N5,x:D,X:R,y:qu,Y:Vu,Z:z5,"%":F5};y.x=S(n,y),y.X=S(i,y),y.c=S(e,y),x.x=S(n,x),x.X=S(i,x),x.c=S(e,x);function S($,F){return function(Z){var E=[],yt=-1,j=0,_t=$.length,Dt,ye,St;for(Z instanceof Date||(Z=new Date(+Z));++yt<_t;)$.charCodeAt(yt)===37&&(E.push($.slice(j,yt)),(ye=Fu[Dt=$.charAt(++yt)])!=null?Dt=$.charAt(++yt):ye=Dt==="e"?" ":"0",(St=F[Dt])&&(Dt=St(Z,ye)),E.push(Dt),j=yt+1);return E.push($.slice(j,yt)),E.join("")}}function k($,F){return function(Z){var E=ui(1900,void 0,1),yt=I(E,$,Z+="",0),j,_t;if(yt!=Z.length)return null;if("Q"in E)return new Date(E.Q);if("s"in E)return new Date(E.s*1e3+("L"in E?E.L:0));if(F&&!("Z"in E)&&(E.Z=0),"p"in E&&(E.H=E.H%12+E.p*12),E.m===void 0&&(E.m="q"in E?E.q:0),"V"in E){if(E.V<1||E.V>53)return null;"w"in E||(E.w=1),"Z"in E?(j=Do(ui(E.y,0,1)),_t=j.getUTCDay(),j=_t>4||_t===0?ra.ceil(j):ra(j),j=Es.offset(j,(E.V-1)*7),E.y=j.getUTCFullYear(),E.m=j.getUTCMonth(),E.d=j.getUTCDate()+(E.w+6)%7):(j=ko(ui(E.y,0,1)),_t=j.getDay(),j=_t>4||_t===0?ia.ceil(j):ia(j),j=Ps.offset(j,(E.V-1)*7),E.y=j.getFullYear(),E.m=j.getMonth(),E.d=j.getDate()+(E.w+6)%7)}else("W"in E||"U"in E)&&("w"in E||(E.w="u"in E?E.u%7:"W"in E?1:0),_t="Z"in E?Do(ui(E.y,0,1)).getUTCDay():ko(ui(E.y,0,1)).getDay(),E.m=0,E.d="W"in E?(E.w+6)%7+E.W*7-(_t+5)%7:E.w+E.U*7-(_t+6)%7);return"Z"in E?(E.H+=E.Z/100|0,E.M+=E.Z%100,Do(E)):ko(E)}}function I($,F,Z,E){for(var yt=0,j=F.length,_t=Z.length,Dt,ye;yt<j;){if(E>=_t)return-1;if(Dt=F.charCodeAt(yt++),Dt===37){if(Dt=F.charAt(yt++),ye=M[Dt in Fu?F.charAt(yt++):Dt],!ye||(E=ye($,Z,E))<0)return-1}else if(Dt!=Z.charCodeAt(E++))return-1}return E}function C($,F,Z){var E=c.exec(F.slice(Z));return E?($.p=h[E[0].toLowerCase()],Z+E[0].length):-1}function T($,F,Z){var E=d.exec(F.slice(Z));return E?($.w=p[E[0].toLowerCase()],Z+E[0].length):-1}function L($,F,Z){var E=f.exec(F.slice(Z));return E?($.w=u[E[0].toLowerCase()],Z+E[0].length):-1}function _($,F,Z){var E=b.exec(F.slice(Z));return E?($.m=v[E[0].toLowerCase()],Z+E[0].length):-1}function A($,F,Z){var E=g.exec(F.slice(Z));return E?($.m=m[E[0].toLowerCase()],Z+E[0].length):-1}function P($,F,Z){return I($,e,F,Z)}function D($,F,Z){return I($,n,F,Z)}function R($,F,Z){return I($,i,F,Z)}function z($){return s[$.getDay()]}function Y($){return r[$.getDay()]}function X($){return l[$.getMonth()]}function W($){return o[$.getMonth()]}function U($){return a[+($.getHours()>=12)]}function rt($){return 1+~~($.getMonth()/3)}function et($){return s[$.getUTCDay()]}function J($){return r[$.getUTCDay()]}function ht($){return l[$.getUTCMonth()]}function Ot($){return o[$.getUTCMonth()]}function Qt($){return a[+($.getUTCHours()>=12)]}function Jt($){return 1+~~($.getUTCMonth()/3)}return{format:function($){var F=S($+="",y);return F.toString=function(){return $},F},parse:function($){var F=k($+="",!1);return F.toString=function(){return $},F},utcFormat:function($){var F=S($+="",x);return F.toString=function(){return $},F},utcParse:function($){var F=k($+="",!0);return F.toString=function(){return $},F}}}var Fu={"-":"",_:" ",0:"0"},bt=/^\s*\d+/,T5=/^%/,I5=/[\\^$*+?|[\]().{}]/g;function tt(t,e,n){var i=t<0?"-":"",a=(i?-t:t)+"",r=a.length;return i+(r<n?new Array(n-r+1).join(e)+a:a)}function R5(t){return t.replace(I5,"\\$&")}function fi(t){return new RegExp("^(?:"+t.map(R5).join("|")+")","i")}function di(t){for(var e={},n=-1,i=t.length;++n<i;)e[t[n].toLowerCase()]=n;return e}function P5(t,e,n){var i=bt.exec(e.slice(n,n+1));return i?(t.w=+i[0],n+i[0].length):-1}function E5(t,e,n){var i=bt.exec(e.slice(n,n+1));return i?(t.u=+i[0],n+i[0].length):-1}function $5(t,e,n){var i=bt.exec(e.slice(n,n+2));return i?(t.U=+i[0],n+i[0].length):-1}function Y5(t,e,n){var i=bt.exec(e.slice(n,n+2));return i?(t.V=+i[0],n+i[0].length):-1}function N5(t,e,n){var i=bt.exec(e.slice(n,n+2));return i?(t.W=+i[0],n+i[0].length):-1}function Vu(t,e,n){var i=bt.exec(e.slice(n,n+4));return i?(t.y=+i[0],n+i[0].length):-1}function qu(t,e,n){var i=bt.exec(e.slice(n,n+2));return i?(t.y=+i[0]+(+i[0]>68?1900:2e3),n+i[0].length):-1}function z5(t,e,n){var i=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return i?(t.Z=i[1]?0:-(i[2]+(i[3]||"00")),n+i[0].length):-1}function X5(t,e,n){var i=bt.exec(e.slice(n,n+1));return i?(t.q=i[0]*3-3,n+i[0].length):-1}function H5(t,e,n){var i=bt.exec(e.slice(n,n+2));return i?(t.m=i[0]-1,n+i[0].length):-1}function Zu(t,e,n){var i=bt.exec(e.slice(n,n+2));return i?(t.d=+i[0],n+i[0].length):-1}function G5(t,e,n){var i=bt.exec(e.slice(n,n+3));return i?(t.m=0,t.d=+i[0],n+i[0].length):-1}function Ku(t,e,n){var i=bt.exec(e.slice(n,n+2));return i?(t.H=+i[0],n+i[0].length):-1}function B5(t,e,n){var i=bt.exec(e.slice(n,n+2));return i?(t.M=+i[0],n+i[0].length):-1}function O5(t,e,n){var i=bt.exec(e.slice(n,n+2));return i?(t.S=+i[0],n+i[0].length):-1}function W5(t,e,n){var i=bt.exec(e.slice(n,n+3));return i?(t.L=+i[0],n+i[0].length):-1}function U5(t,e,n){var i=bt.exec(e.slice(n,n+6));return i?(t.L=Math.floor(i[0]/1e3),n+i[0].length):-1}function F5(t,e,n){var i=T5.exec(e.slice(n,n+1));return i?n+i[0].length:-1}function V5(t,e,n){var i=bt.exec(e.slice(n));return i?(t.Q=+i[0],n+i[0].length):-1}function q5(t,e,n){var i=bt.exec(e.slice(n));return i?(t.s=+i[0],n+i[0].length):-1}function Qu(t,e){return tt(t.getDate(),e,2)}function Z5(t,e){return tt(t.getHours(),e,2)}function K5(t,e){return tt(t.getHours()%12||12,e,2)}function Q5(t,e){return tt(1+Ps.count(mn(t),t),e,3)}function Mp(t,e){return tt(t.getMilliseconds(),e,3)}function J5(t,e){return Mp(t,e)+"000"}function j5(t,e){return tt(t.getMonth()+1,e,2)}function t3(t,e){return tt(t.getMinutes(),e,2)}function e3(t,e){return tt(t.getSeconds(),e,2)}function n3(t){var e=t.getDay();return e===0?7:e}function i3(t,e){return tt(na.count(mn(t)-1,t),e,2)}function kp(t){var e=t.getDay();return e>=4||e===0?gn(t):gn.ceil(t)}function a3(t,e){return t=kp(t),tt(gn.count(mn(t),t)+(mn(t).getDay()===4),e,2)}function r3(t){return t.getDay()}function s3(t,e){return tt(ia.count(mn(t)-1,t),e,2)}function o3(t,e){return tt(t.getFullYear()%100,e,2)}function l3(t,e){return t=kp(t),tt(t.getFullYear()%100,e,2)}function c3(t,e){return tt(t.getFullYear()%1e4,e,4)}function h3(t,e){var n=t.getDay();return t=n>=4||n===0?gn(t):gn.ceil(t),tt(t.getFullYear()%1e4,e,4)}function u3(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+tt(e/60|0,"0",2)+tt(e%60,"0",2)}function Ju(t,e){return tt(t.getUTCDate(),e,2)}function f3(t,e){return tt(t.getUTCHours(),e,2)}function d3(t,e){return tt(t.getUTCHours()%12||12,e,2)}function p3(t,e){return tt(1+Es.count(yn(t),t),e,3)}function Dp(t,e){return tt(t.getUTCMilliseconds(),e,3)}function g3(t,e){return Dp(t,e)+"000"}function m3(t,e){return tt(t.getUTCMonth()+1,e,2)}function b3(t,e){return tt(t.getUTCMinutes(),e,2)}function y3(t,e){return tt(t.getUTCSeconds(),e,2)}function v3(t){var e=t.getUTCDay();return e===0?7:e}function x3(t,e){return tt(aa.count(yn(t)-1,t),e,2)}function Sp(t){var e=t.getUTCDay();return e>=4||e===0?bn(t):bn.ceil(t)}function _3(t,e){return t=Sp(t),tt(bn.count(yn(t),t)+(yn(t).getUTCDay()===4),e,2)}function w3(t){return t.getUTCDay()}function M3(t,e){return tt(ra.count(yn(t)-1,t),e,2)}function k3(t,e){return tt(t.getUTCFullYear()%100,e,2)}function D3(t,e){return t=Sp(t),tt(t.getUTCFullYear()%100,e,2)}function S3(t,e){return tt(t.getUTCFullYear()%1e4,e,4)}function A3(t,e){var n=t.getUTCDay();return t=n>=4||n===0?bn(t):bn.ceil(t),tt(t.getUTCFullYear()%1e4,e,4)}function L3(){return"+0000"}function ju(){return"%"}function tf(t){return+t}function ef(t){return Math.floor(+t/1e3)}var In,Ec,Ap,$s,$c;Lp({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Lp(t){return In=wp(t),Ec=In.format,Ap=In.parse,$s=In.utcFormat,$c=In.utcParse,In}var Cp="%Y-%m-%dT%H:%M:%S.%LZ";function C3(t){return t.toISOString()}var T3=Date.prototype.toISOString?C3:$s(Cp);const I3=T3;function R3(t){var e=new Date(t);return isNaN(e)?null:e}var P3=+new Date("2000-01-01T00:00:00.000Z")?R3:$c(Cp);const E3=P3;var Ti=1e3,Ii=Ti*60,Ri=Ii*60,sa=Ri*24,$3=sa*7,nf=sa*30,So=sa*365;function Y3(t){return new Date(t)}function N3(t){return t instanceof Date?+t:+new Date(+t)}function Yc(t,e,n,i,a,r,s,o,l){var c=O0(xt,xt),h=c.invert,f=c.domain,u=l(".%L"),d=l(":%S"),p=l("%I:%M"),g=l("%I %p"),m=l("%a %d"),b=l("%b %d"),v=l("%B"),y=l("%Y"),x=[[s,1,Ti],[s,5,5*Ti],[s,15,15*Ti],[s,30,30*Ti],[r,1,Ii],[r,5,5*Ii],[r,15,15*Ii],[r,30,30*Ii],[a,1,Ri],[a,3,3*Ri],[a,6,6*Ri],[a,12,12*Ri],[i,1,sa],[i,2,2*sa],[n,1,$3],[e,1,nf],[e,3,3*nf],[t,1,So]];function M(k){return(s(k)<k?u:r(k)<k?d:a(k)<k?p:i(k)<k?g:e(k)<k?n(k)<k?m:b:t(k)<k?v:y)(k)}function S(k,I,C,T){if(k==null&&(k=10),typeof k=="number"){var L=Math.abs(C-I)/k,_=Yl(function(A){return A[2]}).right(x,L);_===x.length?(T=sn(I/So,C/So,k),k=t):_?(_=x[L/x[_-1][2]<x[_][2]/L?_-1:_],T=_[1],k=_[0]):(T=Math.max(sn(I,C,k),1),k=o)}return T==null?k:k.every(T)}return c.invert=function(k){return new Date(h(k))},c.domain=function(k){return arguments.length?f(qr.call(k,N3)):f().map(Y3)},c.ticks=function(k,I){var C=f(),T=C[0],L=C[C.length-1],_=L<T,A;return _&&(A=T,T=L,L=A),A=S(k,T,L,I),A=A?A.range(T,L+1):[],_?A.reverse():A},c.tickFormat=function(k,I){return I==null?M:l(I)},c.nice=function(k,I){var C=f();return(k=S(k,C[0],C[C.length-1],I))?f(F0(C,k)):c},c.copy=function(){return va(c,Yc(t,e,n,i,a,r,s,o,l))},c}function z3(){return se.apply(Yc(mn,hp,na,Ps,ip,ep,jr,Kr,Ec).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function X3(){return se.apply(Yc(yn,_p,aa,Es,pp,fp,jr,Kr,$s).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Ys(){var t=0,e=1,n,i,a,r,s=xt,o=!1,l;function c(h){return isNaN(h=+h)?l:s(a===0?.5:(h=(r(h)-n)*a,o?Math.max(0,Math.min(1,h)):h))}return c.domain=function(h){return arguments.length?(n=r(t=+h[0]),i=r(e=+h[1]),a=n===i?0:1/(i-n),c):[t,e]},c.clamp=function(h){return arguments.length?(o=!!h,c):o},c.interpolator=function(h){return arguments.length?(s=h,c):s},c.unknown=function(h){return arguments.length?(l=h,c):l},function(h){return r=h,n=h(t),i=h(e),a=n===i?0:1/(i-n),c}}function Ze(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function Tp(){var t=Mn(Ys()(xt));return t.copy=function(){return Ze(t,Tp())},Se.apply(t,arguments)}function Ip(){var t=Ac(Ys()).domain([1,10]);return t.copy=function(){return Ze(t,Ip()).base(t.base())},Se.apply(t,arguments)}function Rp(){var t=Lc(Ys());return t.copy=function(){return Ze(t,Rp()).constant(t.constant())},Se.apply(t,arguments)}function Nc(){var t=Cc(Ys());return t.copy=function(){return Ze(t,Nc()).exponent(t.exponent())},Se.apply(t,arguments)}function H3(){return Nc.apply(null,arguments).exponent(.5)}function Pp(){var t=[],e=xt;function n(i){if(!isNaN(i=+i))return e((Ne(t,i)-1)/(t.length-1))}return n.domain=function(i){if(!arguments.length)return t.slice();t=[];for(var a=0,r=i.length,s;a<r;++a)s=i[a],s!=null&&!isNaN(s=+s)&&t.push(s);return t.sort(Ue),n},n.interpolator=function(i){return arguments.length?(e=i,n):e},n.copy=function(){return Pp(e).domain(t)},Se.apply(n,arguments)}function Ns(){var t=0,e=.5,n=1,i,a,r,s,o,l=xt,c,h=!1,f;function u(d){return isNaN(d=+d)?f:(d=.5+((d=+c(d))-a)*(d<a?s:o),l(h?Math.max(0,Math.min(1,d)):d))}return u.domain=function(d){return arguments.length?(i=c(t=+d[0]),a=c(e=+d[1]),r=c(n=+d[2]),s=i===a?0:.5/(a-i),o=a===r?0:.5/(r-a),u):[t,e,n]},u.clamp=function(d){return arguments.length?(h=!!d,u):h},u.interpolator=function(d){return arguments.length?(l=d,u):l},u.unknown=function(d){return arguments.length?(f=d,u):f},function(d){return c=d,i=d(t),a=d(e),r=d(n),s=i===a?0:.5/(a-i),o=a===r?0:.5/(r-a),u}}function Ep(){var t=Mn(Ns()(xt));return t.copy=function(){return Ze(t,Ep())},Se.apply(t,arguments)}function $p(){var t=Ac(Ns()).domain([.1,1,10]);return t.copy=function(){return Ze(t,$p()).base(t.base())},Se.apply(t,arguments)}function Yp(){var t=Lc(Ns());return t.copy=function(){return Ze(t,Yp()).constant(t.constant())},Se.apply(t,arguments)}function zc(){var t=Cc(Ns());return t.copy=function(){return Ze(t,zc()).exponent(t.exponent())},Se.apply(t,arguments)}function G3(){return zc.apply(null,arguments).exponent(.5)}function V(t){for(var e=t.length/6|0,n=new Array(e),i=0;i<e;)n[i]="#"+t.slice(i*6,++i*6);return n}const B3=V("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),O3=V("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),W3=V("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),U3=V("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),F3=V("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),V3=V("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),q3=V("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),Z3=V("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),K3=V("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),Q3=V("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab");function at(t){return sd(t[t.length-1])}var Np=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(V);const J3=at(Np);var zp=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(V);const j3=at(zp);var Xp=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(V);const t6=at(Xp);var Hp=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(V);const e6=at(Hp);var Gp=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(V);const n6=at(Gp);var Bp=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(V);const i6=at(Bp);var Op=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(V);const a6=at(Op);var Wp=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(V);const r6=at(Wp);var Up=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(V);const s6=at(Up);var Fp=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(V);const o6=at(Fp);var Vp=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(V);const l6=at(Vp);var qp=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(V);const c6=at(qp);var Zp=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(V);const h6=at(Zp);var Kp=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(V);const u6=at(Kp);var Qp=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(V);const f6=at(Qp);var Jp=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(V);const d6=at(Jp);var jp=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(V);const p6=at(jp);var tg=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(V);const g6=at(tg);var eg=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(V);const m6=at(eg);var ng=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(V);const b6=at(ng);var ig=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(V);const y6=at(ig);var ag=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(V);const v6=at(ag);var rg=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(V);const x6=at(rg);var sg=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(V);const _6=at(sg);var og=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(V);const w6=at(og);var lg=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(V);const M6=at(lg);var cg=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(V);const k6=at(cg);function D6(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-t*(35.34-t*(2381.73-t*(6402.7-t*(7024.72-t*2710.57)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+t*(170.73+t*(52.82-t*(131.46-t*(176.58-t*67.37)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+t*(442.36-t*(2482.43-t*(6167.24-t*(6614.94-t*2475.67)))))))+")"}const S6=xs(ie(300,.5,0),ie(-240,.5,1));var A6=xs(ie(-100,.75,.35),ie(80,1.5,.8)),L6=xs(ie(260,.75,.35),ie(80,1.5,.8)),Xa=ie();function C6(t){(t<0||t>1)&&(t-=Math.floor(t));var e=Math.abs(t-.5);return Xa.h=360*t-100,Xa.s=1.5-1.5*e,Xa.l=.8-.9*e,Xa+""}var Ha=Wn(),T6=Math.PI/3,I6=Math.PI*2/3;function R6(t){var e;return t=(.5-t)*Math.PI,Ha.r=255*(e=Math.sin(t))*e,Ha.g=255*(e=Math.sin(t+T6))*e,Ha.b=255*(e=Math.sin(t+I6))*e,Ha+""}function P6(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+t*(1172.33-t*(10793.56-t*(33300.12-t*(38394.49-t*14825.05)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+t*(557.33+t*(1225.33-t*(3574.96-t*(1073.77+t*707.56)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+t*(3211.1-t*(15327.97-t*(27814-t*(22569.18-t*6838.66)))))))+")"}function zs(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}}const E6=zs(V("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725"));var $6=zs(V("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),Y6=zs(V("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),N6=zs(V("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));function K(t){return function(){return t}}var af=Math.abs,wt=Math.atan2,Qe=Math.cos,z6=Math.max,Ao=Math.min,oe=Math.sin,$n=Math.sqrt,Mt=1e-12,Be=Math.PI,ts=Be/2,Pe=2*Be;function X6(t){return t>1?0:t<-1?Be:Math.acos(t)}function rf(t){return t>=1?ts:t<=-1?-ts:Math.asin(t)}function H6(t){return t.innerRadius}function G6(t){return t.outerRadius}function B6(t){return t.startAngle}function O6(t){return t.endAngle}function W6(t){return t&&t.padAngle}function U6(t,e,n,i,a,r,s,o){var l=n-t,c=i-e,h=s-a,f=o-r,u=f*l-h*c;if(!(u*u<Mt))return u=(h*(e-r)-f*(t-a))/u,[t+u*l,e+u*c]}function Ga(t,e,n,i,a,r,s){var o=t-n,l=e-i,c=(s?r:-r)/$n(o*o+l*l),h=c*l,f=-c*o,u=t+h,d=e+f,p=n+h,g=i+f,m=(u+p)/2,b=(d+g)/2,v=p-u,y=g-d,x=v*v+y*y,M=a-r,S=u*g-p*d,k=(y<0?-1:1)*$n(z6(0,M*M*x-S*S)),I=(S*y-v*k)/x,C=(-S*v-y*k)/x,T=(S*y+v*k)/x,L=(-S*v+y*k)/x,_=I-m,A=C-b,P=T-m,D=L-b;return _*_+A*A>P*P+D*D&&(I=T,C=L),{cx:I,cy:C,x01:-h,y01:-f,x11:I*(a/M-1),y11:C*(a/M-1)}}function hg(){var t=H6,e=G6,n=K(0),i=null,a=B6,r=O6,s=W6,o=null;function l(){var c,h,f=+t.apply(this,arguments),u=+e.apply(this,arguments),d=a.apply(this,arguments)-ts,p=r.apply(this,arguments)-ts,g=af(p-d),m=p>d;if(o||(o=c=Ve()),u<f&&(h=u,u=f,f=h),!(u>Mt))o.moveTo(0,0);else if(g>Pe-Mt)o.moveTo(u*Qe(d),u*oe(d)),o.arc(0,0,u,d,p,!m),f>Mt&&(o.moveTo(f*Qe(p),f*oe(p)),o.arc(0,0,f,p,d,m));else{var b=d,v=p,y=d,x=p,M=g,S=g,k=s.apply(this,arguments)/2,I=k>Mt&&(i?+i.apply(this,arguments):$n(f*f+u*u)),C=Ao(af(u-f)/2,+n.apply(this,arguments)),T=C,L=C,_,A;if(I>Mt){var P=rf(I/f*oe(k)),D=rf(I/u*oe(k));(M-=P*2)>Mt?(P*=m?1:-1,y+=P,x-=P):(M=0,y=x=(d+p)/2),(S-=D*2)>Mt?(D*=m?1:-1,b+=D,v-=D):(S=0,b=v=(d+p)/2)}var R=u*Qe(b),z=u*oe(b),Y=f*Qe(x),X=f*oe(x);if(C>Mt){var W=u*Qe(v),U=u*oe(v),rt=f*Qe(y),et=f*oe(y),J;if(g<Be&&(J=U6(R,z,rt,et,W,U,Y,X))){var ht=R-J[0],Ot=z-J[1],Qt=W-J[0],Jt=U-J[1],$=1/oe(X6((ht*Qt+Ot*Jt)/($n(ht*ht+Ot*Ot)*$n(Qt*Qt+Jt*Jt)))/2),F=$n(J[0]*J[0]+J[1]*J[1]);T=Ao(C,(f-F)/($-1)),L=Ao(C,(u-F)/($+1))}}S>Mt?L>Mt?(_=Ga(rt,et,R,z,u,L,m),A=Ga(W,U,Y,X,u,L,m),o.moveTo(_.cx+_.x01,_.cy+_.y01),L<C?o.arc(_.cx,_.cy,L,wt(_.y01,_.x01),wt(A.y01,A.x01),!m):(o.arc(_.cx,_.cy,L,wt(_.y01,_.x01),wt(_.y11,_.x11),!m),o.arc(0,0,u,wt(_.cy+_.y11,_.cx+_.x11),wt(A.cy+A.y11,A.cx+A.x11),!m),o.arc(A.cx,A.cy,L,wt(A.y11,A.x11),wt(A.y01,A.x01),!m))):(o.moveTo(R,z),o.arc(0,0,u,b,v,!m)):o.moveTo(R,z),!(f>Mt)||!(M>Mt)?o.lineTo(Y,X):T>Mt?(_=Ga(Y,X,W,U,f,-T,m),A=Ga(R,z,rt,et,f,-T,m),o.lineTo(_.cx+_.x01,_.cy+_.y01),T<C?o.arc(_.cx,_.cy,T,wt(_.y01,_.x01),wt(A.y01,A.x01),!m):(o.arc(_.cx,_.cy,T,wt(_.y01,_.x01),wt(_.y11,_.x11),!m),o.arc(0,0,f,wt(_.cy+_.y11,_.cx+_.x11),wt(A.cy+A.y11,A.cx+A.x11),m),o.arc(A.cx,A.cy,T,wt(A.y11,A.x11),wt(A.y01,A.x01),!m))):o.arc(0,0,f,x,y,m)}if(o.closePath(),c)return o=null,c+""||null}return l.centroid=function(){var c=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,h=(+a.apply(this,arguments)+ +r.apply(this,arguments))/2-Be/2;return[Qe(h)*c,oe(h)*c]},l.innerRadius=function(c){return arguments.length?(t=typeof c=="function"?c:K(+c),l):t},l.outerRadius=function(c){return arguments.length?(e=typeof c=="function"?c:K(+c),l):e},l.cornerRadius=function(c){return arguments.length?(n=typeof c=="function"?c:K(+c),l):n},l.padRadius=function(c){return arguments.length?(i=c==null?null:typeof c=="function"?c:K(+c),l):i},l.startAngle=function(c){return arguments.length?(a=typeof c=="function"?c:K(+c),l):a},l.endAngle=function(c){return arguments.length?(r=typeof c=="function"?c:K(+c),l):r},l.padAngle=function(c){return arguments.length?(s=typeof c=="function"?c:K(+c),l):s},l.context=function(c){return arguments.length?(o=c??null,l):o},l}function ug(t){this._context=t}ug.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function Xs(t){return new ug(t)}function Xc(t){return t[0]}function Hc(t){return t[1]}function oa(){var t=Xc,e=Hc,n=K(!0),i=null,a=Xs,r=null;function s(o){var l,c=o.length,h,f=!1,u;for(i==null&&(r=a(u=Ve())),l=0;l<=c;++l)!(l<c&&n(h=o[l],l,o))===f&&((f=!f)?r.lineStart():r.lineEnd()),f&&r.point(+t(h,l,o),+e(h,l,o));if(u)return r=null,u+""||null}return s.x=function(o){return arguments.length?(t=typeof o=="function"?o:K(+o),s):t},s.y=function(o){return arguments.length?(e=typeof o=="function"?o:K(+o),s):e},s.defined=function(o){return arguments.length?(n=typeof o=="function"?o:K(!!o),s):n},s.curve=function(o){return arguments.length?(a=o,i!=null&&(r=a(i)),s):a},s.context=function(o){return arguments.length?(o==null?i=r=null:r=a(i=o),s):i},s}function Gc(){var t=Xc,e=null,n=K(0),i=Hc,a=K(!0),r=null,s=Xs,o=null;function l(h){var f,u,d,p=h.length,g,m=!1,b,v=new Array(p),y=new Array(p);for(r==null&&(o=s(b=Ve())),f=0;f<=p;++f){if(!(f<p&&a(g=h[f],f,h))===m)if(m=!m)u=f,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),d=f-1;d>=u;--d)o.point(v[d],y[d]);o.lineEnd(),o.areaEnd()}m&&(v[f]=+t(g,f,h),y[f]=+n(g,f,h),o.point(e?+e(g,f,h):v[f],i?+i(g,f,h):y[f]))}if(b)return o=null,b+""||null}function c(){return oa().defined(a).curve(s).context(r)}return l.x=function(h){return arguments.length?(t=typeof h=="function"?h:K(+h),e=null,l):t},l.x0=function(h){return arguments.length?(t=typeof h=="function"?h:K(+h),l):t},l.x1=function(h){return arguments.length?(e=h==null?null:typeof h=="function"?h:K(+h),l):e},l.y=function(h){return arguments.length?(n=typeof h=="function"?h:K(+h),i=null,l):n},l.y0=function(h){return arguments.length?(n=typeof h=="function"?h:K(+h),l):n},l.y1=function(h){return arguments.length?(i=h==null?null:typeof h=="function"?h:K(+h),l):i},l.lineX0=l.lineY0=function(){return c().x(t).y(n)},l.lineY1=function(){return c().x(t).y(i)},l.lineX1=function(){return c().x(e).y(n)},l.defined=function(h){return arguments.length?(a=typeof h=="function"?h:K(!!h),l):a},l.curve=function(h){return arguments.length?(s=h,r!=null&&(o=s(r)),l):s},l.context=function(h){return arguments.length?(h==null?r=o=null:o=s(r=h),l):r},l}function F6(t,e){return e<t?-1:e>t?1:e>=t?0:NaN}function V6(t){return t}function fg(){var t=V6,e=F6,n=null,i=K(0),a=K(Pe),r=K(0);function s(o){var l,c=o.length,h,f,u=0,d=new Array(c),p=new Array(c),g=+i.apply(this,arguments),m=Math.min(Pe,Math.max(-Pe,a.apply(this,arguments)-g)),b,v=Math.min(Math.abs(m)/c,r.apply(this,arguments)),y=v*(m<0?-1:1),x;for(l=0;l<c;++l)(x=p[d[l]=l]=+t(o[l],l,o))>0&&(u+=x);for(e!=null?d.sort(function(M,S){return e(p[M],p[S])}):n!=null&&d.sort(function(M,S){return n(o[M],o[S])}),l=0,f=u?(m-c*y)/u:0;l<c;++l,g=b)h=d[l],x=p[h],b=g+(x>0?x*f:0)+y,p[h]={data:o[h],index:l,value:x,startAngle:g,endAngle:b,padAngle:v};return p}return s.value=function(o){return arguments.length?(t=typeof o=="function"?o:K(+o),s):t},s.sortValues=function(o){return arguments.length?(e=o,n=null,s):e},s.sort=function(o){return arguments.length?(n=o,e=null,s):n},s.startAngle=function(o){return arguments.length?(i=typeof o=="function"?o:K(+o),s):i},s.endAngle=function(o){return arguments.length?(a=typeof o=="function"?o:K(+o),s):a},s.padAngle=function(o){return arguments.length?(r=typeof o=="function"?o:K(+o),s):r},s}var dg=Bc(Xs);function pg(t){this._curve=t}pg.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(t,e){this._curve.point(e*Math.sin(t),e*-Math.cos(t))}};function Bc(t){function e(n){return new pg(t(n))}return e._curve=t,e}function Pi(t){var e=t.curve;return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t.curve=function(n){return arguments.length?e(Bc(n)):e()._curve},t}function sf(){return Pi(oa().curve(dg))}function of(){var t=Gc().curve(dg),e=t.curve,n=t.lineX0,i=t.lineX1,a=t.lineY0,r=t.lineY1;return t.angle=t.x,delete t.x,t.startAngle=t.x0,delete t.x0,t.endAngle=t.x1,delete t.x1,t.radius=t.y,delete t.y,t.innerRadius=t.y0,delete t.y0,t.outerRadius=t.y1,delete t.y1,t.lineStartAngle=function(){return Pi(n())},delete t.lineX0,t.lineEndAngle=function(){return Pi(i())},delete t.lineX1,t.lineInnerRadius=function(){return Pi(a())},delete t.lineY0,t.lineOuterRadius=function(){return Pi(r())},delete t.lineY1,t.curve=function(s){return arguments.length?e(Bc(s)):e()._curve},t}function Ei(t,e){return[(e=+e)*Math.cos(t-=Math.PI/2),e*Math.sin(t)]}var Il=Array.prototype.slice;function q6(t){return t.source}function Z6(t){return t.target}function Oc(t){var e=q6,n=Z6,i=Xc,a=Hc,r=null;function s(){var o,l=Il.call(arguments),c=e.apply(this,l),h=n.apply(this,l);if(r||(r=o=Ve()),t(r,+i.apply(this,(l[0]=c,l)),+a.apply(this,l),+i.apply(this,(l[0]=h,l)),+a.apply(this,l)),o)return r=null,o+""||null}return s.source=function(o){return arguments.length?(e=o,s):e},s.target=function(o){return arguments.length?(n=o,s):n},s.x=function(o){return arguments.length?(i=typeof o=="function"?o:K(+o),s):i},s.y=function(o){return arguments.length?(a=typeof o=="function"?o:K(+o),s):a},s.context=function(o){return arguments.length?(r=o??null,s):r},s}function K6(t,e,n,i,a){t.moveTo(e,n),t.bezierCurveTo(e=(e+i)/2,n,e,a,i,a)}function Q6(t,e,n,i,a){t.moveTo(e,n),t.bezierCurveTo(e,n=(n+a)/2,i,n,i,a)}function J6(t,e,n,i,a){var r=Ei(e,n),s=Ei(e,n=(n+a)/2),o=Ei(i,n),l=Ei(i,a);t.moveTo(r[0],r[1]),t.bezierCurveTo(s[0],s[1],o[0],o[1],l[0],l[1])}function j6(){return Oc(K6)}function t8(){return Oc(Q6)}function e8(){var t=Oc(J6);return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t}const Wc={draw:function(t,e){var n=Math.sqrt(e/Be);t.moveTo(n,0),t.arc(0,0,n,0,Pe)}},gg={draw:function(t,e){var n=Math.sqrt(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}};var mg=Math.sqrt(1/3),n8=mg*2;const bg={draw:function(t,e){var n=Math.sqrt(e/n8),i=n*mg;t.moveTo(0,-n),t.lineTo(i,0),t.lineTo(0,n),t.lineTo(-i,0),t.closePath()}};var i8=.8908130915292852,yg=Math.sin(Be/10)/Math.sin(7*Be/10),a8=Math.sin(Pe/10)*yg,r8=-Math.cos(Pe/10)*yg;const vg={draw:function(t,e){var n=Math.sqrt(e*i8),i=a8*n,a=r8*n;t.moveTo(0,-n),t.lineTo(i,a);for(var r=1;r<5;++r){var s=Pe*r/5,o=Math.cos(s),l=Math.sin(s);t.lineTo(l*n,-o*n),t.lineTo(o*i-l*a,l*i+o*a)}t.closePath()}},xg={draw:function(t,e){var n=Math.sqrt(e),i=-n/2;t.rect(i,i,n,n)}};var Lo=Math.sqrt(3);const _g={draw:function(t,e){var n=-Math.sqrt(e/(Lo*3));t.moveTo(0,n*2),t.lineTo(-Lo*n,-n),t.lineTo(Lo*n,-n),t.closePath()}};var Wt=-.5,Ut=Math.sqrt(3)/2,Rl=1/Math.sqrt(12),s8=(Rl/2+1)*3;const wg={draw:function(t,e){var n=Math.sqrt(e/s8),i=n/2,a=n*Rl,r=i,s=n*Rl+n,o=-r,l=s;t.moveTo(i,a),t.lineTo(r,s),t.lineTo(o,l),t.lineTo(Wt*i-Ut*a,Ut*i+Wt*a),t.lineTo(Wt*r-Ut*s,Ut*r+Wt*s),t.lineTo(Wt*o-Ut*l,Ut*o+Wt*l),t.lineTo(Wt*i+Ut*a,Wt*a-Ut*i),t.lineTo(Wt*r+Ut*s,Wt*s-Ut*r),t.lineTo(Wt*o+Ut*l,Wt*l-Ut*o),t.closePath()}};var o8=[Wc,gg,bg,xg,vg,_g,wg];function l8(){var t=K(Wc),e=K(64),n=null;function i(){var a;if(n||(n=a=Ve()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),a)return n=null,a+""||null}return i.type=function(a){return arguments.length?(t=typeof a=="function"?a:K(a),i):t},i.size=function(a){return arguments.length?(e=typeof a=="function"?a:K(+a),i):e},i.context=function(a){return arguments.length?(n=a??null,i):n},i}function Oe(){}function es(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function Hs(t){this._context=t}Hs.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:es(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:es(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function c8(t){return new Hs(t)}function Mg(t){this._context=t}Mg.prototype={areaStart:Oe,areaEnd:Oe,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:es(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function h8(t){return new Mg(t)}function kg(t){this._context=t}kg.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,i=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,i):this._context.moveTo(n,i);break;case 3:this._point=4;default:es(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function u8(t){return new kg(t)}function Dg(t,e){this._basis=new Hs(t),this._beta=e}Dg.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,e=this._y,n=t.length-1;if(n>0)for(var i=t[0],a=e[0],r=t[n]-i,s=e[n]-a,o=-1,l;++o<=n;)l=o/n,this._basis.point(this._beta*t[o]+(1-this._beta)*(i+l*r),this._beta*e[o]+(1-this._beta)*(a+l*s));this._x=this._y=null,this._basis.lineEnd()},point:function(t,e){this._x.push(+t),this._y.push(+e)}};const f8=function t(e){function n(i){return e===1?new Hs(i):new Dg(i,e)}return n.beta=function(i){return t(+i)},n}(.85);function ns(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function Uc(t,e){this._context=t,this._k=(1-e)/6}Uc.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:ns(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:ns(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const d8=function t(e){function n(i){return new Uc(i,e)}return n.tension=function(i){return t(+i)},n}(0);function Fc(t,e){this._context=t,this._k=(1-e)/6}Fc.prototype={areaStart:Oe,areaEnd:Oe,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:ns(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const p8=function t(e){function n(i){return new Fc(i,e)}return n.tension=function(i){return t(+i)},n}(0);function Vc(t,e){this._context=t,this._k=(1-e)/6}Vc.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:ns(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const g8=function t(e){function n(i){return new Vc(i,e)}return n.tension=function(i){return t(+i)},n}(0);function qc(t,e,n){var i=t._x1,a=t._y1,r=t._x2,s=t._y2;if(t._l01_a>Mt){var o=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,l=3*t._l01_a*(t._l01_a+t._l12_a);i=(i*o-t._x0*t._l12_2a+t._x2*t._l01_2a)/l,a=(a*o-t._y0*t._l12_2a+t._y2*t._l01_2a)/l}if(t._l23_a>Mt){var c=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,h=3*t._l23_a*(t._l23_a+t._l12_a);r=(r*c+t._x1*t._l23_2a-e*t._l12_2a)/h,s=(s*c+t._y1*t._l23_2a-n*t._l12_2a)/h}t._context.bezierCurveTo(i,a,r,s,t._x2,t._y2)}function Sg(t,e){this._context=t,this._alpha=e}Sg.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,i=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:qc(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const m8=function t(e){function n(i){return e?new Sg(i,e):new Uc(i,0)}return n.alpha=function(i){return t(+i)},n}(.5);function Ag(t,e){this._context=t,this._alpha=e}Ag.prototype={areaStart:Oe,areaEnd:Oe,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,i=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:qc(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const b8=function t(e){function n(i){return e?new Ag(i,e):new Fc(i,0)}return n.alpha=function(i){return t(+i)},n}(.5);function Lg(t,e){this._context=t,this._alpha=e}Lg.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,i=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:qc(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const y8=function t(e){function n(i){return e?new Lg(i,e):new Vc(i,0)}return n.alpha=function(i){return t(+i)},n}(.5);function Cg(t){this._context=t}Cg.prototype={areaStart:Oe,areaEnd:Oe,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function v8(t){return new Cg(t)}function lf(t){return t<0?-1:1}function cf(t,e,n){var i=t._x1-t._x0,a=e-t._x1,r=(t._y1-t._y0)/(i||a<0&&-0),s=(n-t._y1)/(a||i<0&&-0),o=(r*a+s*i)/(i+a);return(lf(r)+lf(s))*Math.min(Math.abs(r),Math.abs(s),.5*Math.abs(o))||0}function hf(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function Co(t,e,n){var i=t._x0,a=t._y0,r=t._x1,s=t._y1,o=(r-i)/3;t._context.bezierCurveTo(i+o,a+o*e,r-o,s-o*n,r,s)}function is(t){this._context=t}is.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Co(this,this._t0,hf(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,Co(this,hf(this,n=cf(this,t,e)),n);break;default:Co(this,this._t0,n=cf(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function Tg(t){this._context=new Ig(t)}(Tg.prototype=Object.create(is.prototype)).point=function(t,e){is.prototype.point.call(this,e,t)};function Ig(t){this._context=t}Ig.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,i,a,r){this._context.bezierCurveTo(e,t,i,n,r,a)}};function x8(t){return new is(t)}function _8(t){return new Tg(t)}function Rg(t){this._context=t}Rg.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var i=uf(t),a=uf(e),r=0,s=1;s<n;++r,++s)this._context.bezierCurveTo(i[0][r],a[0][r],i[1][r],a[1][r],t[s],e[s]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function uf(t){var e,n=t.length-1,i,a=new Array(n),r=new Array(n),s=new Array(n);for(a[0]=0,r[0]=2,s[0]=t[0]+2*t[1],e=1;e<n-1;++e)a[e]=1,r[e]=4,s[e]=4*t[e]+2*t[e+1];for(a[n-1]=2,r[n-1]=7,s[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)i=a[e]/r[e-1],r[e]-=i,s[e]-=i*s[e-1];for(a[n-1]=s[n-1]/r[n-1],e=n-2;e>=0;--e)a[e]=(s[e]-a[e+1])/r[e];for(r[n-1]=(t[n]+a[n-1])/2,e=0;e<n-1;++e)r[e]=2*t[e+1]-a[e+1];return[a,r]}function w8(t){return new Rg(t)}function Gs(t,e){this._context=t,this._t=e}Gs.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function M8(t){return new Gs(t,.5)}function k8(t){return new Gs(t,0)}function D8(t){return new Gs(t,1)}function Jn(t,e){if((s=t.length)>1)for(var n=1,i,a,r=t[e[0]],s,o=r.length;n<s;++n)for(a=r,r=t[e[n]],i=0;i<o;++i)r[i][1]+=r[i][0]=isNaN(a[i][1])?a[i][0]:a[i][1]}function jn(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function S8(t,e){return t[e]}function A8(){var t=K([]),e=jn,n=Jn,i=S8;function a(r){var s=t.apply(this,arguments),o,l=r.length,c=s.length,h=new Array(c),f;for(o=0;o<c;++o){for(var u=s[o],d=h[o]=new Array(l),p=0,g;p<l;++p)d[p]=g=[0,+i(r[p],u,p,r)],g.data=r[p];d.key=u}for(o=0,f=e(h);o<c;++o)h[f[o]].index=o;return n(h,f),h}return a.keys=function(r){return arguments.length?(t=typeof r=="function"?r:K(Il.call(r)),a):t},a.value=function(r){return arguments.length?(i=typeof r=="function"?r:K(+r),a):i},a.order=function(r){return arguments.length?(e=r==null?jn:typeof r=="function"?r:K(Il.call(r)),a):e},a.offset=function(r){return arguments.length?(n=r??Jn,a):n},a}function L8(t,e){if((i=t.length)>0){for(var n,i,a=0,r=t[0].length,s;a<r;++a){for(s=n=0;n<i;++n)s+=t[n][a][1]||0;if(s)for(n=0;n<i;++n)t[n][a][1]/=s}Jn(t,e)}}function C8(t,e){if((l=t.length)>0)for(var n,i=0,a,r,s,o,l,c=t[e[0]].length;i<c;++i)for(s=o=0,n=0;n<l;++n)(r=(a=t[e[n]][i])[1]-a[0])>0?(a[0]=s,a[1]=s+=r):r<0?(a[1]=o,a[0]=o+=r):(a[0]=0,a[1]=r)}function T8(t,e){if((a=t.length)>0){for(var n=0,i=t[e[0]],a,r=i.length;n<r;++n){for(var s=0,o=0;s<a;++s)o+=t[s][n][1]||0;i[n][1]+=i[n][0]=-o/2}Jn(t,e)}}function I8(t,e){if(!(!((s=t.length)>0)||!((r=(a=t[e[0]]).length)>0))){for(var n=0,i=1,a,r,s;i<r;++i){for(var o=0,l=0,c=0;o<s;++o){for(var h=t[e[o]],f=h[i][1]||0,u=h[i-1][1]||0,d=(f-u)/2,p=0;p<o;++p){var g=t[e[p]],m=g[i][1]||0,b=g[i-1][1]||0;d+=m-b}l+=f,c+=d*f}a[i-1][1]+=a[i-1][0]=n,l&&(n-=c/l)}a[i-1][1]+=a[i-1][0]=n,Jn(t,e)}}function Pg(t){var e=t.map(R8);return jn(t).sort(function(n,i){return e[n]-e[i]})}function R8(t){for(var e=-1,n=0,i=t.length,a,r=-1/0;++e<i;)(a=+t[e][1])>r&&(r=a,n=e);return n}function Eg(t){var e=t.map($g);return jn(t).sort(function(n,i){return e[n]-e[i]})}function $g(t){for(var e=0,n=-1,i=t.length,a;++n<i;)(a=+t[n][1])&&(e+=a);return e}function P8(t){return Eg(t).reverse()}function E8(t){var e=t.length,n,i,a=t.map($g),r=Pg(t),s=0,o=0,l=[],c=[];for(n=0;n<e;++n)i=r[n],s<o?(s+=a[i],l.push(i)):(o+=a[i],c.push(i));return c.reverse().concat(l)}function $8(t){return jn(t).reverse()}function ff(t){return function(){return t}}function Y8(t){return t[0]}function N8(t){return t[1]}function as(){this._=null}function Bs(t){t.U=t.C=t.L=t.R=t.P=t.N=null}as.prototype={constructor:as,insert:function(t,e){var n,i,a;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;n=t}else this._?(t=df(this._),e.P=null,e.N=t,t.P=t.L=e,n=t):(e.P=e.N=null,this._=e,n=null);for(e.L=e.R=null,e.U=n,e.C=!0,t=e;n&&n.C;)i=n.U,n===i.L?(a=i.R,a&&a.C?(n.C=a.C=!1,i.C=!0,t=i):(t===n.R&&(pi(this,n),t=n,n=t.U),n.C=!1,i.C=!0,gi(this,i))):(a=i.L,a&&a.C?(n.C=a.C=!1,i.C=!0,t=i):(t===n.L&&(gi(this,n),t=n,n=t.U),n.C=!1,i.C=!0,pi(this,i))),n=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e=t.U,n,i=t.L,a=t.R,r,s;if(i?a?r=df(a):r=i:r=a,e?e.L===t?e.L=r:e.R=r:this._=r,i&&a?(s=r.C,r.C=t.C,r.L=i,i.U=r,r!==a?(e=r.U,r.U=t.U,t=r.R,e.L=t,r.R=a,a.U=r):(r.U=e,e=r,t=r.R)):(s=t.C,t=r),t&&(t.U=e),!s){if(t&&t.C){t.C=!1;return}do{if(t===this._)break;if(t===e.L){if(n=e.R,n.C&&(n.C=!1,e.C=!0,pi(this,e),n=e.R),n.L&&n.L.C||n.R&&n.R.C){(!n.R||!n.R.C)&&(n.L.C=!1,n.C=!0,gi(this,n),n=e.R),n.C=e.C,e.C=n.R.C=!1,pi(this,e),t=this._;break}}else if(n=e.L,n.C&&(n.C=!1,e.C=!0,gi(this,e),n=e.L),n.L&&n.L.C||n.R&&n.R.C){(!n.L||!n.L.C)&&(n.R.C=!1,n.C=!0,pi(this,n),n=e.L),n.C=e.C,e.C=n.L.C=!1,gi(this,e),t=this._;break}n.C=!0,t=e,e=e.U}while(!t.C);t&&(t.C=!1)}}};function pi(t,e){var n=e,i=e.R,a=n.U;a?a.L===n?a.L=i:a.R=i:t._=i,i.U=a,n.U=i,n.R=i.L,n.R&&(n.R.U=n),i.L=n}function gi(t,e){var n=e,i=e.L,a=n.U;a?a.L===n?a.L=i:a.R=i:t._=i,i.U=a,n.U=i,n.L=i.R,n.L&&(n.L.U=n),i.R=n}function df(t){for(;t.L;)t=t.L;return t}function $i(t,e,n,i){var a=[null,null],r=kt.push(a)-1;return a.left=t,a.right=e,n&&rs(a,t,e,n),i&&rs(a,e,t,i),Ht[t.index].halfedges.push(r),Ht[e.index].halfedges.push(r),a}function mi(t,e,n){var i=[e,n];return i.left=t,i}function rs(t,e,n,i){!t[0]&&!t[1]?(t[0]=i,t.left=e,t.right=n):t.left===n?t[1]=i:t[0]=i}function z8(t,e,n,i,a){var r=t[0],s=t[1],o=r[0],l=r[1],c=s[0],h=s[1],f=0,u=1,d=c-o,p=h-l,g;if(g=e-o,!(!d&&g>0)){if(g/=d,d<0){if(g<f)return;g<u&&(u=g)}else if(d>0){if(g>u)return;g>f&&(f=g)}if(g=i-o,!(!d&&g<0)){if(g/=d,d<0){if(g>u)return;g>f&&(f=g)}else if(d>0){if(g<f)return;g<u&&(u=g)}if(g=n-l,!(!p&&g>0)){if(g/=p,p<0){if(g<f)return;g<u&&(u=g)}else if(p>0){if(g>u)return;g>f&&(f=g)}if(g=a-l,!(!p&&g<0)){if(g/=p,p<0){if(g>u)return;g>f&&(f=g)}else if(p>0){if(g<f)return;g<u&&(u=g)}return!(f>0)&&!(u<1)||(f>0&&(t[0]=[o+f*d,l+f*p]),u<1&&(t[1]=[o+u*d,l+u*p])),!0}}}}}function X8(t,e,n,i,a){var r=t[1];if(r)return!0;var s=t[0],o=t.left,l=t.right,c=o[0],h=o[1],f=l[0],u=l[1],d=(c+f)/2,p=(h+u)/2,g,m;if(u===h){if(d<e||d>=i)return;if(c>f){if(!s)s=[d,n];else if(s[1]>=a)return;r=[d,a]}else{if(!s)s=[d,a];else if(s[1]<n)return;r=[d,n]}}else if(g=(c-f)/(u-h),m=p-g*d,g<-1||g>1)if(c>f){if(!s)s=[(n-m)/g,n];else if(s[1]>=a)return;r=[(a-m)/g,a]}else{if(!s)s=[(a-m)/g,a];else if(s[1]<n)return;r=[(n-m)/g,n]}else if(h<u){if(!s)s=[e,g*e+m];else if(s[0]>=i)return;r=[i,g*i+m]}else{if(!s)s=[i,g*i+m];else if(s[0]<e)return;r=[e,g*e+m]}return t[0]=s,t[1]=r,!0}function H8(t,e,n,i){for(var a=kt.length,r;a--;)(!X8(r=kt[a],t,e,n,i)||!z8(r,t,e,n,i)||!(Math.abs(r[0][0]-r[1][0])>nt||Math.abs(r[0][1]-r[1][1])>nt))&&delete kt[a]}function G8(t){return Ht[t.index]={site:t,halfedges:[]}}function B8(t,e){var n=t.site,i=e.left,a=e.right;return n===a&&(a=i,i=n),a?Math.atan2(a[1]-i[1],a[0]-i[0]):(n===i?(i=e[1],a=e[0]):(i=e[0],a=e[1]),Math.atan2(i[0]-a[0],a[1]-i[1]))}function Yg(t,e){return e[+(e.left!==t.site)]}function O8(t,e){return e[+(e.left===t.site)]}function W8(){for(var t=0,e=Ht.length,n,i,a,r;t<e;++t)if((n=Ht[t])&&(r=(i=n.halfedges).length)){var s=new Array(r),o=new Array(r);for(a=0;a<r;++a)s[a]=a,o[a]=B8(n,kt[i[a]]);for(s.sort(function(l,c){return o[c]-o[l]}),a=0;a<r;++a)o[a]=i[s[a]];for(a=0;a<r;++a)i[a]=o[a]}}function U8(t,e,n,i){var a=Ht.length,r,s,o,l,c,h,f,u,d,p,g,m,b=!0;for(r=0;r<a;++r)if(s=Ht[r]){for(o=s.site,c=s.halfedges,l=c.length;l--;)kt[c[l]]||c.splice(l,1);for(l=0,h=c.length;l<h;)p=O8(s,kt[c[l]]),g=p[0],m=p[1],f=Yg(s,kt[c[++l%h]]),u=f[0],d=f[1],(Math.abs(g-u)>nt||Math.abs(m-d)>nt)&&(c.splice(l,0,kt.push(mi(o,p,Math.abs(g-t)<nt&&i-m>nt?[t,Math.abs(u-t)<nt?d:i]:Math.abs(m-i)<nt&&n-g>nt?[Math.abs(d-i)<nt?u:n,i]:Math.abs(g-n)<nt&&m-e>nt?[n,Math.abs(u-n)<nt?d:e]:Math.abs(m-e)<nt&&g-t>nt?[Math.abs(d-e)<nt?u:t,e]:null))-1),++h);h&&(b=!1)}if(b){var v,y,x,M=1/0;for(r=0,b=null;r<a;++r)(s=Ht[r])&&(o=s.site,v=o[0]-t,y=o[1]-e,x=v*v+y*y,x<M&&(M=x,b=s));if(b){var S=[t,e],k=[t,i],I=[n,i],C=[n,e];b.halfedges.push(kt.push(mi(o=b.site,S,k))-1,kt.push(mi(o,k,I))-1,kt.push(mi(o,I,C))-1,kt.push(mi(o,C,S))-1)}}for(r=0;r<a;++r)(s=Ht[r])&&(s.halfedges.length||delete Ht[r])}var Ng=[],Zc;function F8(){Bs(this),this.x=this.y=this.arc=this.site=this.cy=null}function Yn(t){var e=t.P,n=t.N;if(!(!e||!n)){var i=e.site,a=t.site,r=n.site;if(i!==r){var s=a[0],o=a[1],l=i[0]-s,c=i[1]-o,h=r[0]-s,f=r[1]-o,u=2*(l*f-c*h);if(!(u>=-Q8)){var d=l*l+c*c,p=h*h+f*f,g=(f*d-c*p)/u,m=(l*p-h*d)/u,b=Ng.pop()||new F8;b.arc=t,b.site=a,b.x=g+s,b.y=(b.cy=m+o)+Math.sqrt(g*g+m*m),t.circle=b;for(var v=null,y=la._;y;)if(b.y<y.y||b.y===y.y&&b.x<=y.x)if(y.L)y=y.L;else{v=y.P;break}else if(y.R)y=y.R;else{v=y;break}la.insert(v,b),v||(Zc=b)}}}}function Gn(t){var e=t.circle;e&&(e.P||(Zc=e.N),la.remove(e),Ng.push(e),Bs(e),t.circle=null)}var zg=[];function V8(){Bs(this),this.edge=this.site=this.circle=null}function pf(t){var e=zg.pop()||new V8;return e.site=t,e}function To(t){Gn(t),Bn.remove(t),zg.push(t),Bs(t)}function q8(t){var e=t.circle,n=e.x,i=e.cy,a=[n,i],r=t.P,s=t.N,o=[t];To(t);for(var l=r;l.circle&&Math.abs(n-l.circle.x)<nt&&Math.abs(i-l.circle.cy)<nt;)r=l.P,o.unshift(l),To(l),l=r;o.unshift(l),Gn(l);for(var c=s;c.circle&&Math.abs(n-c.circle.x)<nt&&Math.abs(i-c.circle.cy)<nt;)s=c.N,o.push(c),To(c),c=s;o.push(c),Gn(c);var h=o.length,f;for(f=1;f<h;++f)c=o[f],l=o[f-1],rs(c.edge,l.site,c.site,a);l=o[0],c=o[h-1],c.edge=$i(l.site,c.site,null,a),Yn(l),Yn(c)}function Z8(t){for(var e=t[0],n=t[1],i,a,r,s,o=Bn._;o;)if(r=Xg(o,n)-e,r>nt)o=o.L;else if(s=e-K8(o,n),s>nt){if(!o.R){i=o;break}o=o.R}else{r>-nt?(i=o.P,a=o):s>-nt?(i=o,a=o.N):i=a=o;break}G8(t);var l=pf(t);if(Bn.insert(i,l),!(!i&&!a)){if(i===a){Gn(i),a=pf(i.site),Bn.insert(l,a),l.edge=a.edge=$i(i.site,l.site),Yn(i),Yn(a);return}if(!a){l.edge=$i(i.site,l.site);return}Gn(i),Gn(a);var c=i.site,h=c[0],f=c[1],u=t[0]-h,d=t[1]-f,p=a.site,g=p[0]-h,m=p[1]-f,b=2*(u*m-d*g),v=u*u+d*d,y=g*g+m*m,x=[(m*v-d*y)/b+h,(u*y-g*v)/b+f];rs(a.edge,c,p,x),l.edge=$i(c,t,null,x),a.edge=$i(t,p,null,x),Yn(i),Yn(a)}}function Xg(t,e){var n=t.site,i=n[0],a=n[1],r=a-e;if(!r)return i;var s=t.P;if(!s)return-1/0;n=s.site;var o=n[0],l=n[1],c=l-e;if(!c)return o;var h=o-i,f=1/r-1/c,u=h/c;return f?(-u+Math.sqrt(u*u-2*f*(h*h/(-2*c)-l+c/2+a-r/2)))/f+i:(i+o)/2}function K8(t,e){var n=t.N;if(n)return Xg(n,e);var i=t.site;return i[1]===e?i[0]:1/0}var nt=1e-6,Q8=1e-12,Bn,Ht,la,kt;function J8(t,e,n){return(t[0]-n[0])*(e[1]-t[1])-(t[0]-e[0])*(n[1]-t[1])}function j8(t,e){return e[1]-t[1]||e[0]-t[0]}function Pl(t,e){var n=t.sort(j8).pop(),i,a,r;for(kt=[],Ht=new Array(t.length),Bn=new as,la=new as;;)if(r=Zc,n&&(!r||n[1]<r.y||n[1]===r.y&&n[0]<r.x))(n[0]!==i||n[1]!==a)&&(Z8(n),i=n[0],a=n[1]),n=t.pop();else if(r)q8(r.arc);else break;if(W8(),e){var s=+e[0][0],o=+e[0][1],l=+e[1][0],c=+e[1][1];H8(s,o,l,c),U8(s,o,l,c)}this.edges=kt,this.cells=Ht,Bn=la=kt=Ht=null}Pl.prototype={constructor:Pl,polygons:function(){var t=this.edges;return this.cells.map(function(e){var n=e.halfedges.map(function(i){return Yg(e,t[i])});return n.data=e.site.data,n})},triangles:function(){var t=[],e=this.edges;return this.cells.forEach(function(n,i){if(o=(r=n.halfedges).length)for(var a=n.site,r,s=-1,o,l,c=e[r[o-1]],h=c.left===a?c.right:c.left;++s<o;)l=h,c=e[r[s]],h=c.left===a?c.right:c.left,l&&h&&i<l.index&&i<h.index&&J8(a,l,h)<0&&t.push([a.data,l.data,h.data])}),t},links:function(){return this.edges.filter(function(t){return t.right}).map(function(t){return{source:t.left.data,target:t.right.data}})},find:function(t,e,n){for(var i=this,a,r=i._found||0,s=i.cells.length,o;!(o=i.cells[r]);)if(++r>=s)return null;var l=t-o.site[0],c=e-o.site[1],h=l*l+c*c;do o=i.cells[a=r],r=null,o.halfedges.forEach(function(f){var u=i.edges[f],d=u.left;if(!((d===o.site||!d)&&!(d=u.right))){var p=t-d[0],g=e-d[1],m=p*p+g*g;m<h&&(h=m,r=d.index)}});while(r!==null);return i._found=a,n==null||h<=n*n?o.site:null}};function t4(){var t=Y8,e=N8,n=null;function i(a){return new Pl(a.map(function(r,s){var o=[Math.round(t(r,s,a)/nt)*nt,Math.round(e(r,s,a)/nt)*nt];return o.index=s,o.data=r,o}),n)}return i.polygons=function(a){return i(a).polygons()},i.links=function(a){return i(a).links()},i.triangles=function(a){return i(a).triangles()},i.x=function(a){return arguments.length?(t=typeof a=="function"?a:ff(+a),i):t},i.y=function(a){return arguments.length?(e=typeof a=="function"?a:ff(+a),i):e},i.extent=function(a){return arguments.length?(n=a==null?null:[[+a[0][0],+a[0][1]],[+a[1][0],+a[1][1]]],i):n&&[[n[0][0],n[0][1]],[n[1][0],n[1][1]]]},i.size=function(a){return arguments.length?(n=a==null?null:[[0,0],[+a[0],+a[1]]],i):n&&[n[1][0]-n[0][0],n[1][1]-n[0][1]]},i}function Ba(t){return function(){return t}}function e4(t,e,n){this.target=t,this.type=e,this.transform=n}function we(t,e,n){this.k=t,this.x=e,this.y=n}we.prototype={constructor:we,scale:function(t){return t===1?this:new we(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new we(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Os=new we(1,0,0);Hg.prototype=we.prototype;function Hg(t){for(;!t.__zoom;)if(!(t=t.parentNode))return Os;return t.__zoom}function Io(){w.stopImmediatePropagation()}function bi(){w.preventDefault(),w.stopImmediatePropagation()}function n4(){return!w.ctrlKey&&!w.button}function i4(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function gf(){return this.__zoom||Os}function a4(){return-w.deltaY*(w.deltaMode===1?.05:w.deltaMode?1:.002)}function r4(){return navigator.maxTouchPoints||"ontouchstart"in this}function s4(t,e,n){var i=t.invertX(e[0][0])-n[0][0],a=t.invertX(e[1][0])-n[1][0],r=t.invertY(e[0][1])-n[0][1],s=t.invertY(e[1][1])-n[1][1];return t.translate(a>i?(i+a)/2:Math.min(0,i)||Math.max(0,a),s>r?(r+s)/2:Math.min(0,r)||Math.max(0,s))}function o4(){var t=n4,e=i4,n=s4,i=a4,a=r4,r=[0,1/0],s=[[-1/0,-1/0],[1/0,1/0]],o=250,l=md,c=vn("start","zoom","end"),h,f,u=500,d=150,p=0;function g(_){_.property("__zoom",gf).on("wheel.zoom",S).on("mousedown.zoom",k).on("dblclick.zoom",I).filter(a).on("touchstart.zoom",C).on("touchmove.zoom",T).on("touchend.zoom touchcancel.zoom",L).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}g.transform=function(_,A,P){var D=_.selection?_.selection():_;D.property("__zoom",gf),_!==D?y(_,A,P):D.interrupt().each(function(){x(this,arguments).start().zoom(null,typeof A=="function"?A.apply(this,arguments):A).end()})},g.scaleBy=function(_,A,P){g.scaleTo(_,function(){var D=this.__zoom.k,R=typeof A=="function"?A.apply(this,arguments):A;return D*R},P)},g.scaleTo=function(_,A,P){g.transform(_,function(){var D=e.apply(this,arguments),R=this.__zoom,z=P==null?v(D):typeof P=="function"?P.apply(this,arguments):P,Y=R.invert(z),X=typeof A=="function"?A.apply(this,arguments):A;return n(b(m(R,X),z,Y),D,s)},P)},g.translateBy=function(_,A,P){g.transform(_,function(){return n(this.__zoom.translate(typeof A=="function"?A.apply(this,arguments):A,typeof P=="function"?P.apply(this,arguments):P),e.apply(this,arguments),s)})},g.translateTo=function(_,A,P,D){g.transform(_,function(){var R=e.apply(this,arguments),z=this.__zoom,Y=D==null?v(R):typeof D=="function"?D.apply(this,arguments):D;return n(Os.translate(Y[0],Y[1]).scale(z.k).translate(typeof A=="function"?-A.apply(this,arguments):-A,typeof P=="function"?-P.apply(this,arguments):-P),R,s)},D)};function m(_,A){return A=Math.max(r[0],Math.min(r[1],A)),A===_.k?_:new we(A,_.x,_.y)}function b(_,A,P){var D=A[0]-P[0]*_.k,R=A[1]-P[1]*_.k;return D===_.x&&R===_.y?_:new we(_.k,D,R)}function v(_){return[(+_[0][0]+ +_[1][0])/2,(+_[0][1]+ +_[1][1])/2]}function y(_,A,P){_.on("start.zoom",function(){x(this,arguments).start()}).on("interrupt.zoom end.zoom",function(){x(this,arguments).end()}).tween("zoom",function(){var D=this,R=arguments,z=x(D,R),Y=e.apply(D,R),X=P==null?v(Y):typeof P=="function"?P.apply(D,R):P,W=Math.max(Y[1][0]-Y[0][0],Y[1][1]-Y[0][1]),U=D.__zoom,rt=typeof A=="function"?A.apply(D,R):A,et=l(U.invert(X).concat(W/U.k),rt.invert(X).concat(W/rt.k));return function(J){if(J===1)J=rt;else{var ht=et(J),Ot=W/ht[2];J=new we(Ot,X[0]-ht[0]*Ot,X[1]-ht[1]*Ot)}z.zoom(null,J)}})}function x(_,A,P){return!P&&_.__zooming||new M(_,A)}function M(_,A){this.that=_,this.args=A,this.active=0,this.extent=e.apply(_,A),this.taps=0}M.prototype={start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(_,A){return this.mouse&&_!=="mouse"&&(this.mouse[1]=A.invert(this.mouse[0])),this.touch0&&_!=="touch"&&(this.touch0[1]=A.invert(this.touch0[0])),this.touch1&&_!=="touch"&&(this.touch1[1]=A.invert(this.touch1[0])),this.that.__zoom=A,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(_){Oi(new e4(g,_,this.that.__zoom),c.apply,c,[_,this.that,this.args])}};function S(){if(!t.apply(this,arguments))return;var _=x(this,arguments),A=this.__zoom,P=Math.max(r[0],Math.min(r[1],A.k*Math.pow(2,i.apply(this,arguments)))),D=nn(this);if(_.wheel)(_.mouse[0][0]!==D[0]||_.mouse[0][1]!==D[1])&&(_.mouse[1]=A.invert(_.mouse[0]=D)),clearTimeout(_.wheel);else{if(A.k===P)return;_.mouse=[D,A.invert(D)],rn(this),_.start()}bi(),_.wheel=setTimeout(R,d),_.zoom("mouse",n(b(m(A,P),_.mouse[0],_.mouse[1]),_.extent,s));function R(){_.wheel=null,_.end()}}function k(){if(f||!t.apply(this,arguments))return;var _=x(this,arguments,!0),A=O(w.view).on("mousemove.zoom",z,!0).on("mouseup.zoom",Y,!0),P=nn(this),D=w.clientX,R=w.clientY;gs(w.view),Io(),_.mouse=[P,this.__zoom.invert(P)],rn(this),_.start();function z(){if(bi(),!_.moved){var X=w.clientX-D,W=w.clientY-R;_.moved=X*X+W*W>p}_.zoom("mouse",n(b(_.that.__zoom,_.mouse[0]=nn(_.that),_.mouse[1]),_.extent,s))}function Y(){A.on("mousemove.zoom mouseup.zoom",null),ms(w.view,_.moved),bi(),_.end()}}function I(){if(t.apply(this,arguments)){var _=this.__zoom,A=nn(this),P=_.invert(A),D=_.k*(w.shiftKey?.5:2),R=n(b(m(_,D),A,P),e.apply(this,arguments),s);bi(),o>0?O(this).transition().duration(o).call(y,R,A):O(this).call(g.transform,R)}}function C(){if(t.apply(this,arguments)){var _=w.touches,A=_.length,P=x(this,arguments,w.changedTouches.length===A),D,R,z,Y;for(Io(),R=0;R<A;++R)z=_[R],Y=Wi(this,_,z.identifier),Y=[Y,this.__zoom.invert(Y),z.identifier],P.touch0?!P.touch1&&P.touch0[2]!==Y[2]&&(P.touch1=Y,P.taps=0):(P.touch0=Y,D=!0,P.taps=1+!!h);h&&(h=clearTimeout(h)),D&&(P.taps<2&&(h=setTimeout(function(){h=null},u)),rn(this),P.start())}}function T(){if(this.__zooming){var _=x(this,arguments),A=w.changedTouches,P=A.length,D,R,z,Y;for(bi(),h&&(h=clearTimeout(h)),_.taps=0,D=0;D<P;++D)R=A[D],z=Wi(this,A,R.identifier),_.touch0&&_.touch0[2]===R.identifier?_.touch0[0]=z:_.touch1&&_.touch1[2]===R.identifier&&(_.touch1[0]=z);if(R=_.that.__zoom,_.touch1){var X=_.touch0[0],W=_.touch0[1],U=_.touch1[0],rt=_.touch1[1],et=(et=U[0]-X[0])*et+(et=U[1]-X[1])*et,J=(J=rt[0]-W[0])*J+(J=rt[1]-W[1])*J;R=m(R,Math.sqrt(et/J)),z=[(X[0]+U[0])/2,(X[1]+U[1])/2],Y=[(W[0]+rt[0])/2,(W[1]+rt[1])/2]}else if(_.touch0)z=_.touch0[0],Y=_.touch0[1];else return;_.zoom("touch",n(b(R,z,Y),_.extent,s))}}function L(){if(this.__zooming){var _=x(this,arguments),A=w.changedTouches,P=A.length,D,R;for(Io(),f&&clearTimeout(f),f=setTimeout(function(){f=null},u),D=0;D<P;++D)R=A[D],_.touch0&&_.touch0[2]===R.identifier?delete _.touch0:_.touch1&&_.touch1[2]===R.identifier&&delete _.touch1;if(_.touch1&&!_.touch0&&(_.touch0=_.touch1,delete _.touch1),_.touch0)_.touch0[1]=this.__zoom.invert(_.touch0[0]);else if(_.end(),_.taps===2){var z=O(this).on("dblclick.zoom");z&&z.apply(this,arguments)}}}return g.wheelDelta=function(_){return arguments.length?(i=typeof _=="function"?_:Ba(+_),g):i},g.filter=function(_){return arguments.length?(t=typeof _=="function"?_:Ba(!!_),g):t},g.touchable=function(_){return arguments.length?(a=typeof _=="function"?_:Ba(!!_),g):a},g.extent=function(_){return arguments.length?(e=typeof _=="function"?_:Ba([[+_[0][0],+_[0][1]],[+_[1][0],+_[1][1]]]),g):e},g.scaleExtent=function(_){return arguments.length?(r[0]=+_[0],r[1]=+_[1],g):[r[0],r[1]]},g.translateExtent=function(_){return arguments.length?(s[0][0]=+_[0][0],s[1][0]=+_[1][0],s[0][1]=+_[0][1],s[1][1]=+_[1][1],g):[[s[0][0],s[0][1]],[s[1][0],s[1][1]]]},g.constrain=function(_){return arguments.length?(n=_,g):n},g.duration=function(_){return arguments.length?(o=+_,g):o},g.interpolate=function(_){return arguments.length?(l=_,g):l},g.on=function(){var _=c.on.apply(c,arguments);return _===c?g:_},g.clickDistance=function(_){return arguments.length?(p=(_=+_)*_,g):Math.sqrt(p)},g}const l4=Object.freeze(Object.defineProperty({__proto__:null,FormatSpecifier:As,active:Tv,arc:hg,area:Gc,areaRadial:of,ascending:Ue,autoType:Ex,axisBottom:hs,axisLeft:us,axisRight:Pf,axisTop:zm,bisect:Ne,bisectLeft:pm,bisectRight:Ne,bisector:Yl,blob:Nx,brush:Ov,brushSelection:Hv,brushX:Gv,brushY:Bv,buffer:Xx,chord:Uv,clientPoint:ps,cluster:j_,color:Xe,contourDensity:yx,contours:Pd,create:ob,creator:fs,cross:mm,csv:Bx,csvFormat:Mx,csvFormatBody:kx,csvFormatRow:Sx,csvFormatRows:Dx,csvFormatValue:Ax,csvParse:$d,csvParseRows:wx,cubehelix:ie,curveBasis:c8,curveBasisClosed:h8,curveBasisOpen:u8,curveBundle:f8,curveCardinal:d8,curveCardinalClosed:p8,curveCardinalOpen:g8,curveCatmullRom:m8,curveCatmullRomClosed:b8,curveCatmullRomOpen:y8,curveLinear:Xs,curveLinearClosed:v8,curveMonotoneX:x8,curveMonotoneY:_8,curveNatural:w8,curveStep:M8,curveStepAfter:D8,curveStepBefore:k8,customEvent:Oi,descending:bm,deviation:Lf,dispatch:vn,drag:gb,dragDisable:gs,dragEnable:ms,dsv:Gx,dsvFormat:ks,easeBack:Lh,easeBackIn:Mv,easeBackInOut:Lh,easeBackOut:kv,easeBounce:Ki,easeBounceIn:_v,easeBounceInOut:wv,easeBounceOut:Ki,easeCircle:Ah,easeCircleIn:uv,easeCircleInOut:Ah,easeCircleOut:fv,easeCubic:Jo,easeCubicIn:iv,easeCubicInOut:Jo,easeCubicOut:av,easeElastic:hn,easeElasticIn:Dv,easeElasticInOut:Sv,easeElasticOut:hn,easeExp:Sh,easeExpIn:cv,easeExpInOut:Sh,easeExpOut:hv,easeLinear:tv,easePoly:kh,easePolyIn:rv,easePolyInOut:kh,easePolyOut:sv,easeQuad:Mh,easeQuadIn:ev,easeQuadInOut:Mh,easeQuadOut:nv,easeSin:Dh,easeSinIn:ov,easeSinInOut:Dh,easeSinOut:lv,entries:rx,get event(){return w},extent:Nl,forceCenter:Kx,forceCollide:g2,forceLink:b2,forceManyBody:M2,forceRadial:k2,forceSimulation:w2,forceX:D2,forceY:S2,get format(){return da},formatDefaultLocale:Gd,formatLocale:Hd,get formatPrefix(){return oc},formatSpecifier:Ji,geoAlbers:D0,geoAlbersUsa:I_,geoArea:Y2,geoAzimuthalEqualArea:R_,geoAzimuthalEqualAreaRaw:bc,geoAzimuthalEquidistant:P_,geoAzimuthalEquidistantRaw:yc,geoBounds:H2,geoCentroid:F2,geoCircle:V2,geoClipAntimeridian:gl,geoClipCircle:c0,geoClipExtent:t_,geoClipRectangle:Ls,geoConicConformal:$_,geoConicConformalRaw:L0,geoConicEqualArea:Ur,geoConicEqualAreaRaw:k0,geoConicEquidistant:N_,geoConicEquidistantRaw:C0,geoContains:o_,geoDistance:Nr,geoEqualEarth:X_,geoEqualEarthRaw:vc,geoEquirectangular:Y_,geoEquirectangularRaw:ea,geoGnomonic:H_,geoGnomonicRaw:xc,geoGraticule:f0,geoGraticule10:l_,geoIdentity:G_,geoInterpolate:c_,geoLength:h0,geoMercator:E_,geoMercatorRaw:ba,geoNaturalEarth1:B_,geoNaturalEarth1Raw:_c,geoOrthographic:O_,geoOrthographicRaw:wc,geoPath:__,geoProjection:be,geoProjectionMutator:gc,geoRotation:i0,geoStereographic:W_,geoStereographicRaw:Mc,geoStream:jt,geoTransform:w_,geoTransverseMercator:U_,geoTransverseMercatorRaw:kc,gray:Db,hcl:gr,hierarchy:Dc,histogram:_m,hsl:fr,html:qx,image:Wx,interpolate:fa,interpolateArray:Ib,interpolateBasis:nd,interpolateBasisClosed:id,interpolateBlues:v6,interpolateBrBG:J3,interpolateBuGn:o6,interpolateBuPu:l6,interpolateCividis:D6,interpolateCool:L6,interpolateCubehelix:Fb,interpolateCubehelixDefault:S6,interpolateCubehelixLong:xs,interpolateDate:cd,interpolateDiscrete:Eb,interpolateGnBu:c6,interpolateGreens:x6,interpolateGreys:_6,interpolateHcl:Wb,interpolateHclLong:Ub,interpolateHsl:Gb,interpolateHslLong:Bb,interpolateHue:$b,interpolateInferno:Y6,interpolateLab:Ob,interpolateMagma:$6,interpolateNumber:Vt,interpolateNumberArray:Kl,interpolateObject:hd,interpolateOrRd:h6,interpolateOranges:k6,interpolatePRGn:j3,interpolatePiYG:t6,interpolatePlasma:N6,interpolatePuBu:f6,interpolatePuBuGn:u6,interpolatePuOr:e6,interpolatePuRd:d6,interpolatePurples:w6,interpolateRainbow:C6,interpolateRdBu:n6,interpolateRdGy:i6,interpolateRdPu:p6,interpolateRdYlBu:a6,interpolateRdYlGn:r6,interpolateReds:M6,interpolateRgb:Vi,interpolateRgbBasis:sd,interpolateRgbBasisClosed:Tb,interpolateRound:ud,interpolateSinebow:R6,interpolateSpectral:s6,interpolateString:Ql,interpolateTransformCss:pd,interpolateTransformSvg:gd,interpolateTurbo:P6,interpolateViridis:E6,interpolateWarm:A6,interpolateYlGn:m6,interpolateYlGnBu:g6,interpolateYlOrBr:b6,interpolateYlOrRd:y6,interpolateZoom:md,interrupt:rn,interval:Jb,isoFormat:I3,isoParse:E3,json:Fx,keys:ix,lab:pr,lch:Sb,line:oa,lineRadial:sf,linkHorizontal:j6,linkRadial:e8,linkVertical:t8,local:Bf,map:Me,matcher:Bl,max:Tf,mean:km,median:Dm,merge:Hl,min:If,mouse:nn,namespace:ha,namespaces:Bo,nest:tx,now:ei,pack:kw,packEnclose:I0,packSiblings:_w,pairs:gm,partition:Dw,path:Ve,permute:Sm,pie:fg,piecewise:Vb,pointRadial:Ei,polygonArea:Hw,polygonCentroid:Gw,polygonContains:Uw,polygonHull:Ww,polygonLength:Fw,precisionFixed:Bd,precisionPrefix:Od,precisionRound:Wd,quadtree:Ss,quantile:Bi,quantize:qb,radialArea:of,radialLine:sf,randomBates:Zw,randomExponential:Kw,randomIrwinHall:H0,randomLogNormal:qw,randomNormal:X0,randomUniform:Vw,range:Gt,rgb:Wn,ribbon:jv,scaleBand:Sc,scaleDiverging:Ep,scaleDivergingLog:$p,scaleDivergingPow:zc,scaleDivergingSqrt:G3,scaleDivergingSymlog:Yp,scaleIdentity:U0,scaleImplicit:Ll,scaleLinear:Ge,scaleLog:V0,scaleOrdinal:Is,scalePoint:ai,scalePow:Tc,scaleQuantile:Z0,scaleQuantize:Ic,scaleSequential:Tp,scaleSequentialLog:Ip,scaleSequentialPow:Nc,scaleSequentialQuantile:Pp,scaleSequentialSqrt:H3,scaleSequentialSymlog:Rp,scaleSqrt:o5,scaleSymlog:q0,scaleThreshold:K0,scaleTime:z3,scaleUtc:X3,scan:Am,schemeAccent:O3,schemeBlues:ag,schemeBrBG:Np,schemeBuGn:Fp,schemeBuPu:Vp,schemeCategory10:B3,schemeDark2:W3,schemeGnBu:qp,schemeGreens:rg,schemeGreys:sg,schemeOrRd:Zp,schemeOranges:cg,schemePRGn:zp,schemePaired:U3,schemePastel1:F3,schemePastel2:V3,schemePiYG:Xp,schemePuBu:Qp,schemePuBuGn:Kp,schemePuOr:Hp,schemePuRd:Jp,schemePurples:og,schemeRdBu:Gp,schemeRdGy:Bp,schemeRdPu:jp,schemeRdYlBu:Op,schemeRdYlGn:Wp,schemeReds:lg,schemeSet1:q3,schemeSet2:Z3,schemeSet3:K3,schemeSpectral:Up,schemeTableau10:Q3,schemeYlGn:eg,schemeYlGnBu:tg,schemeYlOrBr:ng,schemeYlOrRd:ig,select:O,selectAll:cb,selection:xn,selector:ds,selectorAll:Gl,set:Id,shuffle:Lm,stack:A8,stackOffsetDiverging:C8,stackOffsetExpand:L8,stackOffsetNone:Jn,stackOffsetSilhouette:T8,stackOffsetWiggle:I8,stackOrderAppearance:Pg,stackOrderAscending:Eg,stackOrderDescending:P8,stackOrderInsideOut:E8,stackOrderNone:jn,stackOrderReverse:$8,stratify:Cw,style:on,sum:Cm,svg:Zx,symbol:l8,symbolCircle:Wc,symbolCross:gg,symbolDiamond:bg,symbolSquare:xg,symbolStar:vg,symbolTriangle:_g,symbolWye:wg,symbols:o8,text:Ds,thresholdFreedmanDiaconis:wm,thresholdScott:Mm,thresholdSturges:Xl,tickFormat:W0,tickIncrement:Yi,tickStep:sn,ticks:zl,timeDay:Ps,timeDays:h5,get timeFormat(){return Ec},timeFormatDefaultLocale:Lp,timeFormatLocale:wp,timeFriday:op,timeFridays:g5,timeHour:ip,timeHours:c5,timeInterval:gt,timeMillisecond:Kr,timeMilliseconds:Bu,timeMinute:ep,timeMinutes:l5,timeMonday:ia,timeMondays:u5,timeMonth:hp,timeMonths:b5,get timeParse(){return Ap},timeSaturday:lp,timeSaturdays:m5,timeSecond:jr,timeSeconds:Ou,timeSunday:na,timeSundays:Wu,timeThursday:gn,timeThursdays:p5,timeTuesday:rp,timeTuesdays:f5,timeWednesday:sp,timeWednesdays:d5,timeWeek:na,timeWeeks:Wu,timeYear:mn,timeYears:y5,timeout:qo,timer:ws,timerFlush:wd,touch:Wi,touches:hb,transition:Sd,transpose:Rf,tree:$w,treemap:Yw,treemapBinary:Nw,treemapDice:ya,treemapResquarify:Xw,treemapSlice:Ts,treemapSliceDice:zw,treemapSquarify:z0,tsv:Ox,tsvFormat:Cx,tsvFormatBody:Tx,tsvFormatRow:Rx,tsvFormatRows:Ix,tsvFormatValue:Px,tsvParse:Yd,tsvParseRows:Lx,utcDay:Es,utcDays:_5,get utcFormat(){return $s},utcFriday:yp,utcFridays:S5,utcHour:pp,utcHours:x5,utcMillisecond:Kr,utcMilliseconds:Bu,utcMinute:fp,utcMinutes:v5,utcMonday:ra,utcMondays:w5,utcMonth:_p,utcMonths:L5,get utcParse(){return $c},utcSaturday:vp,utcSaturdays:A5,utcSecond:jr,utcSeconds:Ou,utcSunday:aa,utcSundays:Uu,utcThursday:bn,utcThursdays:D5,utcTuesday:mp,utcTuesdays:M5,utcWednesday:bp,utcWednesdays:k5,utcWeek:aa,utcWeeks:Uu,utcYear:yn,utcYears:C5,values:ax,variance:Af,version:fm,voronoi:t4,window:Ol,xml:Vx,zip:Im,zoom:o4,zoomIdentity:Os,zoomTransform:Hg},Symbol.toStringTag,{value:"Module"})),Gg=(t,e=250)=>{let n;return(...i)=>{let a;return n&&clearTimeout(n),n=setTimeout(()=>{a=t(...i)},e),a}};function c4({D3Module:t,props:e,listenersKeys:n}){const i=en(void 0),a=en(),s=Gg(()=>{i.value&&i.value.render&&i.value.render()}),o=p=>p&&i.value.setParams&&i.value.setParams(p),l=p=>p&&i.value.setData&&i.value.setData(p),c=p=>p&&i.value.setDataset&&i.value.setDataset(p),h=p=>p&&i.value.setDatum&&i.value.setDatum(p),f=p=>p&&i.value.filter&&i.value.filter(p),u=({width:p,height:g})=>{i.value.resize&&i.value.resize({width:p&&typeof p=="number"?p:i.value.width,height:g&&typeof g=="number"?g:i.value.height})},d=p=>{p&&i.value.zoom&&i.value.transform&&i.value.transformZoom&&i.value.initZoom&&(i.value.initZoom(i.value.zoom),i.value.transformZoom(p))};return le(()=>e.params,p=>{o(p||{})}),le(()=>e.data,p=>{l(p)}),le(()=>e.dataset,p=>{c(p)}),le(()=>e.datum,p=>{h(p)}),le(()=>e.filter,p=>{f(p)}),le(()=>[e.width,e.height],({width:p,height:g})=>{(e.width||e.height)&&u({width:p,height:g})}),le(()=>e.zoom,p=>{d(p)}),{d3Module:i,debounceRender:s,createModule(p){a.value=p,i.value=new t(O(p),e.params||{}),o(e.params||{}),l(e.data),c(e.dataset),h(e.datum),f(e.filter),u({width:e.width,height:e.height}),d(e.zoom)},eventHandler(p){let g=p;n.forEach(m=>{i.value.on!=null&&i.value.on(m,b=>{g&&(console.log(m,b),g(m,b))})})}}}function h4(t){const e=en({x:0,y:0,width:0,height:0,top:0,right:0,bottom:0,left:0}),n=Gg(a=>{const r=a[0];e.value=r.contentRect});return new ResizeObserver((a,r)=>{n(a)}).observe(t),e}const Ro=800,mf=500,u4=(t,e)=>e?Object.keys(e):t?Object.keys(t).filter(n=>n.substring(0,2)==="on").map(n=>`${n.substring(2,3).toLowerCase()}${n.substring(3,n.length)}`):[],f4=om({props:{module:{},params:{},data:{},datum:{},dataset:{},filter:{},width:{default:()=>0},height:{default:()=>0},forceFit:{default:()=>!0},zoom:{}},setup(t,{emit:e,listeners:n}){const i=lm(),a=u4(i,n),r=en(null),s=en(null),o=ih(()=>{let g=`${Ro}px`;return t.forceFit&&!t.width?g="100%":typeof t.width=="string"?g=t.width:typeof t.width=="number"&&t.width?g=`${t.width}px`:g=`${Ro}px`,g}),l=ih(()=>{let g=`${mf}px`;return typeof t.height=="string"?g=t.height:typeof t.height=="number"&&t.height&&(g=`${t.height}px`),g}),c=en(Ro),h=en(mf),{d3Module:f,createModule:u,eventHandler:d,debounceRender:p}=c4({D3Module:t.module,props:t,listenersKeys:a});return cm(()=>{u(s.value),d((g,m)=>{e(g,m)}),setTimeout(()=>{if(c.value=r.value.clientWidth,h.value=r.value.clientHeight,t.forceFit){const g=h4(r.value);le(g,()=>{c.value=g.value.width,h.value=g.value.height,f.value.resize&&f.value.resize({width:c.value,height:h.value}),p(),e("resize",{width:c.value,height:h.value})})}else p();le(t,()=>p()),le(()=>[t.width,t.height],()=>{e("resize",{width:t.width,height:t.height})})})}),{d3Module:f,container:r,svg:s,containerWidth:o,containerHeight:l,svgWidth:c,svgHeight:h}}}),Bg=(t,e)=>{const n=t.__vccOpts||t;for(const[i,a]of e)n[i]=a;return n},d4=["width","height"];function p4(t,e,n,i,a,r){return $e(),Ye("div",{ref:"container",style:hm([{position:"relative"},{width:t.containerWidth,height:t.containerHeight}])},[($e(),Ye("svg",{ref:"svg","xmlns:xlink":"http://www.w3.org/1999/xlink",xmls:"http://www.w3.org/2000/svg",version:"1.1",style:{position:"absolute"},width:t.svgWidth,height:t.svgHeight},null,8,d4))],4)}const xa=Bg(f4,[["render",p4]]),ut=["#67B7DC","#6794DC","#6771DC","#8067DC","#A367DC","#C767DC","#DC67CE","#DC67AB","#DC6788","#DC6967","#DC8C67","#DCAF67"],Ae=800,Le=500,Bt={top:50,right:70,bottom:50,left:70},Kc="#e1e1e1",Ee="#7b7b7b",Qc={offsetX:20,offsetY:5,type:"white",templateHtml:()=>""},g4={...Qc,templateHtml:()=>"",yLine:void 0,alignCenter:void 0};({...Qc});class Og{constructor(e,n){this.params=Qc,this.datum={x:-1,y:-1,data:null},this.renderData={_sourceData:{x:-1,y:-1},x:-1,y:-1,contentHtml:""},this.setTooltipStyle=i=>{},this.render=()=>{this.renderTooltip([this.renderData])},this.selection=e,this.params={...this.params,...n},this.params.type==="black"?this.setTooltipStyle=i=>{i.style("pointer-events","none").style("white-space","nowrap").style("padding","10px 10px").style("background","#333333").style("border-radius","5px").style("opacity",.9).style("color","white").style("font-size","14px").style("text-align","left")}:this.params.type==="white"&&(this.setTooltipStyle=i=>{i.style("pointer-events","none").style("white-space","nowrap").style("padding","10px 15px").style("background-color","rgba(255,255,255,.8)").style("border","1px solid rgba(152,152,152,0.5)").style("border-radius","5px").style("color","black").style("font-size","12px").style("line-height","20px").style("text-align","left")})}setDatum(e){if(e!=null&&e.data&&(this.datum.data=e.data,this.renderData.contentHtml=this.params.templateHtml?this.params.templateHtml(e.data):""),!this.renderData.contentHtml)return;const n=(e==null?void 0:e.x)??w.clientX,i=(e==null?void 0:e.y)??w.clientY;this.datum.x=n,this.datum.y=i,this.renderData.x=n,this.renderData.y=i,this.render()}select(){return this.selection}}function m4(t){var i;const e=document.createElementNS("http://www.w3.org/1999/xhtml","div");e.innerHTML='<svg xmlns="http://www.w3.org/2000/svg">'+t+"</svg>";const n=document.createDocumentFragment();for(;n&&((i=e==null?void 0:e.firstChild)!=null&&i.firstChild);)n.appendChild(e.firstChild.firstChild);return n}function b4(t,e){const n=t.node();for(;n.hasChildNodes();)n.removeChild(n.firstChild);t.node().appendChild(m4(e))}function ss(t){try{return t.node().getBoundingClientRect()}catch(e){throw new Error(e)}}const os=(t,e)=>e instanceof Function?e(t):da(e)(t);class y4 extends Og{constructor(e,n){super(e,n),this.tooltipSelection=void 0,this.setParams(n??this.params)}setParams(e){this.params={...this.params,...e},((e==null?void 0:e.insideBoxMode)??!0)===!0?this.renderTooltip=this.renderInsideBox:this.renderTooltip=this.renderDefault}renderDefault(e){try{this.tooltipSelection.interrupt("fadeout")}catch{}const n=O("body").selectAll(".bpchat___tooltip").data(e),i=n.enter().append("div").classed("bpchat___tooltip",!0).call(this.setTooltipStyle);this.tooltipSelection=n.merge(i).style("position","fixed").style("z-index",1e4).style("left",a=>`${a.x+this.params.offsetX}px`).style("top",a=>`${a.y+this.params.offsetY}px`).html(a=>a.contentHtml).on("interrupt",(a,r,s)=>{O(s[r]).style("opacity",1)}),n.exit().transition("fadeout").style("opacity",0).remove().on("interrupt",(a,r,s)=>{O(s[r]).style("opacity",1)})}renderInsideBox(e){var h;try{this.tooltipSelection.interrupt("fadeout")}catch{}const n=ss(this.selection),i=(h=this.tooltipSelection)!=null&&h.node()?ss(this.tooltipSelection):{width:0,height:0},a=n.x,r=n.x+n.width-i.width,s=n.y,o=n.y+n.height-i.height,l=O("body").selectAll(".bpchat___tooltip").data(e),c=l.enter().append("div").classed("bpchat___tooltip",!0).call(this.setTooltipStyle);this.tooltipSelection=l.merge(c).style("position","fixed").style("z-index",1e4).style("left",f=>{const u=f.x+this.params.offsetX;return u<a?`${a}px`:u>r?`${r}px`:`${u}px`}).style("top",f=>{const u=f.y+this.params.offsetY;return u<s?`${s}px`:u>o?`${o}px`:`${u}px`}).html(f=>f.contentHtml),l.exit().transition("fadeout").style("opacity",0).remove().on("interrupt",(f,u,d)=>{O(d[u]).style("opacity",1)})}renderTooltip(e){}remove(){this.tooltipSelection&&this.tooltipSelection.transition("fadeout").style("opacity",0).remove().on("interrupt",(e,n,i)=>{O(i[n]).style("opacity",1)})}}const Wg={colors:ut,outerRadius:.95,innerRadius:0,outerMouseoverRadius:1,enterDuration:800,startAngle:0,endAngle:Math.PI*2,padAngle:.02,cornerRadius:0,highlightTarget:"item",highlightDatumId:"",highlightItemId:""},Zt=(t,e)=>t-e.left-e.right,Kt=(t,e)=>t-e.top-e.bottom,Jc=({axisLabels:t,axisWidth:e,padding:n=.5,reverse:i=!1})=>{let a=[0,e];return i&&(a=[e,0]),ai().domain(t).range(a).padding(.5)},ls=({maxValue:t,minValue:e,axisWidth:n,domainMinValue:i=void 0,domainMaxValue:a=void 0,domainMinRange:r=void 0,domainMaxRange:s=void 0,reverse:o=!1})=>{let l=e,c=t;if(i!=null){const f=i;l=f<l?f:l}if(r!=null){const f=t-(t-e)/(1-r);l=f<l?f:l}if(a!=null){const f=a;c=f>c?f:c}if(s!=null){const f=t/s;c=f>c?f:c}l==0&&c==0&&(c=1);let h=[l,c];return o&&(h=[c,l]),Ge().domain(h).range([0,n])},jc=({axisLabels:t,axisWidth:e,reverse:n=!1})=>{let a=[];return n?a=t.map((r,s)=>t.length-1-s):a=t.map((r,s)=>s),Ic().domain([-0,e+0]).range(a)},ae=(t,e)=>Is().domain(t.map(n=>n)).range(t.map((n,i)=>e[i])),El=({axisWidth:t,innerRadius:e,outerRadius:n,padAngle:i,cornerRadius:a})=>{const r=Ge().domain([0,1]).range([0,t/2]),s=r(n);return hg().innerRadius(r(e)).outerRadius(s).padAngle(i).padRadius(s).cornerRadius(a)},v4=({pathSelection:t,enter:e,exit:n,data:i,lastData:a,params:r})=>t&&!e.size()&&!n.size()?s=>{const o=i.map((l,c)=>{const h=a[c]??{startAngle:0,endAngle:0,value:0};return{...l,startAngle:l.startAngle*s+h.startAngle*(1-s),endAngle:l.endAngle*s+h.endAngle*(1-s),value:l.value*s+h.value*(1-s)}});return $l(o,r.startAngle,r.endAngle,1)}:s=>$l(i,r.startAngle,r.endAngle,s),x4=t=>{const e=new Map;return t.forEach(n=>{const i=e.get(n.data.itemLabel)??[];i.push(n),e.set(n.data.itemLabel,i)}),e},$l=(t,e,n,i)=>t.map((a,r)=>{const s=e+(a.startAngle-e)*i,o=s+(a.endAngle-a.startAngle)*i;return{...a,startAngle:s,endAngle:o}}),Oa=({dataset:t,datum:e,ItemDataMap:n,event:i})=>({dataset:t,groupData:e?[e]:[],itemData:e?n.get(e.data.itemLabel):[],datum:e||null,itemLabel:e?e.data.itemLabel:"",itemIndex:e?e.data.itemIndex:-1,clientX:i.clientX,clientY:i.clientY,offsetX:i.offsetX,offsetY:i.offsetY}),_4=t=>({dataset:t,groupData:[],itemData:[],datum:null,itemLabel:"",itemIndex:-1,clientX:-1,clientY:-1,offsetX:-1,offsetY:-1});let w4=class{constructor(e,n){this.params=Wg,this.dataset={data:[],itemLabels:[],axisWidth:0},this.width=Ae,this.height=Le,this.lastData=[],this.pieRenderData=[],this.pathSelection=void 0,this.ItemDataMap=new Map,this.mouseoverCallback=function(){},this.mousemoveCallback=function(){},this.mouseoutCallback=function(){},this.clickCallback=function(){},this.enterDurationCallback=function(){},this.setDonutEvent=i=>{i.on("mouseover",(a,r,s)=>{w.stopPropagation(),this.params.highlightTarget!=null&&this.params.highlightTarget!="none"&&(this.params.highlightTarget==="item"?this.highlight(i,a.data.itemLabel,void 0):this.params.highlightTarget==="datum"&&this.highlight(i,void 0,a.data.id));const o=Oa({dataset:this.dataset,datum:a,ItemDataMap:this.ItemDataMap,event:w});this.mouseoverCallback(o)}).on("mousemove",(a,r,s)=>{w.stopPropagation();const o=Oa({dataset:this.dataset,datum:a,ItemDataMap:this.ItemDataMap,event:w});this.mousemoveCallback(o)}).on("mouseout",(a,r,s)=>{w.stopPropagation(),this.initHighlight();const o=Oa({dataset:this.dataset,datum:a,ItemDataMap:this.ItemDataMap,event:w});this.mouseoutCallback(o)}).on("click",(a,r,s)=>{w.stopPropagation();const o=Oa({dataset:this.dataset,datum:a,ItemDataMap:this.ItemDataMap,event:w});this.clickCallback(o)})},this.selection=e,this.gSelection=e.append("g")}setParams(e){this.params={...this.params,...e},this.colorScale=ae(this.dataset.itemLabels,this.params.colors)}select(){return this.selection}remove(){this.selection.remove()}setDataset(e){this.dataset=e,this.ItemDataMap=x4(e.data),this.colorScale=ae(this.dataset.itemLabels,this.params.colors)}render(){this.arc=El({axisWidth:this.dataset.axisWidth,innerRadius:this.params.innerRadius,outerRadius:this.params.outerRadius,padAngle:this.params.padAngle,cornerRadius:this.params.cornerRadius}),this.arcMouseover=El({axisWidth:this.dataset.axisWidth,innerRadius:this.params.innerRadius,outerRadius:this.params.outerMouseoverRadius,padAngle:this.params.padAngle,cornerRadius:this.params.cornerRadius});let e=this.gSelection.selectAll("path").data(this.dataset.data,r=>r.data.id),n=e.enter(),i=e.exit();const a=v4({pathSelection:this.pathSelection,enter:n,exit:i,data:this.dataset.data,lastData:this.lastData,params:this.params});this.gSelection.transition().duration(this.params.enterDuration).tween("move",(r,s,o)=>l=>{this.pieRenderData=a(l),this.renderDonut(this.gSelection,this.pieRenderData,this.arc);const c=_4(this.dataset);this.enterDurationCallback(c,l)}).on("end",(r,s,o)=>{this.pieRenderData=$l(this.dataset.data,this.params.startAngle,this.params.endAngle,1),this.renderDonut(this.gSelection,this.pieRenderData,this.arc),this.params.highlightTarget&&this.params.highlightTarget!="none"&&this.pathSelection.style("cursor","pointer"),this.pathSelection&&this.setDonutEvent(this.pathSelection),this.initHighlight(),this.lastData=Object.assign([],this.dataset.data)})}on(e,n){return e==="click"?this.clickCallback=n:e==="mouseover"?this.mouseoverCallback=n:e==="mousemove"?this.mousemoveCallback=n:e==="mouseout"?this.mouseoutCallback=n:e==="enterDuration"&&(this.enterDurationCallback=n),this}initHighlight(){this.removeHighlight(),(this.params.highlightItemId||this.params.highlightDatumId)&&this.highlight(this.pathSelection,this.params.highlightItemId,this.params.highlightDatumId)}highlight(e,n,i){if(!e)return;let a=[];if(i&&a.push(i),n){const r=this.dataset.data.filter(s=>s.data.itemLabel===n).map(s=>s.id);a=a.concat(r)}e.each((r,s,o)=>{const l=O(o[s]);a.includes(r.data.id)?l.transition().ease(hn).duration(500).style("opacity",1).attr("d",c=>this.arcMouseover(c)):l.transition().style("opacity",.3).attr("d",c=>this.arc(c))})}removeHighlight(){this.pathSelection&&this.pathSelection.transition().style("opacity",1).attr("d",e=>this.arc(e))}renderDonut(e,n,i){let a=e.selectAll("path").data(n,o=>o.data.id),r=a.enter().append("path").classed("bpchart__pie-path",!0),s=a.exit();r.append("path"),this.pathSelection=a.merge(r),this.pathSelection.attr("fill",(o,l)=>this.colorScale(o.data.itemLabel)).attr("d",(o,l)=>i(o)),s.remove()}};const Ug={solidColor:void 0,colors:ut,outerRadius:1,enterDuration:800,startAngle:0,endAngle:Math.PI*2,centroid:2.3,fontSize:12,text:t=>String(t.value),highlightTarget:"item",highlightDatumId:"",highlightItemId:""},M4=t=>{const e=new Map;return t.forEach(n=>{const i=e.get(n.data.itemLabel)??[];i.push(n),e.set(n.data.itemLabel,i)}),e},k4=(t,e,n)=>t.data.map((i,a)=>{const[r,s]=e.centroid(i);return{...i,arcIndex:a,arcLabel:t.arcLabels[a],x:r*n,y:s*n}}),Wa=({dataset:t,datum:e,ItemDataMap:n,event:i})=>({dataset:t,groupData:[e],itemData:n.get(e.data.itemLabel),datum:e,itemLabel:e.data.itemLabel,itemIndex:e.data.itemIndex,clientX:i.clientX,clientY:i.clientY,offsetX:i.offsetX,offsetY:i.offsetY});class D4{constructor(e,n){this.params=Ug,this.dataset={data:[],itemLabels:[],arcLabels:[],axisWidth:0},this.width=Ae,this.height=Le,this.renderData=[],this.labelSelection=void 0,this.ItemDataMap=new Map,this.mouseoverCallback=function(){},this.mousemoveCallback=function(){},this.mouseoutCallback=function(){},this.clickCallback=function(){},this.setDonutEvent=i=>{i.on("mouseover",(a,r,s)=>{w.stopPropagation(),this.params.highlightTarget!=null&&this.params.highlightTarget!="none"&&(this.params.highlightTarget==="item"?this.highlight(i,a.data.itemLabel,void 0):this.params.highlightTarget==="datum"&&this.highlight(i,void 0,a.data.id));const o=Wa({dataset:this.dataset,datum:a,ItemDataMap:this.ItemDataMap,event:w});this.mouseoverCallback(o)}).on("mousemove",(a,r,s)=>{w.stopPropagation();const o=Wa({dataset:this.dataset,datum:a,ItemDataMap:this.ItemDataMap,event:w});this.mousemoveCallback(o)}).on("mouseout",(a,r,s)=>{w.stopPropagation(),this.initHighlight();const o=Wa({dataset:this.dataset,datum:a,ItemDataMap:this.ItemDataMap,event:w});this.mouseoutCallback(o)}).on("click",(a,r,s)=>{w.stopPropagation();const o=Wa({dataset:this.dataset,datum:a,ItemDataMap:this.ItemDataMap,event:w});this.clickCallback(o)})},this.selection=e,this.gSelection=e.append("g")}setParams(e){this.params={...this.params,...e},this.colorScale=ae(this.dataset.itemLabels,this.params.colors)}select(){return this.selection}remove(){this.selection.remove()}setDataset(e){this.dataset=e,this.ItemDataMap=M4(e.data),this.colorScale=ae(this.dataset.itemLabels,this.params.colors)}render(){this.arc=El({axisWidth:this.dataset.axisWidth,innerRadius:0,outerRadius:this.params.outerRadius,padAngle:0,cornerRadius:0});const e=k4(this.dataset,this.arc,this.params.centroid);this.renderLabel(this.gSelection,e,this.arc),this.labelSelection&&this.setDonutEvent(this.labelSelection)}on(e,n){return e==="click"?this.clickCallback=n:e==="mouseover"?this.mouseoverCallback=n:e==="mousemove"?this.mousemoveCallback=n:e==="mouseout"&&(this.mouseoutCallback=n),this}initHighlight(){this.removeHighlight(),(this.params.highlightItemId||this.params.highlightDatumId)&&this.highlight(this.labelSelection,this.params.highlightItemId,this.params.highlightDatumId)}highlight(e,n,i){if(!e)return;let a=[];if(i&&a.push(i),n){const r=this.dataset.data.filter(s=>s.data.itemLabel===n).map(s=>s.data.id);a=a.concat(r)}e.each((r,s,o)=>{const l=O(o[s]);a.includes(r.id)?l.transition().duration(200).style("opacity",1):l.transition().duration(200).style("opacity",.3)})}removeHighlight(){this.labelSelection&&this.labelSelection.transition().duration(200).style("opacity",1)}renderLabel(e,n,i){let a=e.selectAll("text").data(n,o=>o.id),r=a.enter().append("text").classed("bpchart__text",!0),s=a.exit();r.append("text"),this.labelSelection=a.merge(r),this.labelSelection.attr("font-weight","bold").attr("text-anchor","middle").style("dominant-baseline","middle").style("cursor",o=>this.params.highlightTarget&&this.params.highlightTarget!="none"?"pointer":"none").text(o=>this.params.text(o)).attr("font-size",this.params.fontSize).attr("fill",(o,l)=>this.params.solidColor??this.colorScale(o.data.itemLabel)).transition().attr("transform",o=>"translate("+o.x+","+o.y+")").on("end",()=>this.initHighlight()),s.remove()}}const Fg={padding:Bt,tooltipFollowing:{templateHtml:t=>`
      <div>
        <div>${t.datum.data.arcLabel}</div>
        <div>${t.datum.value}</div>
      </div>
    `}},S4={...Fg,graphicArcPie:Wg,labelArcPie:Ug,startAngle:0,endAngle:Math.PI*2,colors:ut,enterDuration:800,highlightTarget:"datum",highlightDatumId:"",highlightItemId:"",centerText:(t,e,n)=>[],centerTextAttrs:[],centerTextStyles:[]},Vg="__DEFAULT__",bf=(t,e,n)=>{const i=t-n.left-n.right,a=e-n.top-n.bottom;return i<a?i:a},A4=(t,e,n)=>t.map((i,a)=>{const r=i.itemLabel??Vg;return{...i,arcIndex:a,arcLabel:n[a],itemIndex:e.indexOf(r),itemLabel:r,id:n[a]}});class L4{constructor(e,n){this.params=Fg,this.dataset={data:[],itemLabels:[],arcLabels:[]},this.width=Ae,this.height=Le,this.mouseoverCallback=function(){},this.mousemoveCallback=function(){},this.mouseoutCallback=function(){},this.clickCallback=function(){},this.graphicData=[],this.itemLabels=[],this.arcLabels=[],this.shorterSideWidth=0,this.middleX=0,this.middleY=0,this.selection=e,this.graphicGSelection=e.append("g")}setParams(e){this.initGraphic(e),this.shorterSideWidth=bf(this.width,this.height,this.params.padding),this.params.tooltipFollowing?this.tooltip=new y4(this.selection,{templateHtml:this.params.tooltipFollowing.templateHtml,type:this.params.tooltipFollowing.type??"white",insideBoxMode:this.params.tooltipFollowing.insideBoxMode??!0}):this.tooltip&&(this.tooltip.remove(),this.tooltip=void 0)}resize({width:e,height:n}={width:this.width,height:this.height}){this.width=e,this.height=n,this.shorterSideWidth=bf(this.width,this.height,this.params.padding);const i=this.width/2,a=this.height/2;(i!==this.middleX||a!==this.middleY)&&(this.middleX=i,this.middleY=a,this.graphicGSelection.transition().attr("transform",`translate(${this.middleX}, ${this.middleY})`))}select(){return this.selection}remove(){this.selection.remove()}setDataset(e){this.dataset=e,this.itemLabels=this.dataset.itemLabels&&this.dataset.itemLabels.length?this.dataset.itemLabels:[Vg],this.arcLabels=this.dataset.arcLabels,this.graphicData=A4(this.dataset.data,this.itemLabels,this.arcLabels)}render(){this.setGraphicData({graphicData:this.graphicData,itemLabels:this.itemLabels,arcLabels:this.arcLabels,shorterSideWidth:this.shorterSideWidth}),this.renderGraphic()}on(e,n){return e==="click"?this.clickCallback=n:e==="mouseover"?this.mouseoverCallback=n:e==="mousemove"?this.mousemoveCallback=n:e==="mouseout"&&(this.mouseoutCallback=n),this}showTooltip(e,n){this.tooltip&&(n&&e?this.tooltip.setDatum({data:e,x:w.clientX,y:w.clientY}):this.tooltip.remove())}}const C4=({data:t,startAngle:e,endAngle:n,itemLabels:i,arcLabels:a})=>fg().startAngle(e).endAngle(n).value(o=>o.value).sort(null)(t).map((o,l)=>{const c=o.data.itemLabel;return{...o,itemIndex:i.indexOf(c),itemLabel:c,id:a[l]}}),Ua=(t,e,n)=>{const i=t.dataset.data.findIndex(a=>t.datum&&a.id===t.datum.id);return{dataset:e,groupData:t.groupData,itemData:t.itemData,datum:t.datum,itemIndex:t.itemIndex,itemLabel:t.itemLabel,arcIndex:i,arcLabel:e.arcLabels[i],clientX:n.clientX,clientY:n.clientY,offsetX:n.offsetX,offsetY:n.offsetY}},Fa=(t,e,n)=>{const i=t.dataset.data.findIndex(a=>t.datum&&a.data.id===t.datum.data.id);return{dataset:e,groupData:t.groupData,itemData:t.itemData,datum:t.datum,itemIndex:t.itemIndex,itemLabel:t.itemLabel,arcIndex:i,arcLabel:e.arcLabels[i],clientX:n.clientX,clientY:n.clientY,offsetX:n.offsetX,offsetY:n.offsetY}},Po=({eventCallback:t,eventName:e,t:n,centerText:i,centerTextAttrs:a,centerTextStyles:r})=>i(t,e,n).map((o,l)=>({text:o,attr:a[l],style:r[l]}));class T4 extends L4{constructor(e,n){super(e,n),this.params=S4,this.pieSelection=this.graphicGSelection.append("g"),this.labelSelection=this.graphicGSelection.append("g"),this.centerTextSelection=this.graphicGSelection.append("g"),this.pie=new w4(this.pieSelection,{}),this.label=new D4(this.labelSelection,{})}initGraphic(e){this.params={...this.params,...e,graphicArcPie:{...this.params.graphicArcPie,...e.graphicArcPie},labelArcPie:{...this.params.labelArcPie,...e.labelArcPie}},this.params.graphicArcPie={...this.params.graphicArcPie,colors:this.params.colors,startAngle:this.params.startAngle,endAngle:this.params.endAngle,highlightTarget:this.params.highlightTarget,highlightDatumId:this.params.highlightDatumId,highlightItemId:this.params.highlightItemId},this.params.labelArcPie={...this.params.labelArcPie,colors:this.params.colors,startAngle:this.params.startAngle,endAngle:this.params.endAngle,outerRadius:this.params.graphicArcPie.outerRadius,highlightTarget:this.params.highlightTarget,highlightDatumId:this.params.highlightDatumId,highlightItemId:this.params.highlightItemId},this.pie.setParams(this.params.graphicArcPie),this.pie.on("enterDuration",(n,i)=>{const a=Po({eventCallback:n,eventName:"enterDuration",t:i,centerText:this.params.centerText,centerTextAttrs:this.params.centerTextAttrs,centerTextStyles:this.params.centerTextStyles});this.renderText(this.centerTextSelection,a)}).on("click",n=>{const i=Ua(n,this.dataset,w);this.clickCallback(i)}).on("mouseover",n=>{const i=Ua(n,this.dataset,w);this.showTooltip(i,w),this.mouseoverCallback(i),this.label.setParams({highlightItemId:this.params.highlightTarget==="item"?i.itemLabel:void 0,highlightDatumId:this.params.highlightTarget==="datum"?i.datum.id:void 0}),this.label.render();const a=Po({eventCallback:i,eventName:"mouseover",t:1,centerText:this.params.centerText,centerTextAttrs:this.params.centerTextAttrs,centerTextStyles:this.params.centerTextStyles});this.renderText(this.centerTextSelection,a)}).on("mousemove",n=>{const i=Ua(n,this.dataset,w);this.showTooltip(i,w),this.mousemoveCallback(i)}).on("mouseout",n=>{const i=Ua(n,this.dataset,w);this.showTooltip(void 0,w),this.mouseoutCallback(i),this.label.setParams({highlightItemId:this.params.labelArcPie.highlightItemId,highlightDatumId:this.params.labelArcPie.highlightDatumId}),this.label.render();const a=Po({eventCallback:i,eventName:"mouseout",t:1,centerText:this.params.centerText,centerTextAttrs:this.params.centerTextAttrs,centerTextStyles:this.params.centerTextStyles});this.renderText(this.centerTextSelection,a)}),this.label.setParams(this.params.labelArcPie),this.label.on("click",n=>{const i=Fa(n,this.dataset,w);this.clickCallback(i)}).on("mouseover",n=>{const i=Fa(n,this.dataset,w);this.showTooltip(i,w),this.mouseoverCallback(i),this.pie.setParams({highlightItemId:this.params.highlightTarget==="item"?i.itemLabel:void 0,highlightDatumId:this.params.highlightTarget==="datum"?i.datum.id:void 0}),this.pie.render()}).on("mousemove",n=>{const i=Fa(n,this.dataset,w);this.showTooltip(i,w),this.mousemoveCallback(i)}).on("mouseout",n=>{const i=Fa(n,this.dataset,w);this.showTooltip(void 0,w),this.mouseoutCallback(i),this.pie.setParams({highlightItemId:this.params.graphicArcPie.highlightItemId,highlightDatumId:this.params.graphicArcPie.highlightDatumId}),this.pie.render()})}setGraphicData({graphicData:e,itemLabels:n,arcLabels:i,shorterSideWidth:a}){const r=C4({data:e,startAngle:this.params.startAngle,endAngle:this.params.endAngle,itemLabels:n,arcLabels:i});this.pie.setDataset({data:r,itemLabels:n,axisWidth:a}),this.label.setDataset({data:r,itemLabels:n,arcLabels:i,axisWidth:a})}renderGraphic(){this.pie.render(),this.label.render()}renderText(e,n){const i=e.selectAll("text.bpchart__text").data(n),a=i.enter().append("text").classed("bpchart__text",!0);i.merge(a).each((s,o,l)=>{const c=O(l[o]).text(s.text);Object.keys(s.attr).forEach(h=>{c.attr(h,s.attr[h])}),Object.keys(s.style).forEach(h=>{c.style(h,s.style[h])})}),i.exit().remove()}}const I4=ce("ul",null,[ce("li",null,"中山區"),ce("li",null,"有效票數：141,880"),ce("li",null,"無效票數：1,922"),ce("li",null,"投票數：143,802"),ce("li",null,"投票率：75.6097％")],-1),Eo={__name:"ChartArcPie",setup(t){const e={data:[{itemLabel:"宋楚瑜、余湘",value:6367},{itemLabel:"韓國瑜、張善政",value:56491},{itemLabel:"蔡英文、賴清德",value:79022}],itemLabels:["宋楚瑜、余湘","韓國瑜、張善政","蔡英文、賴清德"],arcLabels:["宋楚瑜、余湘","韓國瑜、張善政","蔡英文、賴清德"]},n={graphicArcPie:{outerMouseoverRadius:1,outerRadius:.95,innerRadius:.7,padAngle:.02,cornerRadius:0},centerText:(i,a,r=1)=>a==="mouseover"?[i.arcLabel,i.datum.value]:["蔡英文、賴清德",Math.round(i.dataset.data.reduce((s,o)=>s+o.value,0)*r)],centerTextStyles:[{"font-weight":"bold","text-anchor":"middle","pointer-events":"none","dominant-baseline":"middle","font-size":20,fill:"#000"},{"pointer-events":"none","dominant-baseline":"middle","text-anchor":"middle","font-size":18,fill:"rgb(96, 98, 102)"}],centerTextAttrs:[{transform:"translate(0, -12)"},{transform:"translate(0, 48)"}],colors:["#FF6310","#000095","#1B9431"]};return(i,a)=>($e(),Ye("div",null,[dt(xa,{module:ca(T4),dataset:e,params:n},null,8,["module"]),vi(" 選區票數說明：(需另外切版) "),I4]))}};class th extends Og{constructor(e,n){super(e,n),this.params=g4,this.tooltipSelection=void 0,this.lineSelection=void 0,this.containerSize={height:0,width:0,x:0,y:0},this.setParams(n??this.params)}setParams(e){this.params={...this.params,...e}}doRenderTooltip(e){try{this.tooltipSelection.interrupt("fadeout")}catch{}const n=this.tooltipSelection&&this.tooltipSelection.node()?ss(this.tooltipSelection):{width:0,height:0},i=this.containerSize.x+this.containerSize.width-n.width,a=this.containerSize.y+this.containerSize.height-n.height,r=l=>{l.style("left",c=>c.x<i?`${c.x+20}px`:`${c.x-n.width-20}px`).style("top",c=>this.params.alignCenter?this.containerSize.y+this.containerSize.height/2-n.height/2:c.y<a?`${c.y}px`:`${a+5}px`)},s=O("body").selectAll(".bpchat___tooltip").data(e);s.transition().duration(50).call(r).on("interrupt",(l,c,h)=>{O(h[c]).style("opacity",1)});const o=s.enter().append("div").classed("bpchat___tooltip",!0).call(this.setTooltipStyle);o.call(r),this.tooltipSelection=s.merge(o),this.tooltipSelection.style("position","fixed").style("z-index",1e4).html(l=>l.contentHtml),s.exit().transition("fadeout").style("opacity",0).remove().on("interrupt",(l,c,h)=>{O(h[c]).style("opacity",1)})}renderYLine(e){const n=e[0]?e[0].x-this.containerSize.x:0,i=this.selection.selectAll(".bpchart__tooltip__line").data(e),a=i.enter().append("line").classed("bpchart__tooltip__line",!0).style("stroke","#E4E7ED").style("stroke-width",1).style("pointer-events","none");this.lineSelection=i.merge(a).attr("x1",n).attr("y1",0).attr("x2",n).attr("y2",this.containerSize.height),i.exit().transition("fadeout").style("opacity",0).remove().on("interrupt",(r,s,o)=>{O(o[s]).style("opacity",1)})}renderTooltip(e){this.containerSize=ss(this.selection),this.params.yLine==!0&&this.renderYLine(e),this.doRenderTooltip(e)}remove(){this.tooltipSelection&&this.tooltipSelection.transition("fadeout").style("opacity",0).remove().on("end",()=>{var e;this.params.yLine==!0&&((e=this.lineSelection)==null||e.remove())}),this.renderData.contentHtml=""}}class eh{constructor(e){this.data=[],this.auxLineSelection=void 0,this.selection=e}setData(e){this.data=e}render(){const e=this.selection.selectAll("line.bpchart__auxline").data(this.data),n=e.enter().append("line").classed("bpchart__auxline",!0).style("stroke",Ee).style("stroke-width",1).style("stroke-dasharray","3,3").style("pointer-events","none");this.auxLineSelection=e.merge(n).attr("opacity",i=>i.active==!0?1:0),e.exit().remove(),n.attr("x1",i=>i.x1).attr("y1",i=>i.y1).attr("x2",i=>i.x2).attr("y2",i=>i.y2),e.transition().duration(50).attr("x1",i=>i.x1).attr("y1",i=>i.y1).attr("x2",i=>i.x2).attr("y2",i=>i.y2)}remove(){this.selection.remove()}}const qg={xLabel:"x",y1Label:"y1",y2Label:"y2",xLabelAnchor:"start",y1LabelAnchor:"end",y2LabelAnchor:"start",xLabelOffset:[0,0],y1LabelOffset:[0,0],y2LabelOffset:[0,0],y1LabelColor:Ee,y2LabelColor:Ee,y1TickFormat:",.0f",y2TickFormat:",.0f",xTickPadding:20,y1TickPadding:20,y2TickPadding:20,xTickLine:!1,y1TickLine:1,y2TickLine:1,xTickLineDasharray:"none",y1TickLineDasharray:"none",y2TickLineDasharray:"4",y1Ticks:4,y2Ticks:4,axisLineColor:Kc,axisLabelColor:Ee,rotateXLabel:!1,padding:Bt,xVisible:!0,y1Visible:!0,y2Visible:!0},yi=6;class R4{constructor(e,n){this.width=Ae,this.height=Le,this.dataset={xScale:ai(),y1Scale:Ge(),y2Scale:Ge(),y1MaxValue:0,y2MaxValue:0},this.params=qg,this.xAxisSelection=void 0,this.y1AxisSelection=void 0,this.y2AxisSelection=void 0,this.xLabelSelection=void 0,this.y1LabelSelection=void 0,this.y2LabelSelection=void 0,this.axisWidth=Zt(this.width,Bt),this.axisHeight=Kt(this.height,Bt),this.selection=e}setParams(e){this.params={...this.params,...e}}setDataset(e){this.dataset=e}resize({width:e=this.width,height:n=this.height}){this.width=e,this.height=n,this.axisWidth=Zt(this.width,this.params.padding),this.axisHeight=Kt(this.height,this.params.padding)}render(){this.renderXPointAxis(),this.renderY1LinearAxis(),this.renderY2LinearAxis();const e=this.dataset.y1Scale(0),n=this.dataset.y2Scale(0);this.renderZeroLine(this.selection,[{x1:0,y1:e,x2:this.axisWidth,y2:e},{x1:0,y1:n,x2:this.axisWidth,y2:n}])}remove(){this.selection.remove()}renderXPointAxis(){let e=[];this.params.xVisible&&e.push(this.params);const n=this.selection.selectAll("g.xAxis").data(e),i=n.enter().append("g");this.xAxisSelection=n.merge(i).classed("xAxis",!0).attr("transform",l=>"translate("+l.padding.left+","+(l.padding.top+this.axisHeight)+")"),n.exit().remove();const a=this.selection.selectAll("text.xLabel").data(e),r=a.enter().append("text").classed("xLabel",!0).style("font-size","14px").style("font-weight","bold").style("dominant-baseline","hanging");if(this.xLabelSelection=a.merge(r).attr("x",l=>this.width-l.padding.right+l.xTickPadding).attr("y",l=>l.padding.top+this.axisHeight+l.y2TickPadding+yi).attr("transform",`translate(${this.params.xLabelOffset[0]}, ${this.params.xLabelOffset[1]})`).attr("text-anchor",this.params.xLabelAnchor).style("fill",this.params.axisLabelColor).text(l=>l.xLabel),a.exit().remove(),this.xLabelSelection.size()==0)return;this.xAxis=hs(this.dataset.xScale).scale(this.dataset.xScale).tickSize(this.params.xTickLine&&typeof this.params.xTickLine=="boolean"?-this.axisHeight:this.params.xTickLine&&typeof this.params.xTickLine=="number"?-this.axisHeight*this.params.xTickLine:yi).tickSizeOuter(0).tickFormat(l=>l).tickPadding(this.params.xTickPadding);const s=this.xAxisSelection.transition().duration(50).call(this.xAxis).attr("text-anchor",()=>this.params.rotateXLabel!==!1?"end":"middle");s.selectAll("line").style("fill","none").style("stroke",this.params.axisLineColor).style("stroke-dasharray",this.params.xTickLineDasharray),s.selectAll("path").style("fill","none").style("stroke",this.params.axisLineColor).style("shape-rendering","crispEdges");const o=s.selectAll("text").style("font-family","sans-serif").style("font-size","14px").style("color",this.params.axisLabelColor).attr("transform-origin",`-5 ${this.params.xTickPadding+yi}`);this.params.rotateXLabel===!0?o.attr("transform","translate(0,0) rotate(-45)"):typeof this.params.rotateXLabel=="number"&&o.attr("transform",`translate(0,0) rotate(${this.params.rotateXLabel})`)}renderY1LinearAxis(){let e=[];this.params.y1Visible&&e.push(this.params);const n=this.selection.selectAll("g.y1Axis").data(e),i=n.enter().append("g");this.y1AxisSelection=n.merge(i).classed("y1Axis",!0).attr("transform",o=>"translate("+o.padding.left+","+o.padding.top+")"),n.exit().remove();const a=this.selection.selectAll("text.y1Label").data(e),r=a.enter().append("text").classed("y1Label",!0).style("font-size","14px").style("font-weight","bold");if(this.y1LabelSelection=a.merge(r).attr("fill",o=>o.y1LabelColor).attr("x",o=>o.padding.left-o.xTickPadding).attr("y",o=>o.padding.top-o.y1TickPadding).attr("transform",`translate(${this.params.y1LabelOffset[0]}, ${this.params.y1LabelOffset[1]})`).attr("text-anchor",this.params.y1LabelAnchor).text(o=>o.y1Label),a.exit().remove(),this.y1LabelSelection.size()==0)return;this.y1Axis=us(this.dataset.y1Scale).scale(this.dataset.y1Scale).ticks(this.dataset.y1MaxValue>this.params.y1Ticks?this.params.y1Ticks:this.dataset.y1MaxValue===0?1:Math.ceil(this.dataset.y1MaxValue)).tickFormat(o=>os(o,this.params.y1TickFormat)).tickSize(this.params.y1TickLine&&typeof this.params.y1TickLine=="boolean"?-this.axisWidth:this.params.y1TickLine&&typeof this.params.y1TickLine=="number"?-this.axisWidth*this.params.y1TickLine:yi).tickPadding(this.params.y1TickPadding);const s=this.y1AxisSelection.transition().duration(100).call(this.y1Axis);s.selectAll("line").style("fill","none").style("stroke",this.params.axisLineColor).style("stroke-dasharray",this.params.y1TickLineDasharray),s.selectAll("path").style("fill","none").style("stroke","none").style("shape-rendering","crispEdges"),s.selectAll("text").style("font-family","sans-serif").style("font-size","14px").style("color",this.params.axisLabelColor)}renderY2LinearAxis(){let e=[];this.params.y2Visible&&e.push(this.params);const n=this.selection.selectAll("g.y2Axis").data(e),i=n.enter().append("g");this.y2AxisSelection=n.merge(i).classed("y2Axis",!0).attr("transform",o=>"translate("+(this.width-o.padding.right)+","+o.padding.top+")"),n.exit().remove();const a=this.selection.selectAll("text.y2Label").data(e),r=a.enter().append("text").classed("y1Label",!0).style("font-size","14px").style("font-weight","bold");if(this.y2LabelSelection=a.merge(r).attr("fill",o=>o.y2LabelColor).text(o=>o.y2Label).attr("x",o=>this.width-o.padding.right+o.xTickPadding).attr("y",o=>o.padding.top-o.y2TickPadding).attr("transform",`translate(${this.params.y2LabelOffset[0]}, ${this.params.y2LabelOffset[1]})`).attr("text-anchor",this.params.y2LabelAnchor),a.exit().remove(),this.y2LabelSelection.size()==0)return;this.y2Axis=Pf(this.dataset.y2Scale).scale(this.dataset.y2Scale).ticks(this.dataset.y2MaxValue>this.params.y2Ticks?this.params.y2Ticks:this.dataset.y2MaxValue===0?1:Math.ceil(this.dataset.y2MaxValue)).tickFormat(o=>os(o,this.params.y2TickFormat)).tickSize(this.params.y2TickLine&&typeof this.params.y2TickLine=="boolean"?-this.axisWidth:this.params.y2TickLine&&typeof this.params.y2TickLine=="number"?-this.axisWidth*this.params.y2TickLine:yi).tickPadding(this.params.y2TickPadding);const s=this.y2AxisSelection.transition().duration(100).call(this.y2Axis);s.selectAll("line").style("fill","none").style("stroke",this.params.axisLineColor).style("stroke-dasharray",this.params.y2TickLineDasharray),s.selectAll("path").style("fill","none").style("stroke","none").style("shape-rendering","crispEdges"),s.selectAll("text").style("font-family","sans-serif").style("font-size","14px").style("color",this.params.axisLabelColor)}renderZeroLine(e,n){const i=e.selectAll("g.bpchart__zero-line").data(n),a=i.enter().append("g").classed("bpchart__zero-line",!0).attr("transform",s=>"translate("+this.params.padding.left+","+this.params.padding.top+")");i.exit().remove();const r=i.merge(a);a.append("line"),r.select("line").attr("stroke",this.params.axisLabelColor).attr("stroke-width",1).transition().duration(100).attr("x1",s=>s.x1).attr("y1",s=>s.y1).attr("x2",s=>s.x2).attr("y2",s=>s.y2).attr("opacity",s=>s.y1>=0&&s.y1<=this.axisHeight?1:0)}}const ri={lineType:"line",lineCurve:"curveLinear",colors:ut,highlightTarget:"item",highlightItemId:"",enterDuration:800,labelTextMethod:(t,e)=>"",labelPositionMethod:(t,e)=>"top",labelStyleMethod:(t,e)=>"",labelFontSizeMethod:(t,e)=>10,labelColorMethod:(t,e)=>Ee,labelPadding:15},P4={barDirection:"right",positionPadding:5};function Zg(t,e=10){var a;const n=document.createElement("canvas").getContext("2d");return(((a=n==null?void 0:n.measureText(t))==null?void 0:a.width)??0)*e/10}const E4=(t,e)=>{const n=t.map(s=>{const o=Zg(s.text,s.fontSize)+2,l=s.fontSize;let c=0,h=0,f="middle",u="central",d=0,p=0,g=0,m=0;return s.position==="left"?(c=s.barX0-e.positionPadding,h=(s.barY0+s.barY1)/2,f="end",u="central",d=c-o,p=c,g=h-l/2,m=h+l/2):s.position==="right"?(c=s.barX1+e.positionPadding,h=(s.barY0+s.barY1)/2,f="start",u="central",d=c,p=c+o,g=h-l/2,m=h+l/2):s.position==="top"?(c=(s.barX0+s.barX1)/2,h=s.barY0-e.positionPadding,f="middle",u="auto",d=c-o/2,p=c+o/2,g=h-l,m=h):s.position==="bottom"?(c=(s.barX0+s.barX1)/2,h=s.barY1+e.positionPadding,f="middle",u="hanging",d=c-o/2,p=c+o/2,g=h,m=h+l):s.position==="center"&&(c=(s.barX0+s.barX1)/2,h=(s.barY0+s.barY1)/2,f="middle",u="central",d=c-o/2,p=c+o/2,g=h,m=h+l),{...s,width:o,height:l,boundaryX0:d,boundaryX1:p,boundaryY0:g,boundaryY1:m,positionX:c,positionY:h,textAnchor:f,dominantBaseline:u,renderX:0,renderY:0,offsetX:0,offsetY:0}}),i=Object.assign([],n).sort((s,o)=>e.barDirection==="left"?o.positionX-s.positionX:e.barDirection==="right"?s.positionX-o.positionX:e.barDirection==="up"?o.positionY-s.positionY:e.barDirection==="down"?s.positionY-o.positionY:s.positionX-o.positionX),a=(s,o)=>o.filter(l=>(l.boundaryX0>=s.boundaryX0&&l.boundaryX0<=s.boundaryX1||l.boundaryX1>=s.boundaryX0&&l.boundaryX1<=s.boundaryX1)&&(l.boundaryY0>=s.boundaryY0&&l.boundaryY0<=s.boundaryY1||l.boundaryY1>=s.boundaryY0&&l.boundaryY1<=s.boundaryY1)),r=[];return i.forEach(s=>{let o=s.positionX,l=s.positionY;const c=a(s,r);let h=0,f=0;c.length&&(e.barDirection==="left"?h=c.reduce((b,v)=>v.boundaryX0<b?v.boundaryX0:b,1/0)-s.boundaryX1:e.barDirection==="right"?h=c.reduce((b,v)=>v.boundaryX1>b?v.boundaryX1:b,-1/0)-s.boundaryX0:e.barDirection==="up"?f=c.reduce((b,v)=>v.boundaryY0<b?v.boundaryY0:b,1/0)-s.boundaryY1:e.barDirection==="down"&&(f=c.reduce((b,v)=>v.boundaryY1>b?v.boundaryY1:b,1/0)-s.boundaryY0));let u=0,d=0;e.barDirection==="left"&&(s.position==="top"||s.position==="bottom"||s.position==="center")&&s.boundaryX1>s.barX1?u=s.barX1-s.boundaryX1:e.barDirection==="right"&&(s.position==="top"||s.position==="bottom"||s.position==="center")&&s.boundaryX0<s.barX0?u=s.barX0-s.boundaryX0:e.barDirection==="up"&&(s.position==="left"||s.position==="right"||s.position==="center")&&s.boundaryY1>s.barY1?d=s.barY1-s.boundaryY1:e.barDirection==="down"&&(s.position==="left"||s.position==="right"||s.position==="center")&&s.boundaryY0<s.barY0&&(d=s.barY0-s.boundaryY0);const p=Math.abs(h)>Math.abs(u)?h:u,g=Math.abs(f)>Math.abs(d)?f:d;r.push({...s,boundaryX0:s.boundaryX0+p,boundaryX1:s.boundaryX1+p,boundaryY0:s.boundaryY0+g,boundaryY1:s.boundaryY1+g,renderX:o,renderY:l,offsetX:p,offsetY:g})}),r};class Kg{constructor(e,n){this.data=[],this.params=P4,this.renderData=[],this.selection=e,this.labelGSelection=this.selection.append("g").style("pointer-events","none")}remove(){this.selection.remove()}setParams(e){this.params={...this.params,...e}}setData(e){this.data=e,this.renderData=E4(e,this.params)}render(){const e=this.labelGSelection.selectAll("text").data(this.renderData),n=e.enter().append("text");e.exit().remove(),this.labelSelection=e.merge(n).attr("text-anchor",i=>i.textAnchor).attr("dominant-baseline",i=>i.dominantBaseline).attr("font-size",(i,a)=>i.fontSize).attr("fill",(i,a)=>i.color).attr("style",i=>i.style).text(i=>i.text),n.attr("x",i=>this.params.barDirection==="left"||this.params.barDirection==="right"?0:i.positionX).attr("y",i=>this.params.barDirection==="left"||this.params.barDirection==="right"?i.positionY:0).attr("transform",(i,a)=>this.params.barDirection==="left"||this.params.barDirection==="right"?`translate(0, ${i.offsetY})`:`translate(${i.offsetX}, 0)`),this.labelSelection.transition().duration(200).attr("x",i=>i.positionX).attr("y",i=>i.positionY).attr("transform",(i,a)=>`translate(${i.offsetX}, ${i.offsetY})`)}}const $o=l4,Va=({lineData:t,data:e,event:n})=>({groupData:[],itemData:t,datum:void 0,itemLabel:t[0].itemLabel,itemIndex:t[0].itemIndex,clientX:n.clientX,clientY:n.clientY,offsetX:n.offsetX,offsetY:n.offsetY}),$4=t=>{let e=[[]],n=0;for(let i in t){if(t[i].value===void 0||t[i].value===null){e[n].length&&(n++,e[n]=[]);continue}e[n].push(t[i])}return e},Y4=(t,e)=>{let n=[];return t.forEach((i,a)=>{i.forEach((r,s)=>{const o=[r.itemIndex,r.xIndex];n.push({id:r.id,data:r,barX0:r.x,barX1:r.x,barY0:r.y,barY1:r.y,position:e.labelPositionMethod(r,o),fontSize:e.labelFontSizeMethod(r,o),color:e.labelColorMethod(r,o),style:e.labelStyleMethod(r,o),text:e.labelTextMethod(r,o)})})}),n};let Qg=class{constructor(e,n){this.params=ri,this.dataset={data:[],itemLabels:[],axisWidth:0,axisHeight:0,zeroY:0},this.graphicGSelection=void 0,this.linePath=oa().x(i=>i.x).y(i=>i.y).curve($o[this.params.lineCurve]),this.axisWidth=0,this.clickCallback=function(){},this.mouseoverCallback=function(){},this.mousemoveCallback=function(){},this.mouseoutCallback=function(){},this.selection=e,this.labelBoxSelection=this.selection.append("g"),this.defsSelection=e.append("defs"),this.utilGraphicBarLabel=new Kg(this.labelBoxSelection,{})}setParams(e){e.lineCurve&&e.lineCurve!=this.params.lineCurve&&(this.linePath=oa().x(n=>n.x).y(n=>n.y).curve($o[e.lineCurve])),this.params={...this.params,...e},this.colorScale=ae(this.dataset.itemLabels,this.params.colors),this.initHighlight(),this.params.lineType=="line"?this.renderGraphicItem=this.renderLine:this.params.lineType=="area"?this.renderGraphicItem=this.renderArea:this.params.lineType==="gradientArea"&&(this.renderGraphicItem=this.renderGradientArea),this.utilGraphicBarLabel.setParams({barDirection:"up",positionPadding:this.params.labelPadding})}setDataset(e){this.dataset=e,this.colorScale=ae(this.dataset.itemLabels,this.params.colors)}render(){this.axisWidth=this.dataset.axisWidth;const e=this.selection.selectAll("g.bpchart__graphic").data(this.dataset.data,(i,a)=>i[0]&&i[0].id?i[0].id:this.dataset.itemLabels[a]),n=e.enter().append("g").classed("bpchart__graphic",!0);if(e.exit().remove(),this.graphicGSelection=e.merge(n),this.graphicGSelection.attr("clip-path",(i,a)=>`url(#bpchart__clipPath_${this.dataset.itemLabels[a]})`),n.size()>0){const i=[];n.each((r,s,o)=>{i.push({id:`bpchart__clipPath_${r[s].itemLabel}`,x:0,y:0,width:0,height:this.dataset.axisHeight})}),this.renderClipPath(i);const a=[];e.each((r,s,o)=>{a.push({id:`bpchart__clipPath_${r[s].itemLabel}`,x:0,y:0,width:this.axisWidth,height:this.dataset.axisHeight})}),this.renderClipPath(i),this.selection.transition().duration(this.params.enterDuration).delay(100).tween("tween",(r,s,o)=>l=>{const c=this.axisWidth*l;n.each((h,f,u)=>{this.setClipPathItemWidth(`bpchart__clipPath_${h[f].itemLabel}`,c)})}).on("end",()=>{this.initHighlight()})}this.graphicGSelection.each((i,a,r)=>{const s=$4(i);this.renderGraphicItem({selection:O(r[a]),id:this.dataset.itemLabels&&this.dataset.itemLabels[a],data:s,linePath:this.linePath,colorScale:this.colorScale})}),this.graphicGSelection.on("mouseover",null),this.graphicGSelection.on("mouseout",null),this.graphicGSelection.on("click",(i,a)=>{const r=Va({lineData:i,data:this.dataset.data,event:w});this.clickCallback(r)}).on("mouseover",(i,a,r)=>{const s=Va({lineData:i,data:this.dataset.data,event:w});this.params.highlightTarget==="item"&&s&&s.itemLabel&&this.highlight(this.graphicGSelection,s.itemLabel),this.mouseoverCallback(s)}).on("mousemove",(i,a)=>{const r=Va({lineData:i,data:this.dataset.data,event:w});this.mousemoveCallback(r)}).on("mouseout",(i,a)=>{this.params.highlightTarget==="item"&&this.removeHighlight(this.graphicGSelection);const r=Va({lineData:i,data:this.dataset.data,event:w});this.initHighlight(),this.mouseoutCallback(r)}),this.utilGraphicBarLabel.setData(Y4(this.dataset.data,this.params)),this.utilGraphicBarLabel.render()}on(e,n){return e==="click"?this.clickCallback=n:e==="mouseover"?this.mouseoverCallback=n:e==="mousemove"?this.mousemoveCallback=n:e==="mouseout"&&(this.mouseoutCallback=n),this}remove(){this.selection.remove()}renderClipPath(e){const n=this.defsSelection.selectAll("clipPath").data(e),i=n.enter().append("clipPath"),a=n.merge(i).attr("id",r=>r.id);n.exit().remove(),a.each((r,s,o)=>{const l=O(o[s]).selectAll("rect").data([r]),c=l.enter().append("rect");l.exit().remove(),l.merge(c).attr("x",h=>h.x).attr("y",h=>h.y).attr("width",h=>h.width).attr("height",h=>h.height)})}setClipPathItemWidth(e,n){this.defsSelection.select(`clipPath#${e}`).select("rect").attr("width",n)}renderGraphicItem({selection:e,id:n,data:i,linePath:a,colorScale:r}){}renderLine({selection:e,id:n,data:i,linePath:a,colorScale:r}){const s=e.selectAll("path.bpchart__graphic__line").data(i,(l,c)=>c),o=s.enter().append("path").classed("bpchart__graphic__line",!0).attr("fill","none").attr("stroke-width",2).style("vector-effect","non-scaling-stroke").style("cursor","pointer");s.exit(),s.merge(o).attr("stroke",(l,c)=>n?r(n):ut[c]).attr("d",l=>a(l))}renderArea({selection:e,id:n,data:i,linePath:a,colorScale:r}){const s=Gc().x(c=>c.x).y0(this.dataset.zeroY).y1(c=>c.y).curve($o[this.params.lineCurve]),o=e.selectAll("path.bpchart__graphic__area").data(i,(c,h)=>h),l=o.enter().append("path").classed("bpchart__graphic__area",!0).style("opacity",.5).style("pointer-events","none");o.exit(),o.merge(l).attr("transform","translate(0,0)").attr("fill",(c,h)=>this.params.lineType==="gradientArea"?`url(#bpchart__gradient__${n})`:n?r(n):ut[h]).attr("d",c=>s(c))}renderGradientArea({selection:e,id:n,data:i,linePath:a,colorScale:r}){const s=this.defsSelection.selectAll("linearGradient").data(this.dataset.itemLabels,l=>l),o=s.enter().append("linearGradient");s.merge(o).attr("id",(l,c)=>`bpchart__gradient__${this.dataset.itemLabels[Number(c)]}`).attr("x1","0%").attr("x2","0%").attr("y1","0%").attr("y2","100%").attr("spreadMethod","pad").html((l,c)=>`
          <stop offset="0%"   stop-color="${this.params.colors[Number(c)]}" stop-opacity="1"/>
          <stop offset="100%" stop-color="${this.params.colors[Number(c)]}" stop-opacity="0"/>
        `),s.exit().remove(),this.renderLine({selection:e,id:n,data:i,linePath:a,colorScale:r}),this.renderArea({selection:e,id:n,data:i,linePath:a,colorScale:r})}initHighlight(){this.graphicGSelection&&(this.params.highlightItemId?this.highlight(this.graphicGSelection,this.params.highlightItemId):this.removeHighlight(this.graphicGSelection))}highlight(e,n){e&&e.each((i,a,r)=>{i[0].itemLabel===n?O(r[a]).transition().duration(200).style("opacity",1):O(r[a]).transition().duration(200).style("opacity",.3)})}removeHighlight(e){this.params.highlightItemId?this.highlight(e,this.params.highlightItemId):this.params.highlightItemId||e.transition().duration(200).style("opacity",1)}};const Sn={r:4,fill:"#fff",strokeWidth:2,colors:ut,highlightTarget:"item",highlightItemId:"",highlightDatumId:"",enterDuration:20};class Jg{constructor(e,n){this.params=Sn,this.dataset={data:[],itemLabels:[]},this.dotSelection=void 0,this.renderData=[],this.clickCallback=function(){},this.mouseoverCallback=function(){},this.mousemoveCallback=function(){},this.mouseoutCallback=function(){},this.selection=e}setParams(e){this.params={...this.params,...e},this.colorScale=ae(this.dataset.itemLabels&&this.dataset.itemLabels.length?this.dataset.itemLabels:[""],this.params.colors)}setDataset(e){this.dataset=e,this.renderData=this.dataset.data.map(n=>({...n,itemLabel:n.itemLabel??""})),this.colorScale=ae(this.dataset.itemLabels&&this.dataset.itemLabels.length?this.dataset.itemLabels:[""],this.params.colors)}render(){this.renderDot({selection:this.selection,data:this.renderData,colorScale:this.colorScale,params:this.params}),this.dotSelection.on("mouseover",null),this.dotSelection.on("mouseout",null),this.dotSelection.on("click",(e,n)=>{this.clickCallback(e)}).on("mouseover",(e,n)=>{this.params.highlightTarget==="item"&&e.itemLabel?this.highlight(this.dotSelection,e.itemLabel,""):this.params.highlightTarget==="datum"&&e.id&&this.highlight(this.dotSelection,"",e.id),this.mouseoverCallback(e)}).on("mousemove",(e,n)=>{this.mousemoveCallback(e)}).on("mouseout",(e,n)=>{this.params.highlightTarget==="item"&&this.removeHighlight(this.dotSelection),this.mouseoutCallback(e)})}on(e,n){return e==="click"?this.clickCallback=n:e==="mouseover"?this.mouseoverCallback=n:e==="mousemove"?this.mousemoveCallback=n:e==="mouseout"&&(this.mouseoutCallback=n),this}remove(){this.selection.remove()}renderDot({selection:e,data:n,colorScale:i,params:a}){const r=e.selectAll("circle.bpchart__circle").data(n,o=>o.id),s=r.enter().append("circle").attr("r",a.r).attr("fill",a.fill).attr("stroke-width",a.strokeWidth).style("cursor","pointer").classed("bpchart__circle",!0).attr("opacity",0);r.exit().remove(),this.dotSelection=r.merge(s),this.dotSelection.attr("stroke",(o,l)=>i(o.itemLabel)),s.attr("cx",o=>o.x).attr("cy",o=>o.y).attr("opacity",0).transition().delay((o,l)=>l*this.params.enterDuration).attr("opacity",1),r.transition().duration(50).attr("cx",o=>o.x).attr("cy",o=>o.y).attr("opacity",1),this.dotSelection.on("end",()=>{this.params.highlightItemId||this.params.highlightDatumId?this.highlight(this.dotSelection,this.params.highlightItemId,this.params.highlightDatumId):this.removeHighlight(this.dotSelection)})}highlight(e,n,i){if(!e)return;let a=[];if(i&&a.push(i),n){const r=this.dataset.data.flat().filter(s=>s.itemLabel===n).map(s=>s.id);a=a.concat(r)}e.each((r,s,o)=>{a.includes(r.id)?O(o[s]).style("opacity",1):O(o[s]).transition().duration(200).style("opacity",.3)})}removeHighlight(e){this.params.highlightItemId||this.params.highlightDatumId?this.highlight(e,this.params.highlightItemId,this.params.highlightDatumId):this.params.highlightItemId||e.style("opacity",1)}}const jg={barType:"rect",barWidth:0,barPadding:1,barR:!1,colors:ut,highlightTarget:"datum",highlightDatumId:"",enterDuration:800},nh={barType:"rect",barWidth:0,barPadding:1,barGroupPadding:20,barR:!1,colors:ut,highlightTarget:"item",highlightGroupId:"",highlightItemId:"",highlightDatumId:"",enterDuration:800},N4=(t,e)=>{const n=new Map;return e.forEach((i,a)=>{n.set(i,t[a])}),n},z4=(t,e)=>{const n=new Map;return t.forEach((i,a)=>{i.forEach((r,s)=>{const o=n.get(e[s])??[];o.push(r),n.set(e[s],o)})}),n},X4=(t,e)=>e.map(n=>t.get(n)??[]),H4=(t,e,n)=>{const i=t/2,a=t*e.length+n.barPadding*e.length;return ai().domain(e).range([-a/2+i,a/2-i])},qa=({datum:t,XDataMap:e,ItemDataMap:n,event:i})=>({groupData:e.get(t.xLabel),itemData:n.get(t.itemLabel),datum:t,xLabel:t.xLabel,xIndex:t.xIndex,itemLabel:t.itemLabel,itemIndex:t.itemIndex,clientX:i.clientX,clientY:i.clientY,offsetX:i.offsetX,offsetY:i.offsetY}),G4=({axisWidth:t,groupAmount:e,barAmountOfGroup:n,barPadding:i=0,barGroupPadding:a=0})=>{const r=(t/e-a)/n-i;return r>1?r:1},B4=(t,e=400)=>e/t;class O4{constructor(e,n){this.params=nh,this.dataset={data:[],itemLabels:[],xLabels:[],axisWidth:0,zeroY:0},this.graphicData=[],this.graphicGroupSelection=void 0,this.graphicBarSelection=void 0,this.itemLabels=[],this.ItemDataMap=new Map,this.XDataMap=new Map,this.axisWidth=0,this.barWidth=0,this.delayDuration=0,this.clickCallback=function(){},this.mouseoverCallback=function(){},this.mousemoveCallback=function(){},this.mouseoutCallback=function(){},this.selection=e,this.defsSelection=e.append("defs")}setParams(e){this.params={...this.params,...e},this.itemLabels=[],this.params.barType=="rect"?this.renderGraphic=this.renderRect:this.params.barType=="triangle"&&(this.renderGraphic=this.renderTriangle)}setDataset(e){this.dataset=e,this.itemLabels=this.dataset.itemLabels,this.ItemDataMap=N4(this.dataset.data,this.dataset.itemLabels),this.XDataMap=z4(this.dataset.data,this.dataset.xLabels),this.delayDuration=B4(this.dataset.xLabels.length)}render(){if(!this.itemLabels.length)return;this.colorScale=ae(this.itemLabels,this.params.colors),this.setLinearGradient({defsSelection:this.defsSelection,itemLabels:this.itemLabels,colorScale:this.colorScale}),this.axisWidth=this.dataset.axisWidth,this.barWidth=this.params.barWidth?this.params.barWidth:G4({axisWidth:this.axisWidth,groupAmount:this.dataset.xLabels.length,barAmountOfGroup:this.dataset.itemLabels.length,barPadding:this.params.barPadding??0,barGroupPadding:this.params.barGroupPadding??0});const e=H4(this.barWidth,this.dataset.itemLabels,this.params);this.graphicData=X4(this.XDataMap,this.dataset.xLabels),this.renderGraphic({selection:this.selection,graphicData:this.graphicData,xLabels:this.dataset.xLabels,colorScale:this.colorScale,itemScale:e,params:this.params}),this.graphicBarSelection.on("click",(n,i)=>{const a=qa({datum:n,XDataMap:this.XDataMap,ItemDataMap:this.ItemDataMap,event:w});this.clickCallback(a)}).on("mouseover",(n,i,a)=>{const r=qa({datum:n,XDataMap:this.XDataMap,ItemDataMap:this.ItemDataMap,event:w});this.params.highlightTarget!=null&&this.params.highlightTarget!="none"&&(this.params.highlightTarget==="group"?this.highlight(this.graphicBarSelection,r.xLabel,void 0,void 0):this.params.highlightTarget==="item"?this.highlight(this.graphicBarSelection,void 0,r.itemLabel,void 0):this.params.highlightTarget==="datum"&&this.highlight(this.graphicBarSelection,void 0,void 0,r.datum&&r.datum.id)),this.mouseoverCallback(r)}).on("mousemove",(n,i)=>{const a=qa({datum:n,XDataMap:this.XDataMap,ItemDataMap:this.ItemDataMap,event:w});this.mousemoveCallback(a)}).on("mouseout",(n,i)=>{this.params.highlightTarget!=null&&this.params.highlightTarget!="none"&&this.removeHighlight(this.graphicBarSelection);const a=qa({datum:n,XDataMap:this.XDataMap,ItemDataMap:this.ItemDataMap,event:w});this.initHighlight(),this.mouseoutCallback(a)})}on(e,n){return e==="click"?this.clickCallback=n:e==="mouseover"?this.mouseoverCallback=n:e==="mousemove"?this.mousemoveCallback=n:e==="mouseout"&&(this.mouseoutCallback=n),this}remove(){this.selection.remove()}setLinearGradient({defsSelection:e,itemLabels:n,colorScale:i}){const a=e.selectAll("linearGradient").data(n,s=>s),r=a.enter().append("linearGradient").attr("x1","0%").attr("x2","0%").attr("y1","0%").attr("y2","100%").attr("spreadMethod","pad");a.merge(r).attr("id",(s,o)=>`bpchart__lineargradient__${s}`).html((s,o)=>`
          <stop offset="0%"   stop-color="${i(s)}" stop-opacity="1"/>
          <stop offset="100%" stop-color="${i(s)}" stop-opacity="0"/>
        `),a.exit().remove()}renderGraphic({selection:e,graphicData:n,xLabels:i,colorScale:a,itemScale:r,params:s}){}renderRect({selection:e,graphicData:n,xLabels:i,colorScale:a,itemScale:r,params:s}){if(this.barWidth<=0)return;const o=e.selectAll("g.bpchart__bar-g").data(n,(h,f)=>h[0]&&h[0].id?h[0].id:i[f]),l=o.enter().append("g").classed("bpchart__bar-g",!0).attr("cursor","pointer");o.exit().remove(),this.graphicGroupSelection=o.merge(l),l.attr("transform",(h,f)=>`translate(${h[0]?h[0].x:0}, 0)`),o.transition().duration(200).attr("transform",(h,f)=>`translate(${h[0]?h[0].x:0}, 0)`);const c=this.barWidth/2;this.graphicGroupSelection.each((h,f,u)=>{const d=O(u[f]).selectAll("g").data(h,g=>g.id),p=d.enter().append("g").classed("bpchart__bar",!0);p.append("rect").attr("rx",s.barR==!0?c:s.barR==!1?0:typeof s.barR=="number"?s.barR:0).attr("transform",`translate(${-c}, 0)`).attr("x",g=>r(g.itemLabel)).attr("y",g=>this.dataset.zeroY).attr("width",this.barWidth).attr("height",g=>0),d.merge(p).select("rect").attr("fill",g=>a(g.itemLabel)).transition().duration(this.params.enterDuration).ease(hn).delay((g,m)=>g.xIndex*this.delayDuration).attr("transform",`translate(${-c}, 0)`).attr("x",g=>r(g.itemLabel)).attr("y",g=>g.y<this.dataset.zeroY?g.y:this.dataset.zeroY).attr("width",this.barWidth).attr("height",g=>Math.abs(this.dataset.zeroY-g.y)).on("end",()=>this.initHighlight()),d.exit().remove()}),this.graphicBarSelection=this.graphicGroupSelection.selectAll("g.bpchart__bar")}renderTriangle({selection:e,graphicData:n,xLabels:i,colorScale:a,itemScale:r,params:s}){if(this.barWidth<=0)return;const o=e.selectAll("g.bpchart__bar-g").data(n,(h,f)=>h[0]&&h[0].id?h[0].id:i[f]),l=o.enter().append("g").classed("bpchart__bar-g",!0).attr("cursor","pointer");o.exit().remove(),this.graphicGroupSelection=o.merge(l).attr("transform",(h,f)=>`translate(${h[0]?h[0].x:0}, 0)`);const c=this.barWidth/2;this.graphicGroupSelection.each((h,f,u)=>{const d=O(u[f]).selectAll("g").data(h,g=>g.id),p=d.enter().append("g").classed("bpchart__bar",!0);p.append("path").attr("transform",`translate(${-c}, 0)`).attr("height",g=>0).attr("d",g=>{const m=r(g.itemLabel),b=0,v=b;return`M${m-this.params.barWidth/2},${b} L${m},${v} ${m+this.params.barWidth/2},${b}`}),d.merge(p).select("path").style("fill",g=>`url(#bpchart__lineargradient__${g.itemLabel})`).attr("stroke",g=>a(g.itemLabel)).attr("transform",`translate(${-c}, 0)`).transition().duration(this.params.enterDuration).ease(hn).delay((g,m)=>g.xIndex*this.delayDuration).attr("transform",`translate(${-c}, 0)`).attr("height",g=>Math.abs(this.dataset.zeroY-g.y)).attr("d",g=>{const m=r(g.itemLabel),b=this.dataset.zeroY,v=g.y;return`M${m},${b} L${m+this.params.barWidth/2},${v} ${m+this.params.barWidth},${b}`}).on("end",()=>this.initHighlight()),d.exit().remove()}),this.graphicBarSelection=this.graphicGroupSelection.selectAll("g.bpchart__bar")}initHighlight(){this.graphicBarSelection&&(this.params.highlightDatumId||this.params.highlightItemId||this.params.highlightGroupId)&&this.highlight(this.graphicBarSelection,this.params.highlightGroupId,this.params.highlightItemId,this.params.highlightDatumId)}highlight(e,n,i,a){if(!e)return;let r=[];if(a&&r.push(a),i){const s=this.dataset.data.flat().filter(o=>o.itemLabel===i).map(o=>o.id);r=r.concat(s)}if(n){const s=this.dataset.data.flat().filter(o=>o.xLabel===n).map(o=>o.id);r=r.concat(s)}e.each((s,o,l)=>{r.includes(s.id)?O(l[o]).transition().duration(200).style("opacity",1):O(l[o]).transition().duration(200).style("opacity",.3)})}removeHighlight(e){this.params.highlightDatumId||this.params.highlightItemId||this.params.highlightGroupId?this.highlight(e,this.params.highlightGroupId,this.params.highlightItemId,this.params.highlightDatumId):e.transition().duration(200).style("opacity",1)}}const tm={barWidth:0,barGroupPadding:1,barR:!1,colors:ut,highlightTarget:"item",highlightGroupId:"",highlightItemId:"",highlightDatumId:"",enterDuration:800},W4=ut.map(t=>t).reverse(),_a={axisColumnTwoScales:qg,tooltipAside:{templateHtml:t=>t.y1.groupData&&t.y2.groupData?`
          <div>
            <div>${t.xLabel}</div>
            <div>${t.y1.groupData.map(e=>e.value).join(",")}</div>          
            <div>${t.y2.groupData.map(e=>e.value).join(",")}</div>          
          </div>
        `:""},y1Colors:ut,y2Colors:W4,padding:Bt,highlightTarget:"datum",highlightDatumId:"",highlightItemId:"",highlightGroupId:"",showAuxLine:!1,y1DomainMinValue:0,y1DomainMaxValue:void 0,y1DomainMinRange:void 0,y1DomainMaxRange:.95,y2DomainMinValue:0,y2DomainMaxValue:void 0,y2DomainMinRange:void 0,y2DomainMaxRange:.95,showDot:"hover"};({..._a});const U4={..._a,graphicColumnLine:ri,graphicDot:Sn,graphicColumnBarGroup:nh};({..._a});({..._a});const yf=(t,e)=>({...t,padding:e}),F4=({dataset:t,activedItemId:e,Y1XDataMap:n,Y2XDataMap:i,Y1ItemDataMap:a,Y2ItemDataMap:r,padding:s,xRangeScale:o,event:l})=>{if(!l||!o)return{dataset:t,y1:{groupData:[],itemData:[],datum:void 0,itemLabel:"",itemIndex:-1},y2:{groupData:[],itemData:[],datum:void 0,itemLabel:"",itemIndex:-1},xLabel:"",xIndex:-1,rangeIndex:-1,clientX:-1,clientY:-1,offsetX:-1,offsetY:-1};const c=Number(l.offsetX)-s.left,h=Number(o(c)??0),f=t.xLabels[h],u=n.get(f)??[],d=i.get(f)??[];let p=[],g,m=[],b;return e&&(p=a.get(e)??[],g=u.find(v=>v.itemLabel===e),m=r.get(e)??[],b=d.find(v=>v.itemLabel===e)),{dataset:t,y1:{groupData:u,itemData:p,datum:g,itemLabel:g?g.itemLabel:"",itemIndex:g?g.itemIndex:-1},y2:{groupData:d,itemData:m,datum:b,itemLabel:b?b.itemLabel:"",itemIndex:b?b.itemIndex:-1},xLabel:f,xIndex:h,rangeIndex:h,clientX:w.clientX,clientY:w.clientY,offsetX:w.offsetX,offsetY:w.offsetY}};let V4=class{constructor(e,n){this.width=Ae,this.height=Le,this.dataset={y1Data:[],y2Data:[],xLabels:[],y1ItemLabels:[],y2ItemLabels:[]},this.params=_a,this.graphicY1Selection=void 0,this.graphicY2Selection=void 0,this.axisWidth=0,this.axisHeight=0,this.clickCallback=function(){},this.mouseoverCallback=function(){},this.mousemoveCallback=function(){},this.mouseoutCallback=function(){},this.Y1XDataMap=new Map,this.Y2XDataMap=new Map,this.Y1ItemDataMap=new Map,this.Y2ItemDataMap=new Map,this.y1RenderData=[],this.y2RenderData=[],this.axisParams=this.params.axisColumnTwoScales,this.xAxisSelection=void 0,this.yAxisSelection=void 0,this.xLabelSelection=void 0,this.yLabelSelection=void 0,this.auxLineSelection=void 0,this.y1MinValue=0,this.y1MaxValue=0,this.y2MinValue=0,this.y2MaxValue=0,this.makeActivedCallbackData=(i,a)=>F4({dataset:this.dataset,activedItemId:i,Y1XDataMap:this.Y1XDataMap,Y2XDataMap:this.Y2XDataMap,Y1ItemDataMap:this.Y1ItemDataMap,Y2ItemDataMap:this.Y2ItemDataMap,padding:this.params.padding,xRangeScale:this.xRangeScale,event:a}),this.selection=e,this.axisSelection=e.append("g"),this.axisColumnTwoScales=new R4(this.axisSelection,{}),this.rangeSelection=this.selection.append("rect").attr("opacity",0),this.setRangeEvent(this.rangeSelection),this.graphicY1Selection=e.append("g"),this.graphicY2Selection=e.append("g"),this.coverSelection=this.selection.append("g").classed("bpchart__cover",!0),this.utilAuxLine=new eh(this.coverSelection),this.setCoverEvent(this.selection)}setParams(e){this.params={...this.params,...e,axisColumnTwoScales:{...this.params.axisColumnTwoScales,...e.axisColumnTwoScales}},this.params.tooltipAside&&!this.tooltip&&(this.tooltip=new th(this.selection,{templateHtml:this.params.tooltipAside.templateHtml,type:this.params.tooltipAside.type??"white",yLine:this.params.tooltipAside.yLine??!1})),this.axisParams=yf(this.params.axisColumnTwoScales,this.params.padding),this.axisWidth=Zt(this.width,this.params.padding),this.axisHeight=Kt(this.height,this.params.padding),this.axisColumnTwoScales.setParams(this.axisParams),this.graphicY1Selection.attr("transform",`translate(${this.params.padding.left}, ${this.params.padding.top})`),this.graphicY2Selection.attr("transform",`translate(${this.params.padding.left}, ${this.params.padding.top})`),this.coverSelection.attr("transform",`translate(${this.params.padding.left}, ${this.params.padding.top})`),this.initGraphic(this.params)}select(){return this.selection}remove(){this.selection.remove()}resize({width:e=this.width,height:n=this.height}){this.width=e,this.height=n,this.axisParams=yf(this.params.axisColumnTwoScales,this.params.padding),this.axisWidth=Zt(this.width,this.params.padding),this.axisHeight=Kt(this.height,this.params.padding),this.axisColumnTwoScales.setParams(this.axisParams),this.axisColumnTwoScales.resize({width:e,height:n}),this.rangeSelection.attr("x",this.params.padding.left).attr("y",this.params.padding.top).attr("width",this.axisWidth).attr("height",this.axisHeight)}setDataset(e){this.dataset=e;const[n,i]=this.getY1MinAndMaxValue(this.dataset.y1Data),[a,r]=this.getY2MinAndMaxValue(this.dataset.y2Data);this.y1MinValue=n,this.y1MaxValue=i,this.y2MinValue=a,this.y2MaxValue=r}render(){this.xScale=Jc({axisLabels:this.dataset.xLabels,axisWidth:this.axisWidth}),this.y1Scale=ls({maxValue:this.y1MaxValue,minValue:this.y1MinValue,axisWidth:this.axisHeight,domainMinValue:this.params.y1DomainMinValue,domainMaxValue:this.params.y1DomainMaxValue,domainMinRange:this.params.y1DomainMinRange,domainMaxRange:this.params.y1DomainMaxRange,reverse:!0}),this.y2Scale=ls({maxValue:this.y2MaxValue,minValue:this.y2MinValue,axisWidth:this.axisHeight,domainMinValue:this.params.y2DomainMinValue,domainMaxValue:this.params.y2DomainMaxValue,domainMinRange:this.params.y2DomainMinRange,domainMaxRange:this.params.y2DomainMaxRange,reverse:!0}),this.xRangeScale=jc({axisLabels:this.dataset.xLabels,axisWidth:this.axisWidth}),this.y1RenderData=this.makeY1GraphicRenderData({dataset:this.dataset,xScale:this.xScale,y1Scale:this.y1Scale}),this.y2RenderData=this.makeY2GraphicRenderData({dataset:this.dataset,xScale:this.xScale,y2Scale:this.y2Scale}),this.Y1XDataMap=this.makeY1XDataMap({y1RenderData:this.y1RenderData,xLabels:this.dataset.xLabels}),this.Y2XDataMap=this.makeY2XDataMap({y2RenderData:this.y2RenderData,xLabels:this.dataset.xLabels}),this.Y1ItemDataMap=this.makeY1ItemDataMap({y1RenderData:this.y1RenderData,y1ItemLabels:this.dataset.y1ItemLabels??[]}),this.Y1ItemDataMap=this.makeY2ItemDataMap({y2RenderData:this.y2RenderData,y2ItemLabels:this.dataset.y2ItemLabels??[]}),this.setGraphicData({y1RenderData:this.y1RenderData,y2RenderData:this.y2RenderData,y1ItemLabels:this.dataset.y1ItemLabels??[],y2ItemLabels:this.dataset.y2ItemLabels??[],xLabels:this.dataset.xLabels,xScale:this.xScale,y1Scale:this.y1Scale,y2Scale:this.y2Scale}),this.axisColumnTwoScales.setDataset({xScale:this.xScale,y1Scale:this.y1Scale,y2Scale:this.y2Scale,y1MaxValue:this.y1MaxValue,y2MaxValue:this.y2MaxValue}),this.axisColumnTwoScales.render(),this.renderGraphic()}on(e,n){return e==="click"?this.clickCallback=n:e==="mouseover"?this.mouseoverCallback=n:e==="mousemove"?this.mousemoveCallback=n:e==="mouseout"&&(this.mouseoutCallback=n),this}setRangeEvent(e){e.on("click",(n,i)=>{const a=this.makeActivedCallbackData("",w);this.clickCallback(a)}).on("mouseover",(n,i)=>{const a=this.makeActivedCallbackData("",w);this.mouseoverCallback(a)}).on("mousemove",n=>{const i=this.makeActivedCallbackData("",w);this.mousemoveCallback(i)}).on("mouseout",n=>{if(w.offsetX>0&&w.offsetX<this.width&&w.offsetY>0&&w.offsetY<this.height)return;const i=this.makeActivedCallbackData("",w);this.mouseoutCallback(i)})}showTooltip(e,n){n&&e&&this.xScale?this.tooltip.setDatum({data:e,x:e.clientX-e.offsetX+this.params.padding.left+this.xScale(e.xLabel),y:w.clientY}):this.tooltip.remove()}setCoverEvent(e){e.on("mouseover",(n,i)=>{const a=this.makeActivedCallbackData("",w);this.coverHighlight(a),this.showTooltip(a,w)}).on("mousemove",n=>{const i=this.makeActivedCallbackData("",w);this.coverHighlight(i),this.showTooltip(i,w)}).on("mouseout",n=>{w.offsetX>0&&w.offsetX<this.width&&w.offsetY>0&&w.offsetY<this.height||(this.coverHighlight(void 0),this.tooltip.remove())})}coverHighlight(e){this.params.showAuxLine&&this.renderAuxLine({coverSelection:this.coverSelection,xLabels:this.dataset.xLabels,activeRangeIndex:e?e.rangeIndex:-1,xScale:this.xScale,padding:this.params.padding,axisHeight:this.axisHeight}),this.renderGraphicCoverHighlight({eventData:e,xScale:this.xScale,y1Scale:this.y1Scale,y2Scale:this.y2Scale,padding:this.params.padding})}renderAuxLine({coverSelection:e,xLabels:n,activeRangeIndex:i,xScale:a,padding:r,axisHeight:s}){if(!a)return;const o=n.map((l,c)=>{const h=a(l)||0;return{x1:h,x2:h,y1:0,y2:s,active:i==c}});this.utilAuxLine.setData(o),this.utilAuxLine.render()}};const Rn="__DEFAULT__";class q4 extends V4{constructor(e,n){super(e,n),this.params=U4,this.bar=new O4(this.graphicY1Selection,{}),this.line=new Qg(this.graphicY2Selection,{}),this.dot=new Jg(this.coverSelection,{})}initGraphic(e){this.params={...this.params,...e},this.params.graphicColumnBarGroup={...this.params.graphicColumnBarGroup,colors:this.params.y1Colors,highlightTarget:this.params.highlightTarget,highlightDatumId:this.params.highlightDatumId,highlightItemId:this.params.highlightItemId,highlightGroupId:this.params.highlightGroupId},this.params.graphicColumnLine={...this.params.graphicColumnLine,colors:this.params.y2Colors,highlightItemId:this.params.highlightItemId,highlightTarget:this.params.highlightTarget==="item"?"item":"none"},this.params.graphicDot={...this.params.graphicDot,colors:this.params.y2Colors,highlightItemId:this.params.highlightItemId,highlightTarget:this.params.highlightTarget==="item"?"item":"none"},this.bar.setParams(this.params.graphicColumnBarGroup),this.bar.on("click",n=>{const i=this.makeActivedCallbackData(n.itemLabel??"",w);this.clickCallback(i)}).on("mouseover",n=>{const i=this.makeActivedCallbackData(n.itemLabel??"",w);this.showTooltip(i,w),this.mouseoverCallback(i)}).on("mousemove",n=>{const i=this.makeActivedCallbackData(n.itemLabel??"",w);this.showTooltip(i,w),this.mousemoveCallback(i)}).on("mouseout",n=>{const i=this.makeActivedCallbackData("",w);this.showTooltip(void 0,w),this.mouseoutCallback(i)}),this.line.setParams(this.params.graphicColumnLine),this.line.on("click",n=>{const i=this.makeActivedCallbackData(n.itemLabel??"",w);this.clickCallback(i)}).on("mouseover",n=>{const i=this.makeActivedCallbackData(n.itemLabel??"",w);this.showTooltip(i,w),this.mouseoverCallback(i),this.params.highlightTarget==="item"&&(this.dot.setParams({highlightItemId:n.itemLabel}),this.dot.render())}).on("mousemove",n=>{const i=this.makeActivedCallbackData(n.itemLabel??"",w);this.showTooltip(i,w),this.mousemoveCallback(i)}).on("mouseout",n=>{const i=this.makeActivedCallbackData("",w);this.showTooltip(void 0,w),this.mouseoutCallback(i),this.params.highlightTarget==="item"&&(this.dot.setParams({highlightItemId:this.params.highlightItemId}),this.dot.render())}),this.dot.setParams(this.params.graphicDot),this.dot.on("click",n=>{const i=this.makeActivedCallbackData(n.itemLabel??"",w);this.clickCallback(i)}).on("mouseover",n=>{const i=this.makeActivedCallbackData(n.itemLabel??"",w);this.showTooltip(i,w),this.mouseoverCallback(i),this.params.highlightTarget==="item"&&(this.line.setParams({highlightItemId:n.itemLabel}),this.line.render())}).on("mousemove",n=>{const i=this.makeActivedCallbackData(n.itemLabel??"",w);this.showTooltip(i,w),this.mousemoveCallback(i)}).on("mouseout",n=>{const i=this.makeActivedCallbackData("",w);this.showTooltip(void 0,w),this.mouseoutCallback(i),this.params.highlightTarget==="item"&&(this.line.setParams({highlightItemId:this.params.highlightItemId}),this.line.render())})}makeY1GraphicRenderData({dataset:e,xScale:n,y1Scale:i}){return e.y1Data.map((a,r)=>{const s=e.y1ItemLabels&&e.y1ItemLabels[r]?e.y1ItemLabels[r]:Rn;return a.map((o,l)=>{const c=e.xLabels[l];return{...o,id:`${s}_${c}`,itemIndex:r,itemLabel:s,xIndex:l,xLabel:c,x:n(c)||0,y:i(o.value)||0}})})}makeY2GraphicRenderData({dataset:e,xScale:n,y2Scale:i}){return e.y2Data.map((a,r)=>{const s=e.y2ItemLabels&&e.y2ItemLabels[r]?e.y2ItemLabels[r]:Rn;return a.map((o,l)=>{const c=e.xLabels[l];return{...o,id:`${s}_${c}`,itemIndex:r,itemLabel:s,xIndex:l,xLabel:c,x:n(c)||0,y:i(o.value)||0}})})}getY1MinAndMaxValue(e){return e.length?e.flat().reduce((n,i)=>[i.value<n[0]?i.value:n[0],i.value>n[1]?i.value:n[1]],[1/0,0]):[0,0]}getY2MinAndMaxValue(e){return e.length?e.flat().reduce((n,i)=>[i.value<n[0]?i.value:n[0],i.value>n[1]?i.value:n[1]],[1/0,0]):[0,0]}makeY1XDataMap({y1RenderData:e,xLabels:n}){let i=new Map;return e.length&&e.forEach((a,r)=>{i.set(n[r]??"",a)}),i}makeY2XDataMap({y2RenderData:e,xLabels:n}){let i=new Map;return e.length&&e.forEach((a,r)=>{a.forEach((s,o)=>{const l=i.get(n[o])??[];l.push(s),i.set(n[o]??"",l)})}),i}makeY1ItemDataMap({y1RenderData:e,y1ItemLabels:n}){let i=new Map;return e.length&&e.forEach((a,r)=>{a.forEach(s=>{const o=i.get(s.itemLabel??"")??[];o.push(s),i.set(s.itemLabel??"",o)})}),i}makeY2ItemDataMap({y2RenderData:e,y2ItemLabels:n}){let i=new Map;return e.length&&e.forEach((a,r)=>{i.set(n[r]??"",a)}),i}setGraphicData({y1RenderData:e,y2RenderData:n,y1ItemLabels:i,y2ItemLabels:a,xLabels:r,xScale:s,y1Scale:o,y2Scale:l}){if(this.bar.setDataset({data:e,itemLabels:i&&i.length?i:[Rn],xLabels:r,axisWidth:this.axisWidth,zeroY:o(0)}),this.line.setDataset({data:n,itemLabels:a&&a.length?a:[Rn],axisWidth:this.axisWidth,axisHeight:this.axisHeight,zeroY:l(0)}),this.params.showDot==="always"){const c=n.flat();this.dot.setDataset({data:c,itemLabels:a??[Rn]})}}renderGraphic(){this.bar.render(),this.line.render(),this.params.showDot==="always"&&this.dot.render()}renderGraphicCoverHighlight({eventData:e,xScale:n,y1Scale:i,y2Scale:a,padding:r}){if(this.params.showDot==="hover"&&this.params.highlightTarget!=="none"){const s=e?e.y2.groupData.map(o=>({...o,id:o.itemLabel,x:n(o.xLabel),y:a(o.value)})):[];this.dot.setDataset({data:s,itemLabels:this.dataset.y2ItemLabels??[Rn]}),this.dot.render()}}}const Yo={__name:"ChartColumnTwoScalesBarGroupAndLine",setup(t){const e={y1Data:[[{value:70769},{value:14103},{value:41075},{value:55309}],[{value:685830},{value:102725},{value:339702},{value:610896}],[{value:875854},{value:144274},{value:786471},{value:1097621}]],y2Data:[[{value:76.3098},{value:75.7679},{value:77.4424},{value:76.5973}]],xLabels:["台北市","新竹市","台南市","高雄市"],y1ItemLabels:["宋楚瑜、余湘","韓國瑜、張善政","蔡英文、賴清德"],y2ItemLabels:["得票率"]},n={y1Colors:["#FF6310","#000095","#1B9431"]};return(i,a)=>($e(),Ye("div",null,[dt(xa,{module:ca(q4),dataset:e,params:n},null,8,["module"])]))}},em={xLabel:"x",yLabel:"y",xLabelAnchor:"start",yLabelAnchor:"end",xLabelOffset:[0,0],yLabelOffset:[0,0],xTickPadding:20,yTickPadding:20,xTickLine:!0,yTickLine:!1,xTickLineDasharray:"none",yTickLineDasharray:"none",xTickFormat:",.0f",xTicks:4,axisLineColor:Kc,axisLabelColor:Ee,rotateYLabel:!1,padding:Bt,xVisible:!0,yVisible:!0,yLabelIconMethod:void 0},Za=6;class Z4{constructor(e,n){this.width=Ae,this.height=Le,this.dataset={xScale:Ge(),yScale:ai(),maxValue:0},this.params=em,this.xAxisSelection=void 0,this.yAxisSelection=void 0,this.xLabelSelection=void 0,this.yLabelSelection=void 0,this.axisWidth=Zt(this.width,Bt),this.axisHeight=Kt(this.height,Bt),this.selection=e}setParams(e){this.params={...this.params,...e}}setDataset(e){this.dataset=e}resize({width:e=this.width,height:n=this.height}){this.width=e,this.height=n,this.axisWidth=Zt(this.width,this.params.padding),this.axisHeight=Kt(this.height,this.params.padding)}render(){this.renderYPointAxis(),this.renderXLinearAxis();const e=this.dataset.xScale(0);this.renderZeroLine(this.selection,[{x1:e,y1:0,x2:e,y2:this.axisHeight}])}remove(){this.selection.remove()}renderYPointAxis(){let e=[];this.params.yVisible&&e.push(this.params);const n=this.selection.selectAll("g.yAxis").data(e),i=n.enter().append("g");this.yAxisSelection=n.merge(i).classed("yAxis",!0).attr("transform",l=>"translate("+l.padding.left+","+l.padding.top+")"),n.exit().remove();const a=this.selection.selectAll("text.yLabel").data(e),r=a.enter().append("text").classed("yLabel",!0).style("font-size","14px").style("font-weight","bold");if(this.yLabelSelection=a.merge(r).attr("x",l=>l.padding.left-l.xTickPadding-Za).attr("y",l=>l.padding.top-l.yTickPadding).attr("text-anchor",this.params.yLabelAnchor).attr("transform",`translate(${this.params.yLabelOffset[0]}, ${this.params.yLabelOffset[1]})`).style("fill",this.params.axisLabelColor).text(l=>l.yLabel),a.exit().remove(),this.yLabelSelection.size()==0)return;this.yAxis=us(this.dataset.yScale).scale(this.dataset.yScale).tickSize(this.params.yTickLine&&typeof this.params.yTickLine=="boolean"?-this.axisWidth:this.params.yTickLine&&typeof this.params.yTickLine=="number"?-this.axisWidth*this.params.yTickLine:Za).tickSizeOuter(0).tickFormat(l=>l).tickPadding(this.params.yTickPadding);const s=this.yAxisSelection.transition().duration(50).call(this.yAxis).attr("text-anchor",()=>(this.params.rotateYLabel!==!1,"end"));s.selectAll("line").style("fill","none").style("stroke",this.params.axisLineColor).style("stroke-dasharray",this.params.yTickLineDasharray),s.selectAll("path").style("fill","none").style("stroke",this.params.axisLineColor).style("shape-rendering","crispEdges");const o=s.selectAll("text").style("font-family","sans-serif").style("font-size","14px").style("color",this.params.axisLabelColor).attr("transform-origin",`-5 ${this.params.xTickPadding+Za}`);this.params.rotateYLabel===!0?o.attr("transform","translate(0,0) rotate(-45)"):typeof this.params.rotateYLabel=="number"&&o.attr("transform",`translate(0,0) rotate(${this.params.rotateYLabel})`),this.appendLabelIcon(this.yAxisSelection.selectAll("g.tick"),this.params.yLabelIconMethod)}appendLabelIcon(e,n){e.each((i,a,r)=>{const s=O(r[a]),o=s.select("text"),l=o.data(),c=Math.abs(Number(o.attr("x"))),h=Zg(l,14),f=-c-h-21,u=-7,d=s.selectAll("g.bpchart__icon").data([l]),p=d.enter().append("g").classed("bpchart__icon",!0);d.exit().remove(),p.size()&&n&&(console.log("enter.size()",p.size()),b4(p,n(l,a))),d.merge(p).attr("transform",`translate(${f}, ${u})`)})}renderXLinearAxis(){let e=[];this.params.xVisible&&e.push(this.params);const n=this.selection.selectAll("g.xAxis").data(e),i=n.enter().append("g");this.xAxisSelection=n.merge(i).classed("xAxis",!0).attr("transform",o=>"translate("+o.padding.left+","+(o.padding.top+this.axisHeight)+")"),n.exit().remove();const a=this.selection.selectAll("text.xLabel").data(e),r=a.enter().append("text").classed("xLabel",!0).style("font-size","14px").style("font-weight","bold").style("fill",this.params.axisLabelColor).style("dominant-baseline","hanging");if(this.xLabelSelection=a.merge(r).attr("x",o=>this.width-o.padding.right+o.xTickPadding).attr("y",o=>o.padding.top+this.axisHeight+o.yTickPadding).attr("transform",`translate(${this.params.xLabelOffset[0]}, ${this.params.xLabelOffset[1]})`).attr("text-anchor",this.params.xLabelAnchor).text(o=>o.xLabel),a.exit().remove(),this.xLabelSelection.size()==0)return;this.xAxis=hs(this.dataset.xScale).scale(this.dataset.xScale).ticks(this.dataset.maxValue>this.params.xTicks?this.params.xTicks:this.dataset.maxValue===0?1:Math.ceil(this.dataset.maxValue)).tickFormat(o=>os(o,this.params.xTickFormat)).tickSize(this.params.xTickLine&&typeof this.params.xTickLine=="boolean"?-this.axisHeight:this.params.xTickLine&&typeof this.params.xTickLine=="number"?-this.axisHeight*this.params.xTickLine:Za).tickPadding(this.params.xTickPadding);const s=this.xAxisSelection.transition().duration(100).call(this.xAxis);s.selectAll("line").style("fill","none").style("stroke",this.params.axisLineColor).style("stroke-dasharray",this.params.xTickLineDasharray),s.selectAll("path").style("fill","none").style("stroke","none").style("shape-rendering","crispEdges"),s.selectAll("text").style("font-family","sans-serif").style("font-size","14px").style("color",this.params.axisLabelColor)}renderZeroLine(e,n){const i=e.selectAll("g.bpchart__zero-line").data(n),a=i.enter().append("g").classed("bpchart__zero-line",!0).attr("transform",s=>"translate("+this.params.padding.left+","+this.params.padding.top+")");i.exit().remove();const r=i.merge(a);a.append("line"),r.select("line").attr("stroke",this.params.axisLabelColor).attr("stroke-width",1).transition().duration(100).attr("x1",s=>s.x1).attr("y1",s=>s.y1).attr("x2",s=>s.x2).attr("y2",s=>s.y2).attr("opacity",s=>s.x1>=0&&s.x1<=this.axisWidth?1:0)}}const K4={barWidth:0,barPadding:1,barR:!1,colors:ut,highlightTarget:"datum",highlightDatumId:"",enterDuration:800},Q4={barWidth:0,barPadding:1,barGroupPadding:20,barR:!1,colors:ut,highlightTarget:"item",highlightGroupId:"",highlightItemId:"",highlightDatumId:"",enterDuration:800},J4={barWidth:0,barGroupPadding:20,barR:!1,colors:ut,highlightTarget:"item",highlightGroupId:"",highlightItemId:"",highlightDatumId:"",enterDuration:800},nm={groupLayout:[],barPadding:1,barGroupPadding:20,colors:ut,highlightTarget:"item",highlightGroupId:"",highlightItemId:"",highlightDatumId:"",enterDuration:800,labelTextMethod:(t,e)=>String(t.value),labelPositionMethod:(t,e)=>"top",labelStyleMethod:(t,e)=>"",labelFontSizeMethod:(t,e)=>10,labelColorMethod:(t,e)=>Ee,labelPadding:5},j4=(t,e)=>{const n=new Map;return e.forEach((i,a)=>{n.set(i,t[a])}),n},t7=(t,e)=>{const n=new Map;return t.forEach((i,a)=>{i.forEach((r,s)=>{const o=n.get(e[s])??[];o.push(r),n.set(e[s],o)})}),n},e7=({groupLayout:t,yLabels:e,itemLabels:n,axisHeight:i,barPadding:a,barGroupPadding:r})=>{if(!t.length)return[{stackAmount:n.length,barWidth:vf({axisHeight:i,groupAmount:e.length,barAmountOfGroup:1,barPadding:a,barGroupPadding:r}),barR:!1,datumIndexList:n.map((f,u)=>u)}];const s=t.reduce((f,u)=>{let d=0;return u.barWidth&&(d=u.barWidth+a),f+d},0),o=t.reduce((f,u)=>f+(u.barWidth?1:0),0),l=s*e.length,c=vf({axisHeight:i-l,groupAmount:e.length,barAmountOfGroup:t.length-o,barPadding:a,barGroupPadding:r});let h=-1;return t.map((f,u)=>{const d=f.stackAmount??1;let p=[];h+=1;for(let g=h;g<h+d;g++)p.push(g);return h=p[p.length-1],{stackAmount:d,barWidth:f.barWidth??c,barR:f.barR??!1,datumIndexList:p}})},n7=({YDataMap:t,yLabels:e,axisHeight:n,groupLayout:i,barGroupPadding:a,barPadding:r})=>{let s=0;return i.every(o=>o.barWidth)?(s=i.reduce((o,l)=>o+l.barWidth,0),s+=r*(i.length-1)):s=im({axisHeight:n,groupAmount:e.length,barGroupPadding:a}),e.map((o,l)=>{const c=t.get(o)??[];let h=[],f=-s/2;return i.forEach((u,d)=>{let p=0;const g=f;u.datumIndexList.forEach(m=>{const b=c[m];h.push({...b,sourceIndex:[m,l],barX:p,barY:g+u.barWidth/2,groupY:b.y,barWidth:u.barWidth,barR:u.barR==!0?u.barWidth/2:typeof u.barR=="number"?u.barR:0,width:b.x}),p+=b.x}),f+=u.barWidth+r}),h})},i7=(t,e)=>{let n=[];return t.forEach((i,a)=>{i.forEach((r,s)=>{n.push({id:r.id,data:r,barX0:r.barX,barX1:r.barX+r.width,barY0:r.groupY+r.barY-r.barWidth/2,barY1:r.groupY+r.barY+r.barWidth/2,position:e.labelPositionMethod(r,r.sourceIndex),fontSize:e.labelFontSizeMethod(r,r.sourceIndex),color:e.labelColorMethod(r,r.sourceIndex),style:e.labelStyleMethod(r,r.sourceIndex),text:e.labelTextMethod(r,r.sourceIndex)})})}),n},Ka=({datum:t,YDataMap:e,ItemDataMap:n,event:i})=>({groupData:e.get(t.yLabel),itemData:n.get(t.itemLabel),datum:t,yLabel:t.yLabel,yIndex:t.yIndex,itemLabel:t.itemLabel,itemIndex:t.itemIndex,clientX:i.clientX,clientY:i.clientY,offsetX:i.offsetX,offsetY:i.offsetY}),im=({axisHeight:t,groupAmount:e,barGroupPadding:n=0})=>{const i=t/e-n;return i>1?i:1},vf=({axisHeight:t,groupAmount:e,barAmountOfGroup:n,barPadding:i=0,barGroupPadding:a=0})=>{const s=im({axisHeight:t,groupAmount:e,barGroupPadding:a})/n-i;return s>1?s:1},a7=(t,e=400)=>e/t;class r7{constructor(e,n){this.params=nm,this.dataset={data:[],itemLabels:[],yLabels:[],axisHeight:0,zeroX:0},this.graphicData=[],this.groupLayout=[],this.graphicGroupSelection=void 0,this.graphicBarSelection=void 0,this.itemLabels=[],this.ItemDataMap=new Map,this.YDataMap=new Map,this.axisHeight=0,this.delayDuration=0,this.clickCallback=function(){},this.mouseoverCallback=function(){},this.mousemoveCallback=function(){},this.mouseoutCallback=function(){},this.selection=e,this.graphicBoxSelection=this.selection.append("g"),this.labelBoxSelection=this.selection.append("g"),this.defsSelection=this.selection.append("defs"),this.utilGraphicBarLabel=new Kg(this.labelBoxSelection,{})}setParams(e){this.params={...this.params,...e},this.itemLabels=[],this.utilGraphicBarLabel.setParams({barDirection:"right",positionPadding:this.params.labelPadding})}setDataset(e){this.dataset=e,this.itemLabels=this.dataset.itemLabels,this.ItemDataMap=j4(this.dataset.data,this.dataset.itemLabels),this.YDataMap=t7(this.dataset.data,this.dataset.yLabels),this.delayDuration=a7(this.dataset.yLabels.length)}render(){this.itemLabels.length&&(this.colorScale=ae(this.itemLabels,this.params.colors),this.axisHeight=this.dataset.axisHeight,this.groupLayout=e7({groupLayout:this.params.groupLayout,yLabels:this.dataset.yLabels,itemLabels:this.dataset.itemLabels,axisHeight:this.axisHeight,barPadding:this.params.barPadding,barGroupPadding:this.params.barGroupPadding}),this.graphicData=n7({YDataMap:this.YDataMap,yLabels:this.dataset.yLabels,axisHeight:this.axisHeight,groupLayout:this.groupLayout,barPadding:this.params.barPadding,barGroupPadding:this.params.barGroupPadding}),this.renderGraphic({selection:this.graphicBoxSelection,graphicData:this.graphicData,yLabels:this.dataset.yLabels,colorScale:this.colorScale,params:this.params}),this.graphicBarSelection.on("click",(e,n)=>{const i=Ka({datum:e,YDataMap:this.YDataMap,ItemDataMap:this.ItemDataMap,event:w});this.clickCallback(i)}).on("mouseover",(e,n,i)=>{const a=Ka({datum:e,YDataMap:this.YDataMap,ItemDataMap:this.ItemDataMap,event:w});this.params.highlightTarget!=null&&this.params.highlightTarget!="none"&&(this.params.highlightTarget==="group"?this.highlight(this.graphicBarSelection,a.yLabel,void 0,void 0):this.params.highlightTarget==="item"?this.highlight(this.graphicBarSelection,void 0,a.itemLabel,void 0):this.params.highlightTarget==="datum"&&this.highlight(this.graphicBarSelection,void 0,void 0,a.datum&&a.datum.id)),this.mouseoverCallback(a)}).on("mousemove",(e,n)=>{const i=Ka({datum:e,YDataMap:this.YDataMap,ItemDataMap:this.ItemDataMap,event:w});this.mousemoveCallback(i)}).on("mouseout",(e,n)=>{this.params.highlightTarget!=null&&this.params.highlightTarget!="none"&&this.removeHighlight(this.graphicBarSelection);const i=Ka({datum:e,YDataMap:this.YDataMap,ItemDataMap:this.ItemDataMap,event:w});this.initHighlight(),this.mouseoutCallback(i)}),this.utilGraphicBarLabel.setData(i7(this.graphicData,this.params)),this.utilGraphicBarLabel.render())}on(e,n){return e==="click"?this.clickCallback=n:e==="mouseover"?this.mouseoverCallback=n:e==="mousemove"?this.mousemoveCallback=n:e==="mouseout"&&(this.mouseoutCallback=n),this}remove(){this.selection.remove()}renderGraphic({selection:e,graphicData:n,yLabels:i,colorScale:a,params:r}){const s=e.selectAll("g.bpchart__bar-g").data(n,(l,c)=>i[c]),o=s.enter().append("g").classed("bpchart__bar-g",!0).attr("cursor","pointer");s.exit().remove(),this.graphicGroupSelection=s.merge(o),o.attr("transform",(l,c)=>`translate(0, ${l[0]?l[0].groupY:0})`),s.transition().duration(200).attr("transform",(l,c)=>`translate(0, ${l[0]?l[0].groupY:0})`),this.graphicGroupSelection.each((l,c,h)=>{const f=O(h[c]).selectAll("g").data(l,p=>p.id),u=f.enter().append("g").classed("bpchart__bar",!0);u.append("rect").attr("rx",p=>p.barR).attr("transform",p=>`translate(0, ${-p.barWidth/2})`).attr("x",this.dataset.zeroX).attr("y",p=>p.barY).attr("width",0).attr("height",p=>p.barWidth),f.merge(u).select("rect").attr("fill",p=>a(p.itemLabel)).transition().duration(this.params.enterDuration).ease(hn).delay((p,g)=>p.yIndex*this.delayDuration).attr("transform",p=>`translate(0, ${-p.barWidth/2})`).attr("x",p=>p.barX).attr("y",p=>p.barY).attr("width",p=>p.width).attr("height",p=>p.barWidth).on("end",()=>this.initHighlight()),f.exit().remove()}),this.graphicBarSelection=this.graphicGroupSelection.selectAll("g.bpchart__bar")}initHighlight(){this.graphicBarSelection&&(this.params.highlightDatumId||this.params.highlightItemId||this.params.highlightGroupId)&&this.highlight(this.graphicBarSelection,this.params.highlightGroupId,this.params.highlightItemId,this.params.highlightDatumId)}highlight(e,n,i,a){if(!e)return;let r=[];if(a&&r.push(a),i){const s=this.dataset.data.flat().filter(o=>o.itemLabel===i).map(o=>o.id);r=r.concat(s)}if(n){const s=this.dataset.data.flat().filter(o=>o.yLabel===n).map(o=>o.id);r=r.concat(s)}e.each((s,o,l)=>{r.includes(s.id)?O(l[o]).transition().duration(200).style("opacity",1):O(l[o]).transition().duration(200).style("opacity",.3)})}removeHighlight(e){this.params.highlightDatumId||this.params.highlightItemId||this.params.highlightGroupId?this.highlight(e,this.params.highlightGroupId,this.params.highlightItemId,this.params.highlightDatumId):e.transition().duration(200).style("opacity",1)}}const am={barWidth:0,barGroupPadding:1,barR:!1,colors:ut,highlightTarget:"item",highlightGroupId:"",highlightItemId:"",highlightDatumId:"",enterDuration:800},s7=(t,e)=>{const n=new Map;return e.forEach((i,a)=>{n.set(i,t[a])}),n},o7=(t,e)=>{const n=new Map;return t.forEach((i,a)=>{i.forEach((r,s)=>{const o=n.get(e[s])??[];o.push(r),n.set(e[s],o)})}),n},l7=(t,e,n)=>e.map((i,a)=>{const r=t.get(i)??[];let s=[],o=0;for(let l=0;l<r.length;l++){const c=r[l],h=c.x;s.push({...c,graphicX:o,graphicY:c.y,width:h}),o=o+h}return s}),Qa=({datum:t,YDataMap:e,ItemDataMap:n,event:i})=>({groupData:e.get(t.yLabel),itemData:n.get(t.itemLabel),datum:t,yLabel:t.yLabel,yIndex:t.yIndex,itemLabel:t.itemLabel,itemIndex:t.itemIndex,clientX:i.clientX,clientY:i.clientY,offsetX:i.offsetX,offsetY:i.offsetY}),c7=({axisWidth:t,groupAmount:e,barGroupPadding:n=0})=>{const i=t/e-n;return i>1?i:1},h7=(t,e=400)=>e/t;class u7{constructor(e,n){this.params=am,this.dataset={data:[],itemLabels:[],yLabels:[],axisHeight:0,zeroX:0},this.graphicData=[],this.graphicGroupSelection=void 0,this.graphicBarSelection=void 0,this.itemLabels=[],this.ItemDataMap=new Map,this.YDataMap=new Map,this.axisHeight=0,this.barWidth=0,this.delayDuration=0,this.clickCallback=function(){},this.mouseoverCallback=function(){},this.mousemoveCallback=function(){},this.mouseoutCallback=function(){},this.selection=e,this.defsSelection=e.append("defs")}setParams(e){this.params={...this.params,...e},this.itemLabels=[]}setDataset(e){this.dataset=e,this.itemLabels=this.dataset.itemLabels,this.ItemDataMap=s7(this.dataset.data,this.dataset.itemLabels),this.YDataMap=o7(this.dataset.data,this.dataset.yLabels),this.delayDuration=h7(this.dataset.yLabels.length)}render(){console.log(this.dataset),this.itemLabels.length&&(this.colorScale=ae(this.itemLabels,this.params.colors),this.axisHeight=this.dataset.axisHeight,this.barWidth=this.params.barWidth?this.params.barWidth:c7({axisWidth:this.axisHeight,groupAmount:this.dataset.yLabels.length,barGroupPadding:this.params.barGroupPadding??0}),this.graphicData=l7(this.YDataMap,this.dataset.yLabels,this.dataset.zeroX),this.renderGraphic({selection:this.selection,graphicData:this.graphicData,yLabels:this.dataset.yLabels,colorScale:this.colorScale,params:this.params}),this.graphicBarSelection.on("click",(e,n)=>{const i=Qa({datum:e,YDataMap:this.YDataMap,ItemDataMap:this.ItemDataMap,event:w});this.clickCallback(i)}).on("mouseover",(e,n,i)=>{const a=Qa({datum:e,YDataMap:this.YDataMap,ItemDataMap:this.ItemDataMap,event:w});this.params.highlightTarget!=null&&this.params.highlightTarget!="none"&&(this.params.highlightTarget==="group"?this.highlight(this.graphicBarSelection,a.yLabel,void 0,void 0):this.params.highlightTarget==="item"?this.highlight(this.graphicBarSelection,void 0,a.itemLabel,void 0):this.params.highlightTarget==="datum"&&this.highlight(this.graphicBarSelection,void 0,void 0,a.datum&&a.datum.id)),this.mouseoverCallback(a)}).on("mousemove",(e,n)=>{const i=Qa({datum:e,YDataMap:this.YDataMap,ItemDataMap:this.ItemDataMap,event:w});this.mousemoveCallback(i)}).on("mouseout",(e,n)=>{this.params.highlightTarget!=null&&this.params.highlightTarget!="none"&&this.removeHighlight(this.graphicBarSelection);const i=Qa({datum:e,YDataMap:this.YDataMap,ItemDataMap:this.ItemDataMap,event:w});this.initHighlight(),this.mouseoutCallback(i)}))}on(e,n){return e==="click"?this.clickCallback=n:e==="mouseover"?this.mouseoverCallback=n:e==="mousemove"?this.mousemoveCallback=n:e==="mouseout"&&(this.mouseoutCallback=n),this}remove(){this.selection.remove()}renderGraphic({selection:e,graphicData:n,yLabels:i,colorScale:a,params:r}){if(this.barWidth<=0)return;const s=e.selectAll("g.bpchart__bar-g").data(n,(c,h)=>i[h]),o=s.enter().append("g").classed("bpchart__bar-g",!0).attr("cursor","pointer");s.exit().remove(),this.graphicGroupSelection=s.merge(o),o.attr("transform",(c,h)=>`translate(0, ${c[0]?c[0].graphicY:0})`),s.transition().duration(200).attr("transform",(c,h)=>`translate(0, ${c[0]?c[0].graphicY:0})`);const l=this.barWidth/2;this.graphicGroupSelection.each((c,h,f)=>{const u=O(f[h]).selectAll("g").data(c,g=>g.id),d=u.enter().append("g").classed("bpchart__bar",!0);d.append("rect").attr("rx",r.barR==!0?l:r.barR==!1?0:typeof r.barR=="number"?r.barR:0).attr("transform",`translate(0, ${-l})`).attr("x",this.dataset.zeroX).attr("y",0).attr("width",0).attr("height",this.barWidth),u.merge(d).select("rect").attr("fill",g=>a(g.itemLabel)).transition().duration(this.params.enterDuration).ease(hn).delay((g,m)=>g.yIndex*this.delayDuration).attr("transform",`translate(0, ${-l})`).attr("x",g=>g.graphicX).attr("y",0).attr("width",g=>g.width).attr("height",this.barWidth).on("end",()=>this.initHighlight()),u.exit().remove()}),this.graphicBarSelection=this.graphicGroupSelection.selectAll("g.bpchart__bar")}initHighlight(){this.graphicBarSelection&&(this.params.highlightDatumId||this.params.highlightItemId||this.params.highlightGroupId)&&this.highlight(this.graphicBarSelection,this.params.highlightGroupId,this.params.highlightItemId,this.params.highlightDatumId)}highlight(e,n,i,a){if(!e)return;let r=[];if(a&&r.push(a),i){const s=this.dataset.data.flat().filter(o=>o.itemLabel===i).map(o=>o.id);r=r.concat(s)}if(n){const s=this.dataset.data.flat().filter(o=>o.yLabel===n).map(o=>o.id);r=r.concat(s)}e.each((s,o,l)=>{r.includes(s.id)?O(l[o]).transition().duration(200).style("opacity",1):O(l[o]).transition().duration(200).style("opacity",.3)})}removeHighlight(e){this.params.highlightDatumId||this.params.highlightItemId||this.params.highlightGroupId?this.highlight(e,this.params.highlightGroupId,this.params.highlightItemId,this.params.highlightDatumId):e.transition().duration(200).style("opacity",1)}}const si={axisRow:em,tooltipAside:{templateHtml:t=>t.groupData&&t.groupData[0]?`
          <div>
            <div>${t.groupData[0].yLabel}</div>
            <div>${t.groupData.map(e=>e.value).join(",")}</div>          
          </div>
        `:""},colors:ut,padding:Bt,highlightTarget:"datum",highlightDatumId:"",highlightItemId:"",showAuxLine:!1,domainMinValue:0,domainMaxValue:void 0,domainMinRange:void 0,domainMaxRange:.95};({...si});({...si});({...si});const f7={...si,graphicRowBarLayout:nm},d7={...si,graphicRowBarStack:am},xf=(t,e)=>({...t,padding:e}),p7=({dataset:t,activedItemId:e,yDataMap:n,ItemDataMap:i,padding:a,yRangeScale:r,event:s})=>{if(!s||!r)return{dataset:t,groupData:[],itemData:[],datum:void 0,yLabel:"",yIndex:-1,itemLabel:"",itemIndex:-1,rangeIndex:-1,clientX:-1,clientY:-1,offsetX:-1,offsetY:-1};const o=Number(s.offsetY)-a.top,l=Number(r(o)??0),c=t.yLabels[l],h=n.get(c)??[];let f=[],u;return e&&(f=i.get(e)??[],u=h.find(d=>d.itemLabel===e)),{dataset:t,groupData:h,itemData:f,datum:u,yLabel:c,yIndex:l,itemLabel:u?u.itemLabel:"",itemIndex:u?u.itemIndex:-1,rangeIndex:l,clientX:w.clientX,clientY:w.clientY,offsetX:w.offsetX,offsetY:w.offsetY}};class rm{constructor(e,n){this.width=Ae,this.height=Le,this.dataset={data:[],yLabels:[]},this.params=si,this.graphicSelection=void 0,this.axisWidth=0,this.axisHeight=0,this.clickCallback=function(){},this.mouseoverCallback=function(){},this.mousemoveCallback=function(){},this.mouseoutCallback=function(){},this.yDataMap=new Map,this.ItemDataMap=new Map,this.renderData=[],this.axisParams=this.params.axisRow,this.xAxisSelection=void 0,this.yAxisSelection=void 0,this.xLabelSelection=void 0,this.yLabelSelection=void 0,this.auxLineSelection=void 0,this.minValue=0,this.maxValue=0,this.makeActivedCallbackData=(i,a)=>p7({dataset:this.dataset,activedItemId:i,yDataMap:this.yDataMap,ItemDataMap:this.ItemDataMap,padding:this.params.padding,yRangeScale:this.yRangeScale,event:a}),this.selection=e,this.axisSelection=e.append("g"),this.axisRow=new Z4(this.axisSelection,{}),this.rangeSelection=this.selection.append("rect").attr("opacity",0),this.setRangeEvent(this.rangeSelection),this.graphicSelection=e.append("g"),this.coverSelection=this.selection.append("g").classed("bpchart__cover",!0),this.utilAuxLine=new eh(this.coverSelection),this.setCoverEvent(this.selection)}setParams(e){this.params={...this.params,...e,axisRow:{...this.params.axisRow,...e.axisRow}},this.params.tooltipAside&&!this.tooltip&&(this.tooltip=new th(this.selection,{templateHtml:this.params.tooltipAside.templateHtml,type:this.params.tooltipAside.type??"white",yLine:this.params.tooltipAside.yLine??!1})),this.axisParams=xf(this.params.axisRow,this.params.padding),this.axisWidth=Zt(this.width,this.params.padding),this.axisHeight=Kt(this.height,this.params.padding),this.axisRow.setParams(this.axisParams),this.graphicSelection.attr("transform",`translate(${this.params.padding.left}, ${this.params.padding.top})`),this.coverSelection.attr("transform",`translate(${this.params.padding.left}, ${this.params.padding.top})`),this.initGraphic(this.params)}select(){return this.selection}remove(){this.selection.remove()}resize({width:e=this.width,height:n=this.height}){this.width=e,this.height=n,this.axisParams=xf(this.params.axisRow,this.params.padding),this.axisWidth=Zt(this.width,this.params.padding),this.axisHeight=Kt(this.height,this.params.padding),this.axisRow.setParams(this.axisParams),this.axisRow.resize({width:e,height:n}),this.rangeSelection.attr("x",this.params.padding.left).attr("y",this.params.padding.top).attr("width",this.axisWidth).attr("height",this.axisHeight)}setDataset(e){this.dataset=e;const[n,i]=this.getMinAndMaxValue(this.dataset.data);this.minValue=n,this.maxValue=i}render(){this.yScale=Jc({axisLabels:this.dataset.yLabels,axisWidth:this.axisHeight,reverse:!0}),this.xScale=ls({maxValue:this.maxValue,minValue:this.minValue,axisWidth:this.axisWidth,domainMinValue:this.params.domainMinValue,domainMaxValue:this.params.domainMaxValue,domainMinRange:this.params.domainMinRange,domainMaxRange:this.params.domainMaxRange}),this.yRangeScale=jc({axisLabels:this.dataset.yLabels,axisWidth:this.axisHeight,reverse:!0}),this.renderData=this.makeGraphicRenderData({dataset:this.dataset,xScale:this.xScale,yScale:this.yScale}),this.yDataMap=this.makeYDataMap({renderData:this.renderData,yLabels:this.dataset.yLabels}),this.ItemDataMap=this.makeItemDataMap({renderData:this.renderData,itemLabels:this.dataset.itemLabels??[]}),this.setGraphicData({renderData:this.renderData,itemLabels:this.dataset.itemLabels??[],yLabels:this.dataset.yLabels,xScale:this.xScale,yScale:this.yScale}),this.axisRow.setDataset({xScale:this.xScale,yScale:this.yScale,maxValue:this.maxValue}),this.axisRow.render(),this.renderGraphic()}on(e,n){return e==="click"?this.clickCallback=n:e==="mouseover"?this.mouseoverCallback=n:e==="mousemove"?this.mousemoveCallback=n:e==="mouseout"&&(this.mouseoutCallback=n),this}setRangeEvent(e){e.on("click",(n,i)=>{const a=this.makeActivedCallbackData("",w);this.clickCallback(a)}).on("mouseover",(n,i)=>{const a=this.makeActivedCallbackData("",w);this.mouseoverCallback(a)}).on("mousemove",n=>{const i=this.makeActivedCallbackData("",w);this.mousemoveCallback(i)}).on("mouseout",n=>{if(w.offsetX>0&&w.offsetX<this.width&&w.offsetY>0&&w.offsetY<this.height)return;const i=this.makeActivedCallbackData("",w);this.mouseoutCallback(i)})}showTooltip(e,n){n&&e&&this.yScale?this.tooltip.setDatum({data:e,x:w.clientX,y:e.clientY-e.offsetY+this.params.padding.top+this.yScale(e.yLabel)}):this.tooltip.remove()}setCoverEvent(e){e.on("mouseover",(n,i)=>{const a=this.makeActivedCallbackData("",w);this.coverHighlight(a),this.showTooltip(a,w)}).on("mousemove",n=>{const i=this.makeActivedCallbackData("",w);this.coverHighlight(i),this.showTooltip(i,w)}).on("mouseout",n=>{w.offsetX>0&&w.offsetX<this.width&&w.offsetY>0&&w.offsetY<this.height||(this.coverHighlight(void 0),this.tooltip.remove())})}coverHighlight(e){this.params.showAuxLine&&this.renderAuxLine({coverSelection:this.coverSelection,yLabels:this.dataset.yLabels,activeRangeIndex:e?e.rangeIndex:-1,yScale:this.yScale,padding:this.params.padding,axisWidth:this.axisWidth}),this.renderGraphicCoverHighlight({eventData:e,xScale:this.xScale,yScale:this.yScale,padding:this.params.padding})}renderAuxLine({coverSelection:e,yLabels:n,activeRangeIndex:i,yScale:a,padding:r,axisWidth:s}){if(!a)return;const o=n.map((l,c)=>{const h=a(l)||0;return{x1:0,x2:s,y1:h,y2:h,active:i==c}});this.utilAuxLine.setData(o),this.utilAuxLine.render()}}const _f="__DEFAULT__";let g7=class extends rm{constructor(e,n){super(e,n),this.params=f7,this.bar=new r7(this.graphicSelection,{})}initGraphic(e){this.params={...this.params,...e,graphicRowBarLayout:{...this.params.graphicRowBarLayout,...e.graphicRowBarLayout}},this.bar.setParams({...this.params.graphicRowBarLayout,colors:this.params.colors,highlightTarget:this.params.highlightTarget,highlightDatumId:this.params.highlightDatumId,highlightItemId:this.params.highlightItemId,highlightGroupId:this.params.highlightGroupId}),this.bar.on("click",n=>{const i=this.makeActivedCallbackData(n.itemLabel??"",w);this.clickCallback(i)}).on("mouseover",n=>{const i=this.makeActivedCallbackData(n.itemLabel??"",w);this.showTooltip(i,w),this.mouseoverCallback(i)}).on("mousemove",n=>{const i=this.makeActivedCallbackData(n.itemLabel??"",w);this.showTooltip(i,w),this.mousemoveCallback(i)}).on("mouseout",n=>{const i=this.makeActivedCallbackData("",w);this.showTooltip(void 0,w),this.mouseoutCallback(i)})}makeGraphicRenderData({dataset:e,xScale:n,yScale:i}){return e.data.map((a,r)=>{const s=e.itemLabels&&e.itemLabels[r]?e.itemLabels[r]:_f;return a.map((o,l)=>{const c=e.yLabels[l],h=i(c)||0;return{...o,id:`${s}_${c}`,itemIndex:r,itemLabel:s,yIndex:l,yLabel:c,x:n(o.value)||0,y:h}})})}getMinAndMaxValue(e){if(!e.length)return[0,0];const n=(r,s,o)=>{let l=[];for(let c=0;c<r[0].length;c++){l[c]=0;for(let h=s;h<=o;h++)l[c]+=r[h][c].value}return l};let i=0,a=[];return this.params.graphicRowBarLayout.groupLayout.length?this.params.graphicRowBarLayout.groupLayout.forEach(r=>{const s=i+r.stackAmount-1;a=a.concat(n(e,i,s)),i=s+1}):a=n(e,0,e[0].length-1),a.reduce((r,s)=>[s<r[0]?s:r[0],s>r[1]?s:r[1]],[1/0,0])}makeYDataMap({renderData:e,yLabels:n}){let i=new Map;return e.length&&e.forEach((a,r)=>{a.forEach((s,o)=>{const l=i.get(n[o])??[];l.push(s),i.set(n[o],l)})}),i}makeItemDataMap({renderData:e,itemLabels:n}){let i=new Map;return e.length&&n.forEach((a,r)=>{i.set(a,e[r])}),i}setGraphicData({renderData:e,itemLabels:n,yLabels:i,xScale:a,yScale:r}){this.bar.setDataset({data:e,yLabels:i,itemLabels:n??[_f],axisHeight:this.axisHeight,zeroX:0})}renderGraphic(){this.bar.render()}renderGraphicCoverHighlight({eventData:e,xScale:n,yScale:i,padding:a}){}};const wf="__DEFAULT__";class m7 extends rm{constructor(e,n){super(e,n),this.params=d7,this.bar=new u7(this.graphicSelection,{})}initGraphic(e){this.params={...this.params,...e,graphicRowBarStack:{...this.params.graphicRowBarStack,...e.graphicRowBarStack}},this.bar.setParams({...this.params.graphicRowBarStack,colors:this.params.colors,highlightTarget:this.params.highlightTarget,highlightDatumId:this.params.highlightDatumId,highlightItemId:this.params.highlightItemId,highlightGroupId:this.params.highlightGroupId}),this.bar.on("click",n=>{const i=this.makeActivedCallbackData(n.itemLabel??"",w);this.clickCallback(i)}).on("mouseover",n=>{const i=this.makeActivedCallbackData(n.itemLabel??"",w);this.showTooltip(i,w),this.mouseoverCallback(i)}).on("mousemove",n=>{const i=this.makeActivedCallbackData(n.itemLabel??"",w);this.showTooltip(i,w),this.mousemoveCallback(i)}).on("mouseout",n=>{const i=this.makeActivedCallbackData("",w);this.showTooltip(void 0,w),this.mouseoutCallback(i)})}makeGraphicRenderData({dataset:e,xScale:n,yScale:i}){return e.data.map((a,r)=>{const s=e.itemLabels&&e.itemLabels[r]?e.itemLabels[r]:wf;return a.map((o,l)=>{const c=e.yLabels[l],h=i(c)||0;return{...o,id:`${s}_${c}`,itemIndex:r,itemLabel:s,yIndex:l,yLabel:c,x:n(o.value)||0,y:h}})})}getMinAndMaxValue(e){if(!e.length)return[0,0];let n=[];for(let i=0;i<e[0].length;i++){n[i]=0;for(let a=0;a<e.length;a++)n[i]+=e[a][i].value}return n.reduce((i,a)=>[a<i[0]?a:i[0],a>i[1]?a:i[1]],[1/0,0])}makeYDataMap({renderData:e,yLabels:n}){let i=new Map;return e.length&&e.forEach((a,r)=>{a.forEach((s,o)=>{const l=i.get(n[o])??[];l.push(s),i.set(n[o],l)})}),i}makeItemDataMap({renderData:e,itemLabels:n}){let i=new Map;return e.length&&n.forEach((a,r)=>{i.set(a,e[r])}),i}setGraphicData({renderData:e,itemLabels:n,yLabels:i,xScale:a,yScale:r}){this.bar.setDataset({data:e,yLabels:i,itemLabels:n??[wf],axisHeight:this.axisHeight,zeroX:0})}renderGraphic(){this.bar.render()}renderGraphicCoverHighlight({eventData:e,xScale:n,yScale:i,padding:a}){}}const Mf={__name:"ChartRow",setup(t){const e={data:[[{value:1653834},{value:264533},{value:1179611},{value:1780844}],[{value:513287},{value:80812},{value:377234},{value:518714}]],yLabels:["台北市","新竹市","台南市","高雄市"],itemLabels:["發出票數","剩餘票數"]},n={graphicRowBarStack:{barWidth:20,barR:5}};return(i,a)=>($e(),Ye("div",null,[dt(xa,{module:ca(m7),dataset:e,params:n},null,8,["module"])]))}},sm={xLabel:"x",yLabel:"y",xLabelAnchor:"start",yLabelAnchor:"end",xLabelOffset:[0,0],yLabelOffset:[0,0],xTickPadding:20,yTickPadding:20,xTickLine:!1,yTickLine:!0,xTickLineDasharray:"none",yTickLineDasharray:"none",yTickFormat:",.0f",yTicks:4,axisLineColor:Kc,axisLabelColor:Ee,rotateXLabel:!1,padding:Bt,xVisible:!0,yVisible:!0},Ja=6;class b7{constructor(e,n){this.width=Ae,this.height=Le,this.dataset={xScale:ai(),yScale:Ge(),maxValue:0},this.params=sm,this.xAxisSelection=void 0,this.yAxisSelection=void 0,this.xLabelSelection=void 0,this.yLabelSelection=void 0,this.axisWidth=Zt(this.width,Bt),this.axisHeight=Kt(this.height,Bt),this.selection=e}setParams(e){this.params={...this.params,...e}}setDataset(e){this.dataset=e}resize({width:e=this.width,height:n=this.height}){this.width=e,this.height=n,this.axisWidth=Zt(this.width,this.params.padding),this.axisHeight=Kt(this.height,this.params.padding)}render(){this.renderXPointAxis(),this.renderYLinearAxis();const e=this.dataset.yScale(0);this.renderZeroLine(this.selection,[{x1:0,y1:e,x2:this.axisWidth,y2:e}])}remove(){this.selection.remove()}renderXPointAxis(){let e=[];this.params.xVisible&&e.push(this.params);const n=this.selection.selectAll("g.xAxis").data(e),i=n.enter().append("g");this.xAxisSelection=n.merge(i).classed("xAxis",!0).attr("transform",l=>"translate("+l.padding.left+","+(l.padding.top+this.axisHeight)+")"),n.exit().remove();const a=this.selection.selectAll("text.xLabel").data(e),r=a.enter().append("text").classed("xLabel",!0).style("font-size","14px").style("font-weight","bold").style("dominant-baseline","hanging");if(this.xLabelSelection=a.merge(r).attr("x",l=>this.width-l.padding.right+l.xTickPadding).attr("y",l=>l.padding.top+this.axisHeight+l.yTickPadding+Ja).attr("transform",`translate(${this.params.xLabelOffset[0]}, ${this.params.xLabelOffset[1]})`).attr("text-anchor",this.params.xLabelAnchor).style("fill",this.params.axisLabelColor).text(l=>l.xLabel),a.exit().remove(),this.xLabelSelection.size()==0)return;this.xAxis=hs(this.dataset.xScale).scale(this.dataset.xScale).tickSize(this.params.xTickLine&&typeof this.params.xTickLine=="boolean"?-this.axisHeight:this.params.xTickLine&&typeof this.params.xTickLine=="number"?-this.axisHeight*this.params.xTickLine:Ja).tickSizeOuter(0).tickFormat(l=>l).tickPadding(this.params.xTickPadding);const s=this.xAxisSelection.transition().duration(50).call(this.xAxis).attr("text-anchor",()=>this.params.rotateXLabel!==!1?"end":"middle");s.selectAll("line").style("fill","none").style("stroke",this.params.axisLineColor).style("stroke-dasharray",this.params.xTickLineDasharray),s.selectAll("path").style("fill","none").style("stroke",this.params.axisLineColor).style("shape-rendering","crispEdges");const o=s.selectAll("text").style("font-family","sans-serif").style("font-size","14px").style("color",this.params.axisLabelColor).attr("transform-origin",`-5 ${this.params.xTickPadding+Ja}`);this.params.rotateXLabel===!0?o.attr("transform","translate(0,0) rotate(-45)"):typeof this.params.rotateXLabel=="number"&&o.attr("transform",`translate(0,0) rotate(${this.params.rotateXLabel})`)}renderYLinearAxis(){let e=[];this.params.xVisible&&e.push(this.params);const n=this.selection.selectAll("g.yAxis").data(e),i=n.enter().append("g");this.yAxisSelection=n.merge(i).classed("yAxis",!0).attr("transform",o=>"translate("+o.padding.left+","+o.padding.top+")"),n.exit().remove();const a=this.selection.selectAll("text.yLabel").data(e),r=a.enter().append("text").classed("yLabel",!0).style("font-size","14px").style("font-weight","bold");if(this.yLabelSelection=a.merge(r).attr("x",o=>o.padding.left-o.xTickPadding).attr("y",o=>o.padding.top-o.yTickPadding).attr("text-anchor",this.params.yLabelAnchor).attr("transform",`translate(${this.params.yLabelOffset[0]}, ${this.params.yLabelOffset[1]})`).style("fill",this.params.axisLabelColor).text(o=>o.yLabel),a.exit().remove(),this.yLabelSelection.size()==0)return;this.yAxis=us(this.dataset.yScale).scale(this.dataset.yScale).ticks(this.dataset.maxValue>this.params.yTicks?this.params.yTicks:this.dataset.maxValue===0?1:Math.ceil(this.dataset.maxValue)).tickFormat(o=>os(o,this.params.yTickFormat)).tickSize(this.params.yTickLine&&typeof this.params.yTickLine=="boolean"?-this.axisWidth:this.params.yTickLine&&typeof this.params.yTickLine=="number"?-this.axisWidth*this.params.yTickLine:Ja).tickPadding(this.params.yTickPadding);const s=this.yAxisSelection.transition().duration(100).call(this.yAxis);s.selectAll("line").style("fill","none").style("stroke",this.params.axisLineColor).style("stroke-dasharray",this.params.yTickLineDasharray),s.selectAll("path").style("fill","none").style("stroke","none").style("shape-rendering","crispEdges"),s.selectAll("text").style("font-family","sans-serif").style("font-size","14px").style("color",this.params.axisLabelColor)}renderZeroLine(e,n){const i=e.selectAll("g.bpchart__zero-line").data(n),a=i.enter().append("g").classed("bpchart__zero-line",!0).attr("transform",s=>"translate("+this.params.padding.left+","+this.params.padding.top+")");i.exit().remove();const r=i.merge(a);a.append("line"),r.select("line").attr("stroke",this.params.axisLabelColor).attr("stroke-width",1).transition().duration(100).attr("x1",s=>s.x1).attr("y1",s=>s.y1).attr("x2",s=>s.x2).attr("y2",s=>s.y2).attr("opacity",s=>s.y1>=0&&s.y1<=this.axisHeight?1:0)}}const y7={barWidth:0,barGroupPadding:20,barR:!1,colors:ut,highlightTarget:"item",highlightGroupId:"",highlightItemId:"",highlightDatumId:"",enterDuration:800},v7={lineCurve:"curveLinear",colors:ut,highlightTarget:"item",highlightItemId:"",enterDuration:800},We={axisColumn:sm,tooltipAside:{templateHtml:t=>t.groupData&&t.groupData[0]?`
          <div>
            <div>${t.groupData[0].xLabel}</div>
            <div>${t.groupData.map(e=>e.value).join(",")}</div>          
          </div>
        `:""},colors:ut,padding:Bt,highlightTarget:"datum",highlightDatumId:"",highlightItemId:"",showAuxLine:!1,domainMinValue:0,domainMaxValue:void 0,domainMinRange:void 0,domainMaxRange:.95},x7={...We,highlightTarget:"item",graphicColumnLine:ri,graphicDot:Sn,showDot:"hover"};({...We});({...We});({...We});({...We});({...We});const kf=(t,e)=>({...t,padding:e}),_7=({dataset:t,activedItemId:e,XDataMap:n,ItemDataMap:i,padding:a,xRangeScale:r,event:s})=>{if(!s||!r)return{dataset:t,groupData:[],itemData:[],datum:void 0,xLabel:"",xIndex:-1,itemLabel:"",itemIndex:-1,rangeIndex:-1,clientX:-1,clientY:-1,offsetX:-1,offsetY:-1};const o=Number(s.offsetX)-a.left,l=Number(r(o)??0),c=t.xLabels[l],h=n.get(c)??[];let f=[],u;return e&&(f=i.get(e)??[],u=h.find(d=>d.itemLabel===e)),{dataset:t,groupData:h,itemData:f,datum:u,xLabel:c,xIndex:l,itemLabel:u?u.itemLabel:"",itemIndex:u?u.itemIndex:-1,rangeIndex:l,clientX:w.clientX,clientY:w.clientY,offsetX:w.offsetX,offsetY:w.offsetY}},w7=({dataset:t,filterConfig:e,params:n})=>{let i=[];if(!e||!e.filterItems||!t.itemLabels)return{filteredDataset:t,filteredParams:n};const a=e.filterItems.reduce((s,o)=>(s[o]=!0,s),{}),r=s=>!s.itemLabel||a[s.itemLabel]==!0;return t.data[0]&&Array.isArray(t.data[0])?i=t.data.filter((s,o)=>a[t.itemLabels[o]]==!0).map(s=>s.filter(r)):i=t.data.filter(r),{filteredDataset:{...t,data:i,itemLabels:e&&e.filterItems?e.filterItems:t.itemLabels},filteredParams:{...n,colors:t.itemLabels&&e.filterItems?n.colors.filter((s,o)=>!t.itemLabels[o]||a[t.itemLabels[o]]):n.colors}}};class M7{constructor(e,n){this.width=Ae,this.height=Le,this.dataset={data:[],xLabels:[]},this.params=We,this.filterConfig={},this.graphicSelection=void 0,this.axisWidth=0,this.axisHeight=0,this.clickCallback=function(){},this.mouseoverCallback=function(){},this.mousemoveCallback=function(){},this.mouseoutCallback=function(){},this.XDataMap=new Map,this.ItemDataMap=new Map,this.renderData=[],this.filteredDataset={data:[],xLabels:[]},this.filteredParams=We,this.axisParams=this.params.axisColumn,this.xAxisSelection=void 0,this.yAxisSelection=void 0,this.xLabelSelection=void 0,this.yLabelSelection=void 0,this.auxLineSelection=void 0,this.minValue=0,this.maxValue=0,this.makeActivedCallbackData=(i,a)=>_7({dataset:this.dataset,activedItemId:i,XDataMap:this.XDataMap,ItemDataMap:this.ItemDataMap,padding:this.params.padding,xRangeScale:this.xRangeScale,event:a}),this.selection=e,this.axisSelection=e.append("g"),this.axisColumn=new b7(this.axisSelection,{}),this.rangeSelection=this.selection.append("rect").attr("opacity",0),this.setRangeEvent(this.rangeSelection),this.graphicSelection=e.append("g"),this.coverSelection=this.selection.append("g").classed("bpchart__cover",!0),this.utilAuxLine=new eh(this.coverSelection),this.setCoverEvent(this.selection)}setParams(e){this.params={...this.params,...e,axisColumn:{...this.params.axisColumn,...e.axisColumn}},this.params.tooltipAside&&!this.tooltip&&(this.tooltip=new th(this.selection,{templateHtml:this.params.tooltipAside.templateHtml,type:this.params.tooltipAside.type??"white",yLine:this.params.tooltipAside.yLine??!1})),this.axisParams=kf(this.params.axisColumn,this.params.padding),this.axisWidth=Zt(this.width,this.params.padding),this.axisHeight=Kt(this.height,this.params.padding),this.axisColumn.setParams(this.axisParams),this.graphicSelection.attr("transform",`translate(${this.params.padding.left}, ${this.params.padding.top})`),this.coverSelection.attr("transform",`translate(${this.params.padding.left}, ${this.params.padding.top})`)}select(){return this.selection}remove(){this.selection.remove()}resize({width:e=this.width,height:n=this.height}){this.width=e,this.height=n,this.axisParams=kf(this.params.axisColumn,this.params.padding),this.axisWidth=Zt(this.width,this.params.padding),this.axisHeight=Kt(this.height,this.params.padding),this.axisColumn.setParams(this.axisParams),this.axisColumn.resize({width:e,height:n}),this.rangeSelection.attr("x",this.params.padding.left).attr("y",this.params.padding.top).attr("width",this.axisWidth).attr("height",this.axisHeight)}setDataset(e){this.dataset=e}filter(e){this.filterConfig={...this.filterConfig,...e}}render(){this.xRangeScale=jc({axisLabels:this.dataset.xLabels,axisWidth:this.axisWidth});const{filteredDataset:e,filteredParams:n}=w7({dataset:this.dataset,filterConfig:this.filterConfig,params:this.params});this.filteredDataset=e,this.filteredParams=n;const[i,a]=this.getMinAndMaxValue(this.filteredDataset.data);this.minValue=i,this.maxValue=a,this.xScale=Jc({axisLabels:this.filteredDataset.xLabels,axisWidth:this.axisWidth}),this.yScale=ls({maxValue:this.maxValue,minValue:this.minValue,axisWidth:this.axisHeight,domainMinValue:this.params.domainMinValue,domainMaxValue:this.params.domainMaxValue,domainMinRange:this.params.domainMinRange,domainMaxRange:this.params.domainMaxRange,reverse:!0}),this.renderData=this.makeGraphicRenderData({dataset:this.filteredDataset,xScale:this.xScale,yScale:this.yScale}),this.XDataMap=this.makeXDataMap({renderData:this.renderData,xLabels:this.filteredDataset.xLabels}),this.ItemDataMap=this.makeItemDataMap({renderData:this.renderData,itemLabels:this.filteredDataset.itemLabels??[]}),this.initGraphic(this.filteredParams),this.setGraphicData({renderData:this.renderData,itemLabels:this.filteredDataset.itemLabels??[],xLabels:this.filteredDataset.xLabels,xScale:this.xScale,yScale:this.yScale}),this.axisColumn.setDataset({xScale:this.xScale,yScale:this.yScale,maxValue:this.maxValue}),this.axisColumn.render(),this.renderGraphic()}on(e,n){return e==="click"?this.clickCallback=n:e==="mouseover"?this.mouseoverCallback=n:e==="mousemove"?this.mousemoveCallback=n:e==="mouseout"&&(this.mouseoutCallback=n),this}setRangeEvent(e){e.on("click",(n,i)=>{const a=this.makeActivedCallbackData("",w);this.clickCallback(a)}).on("mouseover",(n,i)=>{const a=this.makeActivedCallbackData("",w);this.mouseoverCallback(a)}).on("mousemove",n=>{const i=this.makeActivedCallbackData("",w);this.mousemoveCallback(i)}).on("mouseout",n=>{if(w.offsetX>0&&w.offsetX<this.width&&w.offsetY>0&&w.offsetY<this.height)return;const i=this.makeActivedCallbackData("",w);this.mouseoutCallback(i)})}showTooltip(e,n){n&&e&&this.xScale?this.tooltip.setDatum({data:e,x:e.clientX-e.offsetX+this.params.padding.left+this.xScale(e.xLabel),y:w.clientY}):this.tooltip.remove()}setCoverEvent(e){e.on("mouseover",(n,i)=>{const a=this.makeActivedCallbackData("",w);this.coverHighlight(a),this.showTooltip(a,w)}).on("mousemove",n=>{const i=this.makeActivedCallbackData("",w);this.coverHighlight(i),this.showTooltip(i,w)}).on("mouseout",n=>{w.offsetX>0&&w.offsetX<this.width&&w.offsetY>0&&w.offsetY<this.height||(this.coverHighlight(void 0),this.tooltip.remove())})}coverHighlight(e){this.params.showAuxLine&&this.renderAuxLine({coverSelection:this.coverSelection,xLabels:this.dataset.xLabels,activeRangeIndex:e?e.rangeIndex:-1,xScale:this.xScale,padding:this.params.padding,axisHeight:this.axisHeight}),this.renderGraphicCoverHighlight({eventData:e,xScale:this.xScale,yScale:this.yScale,padding:this.params.padding})}renderAuxLine({coverSelection:e,xLabels:n,activeRangeIndex:i,xScale:a,padding:r,axisHeight:s}){if(!a)return;const o=n.map((l,c)=>{const h=a(l)||0;return{x1:h,x2:h,y1:0,y2:s,active:i==c}});this.utilAuxLine.setData(o),this.utilAuxLine.render()}}const ja="__DEFAULT__";class k7 extends M7{constructor(e,n){super(e,n),this.params=x7,this.line=new Qg(this.graphicSelection,{}),this.dot=new Jg(this.coverSelection,{})}initGraphic(e){this.params.graphicColumnLine={...this.params.graphicColumnLine,colors:e.colors,highlightItemId:e.highlightItemId,highlightTarget:e.highlightTarget==="item"?"item":"none"},this.params.graphicDot={...this.params.graphicDot,colors:e.colors,highlightItemId:e.highlightItemId,highlightTarget:e.highlightTarget==="item"?"item":"none"},this.line.setParams(this.params.graphicColumnLine),this.line.on("click",n=>{const i=this.makeActivedCallbackData(n.itemLabel??"",w);this.clickCallback(i)}).on("mouseover",n=>{const i=this.makeActivedCallbackData(n.itemLabel??"",w);this.showTooltip(i,w),this.mouseoverCallback(i),this.params.highlightTarget==="item"&&(this.dot.setParams({highlightItemId:n.itemLabel}),this.dot.render())}).on("mousemove",n=>{const i=this.makeActivedCallbackData(n.itemLabel??"",w);this.showTooltip(i,w),this.mousemoveCallback(i)}).on("mouseout",n=>{const i=this.makeActivedCallbackData("",w);this.showTooltip(void 0,w),this.mouseoutCallback(i),this.params.highlightTarget==="item"&&(this.dot.setParams({highlightItemId:this.params.highlightItemId}),this.dot.render())}),this.dot.setParams(this.params.graphicDot),this.dot.on("click",n=>{const i=this.makeActivedCallbackData(n.itemLabel??"",w);this.clickCallback(i)}).on("mouseover",n=>{const i=this.makeActivedCallbackData(n.itemLabel??"",w);this.showTooltip(i,w),this.mouseoverCallback(i),this.params.highlightTarget==="item"&&(this.line.setParams({highlightItemId:n.itemLabel}),this.line.render())}).on("mousemove",n=>{const i=this.makeActivedCallbackData(n.itemLabel??"",w);this.showTooltip(i,w),this.mousemoveCallback(i)}).on("mouseout",n=>{const i=this.makeActivedCallbackData("",w);this.showTooltip(void 0,w),this.mouseoutCallback(i),this.params.highlightTarget==="item"&&(this.line.setParams({highlightItemId:this.params.highlightItemId}),this.line.render())})}makeGraphicRenderData({dataset:e,xScale:n,yScale:i}){return e.data.map((a,r)=>{const s=e.itemLabels&&e.itemLabels[r]?e.itemLabels[r]:ja;return a.map((o,l)=>{const c=e.xLabels[l];return{...o,id:`${s}_${c}`,itemIndex:r,itemLabel:s,xIndex:l,xLabel:c,x:n(c)||0,y:o.value?i(o.value):i(0)}})})}getMinAndMaxValue(e){return e.length?e.flat().reduce((n,i)=>[i.value&&i.value<n[0]?i.value:n[0],i.value&&i.value>n[1]?i.value:n[1]],[1/0,0]):[0,0]}makeXDataMap({renderData:e,xLabels:n}){let i=new Map;return e.length&&e.forEach((a,r)=>{a.forEach((s,o)=>{const l=i.get(n[o])??[];l.push(s),i.set(n[o]??"",l)})}),i}makeItemDataMap({renderData:e,itemLabels:n}){let i=new Map;return e.length&&e.forEach((a,r)=>{i.set(n[r]??"",a)}),i}setGraphicData({renderData:e,itemLabels:n,xLabels:i,xScale:a,yScale:r}){if(this.line.setDataset({data:e,itemLabels:n??[ja],axisWidth:this.axisWidth,axisHeight:this.axisHeight,zeroY:r(0)}),this.params.showDot==="always"){const s=e.flat();this.dot.setDataset({data:s,itemLabels:this.filteredDataset.itemLabels??[ja]})}}renderGraphic(){this.line.render(),this.params.showDot==="always"&&this.dot.render()}renderGraphicCoverHighlight({eventData:e,xScale:n,yScale:i,padding:a}){if(this.params.showDot==="hover"&&this.params.highlightTarget!=="none"){const r=e?e.groupData.filter(s=>s.value!=null).map(s=>({...s,id:s.itemLabel,x:n(s.xLabel),y:i(s.value)})):[];this.dot.setDataset({data:r,itemLabels:this.filteredDataset.itemLabels??[ja]}),this.dot.render()}}}const D7={__name:"ChartColumn",setup(t){const e={data:[[{value:76.3098},{value:76.5973},{value:75.7679},{value:77.4424}]],xLabels:["台北市","新竹市","台南市","高雄市"],itemLabels:["投票率"]};return(n,i)=>($e(),Ye("div",null,[dt(xa,{module:ca(k7),dataset:e},null,8,["module"])]))}},S7={__name:"ChartRowBarLayout",setup(t){const e={data:[[{value:70769},{value:14103},{value:41075},{value:55309}],[{value:685830},{value:102725},{value:339702},{value:610896}],[{value:875854},{value:144274},{value:786471},{value:1097621}],[{value:1632453},{value:261102},{value:1167248},{value:1763826}],[{value:21381},{value:3423},{value:12341},{value:17006}],[{value:1653834},{value:264525},{value:1179589},{value:1780832}]],yLabels:["台北市","新竹市","台南市","高雄市"],itemLabels:["宋楚瑜、余湘","韓國瑜、張善政","蔡英文、賴清德","有效票數","無效票數","投票數"]},n={colors:["#FF6310","#000095","#1B9431","#8F4586","#5A5AAD","#709EE2"],padding:{top:50,right:70,bottom:50,left:100},axisRow:{yLabel:"",xLabel:""},graphicRowBarLayout:{groupLayout:[{stackAmount:3,barWidth:24},{stackAmount:2,barwidth:6,barR:10},{stackAmount:1,barwidth:12,barR:10}],barPadding:5,barGroupPadding:30,labelTextMethod:(i,a)=>String(i.value),labelPositionMethod:(i,a)=>a[0]===5?"right":"center",labelStyleMethod:(i,a)=>a[0]===5?"font-weight:800;font-size:18px;fill:#709EE2":"",labelFontSizeMethod:(i,a)=>10,labelColorMethod:(i,a)=>"#ffffff",labelPadding:5}};return(i,a)=>($e(),Ye("div",null,[dt(xa,{module:ca(g7),dataset:e,params:n},null,8,["module"])]))}};const A7={style:{width:"100vw"}},L7={class:"container"},C7={class:"container"},T7={class:"container"},I7={__name:"Index",setup(t){return(e,n)=>{const i=um("el-button");return $e(),Ye("div",A7,[ce("div",null,[dt(i,null,{default:wa(()=>[vi("候選人各單區得票顯示區塊")]),_:1}),dt(S7)]),ce("div",L7,[dt(i,null,{default:wa(()=>[vi("投票統計類別摘要區塊")]),_:1}),dt(Mf,{class:"child"}),dt(Mf,{class:"child"}),dt(D7,{class:"child"})]),ce("div",C7,[dt(i,null,{default:wa(()=>[vi("候選人區域比較區塊")]),_:1}),dt(Yo,{class:"child"}),dt(Yo,{class:"child"}),dt(Yo,{class:"child"})]),ce("div",T7,[dt(i,null,{default:wa(()=>[vi("候選人各單區得票顯示區塊")]),_:1}),dt(Eo,{class:"child"}),dt(Eo,{class:"child"}),dt(Eo,{class:"child"})])])}}},N7=Bg(I7,[["__scopeId","data-v-08bcf048"]]);export{N7 as default};
